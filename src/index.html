<!doctype html>
<html lang="en">

<head>
  <meta http-equiv="Content-Security-Policy"
    content="base-uri 'self'; object-src 'none'; script-src 'self' 'unsafe-eval' 'wasm-eval' 'wasm-unsafe-eval' https://*.sdkassets.achime.aws https://*.sdkassets.bchime.aws https://*.sdkassets.gchime.aws https://*.sdkassets.chime.aws https://cdn.jsdelivr.net 'sha256-6K9b0w2RjSl5kBKJmJARxPtogg7thi7Hp6TDi/ES+8E='; style-src 'unsafe-inline' 'self' 'unsafe-eval'; connect-src 'self' https://*.chime.aws wss://*.chime.aws https://*.amazonaws.com https://*.sdkassets.achime.aws wss://*.achime.aws https://*.sdkassets.bchime.aws wss://*.bchime.aws https://*.sdkassets.gchime.aws wss://*.gchime.aws https://*.sdkassets.chime.aws wss://*.chime.aws https://storage.googleapis.com https://*.ingest.gchime.aws; script-src-elem 'self' 'unsafe-inline' https://*.sdkassets.achime.aws https://*.sdkassets.bchime.aws https://*.sdkassets.gchime.aws https://*.sdkassets.chime.aws https://cdn.jsdelivr.net; worker-src 'self' blob:; child-src 'self' blob:">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
  <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
  <title>Meeting Demo</title>
  <script>/*! For license information please see meetingV2-bundle.js.LICENSE.txt */
    var app_meetingV2; (() => { var __webpack_modules__ = { 601: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2378); t.default = class { constructor(e, t, i, r = 1e3, o = 200) { this.realtimeController = e, this.selfAttendeeId = t, this.hasBandwidthPriorityCallback = i, this.waitIntervalMs = r, this.updateIntervalMs = o, this.speakerScores = {}, this.speakerMuteState = {}, this.detectorCallbackToHandler = new Map, this.detectorCallbackToScoresTimer = new Map, this.detectorCallbackToActivityTimer = new Map, this.hasBandwidthPriority = !1, this.mostRecentUpdateTimestamp = {} } needUpdate(e) { return !this.activeSpeakers || 0 === this.speakerScores[e] && this.activeSpeakers.includes(e) || this.speakerScores[e] > 0 && !this.activeSpeakers.includes(e) } updateActiveSpeakers(e, t, i) { if (!this.needUpdate(i)) return; const r = [], o = Object.keys(this.speakerScores); for (let e = 0; e < o.length; e++) { const t = o[e]; r.push({ attendeeId: t, activeScore: this.speakerScores[t] }) } const n = r.sort(((e, t) => t.activeScore - e.activeScore)).filter((function (e) { return e.activeScore > 0 })).map((function (e) { return e.attendeeId })); this.activeSpeakers = n, t(n); const s = n.length > 0 && n[0] === this.selfAttendeeId && e.prioritizeVideoSendBandwidthForActiveSpeaker(); this.hasBandwidthPriority !== s && (this.hasBandwidthPriority = s, this.hasBandwidthPriorityCallback(s)) } updateScore(e, t, i, r, o) { const n = e.calculateScore(i, r, o); this.speakerScores[i] !== n && (this.speakerScores[i] = n, this.mostRecentUpdateTimestamp[i] = Date.now(), this.updateActiveSpeakers(e, t, i)) } subscribe(e, t, i, r) { const n = (i, r) => { if (!r) return this.speakerScores[i] = 0, this.mostRecentUpdateTimestamp[i] = Date.now(), void this.updateActiveSpeakers(e, t, i); this.realtimeController.realtimeSubscribeToVolumeIndicator(i, ((i, r, o, n) => { this.mostRecentUpdateTimestamp[i] = Date.now(), null !== o && (this.speakerMuteState[i] = o), this.updateScore(e, t, i, r, o) })) }; this.detectorCallbackToHandler.set(t, n); const s = new o.default(this.updateIntervalMs); if (s.start((() => { for (const i in this.speakerScores) Date.now() - this.mostRecentUpdateTimestamp[i] > this.waitIntervalMs && this.updateScore(e, t, i, 0, this.speakerMuteState[i]) })), this.detectorCallbackToActivityTimer.set(t, s), i && r) { const e = new o.default(r); e.start((() => { i(this.speakerScores) })), this.detectorCallbackToScoresTimer.set(t, e) } this.realtimeController.realtimeSubscribeToAttendeeIdPresence(n) } unsubscribe(e) { const t = this.detectorCallbackToHandler.get(e); this.detectorCallbackToHandler.delete(e), t && this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(t); const i = this.detectorCallbackToActivityTimer.get(e); i && (i.stop(), this.detectorCallbackToActivityTimer.delete(e)); const r = this.detectorCallbackToScoresTimer.get(e); r && (r.stop(), this.detectorCallbackToHandler.delete(e)) } destroy() { return r(this, void 0, void 0, (function* () { for (const e of this.detectorCallbackToHandler.values()) this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(e); for (const e of this.detectorCallbackToActivityTimer.values()) e.stop(); for (const e of this.detectorCallbackToScoresTimer.values()) e.stop(); this.detectorCallbackToHandler.clear(), this.detectorCallbackToActivityTimer.clear(), this.detectorCallbackToScoresTimer.clear() })) } } }, 3360: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e = .9, t = .01, i = .2, r = .2) { this.speakerWeight = e, this.cutoffThreshold = t, this.silenceThreshold = i, this.takeoverRate = r, this.volumes = {} } calculateScore(e, t, i) { (i || null === t) && (t = 0), this.volumes.hasOwnProperty(e) || (this.volumes[e] = 0), t = t > this.silenceThreshold ? 1 : 0; const r = this.volumes[e] * this.speakerWeight + t * (1 - this.speakerWeight); this.volumes[e] = r; for (const i in this.volumes) i !== e && (this.volumes[i] = Math.max(this.volumes[i] - this.takeoverRate * t, 0)); return r < this.cutoffThreshold ? 0 : r } prioritizeVideoSendBandwidthForActiveSpeaker() { return !0 } } }, 8906: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor(e, t) { this.appName = e, this.appVersion = t } static create(e, t) { const r = /^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g; if (!e || e.length > 32) throw new Error("appName should be a valid string and 1 to 32 characters in length"); if (!r.test(e)) throw new Error(`appName must satisfy ${r} regular expression`); if (!t || t.length > 32) throw new Error("appVersion should be a valid string and 1 to 32 characters in length"); if (!/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm.test(t)) throw new Error("appVersion must satisfy Semantic Versioning format"); return new i(e, t) } } t.default = i }, 6943: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 443: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9297), n = i(996); t.default = class { constructor(e) { this.logger = e, this.audioDevice = null, this.audioElement = null, this.audioStream = null, this.browserBehavior = new o.default, this.observers = new Set } bindAudioElement(e) { return r(this, void 0, void 0, (function* () { if (!e) throw new Error(`Cannot bind audio element: ${e}`); return this.audioElement = e, this.audioElement.autoplay = !0, this.bindAudioMix() })) } unbindAudioElement() { this.audioElement && (this.audioElement.srcObject = null, this.audioElement = null, this.forEachObserver((e => { this.audioStream && e.meetingAudioStreamBecameInactive(this.audioStream) }))) } bindAudioStream(e) { return r(this, void 0, void 0, (function* () { if (e) { this.audioStream = e; try { yield this.bindAudioMix() } catch (e) { this.logger && this.logger.warn(`Failed to bind audio stream: ${e}`) } } })) } bindAudioDevice(e) { return r(this, void 0, void 0, (function* () { if (e && !this.browserBehavior.supportsSetSinkId()) throw new Error("Cannot select audio output device. This browser does not support setSinkId."); return this.audioDevice = e, this.bindAudioMix() })) } forEachObserver(e) { for (const t of this.observers) n.default.nextTick((() => { e(t) })) } bindAudioMix() { var e, t; return r(this, void 0, void 0, (function* () { if (!this.audioElement) return; const i = this.audioElement.srcObject; this.audioStream && (this.audioElement.srcObject = this.audioStream), i !== this.audioStream && this.forEachObserver((e => { i && e.meetingAudioStreamBecameInactive(i), this.audioStream && e.meetingAudioStreamBecameActive(this.audioStream) })); const r = (null === (e = this.audioDevice) || void 0 === e ? void 0 : e.deviceId) !== this.audioElement.sinkId; if (r && void 0 === this.audioElement.sinkId) throw new Error("Cannot select audio output device. This browser does not support setSinkId."); const o = this.audioDevice ? this.audioDevice.deviceId : ""; if (o === this.audioElement.sinkId) return; const n = this.audioElement, s = this.audioStream; if (this.browserBehavior.hasChromiumWebRTC() && (n.srcObject = null), r) try { yield n.setSinkId(o) } catch (e) { throw null === (t = this.logger) || void 0 === t || t.error(`Failed to set sinkId for audio element: ${e}`), e } this.browserBehavior.hasChromiumWebRTC() && (n.srcObject = s) })) } getCurrentMeetingAudioStream() { return r(this, void 0, void 0, (function* () { return this.audioStream })) } addAudioMixObserver(e) { return r(this, void 0, void 0, (function* () { this.observers.add(e) })) } removeAudioMixObserver(e) { return r(this, void 0, void 0, (function* () { this.observers.delete(e) })) } audioOutputDidChange(e) { return r(this, void 0, void 0, (function* () { return this.logger.info("Receive an audio output change event"), this.bindAudioDevice(e) })) } } }, 1545: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor(e = null) { this.audioBitrateBps = e } static fullbandSpeechMono() { return new i(4e4) } static fullbandMusicMono() { return new i(64e3) } static fullbandMusicStereo() { return new i(128e3) } isStereo() { return 128e3 === this.audioBitrateBps } } t.default = i }, 2757: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.logger = null, this.browserBehavior = null, this.signalingClient = null, this.meetingSessionConfiguration = null, this.peer = null, this.previousSdpOffer = null, this.sdpOfferInit = null, this.audioVideoController = null, this.realtimeController = null, this.videoTileController = null, this.mediaStreamBroker = null, this.audioMixController = null, this.activeAudioInput = void 0, this.activeVideoInput = void 0, this.transceiverController = null, this.indexFrame = null, this.iceCandidates = [], this.iceCandidateHandler = null, this.iceGatheringStateEventHandler = null, this.sdpAnswer = null, this.turnCredentials = null, this.reconnectController = null, this.removableObservers = [], this.audioProfile = null, this.videoStreamIndex = null, this.videoDownlinkBandwidthPolicy = null, this.videoUplinkBandwidthPolicy = null, this.lastKnownVideoAvailability = null, this.videoCaptureAndEncodeParameter = null, this.videosToReceive = null, this.lastVideosToReceive = null, this.videoSubscriptions = null, this.videoSubscriptionLimit = 25, this.previousSdpAnswerAsString = "", this.serverSupportsCompression = !1, this.videoSendCodecPreferences = [], this.meetingSupportedVideoSendCodecPreferences = void 0, this.videosPaused = null, this.videoDuplexMode = null, this.volumeIndicatorAdapter = null, this.statsCollector = null, this.connectionMonitor = null, this.videoInputAttachedTimestampMs = 0, this.audioDeviceInformation = {}, this.videoDeviceInformation = {}, this.enableSimulcast = !1, this.eventController = null, this.signalingOpenDurationMs = null, this.iceGatheringDurationMs = null, this.startAudioVideoTimestamp = null, this.attendeePresenceDurationMs = null, this.meetingStartDurationMs = null, this.poorConnectionCount = 0, this.maxVideoTileCount = 0, this.startTimeMs = null } } }, 483: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(601), n = i(443), s = i(1545), a = i(9297), d = i(2217), l = i(1), c = i(5956), u = i(1736), h = i(7840), p = i(6878), m = i(744), f = i(7461), g = i(996), b = i(4549), v = i(9694), y = i(9042), w = i(5462), S = i(3837), x = i(4123), k = i(2402), _ = i(8330), C = i(3081), I = i(1722), T = i(6310), E = i(8861), A = i(805), M = i(9098), O = i(7998), P = i(3333), D = i(3717), R = i(2325), L = i(6537), B = i(406), V = i(9154), F = i(8717), N = i(6700), j = i(701), U = i(6464), z = i(7946), $ = i(1967), H = i(9231), W = i(686), q = i(9203), K = i(3913), G = i(251), J = i(5859), Z = i(1580), Q = i(2559), X = i(2205), Y = i(1706), ee = i(2019), te = i(6085), ie = i(2816), re = i(8791), oe = i(4688), ne = i(1688), se = i(507), ae = i(5695), de = i(4505), le = i(6932), ce = i(6640), ue = i(2187), he = i(2757); class pe { constructor(e, t, i, r, o, a) { this._audioProfile = new s.default, this.connectionHealthData = new d.default, this.observerQueue = new Set, this.meetingSessionContext = new he.default, this.enableSimulcast = !1, this.useUpdateTransceiverControllerForUplink = !1, this.totalRetryCount = 0, this.startAudioVideoTimestamp = 0, this.mayNeedRenegotiationForSimulcastLayerChange = !1, this.promotedToPrimaryMeeting = !1, this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent = !1, this.receiveIndexTask = void 0, this.monitorTask = void 0, this.destroyed = !1, this.usePromises = !0, this._logger = t, this.sessionStateController = new b.default(this._logger), this._configuration = e, this._webSocketAdapter = i, this._realtimeController = new f.default(r), this._realtimeController.realtimeSetLocalAttendeeId(e.credentials.attendeeId, e.credentials.externalUserId), this._mediaStreamBroker = r, this._reconnectController = o, this._videoTileController = new ae.default(new de.default, this, this._logger), this._audioMixController = new n.default(this._logger), this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController), this.meetingSessionContext.logger = this._logger, this._eventController = a } destroy() { return r(this, void 0, void 0, (function* () { this.observerQueue.clear(), this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController), this.destroyed = !0 })) } get configuration() { return this._configuration } get realtimeController() { return this._realtimeController } get activeSpeakerDetector() { return this._activeSpeakerDetector || (this._activeSpeakerDetector = new o.default(this._realtimeController, this._configuration.credentials.attendeeId, this.handleHasBandwidthPriority.bind(this))), this._activeSpeakerDetector } get videoTileController() { return this._videoTileController } get audioMixController() { return this._audioMixController } get logger() { return this._logger } get rtcPeerConnection() { return this.meetingSessionContext && this.meetingSessionContext.peer || null } get mediaStreamBroker() { return this._mediaStreamBroker } get eventController() { return this._eventController } getRTCPeerConnectionStats(e) { return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent || (this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."), this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent = !0), this.rtcPeerConnection ? this.rtcPeerConnection.getStats(e) : null } setAudioProfile(e) { this._audioProfile = e } addObserver(e) { this.logger.info("adding meeting observer"), this.observerQueue.add(e) } removeObserver(e) { this.logger.info("removing meeting observer"), this.observerQueue.delete(e) } forEachObserver(e) { for (const t of this.observerQueue) g.default.nextTick((() => { this.observerQueue.has(t) && e(t) })) } initSignalingClient() { this.meetingSessionContext.signalingClient || (this.connectionHealthData.reset(), this.meetingSessionContext = new he.default, this.meetingSessionContext.logger = this.logger, this.meetingSessionContext.eventController = this.eventController, this.meetingSessionContext.browserBehavior = new a.default, this.meetingSessionContext.videoSendCodecPreferences = this.videoSendCodecPreferences, this.meetingSessionContext.meetingSessionConfiguration = this.configuration, this.meetingSessionContext.signalingClient = new S.default(this._webSocketAdapter, this.logger)) } uninstallPreStartObserver() { var e; null === (e = this.meetingSessionContext.signalingClient) || void 0 === e || e.removeObserver(this.preStartObserver), this.preStartObserver = void 0 } prestart() { return this.logger.info("Pre-connecting signaling connection."), this.createOrReuseSignalingTask().run().then((() => { const e = () => r(this, void 0, void 0, (function* () { this.logger.info("Early connection closed; discarding signaling task."), this.signalingTask = void 0, this.uninstallPreStartObserver() })); this.preStartObserver = { handleSignalingClientEvent(t) { t.type === x.default.WebSocketClosed && e() } }, this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver) })).catch((e => { this.logger.error(`Signaling task pre-start failed: ${e}`), this.signalingTask = void 0 })) } start(e) { this.startReturningPromise(e).then((() => { this.logger.info("start completed") })).catch((e => { this.logger.error(`start failed: ${e}`) })) } startReturningPromise(e) { return !0 === (null == e ? void 0 : e.signalingOnly) ? this.prestart() : (this.activeSpeakerDetector, new Promise(((e, t) => { this.sessionStateController.perform(v.default.Connect, (() => { this.actionConnect(!1).then(e).catch(t) })) }))) } connectWithPromises(e) { const t = this.meetingSessionContext; this.monitorTask = new L.default(t, this.configuration.connectionHealthPolicyConfiguration, this.connectionHealthData); const i = this.monitorTask.once(), r = new N.default(t).once(); this.receiveIndexTask = new z.default(t), this.monitorTask.pauseResubscribeCheck(), this.receiveIndexTask.pauseIngestion(); const o = new H.default(this.logger, "Signaling", [this.createOrReuseSignalingTask(), new R.default(t), new $.default(t), new P.default(t), new j.default(t), this.receiveIndexTask]).once(), n = new A.default(t).once(o), s = new I.default(t).once(n, r), a = new M.default(t).once(s), d = new W.default(t).once(a), l = new O.default(t).once(d), c = new K.default(t).once(l); return new H.default(this.logger, this.wrapTaskName("AudioVideoStart"), [i, ((e, t) => new G.default(this.logger, t, e))(this.configuration.connectionTimeoutMs, new H.default(this.logger, "Peer", [c, e ? new G.default(this.logger, new V.default(this.logger, "FinalizeConnection", [new J.default(t), new q.default(t)]), this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs) : new q.default(t)]))]) } connectWithTasks(e) { return this.receiveIndexTask = new z.default(this.meetingSessionContext), this.monitorTask = new L.default(this.meetingSessionContext, this.configuration.connectionHealthPolicyConfiguration, this.connectionHealthData), this.receiveIndexTask.pauseIngestion(), this.monitorTask.pauseResubscribeCheck(), new H.default(this.logger, this.wrapTaskName("AudioVideoStart"), [this.monitorTask, new N.default(this.meetingSessionContext), new G.default(this.logger, new H.default(this.logger, "Media", [new H.default(this.logger, "Signaling", [new B.default(this.meetingSessionContext), new R.default(this.meetingSessionContext), new $.default(this.meetingSessionContext), new P.default(this.meetingSessionContext), new j.default(this.meetingSessionContext), this.receiveIndexTask]), new H.default(this.logger, "Peer", [new A.default(this.meetingSessionContext), new I.default(this.meetingSessionContext), new M.default(this.meetingSessionContext), new W.default(this.meetingSessionContext), new O.default(this.meetingSessionContext), new K.default(this.meetingSessionContext), e ? new G.default(this.logger, new V.default(this.logger, "FinalizeConnection", [new J.default(this.meetingSessionContext), new q.default(this.meetingSessionContext)]), this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs) : new q.default(this.meetingSessionContext)])]), this.configuration.connectionTimeoutMs)]) } actionConnect(e) { var t; return r(this, void 0, void 0, (function* () { this.initSignalingClient(), this.uninstallPreStartObserver(), this.meetingSessionContext.mediaStreamBroker = this._mediaStreamBroker, this.meetingSessionContext.realtimeController = this._realtimeController, this.meetingSessionContext.audioMixController = this._audioMixController, this.meetingSessionContext.audioVideoController = this, this.enableSimulcast = this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers && (new a.default).hasChromiumWebRTC(); const i = !!this.configuration.urls.audioHostURL; if (i ? this.enableSimulcast ? (this.logger.info("Using transceiver controller with simulcast support"), new p.default(this.configuration.credentials.attendeeId).hasModality(p.default.MODALITY_CONTENT) ? this.meetingSessionContext.transceiverController = new Q.default(this.logger, this.meetingSessionContext.browserBehavior) : this.meetingSessionContext.transceiverController = new X.default(this.logger, this.meetingSessionContext.browserBehavior)) : (this.logger.info("Using default transceiver controller"), this.meetingSessionContext.transceiverController = new Z.default(this.logger, this.meetingSessionContext.browserBehavior)) : (this.logger.info("Using video only transceiver controller"), this.meetingSessionContext.transceiverController = new Y.default(this.logger, this.meetingSessionContext.browserBehavior)), this.meetingSessionContext.volumeIndicatorAdapter = new ue.default(this.logger, this._realtimeController, pe.MIN_VOLUME_DECIBELS, pe.MAX_VOLUME_DECIBELS, this.configuration.credentials.attendeeId), this.meetingSessionContext.videoTileController = this._videoTileController, this.meetingSessionContext.videoDownlinkBandwidthPolicy = this.configuration.videoDownlinkBandwidthPolicy, this.meetingSessionContext.videoUplinkBandwidthPolicy = this.configuration.videoUplinkBandwidthPolicy, this.meetingSessionContext.enableSimulcast = this.enableSimulcast, this.enableSimulcast) { let e = this.meetingSessionContext.videoUplinkBandwidthPolicy; e || (e = new le.default(this.configuration.credentials.attendeeId, this.meetingSessionContext.logger), this.meetingSessionContext.videoUplinkBandwidthPolicy = e), e.addObserver(this), this.meetingSessionContext.videoDownlinkBandwidthPolicy || (this.meetingSessionContext.videoDownlinkBandwidthPolicy = new re.default(this.meetingSessionContext.logger)), this.meetingSessionContext.videoStreamIndex = new se.default(this.logger) } else this.meetingSessionContext.enableSimulcast = !1, this.meetingSessionContext.videoStreamIndex = new ne.default(this.logger), this.meetingSessionContext.videoUplinkBandwidthPolicy || (this.meetingSessionContext.videoUplinkBandwidthPolicy = new ce.default(this.configuration.credentials.attendeeId, !this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(), this.meetingSessionContext.logger, this.meetingSessionContext.browserBehavior)), this.meetingSessionContext.videoDownlinkBandwidthPolicy || (this.meetingSessionContext.videoDownlinkBandwidthPolicy = new ie.default(this.configuration.credentials.attendeeId)), this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController && this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController && (this.useUpdateTransceiverControllerForUplink = !0, this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)), this.meetingSessionContext.audioProfile = this._audioProfile; this.meetingSessionContext.videoUplinkBandwidthPolicy && this.maxUplinkBandwidthKbps && this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps), this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController && this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController), this.meetingSessionContext.lastKnownVideoAvailability = new h.default, this.meetingSessionContext.videoCaptureAndEncodeParameter = new te.default(0, 0, 0, 0, !1), this.meetingSessionContext.videosToReceive = new oe.default, this.meetingSessionContext.videosPaused = new oe.default, this.meetingSessionContext.statsCollector = new C.default(this, this.logger), this.meetingSessionContext.connectionMonitor = new l.default(this, this._realtimeController, this.connectionHealthData, new m.default(this.meetingSessionContext.signalingClient, pe.PING_PONG_INTERVAL_MS, this.logger), this.meetingSessionContext.statsCollector), this.meetingSessionContext.reconnectController = this._reconnectController, this.meetingSessionContext.videoDeviceInformation = {}, e || (this.totalRetryCount = 0, this._reconnectController.reset(), this.startAudioVideoTimestamp = Date.now(), this.forEachObserver((e => { ee.Maybe.of(e.audioVideoDidStartConnecting).map((t => t.bind(e)(!1))) })), null === (t = this.eventController) || void 0 === t || t.publishEvent("meetingStartRequested")), this.meetingSessionContext.startAudioVideoTimestamp = this.startAudioVideoTimestamp, this._reconnectController.hasStartedConnectionAttempt() ? this._reconnectController.startedConnectionAttempt(!1) : this._reconnectController.startedConnectionAttempt(!0); const o = i && this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs > 0; let n; this.logger.info("Needs to wait for attendee presence? " + o), n = this.usePromises ? this.connectWithPromises(o) : this.connectWithTasks(o); try { yield n.run(), this.connectionHealthData.setConnectionStartTime(), this._mediaStreamBroker.addMediaStreamBrokerObserver(this), this.sessionStateController.perform(v.default.FinishConnecting, (() => { this.eventController && (this.meetingSessionContext.meetingStartDurationMs = Date.now() - this.startAudioVideoTimestamp, this.eventController.publishEvent("meetingStartSucceeded", { maxVideoTileCount: this.meetingSessionContext.maxVideoTileCount, poorConnectionCount: this.meetingSessionContext.poorConnectionCount, retryCount: this.totalRetryCount, signalingOpenDurationMs: this.meetingSessionContext.signalingOpenDurationMs, iceGatheringDurationMs: this.meetingSessionContext.iceGatheringDurationMs, meetingStartDurationMs: this.meetingSessionContext.meetingStartDurationMs })), this.meetingSessionContext.startTimeMs = Date.now(), this.actionFinishConnecting() })) } catch (e) { this.signalingTask = void 0; const t = new c.default(this.getMeetingStatusCode(e) || u.default.TaskFailed); if (this.logger.info(`Start failed: ${t} due to error ${e}.`), this.sessionStateController.state() === y.default.NotConnected) return void this.logger.info("Start failed and not connected. Not cleaning up."); this.sessionStateController.perform(v.default.Fail, (() => r(this, void 0, void 0, (function* () { yield this.actionDisconnect(t, !0, e), this.handleMeetingSessionStatus(t, e) || this.notifyStop(t, e) })))) } })) } createOrReuseSignalingTask() { return this.signalingTask || (this.initSignalingClient(), this.signalingTask = new G.default(this.logger, new B.default(this.meetingSessionContext), this.configuration.connectionTimeoutMs).once()), this.signalingTask } actionFinishConnecting() { this.signalingTask = void 0, this.meetingSessionContext.videoDuplexMode = _.SdkStreamServiceType.RX, this.meetingSessionContext.enableSimulcast || (this.useUpdateTransceiverControllerForUplink ? this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController() : this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])), this.forEachObserver((e => { ee.Maybe.of(e.audioVideoDidStart).map((t => t.bind(e)())) })), this._reconnectController.reset(), this.receiveIndexTask.resumeIngestion(), this.monitorTask.resumeResubscribeCheck() } stopReturningPromise() { var e; return this.sessionStateController.state() === y.default.NotConnected ? (null === (e = this.meetingSessionContext.signalingClient) || void 0 === e || e.closeConnection(), this.meetingSessionContext.signalingClient = null, this.cleanUpMediaStreamsAfterStop(), Promise.resolve()) : new Promise(((e, t) => { this.sessionStateController.perform(v.default.Disconnect, (() => { this._reconnectController.disableReconnect(), this.logger.info("attendee left meeting, session will not be reconnected"), this.actionDisconnect(new c.default(u.default.Left), !1, null).then(e).catch(t) })) })) } stop() { this.stopReturningPromise() } actionDisconnect(e, t, i) { return r(this, void 0, void 0, (function* () { try { yield new H.default(this.logger, this.wrapTaskName("AudioVideoStop"), [new G.default(this.logger, new D.default(this.meetingSessionContext), this.configuration.connectionTimeoutMs)]).run() } catch (e) { this.logger.info("fail to stop") } try { const e = [new G.default(this.logger, new E.default(this.meetingSessionContext), this.configuration.connectionTimeoutMs)]; this.cleanUpMediaStreamsAfterStop(), yield new H.default(this.logger, this.wrapTaskName("AudioVideoClean"), e).run() } catch (e) { this.logger.info("fail to clean") } this.sessionStateController.perform(v.default.FinishDisconnecting, (() => { t || (this.meetingSessionContext.signalingClient = null, this.notifyStop(e, i)) })) })) } update(e = { needsRenegotiation: !0 }) { let t = e.needsRenegotiation; if (t || (t = void 0 === this.meetingSessionContext.peer), t || (t = !this.updateRemoteVideosFromLastVideosToReceive()), t || (t = !this.updateLocalVideoFromPolicy()), this.meetingSessionContext.lastVideosToReceive = this.meetingSessionContext.videosToReceive, !t) return this.logger.info("Update request does not require resubscribe"), this.actionFinishUpdating(), !0; this.logger.info("Update request requires resubscribe"); const i = this.sessionStateController.perform(v.default.Update, (() => { this.actionUpdateWithRenegotiation(!0) })); return i === w.default.Transitioned || i === w.default.DeferredTransition } updateRemoteVideosFromLastVideosToReceive() { var e, t; const i = this.meetingSessionContext; if ((null === (e = i.videosToReceive) || void 0 === e ? void 0 : e.empty()) || (null === (t = i.lastVideosToReceive) || void 0 === t ? void 0 : t.empty())) return !1; if (!(i.transceiverController && i.transceiverController.getMidForStreamId && i.transceiverController.setStreamIdForMid && i.videosToReceive.forEach && i.signalingClient.remoteVideoUpdate && i.videoStreamIndex.overrideStreamIdMappings)) return !1; let r = []; const o = new Map; let n = []; if (null === i.lastVideosToReceive) r = i.videosToReceive.array(); else { const e = i.videoStreamIndex; i.videosToReceive.forEach((t => { if (i.lastVideosToReceive.contain(t)) return; let n = !1; i.lastVideosToReceive.forEach((i => { n || e.StreamIdsInSameGroup(i, t) && (o.set(i, t), n = !0) })), n || r.push(t) })), n = i.lastVideosToReceive.array().filter((e => { const t = i.videosToReceive.contain(e), r = o.has(e); return !t && !r })) } this.logger.info(`Request to update remote videos with added: ${r}, updated: ${[...o.entries()]}, removed: ${n}`); const s = []; for (const [e, t] of o.entries()) { const r = new k.default; if (r.streamId = t, r.attendeeId = i.videoStreamIndex.attendeeIdForStreamId(t), r.mid = i.transceiverController.getMidForStreamId(e), void 0 === r.mid) return this.logger.info(`No MID found for stream ID ${e}, cannot update stream without renegotiation`), !1; if (s.push(r), i.transceiverController.setStreamIdForMid(r.mid, t), i.videoStreamIndex.overrideStreamIdMappings(e, t), i.videoTileController.haveVideoTileForAttendeeId(r.attendeeId)) { const e = i.videoTileController.getVideoTileForAttendeeId(r.attendeeId); if (!e.setStreamId) return !1; e.setStreamId(t) } } return 0 !== s.length && i.signalingClient.remoteVideoUpdate(s, []), 0 === r.length && 0 === n.length } updateLocalVideoFromPolicy() { if (this.meetingSessionContext.enableSimulcast) { const e = this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters(); if (this.mayNeedRenegotiationForSimulcastLayerChange && !this.negotiatedBitrateLayersAllocationRtpHeaderExtension()) return this.logger.info("Needs regenotiation for local video simulcast layer change"), this.mayNeedRenegotiationForSimulcastLayerChange = !1, !1; this.meetingSessionContext.transceiverController.setEncodingParameters(e) } else this.meetingSessionContext.videoCaptureAndEncodeParameter = this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(); return this.logger.info("Updated local video from policy without renegotiation"), !0 } negotiatedBitrateLayersAllocationRtpHeaderExtension() { if (!this.meetingSessionContext.transceiverController.localVideoTransceiver()) return !1; const e = this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters(); return !(!e || !e.headerExtensions) && e.headerExtensions.some((e => "http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00" === e.uri)) } restartLocalVideo(e) { const t = () => r(this, void 0, void 0, (function* () { this._videoTileController.hasStartedLocalVideoTile() && (this.logger.info("stopping local video tile prior to local video restart"), this._videoTileController.stopLocalVideoTile(), this.logger.info("preparing local video restart update"), yield this.actionUpdateWithRenegotiation(!1), this.logger.info("starting local video tile for local video restart"), this._videoTileController.startLocalVideoTile()), this.logger.info("finalizing local video restart update"), yield this.actionUpdateWithRenegotiation(!0), e() })), i = this.sessionStateController.perform(v.default.Update, (() => { t() })); return i === w.default.Transitioned || i === w.default.DeferredTransition } replaceLocalVideo(e) { return r(this, void 0, void 0, (function* () { if (!e || e.getVideoTracks().length < 1) throw new Error("could not acquire video track"); if (!this.meetingSessionContext || !this.meetingSessionContext.peer) throw new Error("no active meeting and peer connection"); const t = this.meetingSessionContext.videoTileController.getLocalVideoTile(); if (t) { const i = t.state(), r = e.getVideoTracks()[0].getSettings(); t.bindVideoStream(i.boundAttendeeId, !0, e, r.width, r.height, i.streamId, i.boundExternalUserId) } yield this.meetingSessionContext.transceiverController.setVideoInput(e.getVideoTracks()[0]), this.meetingSessionContext.activeVideoInput = e, this.logger.info("Local video input is updated") })) } replaceLocalAudio(e) { return r(this, void 0, void 0, (function* () { if (!e || e.getAudioTracks().length < 1) throw new Error("could not acquire audio track"); if (!this.meetingSessionContext || !this.meetingSessionContext.peer) throw new Error("no active meeting and peer connection"); if (this.connectionHealthData.reset(), this.connectionHealthData.setConnectionStartTime(), !(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(e.getAudioTracks()[0]))) throw new Error("Failed to replace audio track"); this.meetingSessionContext.activeAudioInput = e, this.logger.info("Local audio input is updated") })) } actionUpdateWithRenegotiation(e) { return r(this, void 0, void 0, (function* () { this.monitorTask.pauseResubscribeCheck(), this.receiveIndexTask.pauseIngestion(); try { yield new H.default(this.logger, this.wrapTaskName("AudioVideoUpdate"), [new U.default(this.meetingSessionContext), new G.default(this.logger, new H.default(this.logger, "UpdateSession", [new I.default(this.meetingSessionContext), new M.default(this.meetingSessionContext), new W.default(this.meetingSessionContext), new O.default(this.meetingSessionContext), new K.default(this.meetingSessionContext), new q.default(this.meetingSessionContext)]), this.configuration.connectionTimeoutMs)]).run(), e && this.sessionStateController.perform(v.default.FinishUpdating, (() => { this.actionFinishUpdating() })) } catch (e) { this.sessionStateController.perform(v.default.FinishUpdating, (() => { const t = new c.default(this.getMeetingStatusCode(e) || u.default.TaskFailed); t.statusCode() !== u.default.IncompatibleSDP && this.logger.info("failed to update audio-video session"), this.handleMeetingSessionStatus(t, e) })) } })) } notifyStop(e, t) { var i; if (this.forEachObserver((t => { ee.Maybe.of(t.audioVideoDidStop).map((i => i.bind(t)(e))) })), this.promotedToPrimaryMeeting && t && this.forEachObserver((e => { this.promotedToPrimaryMeeting = !1, ee.Maybe.of(e.audioVideoWasDemotedFromPrimaryMeeting).map((t => t.bind(e)(new c.default(u.default.SignalingInternalServerError)))) })), this.eventController) { const { signalingOpenDurationMs: r, poorConnectionCount: o, startTimeMs: n, iceGatheringDurationMs: s, attendeePresenceDurationMs: a, meetingStartDurationMs: d } = this.meetingSessionContext, l = { maxVideoTileCount: this.meetingSessionContext.maxVideoTileCount, meetingDurationMs: null === n ? 0 : Math.round(Date.now() - n), meetingStatus: u.default[e.statusCode()], signalingOpenDurationMs: r, iceGatheringDurationMs: s, attendeePresenceDurationMs: a, poorConnectionCount: o, meetingStartDurationMs: d, retryCount: this.totalRetryCount }, c = t && t.message || (null === (i = e.toString) || void 0 === i ? void 0 : i.call(e)) || ""; 0 === l.meetingDurationMs ? (l.meetingErrorMessage = c, delete l.meetingDurationMs, delete l.attendeePresenceDurationMs, delete l.meetingStartDurationMs, this.eventController.publishEvent("meetingStartFailed", l)) : e.isFailure() || e.isAudioConnectionFailure() ? (l.meetingErrorMessage = c, this.eventController.publishEvent("meetingFailed", l)) : this.eventController.publishEvent("meetingEnded", l) } } actionFinishUpdating() { if (!this.meetingSessionContext.enableSimulcast) if (this.useUpdateTransceiverControllerForUplink) this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController(); else { const e = this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0]; this.enforceBandwidthLimitationForSender(e) } this.monitorTask.resumeResubscribeCheck(), this.receiveIndexTask.resumeIngestion(), this.logger.info("updated audio-video session") } reconnect(e, t) { const i = this._reconnectController.retryWithBackoff((() => r(this, void 0, void 0, (function* () { this.sessionStateController.state() === y.default.NotConnected ? this.sessionStateController.perform(v.default.Connect, (() => { this.actionConnect(!0) })) : this.sessionStateController.perform(v.default.Reconnect, (() => { this.actionReconnect(e) })), this.totalRetryCount += 1 }))), (() => { this.logger.info("canceled retry") })); return i || this.sessionStateController.perform(v.default.Fail, (() => { this.actionDisconnect(e, !1, t) })), i } actionReconnect(e) { return r(this, void 0, void 0, (function* () { this._reconnectController.hasStartedConnectionAttempt() || (this._reconnectController.startedConnectionAttempt(!1), this.forEachObserver((e => { ee.Maybe.of(e.audioVideoDidStartConnecting).map((t => t.bind(e)(!0))) }))), this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(), this.connectionHealthData.reset(); try { yield new H.default(this.logger, this.wrapTaskName("AudioVideoReconnect"), [new G.default(this.logger, new H.default(this.logger, "Media", [new T.default(this.meetingSessionContext), new H.default(this.logger, "Signaling", [new B.default(this.meetingSessionContext), new P.default(this.meetingSessionContext), new j.default(this.meetingSessionContext)]), new A.default(this.meetingSessionContext)]), this.configuration.connectionTimeoutMs), new U.default(this.meetingSessionContext), new G.default(this.logger, new H.default(this.logger, "UpdateSession", [new I.default(this.meetingSessionContext), new M.default(this.meetingSessionContext), new W.default(this.meetingSessionContext), new O.default(this.meetingSessionContext), new K.default(this.meetingSessionContext), new q.default(this.meetingSessionContext)]), this.configuration.connectionTimeoutMs)]).run(), this.sessionStateController.perform(v.default.FinishConnecting, (() => { if (this.eventController) { const { signalingOpenDurationMs: t, poorConnectionCount: i, startTimeMs: r, iceGatheringDurationMs: o, attendeePresenceDurationMs: n, meetingStartDurationMs: s } = this.meetingSessionContext, a = { maxVideoTileCount: this.meetingSessionContext.maxVideoTileCount, meetingDurationMs: Math.round(Date.now() - r), meetingStatus: u.default[e.statusCode()], signalingOpenDurationMs: t, iceGatheringDurationMs: o, attendeePresenceDurationMs: n, poorConnectionCount: i, meetingStartDurationMs: s, retryCount: this.totalRetryCount }; this.eventController.publishEvent("meetingReconnected", a) } this.actionFinishConnecting() })) } catch (e) { this.sessionStateController.perform(v.default.FinishConnecting, (() => { this.logger.info("failed to reconnect audio-video session"); const t = new c.default(this.getMeetingStatusCode(e) || u.default.TaskFailed); this.handleMeetingSessionStatus(t, e) })) } this.connectionHealthData.setConnectionStartTime() })) } wrapTaskName(e) { return `${e}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}` } cleanUpMediaStreamsAfterStop() { this._mediaStreamBroker.removeMediaStreamBrokerObserver(this), this.meetingSessionContext.activeAudioInput = void 0, this.meetingSessionContext.activeVideoInput = void 0 } getMeetingStatusCode(e) { const t = /the meeting status code: (\d+)/.exec(e && e.message); return t && t.length > 1 ? Number.parseInt(t[1], 10) : null } enforceBandwidthLimitationForSender(e) { return r(this, void 0, void 0, (function* () { yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(e) })) } handleMeetingSessionStatus(e, t) { if (this.logger.info(`handling status: ${u.default[e.statusCode()]}`), e.isTerminal() || this.meetingSessionContext.statsCollector && this.meetingSessionContext.statsCollector.logMeetingSessionStatus(e), e.statusCode() === u.default.IncompatibleSDP) return this.restartLocalVideo((() => { this.logger.info("handled incompatible SDP by attempting to restart video") })), !0; if (e.statusCode() === u.default.VideoCallSwitchToViewOnly) return this._videoTileController.removeLocalVideoTile(), this.forEachObserver((e => { ee.Maybe.of(e.videoSendDidBecomeUnavailable).map((t => t.bind(e)())) })), !1; if (e.statusCode() === u.default.AudioVideoWasRemovedFromPrimaryMeeting) return this.forEachObserver((t => { ee.Maybe.of(t.audioVideoWasDemotedFromPrimaryMeeting).map((i => i.bind(t)(e))) })), !1; if (e.isTerminal() && (this.logger.error("session will not be reconnected"), this.meetingSessionContext.reconnectController && this.meetingSessionContext.reconnectController.disableReconnect()), (e.isFailure() || e.isTerminal()) && this.meetingSessionContext.reconnectController) { const i = this.reconnect(e, t); return i ? this.logger.warn(`will retry due to status code ${u.default[e.statusCode()]}${t ? ` and error: ${t.message}` : ""}`) : this.logger.error(`failed with status code ${u.default[e.statusCode()]}${t ? ` and error: ${t.message}` : ""}`), i } return !1 } setVideoMaxBandwidthKbps(e) { if (e <= 0) throw new Error("Max bandwidth kbps has to be greater than 0"); this.meetingSessionContext && this.meetingSessionContext.videoUplinkBandwidthPolicy && (this.logger.info(`video send has ideal max bandwidth ${e} kbps`), this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(e)), this.maxUplinkBandwidthKbps = e } handleHasBandwidthPriority(e) { return r(this, void 0, void 0, (function* () { if (this.meetingSessionContext && this.meetingSessionContext.videoUplinkBandwidthPolicy && !this.meetingSessionContext.enableSimulcast) { if (this.useUpdateTransceiverControllerForUplink) return this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(e), void (yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController()); const t = this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps(); this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(e); const i = this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps(); t !== i && (this.logger.info(`video send bandwidth priority ${e} max has changed from ${t} kbps to ${i} kbps`), yield this.enforceBandwidthLimitationForSender(i)) } })) } pauseReceivingStream(e) { this.meetingSessionContext && this.meetingSessionContext.signalingClient && this.meetingSessionContext.signalingClient.pause([e]) } resumeReceivingStream(e) { this.meetingSessionContext && this.meetingSessionContext.signalingClient && this.meetingSessionContext.signalingClient.resume([e]) } setVideoCodecSendPreferences(e) { this.videoSendCodecPreferences = e, this.meetingSessionContext.videoSendCodecPreferences = e, this.update({ needsRenegotiation: !0 }) } getRemoteVideoSources() { const { videoStreamIndex: e } = this.meetingSessionContext; if (!e) return this.logger.info("meeting has not started"), []; const t = this.configuration.credentials.attendeeId; return e.allVideoSendingSourcesExcludingSelf(t) } encodingSimulcastLayersDidChange(e) { this.mayNeedRenegotiationForSimulcastLayerChange = !0, this.forEachObserver((t => { ee.Maybe.of(t.encodingSimulcastLayersDidChange).map((i => i.bind(t)(e))) })) } promoteToPrimaryMeeting(e) { return this.actionPromoteToPrimaryMeeting(e) } actionPromoteToPrimaryMeeting(e) { return r(this, void 0, void 0, (function* () { let t = new c.default(u.default.SignalingRequestFailed); return yield new H.default(this.logger, this.wrapTaskName("PromoteToPrimaryMeeting"), [new G.default(this.logger, new F.default(this.meetingSessionContext, e, (e => { t = e })), this.configuration.connectionTimeoutMs)]).run(), this.promotedToPrimaryMeeting = t.statusCode() === u.default.OK, t })) } demoteFromPrimaryMeeting() { this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(), this.forEachObserver((e => { ee.Maybe.of(e.audioVideoWasDemotedFromPrimaryMeeting).map((t => t.bind(e)(new c.default(u.default.OK)))) })) } videoInputDidChange(e) { return r(this, void 0, void 0, (function* () { this.logger.info("Receive a video input change event"), this.meetingSessionContext && this.meetingSessionContext.peer ? this._videoTileController.hasStartedLocalVideoTile() && (e ? yield this.replaceLocalVideo(e) : this._videoTileController.stopLocalVideoTile()) : this.logger.info("Skip updating video input because there is no active meeting and peer connection") })) } audioInputDidChange(e) { return r(this, void 0, void 0, (function* () { if (this.logger.info("Receive an audio input change event"), this.meetingSessionContext && this.meetingSessionContext.peer) { if (!e) try { e = yield this.mediaStreamBroker.acquireAudioInputStream() } catch (e) { return void this.logger.error("Could not acquire audio track from mediaStreamBroker") } yield this.replaceLocalAudio(e) } else this.logger.info("Skip updating audio input because there is no active meeting and peer connection") })) } } t.default = pe, pe.MIN_VOLUME_DECIBELS = -42, pe.MAX_VOLUME_DECIBELS = -14, pe.PING_PONG_INTERVAL_MS = 1e4 }, 3739: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(6467), o = i(8672), n = i(7677), s = i(3120), a = i(231), d = i(2721), l = i(5956), c = i(1736), u = i(9384), h = i(1316), p = i(5786), m = i(483); class f extends m.default { constructor(e) { const t = new a.default; t.meetingId = "", t.externalMeetingId = "", t.credentials = new d.default, t.credentials.attendeeId = "", t.credentials.joinToken = "", t.urls = new u.default, t.urls.turnControlURL = "", t.urls.audioHostURL = "", t.urls.signalingURL = "wss://localhost/"; const i = new n.default; super(e || t, i, new p.default(new n.default), new s.default, new h.default(0, new r.default(0, 0, 0)), new o.default(e || t, i)) } setAudioProfile(e) { } start() { } stop() { } promoteToPrimaryMeeting(e) { return Promise.resolve(new l.default(c.default.OK)) } demoteFromPrimaryMeeting() { } } t.default = f }, 8104: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(4153); t.default = class { constructor(e, t, i, r, o, n) { this.audioVideoController = e, this.videoTileController = t, this.realtimeController = i, this.audioMixController = r, this.deviceController = o, this.contentShareController = n } addObserver(e) { this.audioVideoController.addObserver(e), this.trace("addObserver") } removeObserver(e) { this.audioVideoController.removeObserver(e), this.trace("removeObserver") } setAudioProfile(e) { this.trace("setAudioProfile", e), this.audioVideoController.setAudioProfile(e) } start(e) { this.audioVideoController.start(e), this.trace("start") } stop() { this.audioVideoController.stop(), this.trace("stop") } getRTCPeerConnectionStats(e) { return this.trace("getRTCPeerConnectionStats", e ? e.id : null), this.audioVideoController.getRTCPeerConnectionStats(e) } bindAudioElement(e) { const t = this.audioMixController.bindAudioElement(e); return this.trace("bindAudioElement", e.id, t), t } unbindAudioElement() { this.audioMixController.unbindAudioElement(), this.trace("unbindAudioElement") } getCurrentMeetingAudioStream() { return this.trace("getCurrentConferenceStream"), this.audioMixController.getCurrentMeetingAudioStream() } addAudioMixObserver(e) { this.trace("addAudioMixObserver"), this.audioMixController.addAudioMixObserver(e) } removeAudioMixObserver(e) { this.trace("removeAudioMixObserver"), this.audioMixController.removeAudioMixObserver(e) } bindVideoElement(e, t) { this.videoTileController.bindVideoElement(e, t), this.trace("bindVideoElement", { tileId: e, videoElementId: t.id }) } unbindVideoElement(e, t = !0) { this.videoTileController.unbindVideoElement(e, t), this.trace("unbindVideoElement", { tileId: e, cleanUpVideoElement: t }) } startLocalVideoTile() { const e = this.videoTileController.startLocalVideoTile(); return this.trace("startLocalVideoTile", null, e), e } stopLocalVideoTile() { this.videoTileController.stopLocalVideoTile(), this.trace("stopLocalVideoTile") } hasStartedLocalVideoTile() { const e = this.videoTileController.hasStartedLocalVideoTile(); return this.trace("hasStartedLocalVideoTile", null, e), e } removeLocalVideoTile() { this.videoTileController.removeLocalVideoTile(), this.trace("removeLocalVideoTile") } getLocalVideoTile() { const e = this.videoTileController.getLocalVideoTile(); return this.trace("getLocalVideoTile"), e } pauseVideoTile(e) { this.videoTileController.pauseVideoTile(e), this.trace("pauseVideoTile", e) } unpauseVideoTile(e) { this.videoTileController.unpauseVideoTile(e), this.trace("unpauseVideoTile", e) } getVideoTile(e) { const t = this.videoTileController.getVideoTile(e); return this.trace("getVideoTile", e), t } getAllRemoteVideoTiles() { const e = this.videoTileController.getAllRemoteVideoTiles(); return this.trace("getAllRemoteVideoTiles"), e } getAllVideoTiles() { const e = this.videoTileController.getAllVideoTiles(); return this.trace("getAllVideoTiles"), e } addVideoTile() { const e = this.videoTileController.addVideoTile(); return this.trace("addVideoTile", null, e.state()), e } removeVideoTile(e) { this.videoTileController.removeVideoTile(e), this.trace("removeVideoTile", e) } removeVideoTilesByAttendeeId(e) { const t = this.videoTileController.removeVideoTilesByAttendeeId(e); return this.trace("removeVideoTilesByAttendeeId", e, t), t } removeAllVideoTiles() { this.videoTileController.removeAllVideoTiles(), this.trace("removeAllVideoTiles") } captureVideoTile(e) { const t = this.videoTileController.captureVideoTile(e); return this.trace("captureVideoTile", e), t } realtimeSubscribeToAttendeeIdPresence(e) { this.realtimeController.realtimeSubscribeToAttendeeIdPresence(e), this.trace("realtimeSubscribeToAttendeeIdPresence") } realtimeUnsubscribeToAttendeeIdPresence(e) { this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(e), this.trace("realtimeUnsubscribeToAttendeeIdPresence") } realtimeSetCanUnmuteLocalAudio(e) { this.realtimeController.realtimeSetCanUnmuteLocalAudio(e), this.trace("realtimeSetCanUnmuteLocalAudio", e) } realtimeSubscribeToSetCanUnmuteLocalAudio(e) { this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(e), this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio") } realtimeUnsubscribeToSetCanUnmuteLocalAudio(e) { this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(e), this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio") } realtimeCanUnmuteLocalAudio() { const e = this.realtimeController.realtimeCanUnmuteLocalAudio(); return this.trace("realtimeCanUnmuteLocalAudio", null, e), e } realtimeMuteLocalAudio() { this.realtimeController.realtimeMuteLocalAudio(), this.trace("realtimeMuteLocalAudio") } realtimeUnmuteLocalAudio() { const e = this.realtimeController.realtimeUnmuteLocalAudio(); return this.trace("realtimeUnmuteLocalAudio"), e } realtimeSubscribeToMuteAndUnmuteLocalAudio(e) { this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(e), this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio") } realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e) { this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e), this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio") } realtimeIsLocalAudioMuted() { const e = this.realtimeController.realtimeIsLocalAudioMuted(); return this.trace("realtimeIsLocalAudioMuted"), e } realtimeSubscribeToVolumeIndicator(e, t) { this.realtimeController.realtimeSubscribeToVolumeIndicator(e, t), this.trace("realtimeSubscribeToVolumeIndicator", e) } realtimeUnsubscribeFromVolumeIndicator(e, t) { this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(e, t), this.trace("realtimeUnsubscribeFromVolumeIndicator", e, t) } realtimeSubscribeToLocalSignalStrengthChange(e) { this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(e), this.trace("realtimeSubscribeToLocalSignalStrengthChange") } realtimeUnsubscribeToLocalSignalStrengthChange(e) { this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(e), this.trace("realtimeUnsubscribeToLocalSignalStrengthChange") } realtimeSendDataMessage(e, t, i) { this.realtimeController.realtimeSendDataMessage(e, t, i), this.trace("realtimeSendDataMessage") } realtimeSubscribeToReceiveDataMessage(e, t) { this.realtimeController.realtimeSubscribeToReceiveDataMessage(e, t), this.trace("realtimeSubscribeToReceiveDataMessage") } realtimeUnsubscribeFromReceiveDataMessage(e) { this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(e), this.trace("realtimeUnsubscribeFromReceiveDataMessage") } realtimeSubscribeToFatalError(e) { this.realtimeController.realtimeSubscribeToFatalError(e), this.trace("realtimeSubscribeToFatalError") } realtimeUnsubscribeToFatalError(e) { this.realtimeController.realtimeUnsubscribeToFatalError(e), this.trace("realtimeUnsubscribeToFatalError") } subscribeToActiveSpeakerDetector(e, t, i, r) { this.audioVideoController.activeSpeakerDetector.subscribe(e, t, i, r), this.trace("subscribeToActiveSpeakerDetector") } unsubscribeFromActiveSpeakerDetector(e) { this.audioVideoController.activeSpeakerDetector.unsubscribe(e), this.trace("unsubscribeFromActiveSpeakerDetector") } listAudioInputDevices(e = !1) { return r(this, void 0, void 0, (function* () { const t = yield this.deviceController.listAudioInputDevices(e); return this.trace("listAudioInputDevices", e, t), t })) } listVideoInputDevices(e = !1) { return r(this, void 0, void 0, (function* () { const t = yield this.deviceController.listVideoInputDevices(e); return this.trace("listVideoInputDevices", e, t), t })) } listAudioOutputDevices(e = !1) { return r(this, void 0, void 0, (function* () { const t = yield this.deviceController.listAudioOutputDevices(e); return this.trace("listAudioOutputDevices", e, t), t })) } startAudioInput(e) { return r(this, void 0, void 0, (function* () { return this.trace("startAudioInput", e), this.deviceController.startAudioInput(e) })) } stopAudioInput() { return r(this, void 0, void 0, (function* () { return this.trace("stopAudioInput"), this.deviceController.stopAudioInput() })) } startVideoInput(e) { return r(this, void 0, void 0, (function* () { return o.isVideoTransformDevice(e) ? this.trace("startVideoInput with transform device") : this.trace("startVideoInput", e), this.deviceController.startVideoInput(e) })) } stopVideoInput() { return r(this, void 0, void 0, (function* () { return this.trace("stopVideoInput"), this.deviceController.stopVideoInput() })) } chooseAudioOutput(e) { const t = this.deviceController.chooseAudioOutput(e); return this.trace("chooseAudioOutput", e), t } addDeviceChangeObserver(e) { this.deviceController.addDeviceChangeObserver(e), this.trace("addDeviceChangeObserver") } removeDeviceChangeObserver(e) { this.deviceController.removeDeviceChangeObserver(e), this.trace("removeDeviceChangeObserver") } createAnalyserNodeForAudioInput() { const e = this.deviceController.createAnalyserNodeForAudioInput(); return this.trace("createAnalyserNodeForAudioInput"), e } startVideoPreviewForVideoInput(e) { this.deviceController.startVideoPreviewForVideoInput(e), this.trace("startVideoPreviewForVideoInput", e.id) } stopVideoPreviewForVideoInput(e) { this.deviceController.stopVideoPreviewForVideoInput(e), this.trace("stopVideoPreviewForVideoInput", e.id) } setDeviceLabelTrigger(e) { this.deviceController.setDeviceLabelTrigger(e), this.trace("setDeviceLabelTrigger") } mixIntoAudioInput(e) { const t = this.deviceController.mixIntoAudioInput(e); return this.trace("mixIntoAudioInput", e.id), t } chooseVideoInputQuality(e, t, i) { this.deviceController.chooseVideoInputQuality(e, t, i), this.trace("chooseVideoInputQuality", { width: e, height: t, frameRate: i }) } setVideoMaxBandwidthKbps(e) { this.audioVideoController.setVideoMaxBandwidthKbps(e), this.trace("setVideoMaxBandwidthKbps", e) } setVideoCodecSendPreferences(e) { this.audioVideoController.setVideoCodecSendPreferences(e), this.trace("setVideoCodecSendPreferences", e) } getVideoInputQualitySettings() { const e = this.deviceController.getVideoInputQualitySettings(); return this.trace("getVideoInputQualitySettings"), e } setContentAudioProfile(e) { this.trace("setContentAudioProfile", e), this.contentShareController.setContentAudioProfile(e) } enableSimulcastForContentShare(e, t) { this.trace("enableSimulcastForContentShare"), this.contentShareController.enableSimulcastForContentShare(e, t) } startContentShare(e) { const t = this.contentShareController.startContentShare(e); return this.trace("startContentShare"), t } startContentShareFromScreenCapture(e, t) { const i = this.contentShareController.startContentShareFromScreenCapture(e, t); return this.trace("startContentShareFromScreenCapture"), i } pauseContentShare() { this.contentShareController.pauseContentShare(), this.trace("pauseContentShare") } unpauseContentShare() { this.contentShareController.unpauseContentShare(), this.trace("unpauseContentShare") } stopContentShare() { this.contentShareController.stopContentShare(), this.trace("stopContentShare") } addContentShareObserver(e) { this.contentShareController.addContentShareObserver(e), this.trace("addContentShareObserver") } removeContentShareObserver(e) { this.contentShareController.removeContentShareObserver(e), this.trace("removeContentShareObserver") } setContentShareVideoCodecPreferences(e) { this.contentShareController.setContentShareVideoCodecPreferences(e), this.trace("setContentShareVideoCodecPreferences") } trace(e, t, i) { let r = `API/DefaultAudioVideoFacade/${this.audioVideoController.configuration.meetingId}/${this.audioVideoController.configuration.credentials.attendeeId}/${e}`; void 0 !== t && (r += ` ${JSON.stringify(t)}`), void 0 !== i && (r += ` -> ${JSON.stringify(i)}`), this.audioVideoController.logger.info(r) } getRemoteVideoSources() { const e = this.audioVideoController.getRemoteVideoSources(); return this.trace("getRemoteVideoSources", null, e), e } get transcriptionController() { return this.realtimeController.transcriptionController } promoteToPrimaryMeeting(e) { this.audioVideoController.removeObserver(this), this.audioVideoController.addObserver(this); const t = this.audioVideoController.promoteToPrimaryMeeting(e); return this.trace("promoteToPrimaryMeeting", null, t), t } demoteFromPrimaryMeeting() { this.trace("demoteFromPrimaryMeeting"), this.audioVideoController.demoteFromPrimaryMeeting() } audioVideoWasDemotedFromPrimaryMeeting(e) { this.contentShareController.stopContentShare(), this.audioVideoController.removeObserver(this) } } }, 5001: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2010), n = i(795); class s extends o.default { constructor(e, t) { super(e, t), this.blurCanvas = document.createElement("canvas"), this.blurCanvasCtx = this.blurCanvas.getContext("2d"), this.blurCanvas.width = this.spec.model.input.width, this.blurCanvas.height = this.spec.model.input.height, this.logger.info("BackgroundBlur processor using builtin blur") } drawImageWithMask(e, t) { const i = this.blurredImage, { canvasCtx: r, targetCanvas: o } = this, { width: n, height: s } = o; t && i ? (this.scaledCanvas.getContext("2d").putImageData(t, 0, 0), this.blurCanvasCtx.putImageData(this.blurredImage, 0, 0), r.save(), r.clearRect(0, 0, n, s), r.drawImage(this.scaledCanvas, 0, 0, n, s), r.globalCompositeOperation = "source-in", r.drawImage(e, 0, 0, n, s), r.globalCompositeOperation = "destination-over", r.drawImage(this.blurCanvas, 0, 0, n, s), r.restore()) : r.clearRect(0, 0, n, s) } setBlurStrength(e) { if (super.setBlurStrength(e), this.worker) { this.modelInitialized = !1, this.worker.postMessage({ msg: "destroy" }); const e = this.spec.model; this.worker.postMessage({ msg: "loadModel", payload: { modelUrl: e.path, inputHeight: e.input.height, inputWidth: e.input.width, inputChannels: 4, modelRangeMin: e.input.range[0], modelRangeMax: e.input.range[1], blurPixels: this.blurAmount } }) } } setBlurPixels() { this.blurAmount = n.BlurStrengthMapper.getBlurAmount(this._blurStrength, { height: 540 }), this.logger.info(`background blur amount set to ${this.blurAmount}`) } handleInitialize(e) { if (this.logger.info(`received initialize message: ${this.stringify(e)}`), !e.payload) return this.logger.error("failed to initialize module"), void this.initWorkerPromise.reject(new Error("failed to initialize the module")); const t = this.spec.model; this.worker.postMessage({ msg: "loadModel", payload: { modelUrl: t.path, inputHeight: t.input.height, inputWidth: t.input.width, inputChannels: 4, modelRangeMin: t.input.range[0], modelRangeMax: t.input.range[1], blurPixels: this.blurAmount } }), this.initWorkerPromise.resolve({}) } handlePredict(e) { this.blurredImage = e.payload.blurOutput, super.handlePredict(e) } destroy() { const e = Object.create(null, { destroy: { get: () => super.destroy } }); var t; return r(this, void 0, void 0, (function* () { e.destroy.call(this), null === (t = this.blurCanvas) || void 0 === t || t.remove(), this.blurCanvas = void 0 })) } } t.default = s }, 2010: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2556), n = i(795), s = i(5524); class a extends o.default { constructor(e, t) { super("background blur", e, t, new s.default), this.blurAmount = 0, this.setBlurStrength(t.blurStrength), this.logger.info("BackgroundBlur processor successfully created"), this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`), this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`) } validateOptions(e) { if (super.validateOptions(e), !e.blurStrength) throw new Error("processor has null options - blurStrength") } initOnFirstExecution() { this.setBlurPixels() } drawImageWithMask(e, t) { t || (t = new ImageData(this.spec.model.input.width, this.spec.model.input.height)), this.scaledCanvas.getContext("2d").putImageData(t, 0, 0); const { canvasCtx: i, targetCanvas: r } = this, { width: o, height: n } = r; i.save(), i.clearRect(0, 0, o, n), i.drawImage(this.scaledCanvas, 0, 0, o, n), i.globalCompositeOperation = "source-in", i.drawImage(e, 0, 0, o, n), i.globalCompositeOperation = "destination-over", i.filter = `blur(${this.blurAmount}px)`, i.drawImage(e, 0, 0, r.width, r.height), i.restore() } setBlurStrength(e) { this._blurStrength = e, this.logger.info(`blur strength set to ${this._blurStrength}`), this.setBlurPixels() } setBlurPixels() { this.blurAmount = n.BlurStrengthMapper.getBlurAmount(this._blurStrength, { height: this.sourceHeight }), this.logger.info(`background blur amount set to ${this.blurAmount}`) } addObserver(e) { this.delegate.addObserver(e) } removeObserver(e) { this.delegate.removeObserver(e) } static isSupported() { return r(this, void 0, void 0, (function* () { const e = document.createElement("canvas"), t = void 0 !== e.getContext("2d").filter; return e.remove(), t })) } } t.default = a }, 795: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.BlurStrengthMapper = void 0; class i { static getBlurAmount(e, t) { if (e <= 0) throw new Error(`invalid value for blur strength: ${e}`); return Math.round(e * t.height / this.BLUR_STRENGTH_DIVISOR) } } t.BlurStrengthMapper = i, i.BLUR_STRENGTH_DIVISOR = 540, t.default = { LOW: 7, MEDIUM: 15, HIGH: 30 } }, 4776: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(7012), n = i(6108), s = i(7718), a = i(2850), d = i(5001), l = i(2010), c = i(795); class u extends a.default { setBlurStrength() { } loadAssets() { return r(this, void 0, void 0, (function* () { })) } addObserver() { } removeObserver() { } } class h extends o.default { static create(e, t) { return r(this, void 0, void 0, (function* () { e = h.resolveSpec(e), t = h.resolveOptions(t); const { logger: i } = t, r = yield h.isSupported(e, t); if (i.info(`processor is ${r ? "" : "not"} supported`), !r) return i.warn("Using no-op processor because background blur is not supported"), new u; let o; return (yield l.default.isSupported()) ? (i.info("Using browser-provided background blur"), o = new l.default(e, t)) : (i.info("Using built-in background blur"), o = new d.default(e, t)), yield o.loadAssets(), o })) } static resolveOptions(e = {}) { let t = Object.assign({}, e); return t.blurStrength || (t.blurStrength = c.default.MEDIUM), t.logger || (t.logger = new n.default("BackgroundBlurProcessor", s.default.INFO)), t = super.resolveOptions(t), t } static isSupported(e, t) { return e = h.resolveSpec(e), t = h.resolveOptions(t), super.isSupported(e, t) } } t.default = h }, 5524: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(3417); class o extends r.default { } t.default = o }, 1831: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor() { this.path = null, this.input = null, this.output = null } static builder() { return new i } withDefaultModel() { return this.withSelfieSegmentationDefaults() } withSelfieSegmentationDefaults() { return this.path = "https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite", this.input = { height: 144, width: 256, range: [0, 1], channels: 3 }, this.output = { height: 144, width: 256, range: [0, 1], channels: 1 }, this } withPath(e) { return this.path = e, this } withInput(e) { return this.input = e, this } withOutput(e) { return this.output = e, this } validate() { if (!this.path) throw new Error("model spec path is not set"); if (!this.input) throw new Error("model spec input is not set"); if (!this.output) throw new Error("model spec output is not set") } build() { return this.validate(), { path: this.path, input: this.input, output: this.output } } } t.default = i }, 9248: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i, r) { this.delegate = e, this.reportingPeriodMillis = t, this.filterCPUUtilization = i, this.logger = r, this._processingFilter = !0, this.lastReportedEventTimestamp = 0, this.lastFilterCompleteTimestamp = 0, this.filterTotalMillis = 0, this.filterCount = 0, this.framerate = 0, this.filterDurationNotifyMillis = 0, this.setSegmentationDuration() } reportEvent(e) { const t = e - this.lastReportedEventTimestamp; if (t >= this.reportingPeriodMillis) { const i = this.filterCount, r = this.filterTotalMillis; if (this.filterCount = 0, this.filterTotalMillis = 0, this.lastReportedEventTimestamp = e, 0 === this.framerate || 0 === i) return; const o = Math.round(r / i), n = Math.round(this.framerate * (t / 1e3)) - i, s = Math.round(100 * r / t); o >= this.filterDurationNotifyMillis && this.delegate.filterFrameDurationHigh({ framesDropped: n, avgFilterDurationMillis: o, framerate: this.framerate, periodMillis: t }), s >= this.filterCPUUtilization && this.delegate.filterCPUUtilizationHigh({ cpuUtilization: s, filterMillis: r, periodMillis: t }) } } setSegmentationDuration() { this.filterDurationNotifyMillis = Math.round(1e3 / this.framerate * .8) } frameReceived(e) { e !== this.framerate && (this.framerate = e, this.logger.info(`frame counter setting frame rate to ${this.framerate}`), this.setSegmentationDuration()); const t = Date.now(); this.reportEvent(t) } filterSubmitted() { this._processingFilter = !0, this.lastFilterCompleteTimestamp = Date.now() } filterComplete() { this.filterTotalMillis += Date.now() - this.lastFilterCompleteTimestamp, this._processingFilter = !1, this.filterCount++ } get processingSegment() { return this._processingFilter } } }, 2556: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.BackgroundFilterMonitor = void 0; const o = i(6889), n = i(9874), s = i(9248); class a { constructor() { this.value = void 0, this.resolve = null } whenNext() { return this.promise || (this.promise = new Promise((e => this.resolve = e))), this.promise } next(e) { this.value = e, this.resolve(e), delete this.promise } } class d { constructor(e, t, i, r) { this.targetCanvas = document.createElement("canvas"), this.canvasCtx = this.targetCanvas.getContext("2d"), this.canvasVideoFrameBuffer = new n.default(this.targetCanvas), this.mask$ = new a, this.sourceWidth = 0, this.sourceHeight = 0, this.frameNumber = 0, this.videoFramesPerFilterUpdate = 1, this.initWorkerPromise = d.createWorkerPromise(), this.loadModelPromise = d.createWorkerPromise(), this.modelInitialized = !1, this.destroyed = !1, this.filterType = e, this.validateSpec(t), this.validateOptions(i), this.spec = t, this.logger = i.logger, this.delegate = r, this.initCPUMonitor(i) } static createWorkerPromise() { const e = { resolve: null, reject: null, promise: null }; return e.promise = new Promise(((t, i) => { e.resolve = t, e.reject = i })), e } validateSpec(e) { if (!e) throw new Error("processor has null spec"); if (!e.model) throw new Error("processor spec has null model"); if (!e.paths) throw new Error("processor spec has null paths") } validateOptions(e) { if (!e) throw new Error("processor has null options"); if (!e.logger) throw new Error("processor has null options - logger"); if (!e.reportingPeriodMillis) throw new Error("processor has null options - reportingPeriodMillis"); if (!e.filterCPUUtilization) throw new Error("processor has null options - filterCPUUtilization") } initCPUMonitor(e) { this.videoFramesPerFilterUpdate = 1, this.frameCounter = new s.default(this.delegate, e.reportingPeriodMillis, e.filterCPUUtilization, this.logger), this.cpuMonitor = new l(5e3, { reduceCPUUtilization: () => { this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate + 1, 10)) }, increaseCPUUtilization: () => { this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate - 1, 1)) } }), this.delegate.addObserver(this.cpuMonitor) } stringify(e) { return JSON.stringify(e, null, 2) } handleInitialize(e) { if (this.logger.info(`received initialize message: ${this.stringify(e)}`), !e.payload) return this.logger.error("failed to initialize module"), void this.initWorkerPromise.reject(new Error("failed to initialize the module")); const t = this.spec.model; this.worker.postMessage({ msg: "loadModel", payload: { modelUrl: t.path, inputHeight: t.input.height, inputWidth: t.input.width, inputChannels: 4, modelRangeMin: t.input.range[0], modelRangeMax: t.input.range[1], blurPixels: 0 } }), this.initWorkerPromise.resolve({}) } handleLoadModel(e) { if (this.logger.info(`received load model message: ${this.stringify(e)}`), 2 !== e.payload) return this.logger.error("failed to load model! status: " + e.payload), void this.loadModelPromise.reject(new Error("failed to load model! status: " + e.payload)); this.modelInitialized = !0, this.loadModelPromise.resolve({}) } handlePredict(e) { this.mask$.next(e.payload.output) } handleWorkerEvent(e) { const t = e.data; switch (t.msg) { case "initialize": this.handleInitialize(t); break; case "loadModel": this.handleLoadModel(t); break; case "predict": this.handlePredict(t); break; default: this.logger.info(`unexpected event msg: ${this.stringify(t)}`) } } loadAssets() { return r(this, void 0, void 0, (function* () { this.logger.info("start initializing the processor"); try { this.worker = yield o.loadWorker(this.spec.paths.worker, "BackgroundFilterWorker", {}, null), this.worker.addEventListener("message", (e => this.handleWorkerEvent(e))), this.worker.postMessage({ msg: "initialize", payload: { wasmPath: this.spec.paths.wasm, simdPath: this.spec.paths.simd } }), yield this.initWorkerPromise.promise, this.logger.info(`successfully initialized the ${this.filterType} worker`), yield this.loadModelPromise.promise, this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`) } catch (e) { throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${e.message}'`) } this.logger.info(`successfully initialized the ${this.filterType} processor`) })) } process(e) { return r(this, void 0, void 0, (function* () { if (this.destroyed) return e; this.frameCounter.frameReceived(e[0].framerate), this.cpuMonitor.frameReceived(); const t = e[0].asCanvasElement(); if (!t) return e; if (!this.modelInitialized) return e[0] = this.canvasVideoFrameBuffer, e; const i = t.width, r = t.height; if (0 === i || 0 === r) return e; 0 === this.sourceWidth && (this.sourceWidth = i, this.sourceHeight = r, this.targetCanvas.width = this.sourceWidth, this.targetCanvas.height = this.sourceHeight, this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`), this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`), this.initOnFirstExecution()), this.sourceWidth === i && this.sourceHeight === r || (this.sourceWidth = i, this.sourceHeight = r, this.targetCanvas.width = this.sourceWidth, this.targetCanvas.height = this.sourceHeight); try { this.frameCounter.filterSubmitted(); let e = this.mask$.value; const i = this.spec.model.input.width / t.width, r = this.spec.model.input.height / t.height; void 0 === this.scaledCanvas && (this.scaledCanvas = document.createElement("canvas"), this.scaledCanvas.width = this.spec.model.input.width, this.scaledCanvas.height = this.spec.model.input.height); const o = this.scaledCanvas.getContext("2d"); o.save(), o.scale(i, r), o.drawImage(t, 0, 0), o.restore(); const n = o.getImageData(0, 0, this.scaledCanvas.width, this.scaledCanvas.height); if (this.frameNumber % this.videoFramesPerFilterUpdate == 0) { const t = this.mask$.whenNext(); this.worker.postMessage({ msg: "predict", payload: n }, [n.data.buffer]), e = yield t } this.destroyed || this.drawImageWithMask(t, e) } catch (t) { return this.logger.error(`could not process ${this.filterType} frame buffer due to ${t}`), e } finally { this.frameCounter.filterComplete(), this.frameNumber++ } return e[0] = this.canvasVideoFrameBuffer, e })) } updateVideoFramesPerFilterUpdate(e) { e !== this.videoFramesPerFilterUpdate && (this.videoFramesPerFilterUpdate = e, this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`)) } destroy() { var e, t, i, o; return r(this, void 0, void 0, (function* () { this.destroyed = !0, this.delegate.removeObserver(this.cpuMonitor), this.canvasVideoFrameBuffer.destroy(), null === (e = this.worker) || void 0 === e || e.postMessage({ msg: "destroy" }), null === (t = this.worker) || void 0 === t || t.postMessage({ msg: "stop" }), null === (i = this.targetCanvas) || void 0 === i || i.remove(), this.targetCanvas = void 0, null === (o = this.scaledCanvas) || void 0 === o || o.remove(), this.scaledCanvas = void 0, this.logger.info(`${this.filterType} frame process destroyed`) })) } } t.default = d; class l { constructor(e, t) { this.monitoringPeriodMillis = e, this.observer = t, this.lastCPUChangeTimestamp = 0 } filterCPUUtilizationHigh() { const e = Date.now(); e - this.lastCPUChangeTimestamp >= this.monitoringPeriodMillis && (this.lastCPUChangeTimestamp = e, this.observer.reduceCPUUtilization()) } frameReceived() { const e = Date.now(); e - this.lastCPUChangeTimestamp >= 2 * this.monitoringPeriodMillis && (this.lastCPUChangeTimestamp = e, this.observer.increaseCPUUtilization()) } } t.BackgroundFilterMonitor = l }, 7012: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(6889), n = i(2479), s = i(1831), a = i(9297), d = i(8495), l = () => s.default.builder().withSelfieSegmentationDefaults().build(), c = "https://static.sdkassets.chime.aws", u = { worker: `${c}/bgblur/workers/worker.js`, wasm: `${c}/bgblur/wasm/_cwt-wasm.wasm`, simd: `${c}/bgblur/wasm/_cwt-wasm-simd.wasm` }; t.default = class { static defaultAssetSpec() { const e = d.default.sdkVersionSemVer; return { assetGroup: `sdk-${e.major}.${e.minor}` } } static createUrlWithParams(e, t) { const i = new URL(e), r = Object.keys(t); for (const e of r) void 0 !== t[e] && i.searchParams.set(e, t[e]); return i.toString() } static resolveSpec(e) { const { paths: t = u, model: i = l(), assetGroup: r = this.defaultAssetSpec().assetGroup, revisionID: o = this.defaultAssetSpec().revisionID } = e || {}, n = { assetGroup: r, revisionID: o, sdk: encodeURIComponent(d.default.sdkVersion), ua: encodeURIComponent(d.default.sdkUserAgentLowResolution) }; return t.worker = this.createUrlWithParams(t.worker, n), t.wasm = this.createUrlWithParams(t.wasm, n), t.simd = this.createUrlWithParams(t.simd, n), i.path = this.createUrlWithParams(i.path, n), { paths: t, model: i, assetGroup: r, revisionID: o } } static resolveOptions(e) { return e.reportingPeriodMillis || (e.reportingPeriodMillis = 1e3), e.filterCPUUtilization ? (e.filterCPUUtilization < 0 || e.filterCPUUtilization > 100) && (e.logger.warn("filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of 30 percent"), e.filterCPUUtilization = 30) : e.filterCPUUtilization = 30, e } static isSupported(e, t) { const { logger: i } = t; return "undefined" == typeof globalThis ? (i.info("Browser does not have globalThis."), Promise.resolve(!1)) : (new a.default).supportsBackgroundFilter() ? n.supportsWASM(globalThis, i) ? this.supportsBackgroundFilter(globalThis, e, i) : (i.info("Browser does not support WASM."), Promise.resolve(!1)) : (i.info("Browser is not supported."), Promise.resolve(!1)) } static supportsBackgroundFilter(e = globalThis, t, i) { return r(this, void 0, void 0, (function* () { if (!n.supportsWorker(e, i)) return i.info("Browser does not support web workers."), !1; const r = t.paths.worker; try { const e = yield o.loadWorker(r, "BackgroundFilterWorker", {}, null); try { e.terminate() } catch (e) { i.info(`Failed to terminate worker. ${e.message}`) } return !0 } catch (e) { return i.info(`Failed to fetch and instantiate test worker ${e.message}`), !1 } })) } } }, 3417: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.observers = new Set } addObserver(e) { this.observers.add(e) } removeObserver(e) { this.observers.delete(e) } filterFrameDurationHigh(e) { var t; for (const i of this.observers) null === (t = i.filterFrameDurationHigh) || void 0 === t || t.call(i, e) } filterCPUUtilizationHigh(e) { var t; for (const i of this.observers) null === (t = i.filterCPUUtilizationHigh) || void 0 === t || t.call(i, e) } } }, 4412: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2556), n = i(7428); class s extends o.default { constructor(e, t) { super("background replacement", e, t, new n.default), this.replacementBlob = t.imageBlob, this.logger.info("BackgroundReplacement processor successfully created"), this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`), this.logger.info(`BackgroundReplacement options: ${this.stringify(t)}`) } setImageBlob(e) { return r(this, void 0, void 0, (function* () { this.replacementBlob = e, this.replacementImage = yield s.loadImage(this.createReplacementObjectUrl()) })) } initOnFirstExecution() { } drawImageWithMask(e, t) { t || (t = new ImageData(this.spec.model.input.width, this.spec.model.input.height)), this.scaledCanvas.getContext("2d").putImageData(t, 0, 0); const { canvasCtx: i, targetCanvas: r } = this, { width: o, height: n } = r; i.save(), i.clearRect(0, 0, o, n), i.drawImage(this.scaledCanvas, 0, 0, o, n), i.globalCompositeOperation = "source-in", i.drawImage(e, 0, 0, o, n), i.globalCompositeOperation = "destination-over", i.drawImage(this.replacementImage, 0, 0, r.width, r.height), i.restore() } static loadImageExecutor(e, t, i) { const r = new Image; r.crossOrigin = "Anonymous", r.addEventListener("load", (() => { e(r) }), !1), r.addEventListener("error", (e => { t(new Error(`Could not load replacement image ${r.src}: ${e.message}`)) }), !1), r.src = i } static loadImage(e) { return r(this, void 0, void 0, (function* () { return new Promise(((t, i) => this.loadImageExecutor(t, i, e))) })) } revokeReplacementObjectUrl() { this.replacementObjectUrl && URL.revokeObjectURL(this.replacementObjectUrl) } createReplacementObjectUrl() { return this.revokeReplacementObjectUrl(), this.replacementObjectUrl = URL.createObjectURL(this.replacementBlob), this.replacementObjectUrl } loadAssets() { const e = Object.create(null, { loadAssets: { get: () => super.loadAssets } }); return r(this, void 0, void 0, (function* () { this.replacementImage = yield s.loadImage(this.createReplacementObjectUrl()), e.loadAssets.call(this) })) } addObserver(e) { this.delegate.addObserver(e) } removeObserver(e) { this.delegate.removeObserver(e) } destroy() { const e = Object.create(null, { destroy: { get: () => super.destroy } }); return r(this, void 0, void 0, (function* () { e.destroy.call(this), this.revokeReplacementObjectUrl() })) } } t.default = s }, 6214: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(7012), n = i(6108), s = i(7718), a = i(2850), d = i(4412); class l extends a.default { loadAssets() { return r(this, void 0, void 0, (function* () { })) } addObserver() { } removeObserver() { } setImageBlob() { return r(this, void 0, void 0, (function* () { })) } } class c extends o.default { static create(e, t) { return r(this, void 0, void 0, (function* () { e = this.resolveSpec(e), t = this.resolveOptions(t), yield this.resolveOptionsAsync(t); const { logger: i } = t; if (!(yield c.isSupported(e, t))) return i.warn("Using no-op processor because background replacement is not supported"), new l; i.info("Using background replacement filter"); const r = new d.default(e, t); return yield r.loadAssets(), r })) } static resolveOptions(e = {}) { const t = Object.assign({}, e); return t.logger || (t.logger = new n.default("BackgroundReplacementProcessor", s.default.INFO)), super.resolveOptions(t) } static resolveOptionsAsync(e) { return r(this, void 0, void 0, (function* () { if (!e.imageBlob) { const t = document.createElement("canvas"); t.width = 100, t.height = 100; const i = t.getContext("2d"); i.fillStyle = "blue", i.fillRect(0, 0, 100, 100); const r = yield new Promise((e => { t.toBlob(e) })); e.imageBlob = r } })) } static isSupported(e, t) { const i = Object.create(null, { isSupported: { get: () => super.isSupported } }); return r(this, void 0, void 0, (function* () { e = this.resolveSpec(e), t = this.resolveOptions(t), yield this.resolveOptionsAsync(t); const r = t.imageBlob, o = URL.createObjectURL(r); try { yield d.default.loadImage(o) } catch (e) { return t.logger.info(`Failed to fetch load replacement image ${e.message}`), !1 } finally { URL.revokeObjectURL(o) } return i.isSupported.call(this, e, t) })) } } t.default = c }, 7428: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(3417); class o extends r.default { } t.default = o }, 6467: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i) { this.fixedWaitMs = e, this.shortBackoffMs = t, this.longBackoffMs = i, this.currentRetry = 0, this.fixedWaitMs < 0 && (this.fixedWaitMs = 0), this.shortBackoffMs < 0 && (this.shortBackoffMs = 0), this.longBackoffMs < 0 && (this.longBackoffMs = 0), this.reset() } reset() { this.currentRetry = 0 } nextBackoffAmountMs() { const e = Math.random() * Math.min(this.longBackoffMs, this.shortBackoffMs * Math.pow(2, this.currentRetry)) + this.fixedWaitMs; return this.currentRetry += 1, e } } }, 4742: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(6467), o = i(9355); t.default = class { constructor(e, t, i) { this.fixedWaitMs = e, this.shortBackoffMs = t, this.longBackoffMs = i } create() { return new r.default(this.fixedWaitMs, this.shortBackoffMs, this.longBackoffMs) } createWithLimit(e) { return new o.default(this.fixedWaitMs, this.shortBackoffMs, this.longBackoffMs, e) } } }, 9355: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(6467); class o extends r.default { constructor(e, t, i, r) { super(e, t, i), this.limit = r, this.attempts = 0 } nextBackoffAmountMs() { if (this.attempts++, this.attempts > this.limit) throw new Error("retry limit exceeded"); return super.nextBackoffAmountMs() } } t.default = o }, 9297: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(4924); t.default = class { constructor() { this.browser = o.detect(), this.browserSupport = { chrome: 78, "edge-chromium": 79, electron: 7, firefox: 75, ios: 13, safari: 13, opera: 66, samsung: 12, crios: 86, fxios: 23, "ios-webview": 605, "chromium-webview": 92 }, this.browserName = { chrome: "Google Chrome", "edge-chromium": "Microsoft Edge", electron: "Electron", firefox: "Mozilla Firefox", ios: "Safari iOS", safari: "Safari", opera: "Opera", samsung: "Samsung Internet", crios: "Chrome iOS", fxios: "Firefox iOS", "ios-webview": "WKWebView iOS", "chromium-webview": "Chrome WebView" }, this.chromeLike = ["chrome", "edge-chromium", "chromium-webview", "opera", "samsung"], this.webkitBrowsers = ["crios", "fxios", "safari", "ios", "ios-webview"] } version() { return this.browser.version } majorVersion() { return parseInt(this.version().split(".")[0]) } name() { return this.browser.name } hasChromiumWebRTC() { for (const e of this.chromeLike) if (e === this.browser.name) return !0; return !1 } hasWebKitWebRTC() { for (const e of this.webkitBrowsers) if (e === this.browser.name) return !0; return !1 } hasFirefoxWebRTC() { return this.isFirefox() } supportsCanvasCapturedStreamPlayback() { return !this.isIOSSafari() && !this.isIOSChrome() && !this.isIOSFirefox() } supportsBackgroundFilter() { return ("safari" !== this.name() || 15 !== this.majorVersion()) && !!this.supportsCanvasCapturedStreamPlayback() } supportsVideoLayersAllocationRtpHeaderExtension() { return this.hasChromiumWebRTC() } requiresResolutionAlignment(e, t) { return this.isAndroid() && this.isPixel3() ? [64 * Math.ceil(e / 64), 64 * Math.ceil(t / 64)] : [e, t] } requiresCheckForSdpConnectionAttributes() { return !this.isIOSSafari() && !this.isIOSChrome() && !this.isIOSFirefox() } requiresIceCandidateGatheringTimeoutWorkaround() { return this.hasChromiumWebRTC() } requiresBundlePolicy() { return "max-bundle" } requiresNoExactMediaStreamConstraints() { return this.isSamsungInternet() } requiresGroupIdMediaStreamConstraints() { return this.isSamsungInternet() } getDisplayMediaAudioCaptureSupport() { return this.isChrome() || this.isEdge() } doesNotSupportMediaDeviceLabels() { return "chromium-webview" === this.browser.name } isSupported() { return !(!this.browserSupport[this.browser.name] || this.majorVersion() < this.browserSupport[this.browser.name] || "firefox" === this.browser.name && this.isAndroid()) } isSimulcastSupported() { return this.hasChromiumWebRTC() } supportDownlinkBandwidthEstimation() { return !this.isFirefox() } supportString() { if (this.isAndroid()) return `${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`; const e = []; for (const t in this.browserSupport) e.push(`${this.browserName[t]} ${this.browserSupport[t]}+`); return e.join(", ") } supportedVideoCodecs() { return r(this, void 0, void 0, (function* () { const e = new RTCPeerConnection; return e.addTransceiver("video", { direction: "inactive", streams: [] }), (yield e.createOffer({ offerToReceiveVideo: !0 })).sdp.split("\r\n").filter((e => e.includes("a=rtpmap:"))).map((e => e.replace(/.* /, "").replace(/\/.*/, ""))).filter(((e, t, i) => i.indexOf(e) === t)).filter((e => "rtx" !== e && "red" !== e && "ulpfec" !== e)) })) } supportsSetSinkId() { return "setSinkId" in HTMLAudioElement.prototype } disableResolutionScaleDown() { return this.isAndroid() } disable480pResolutionScaleDown() { return /( Chrome\/98\.)/i.test(navigator.userAgent) && this.browser.os.startsWith("Windows") } requiresDisablingH264Encoding() { return (this.isIOSSafari() || this.isIOSChrome() || this.isIOSFirefox()) && ("15.1.0" === this.version() || /( OS 15_1)/i.test(navigator.userAgent)) } requiresVideoPlayWorkaround() { return this.isSafari() } isIOSSafari() { return "ios" === this.browser.name || "ios-webview" === this.browser.name || "safari" === this.browser.name && /( Mac )/i.test(navigator.userAgent) && navigator.maxTouchPoints > 1 } isSafari() { return "safari" === this.browser.name || this.isIOSSafari() } isFirefox() { return "firefox" === this.browser.name } isIOSFirefox() { return "fxios" === this.browser.name } isIOSChrome() { return "crios" === this.browser.name } isChrome() { return "chrome" === this.browser.name } isEdge() { return "edge-chromium" === this.browser.name } isSamsungInternet() { return "samsung" === this.browser.name } isAndroid() { return /(android)/i.test(navigator.userAgent) } isPixel3() { return /( pixel 3)/i.test(navigator.userAgent) } } }, 7057: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(8330), o = i(171), n = i(7957), s = i(1615); class a { constructor(e, t, i) { this.logger = e, this.videoStreamIndex = t, this.selfAttendeeId = i, this.globalMetricReport = new s.default, this.streamMetricReports = {}, this.rtcStatsReport = {}, this.currentTimestampMs = 0, this.previousTimestampMs = 0, this.currentSsrcs = {}, this.identityValue = (e, t) => { const i = t ? this.streamMetricReports[t] : this.globalMetricReport; return Number(i.currentMetrics[e]) }, this.decoderLossPercent = (e, t) => { const i = this.streamMetricReports[t], r = i.currentMetrics.concealedSamples - (i.previousMetrics.concealedSamples || 0), o = i.currentMetrics.totalSamplesReceived - (i.previousMetrics.totalSamplesReceived || 0); return o <= 0 || o - r <= 0 ? 0 : r / o * 100 }, this.packetLossPercent = (e, t) => { const i = this.streamMetricReports[t], r = i.currentMetrics[e] - (i.previousMetrics[e] || 0), o = i.currentMetrics.packetsLost - (i.previousMetrics.packetsLost || 0), n = r + o; return n <= 0 || o <= 0 ? 0 : 100 * o / n }, this.jitterBufferMs = (e, t) => { const i = this.streamMetricReports[t], r = i.currentMetrics.jitterBufferDelay - (i.previousMetrics.jitterBufferDelay || 0), o = i.currentMetrics.jitterBufferEmittedCount - (i.previousMetrics.jitterBufferEmittedCount || 0); return r <= 0 || o <= 0 ? 0 : r / o * 1e3 }, this.countPerSecond = (e, t) => { const i = t ? this.streamMetricReports[t] : this.globalMetricReport; let r = (this.currentTimestampMs - this.previousTimestampMs) / 1e3; if (r <= 0) return 0; this.previousTimestampMs <= 0 && (r = 1); const o = i.currentMetrics[e] - (i.previousMetrics[e] || 0); return o <= 0 ? 0 : Math.trunc(o / r) }, this.bitsPerSecond = (e, t) => { const i = t ? this.streamMetricReports[t] : this.globalMetricReport; let r = (this.currentTimestampMs - this.previousTimestampMs) / 1e3; if (r <= 0) return 0; this.previousTimestampMs <= 0 && (r = 1); const o = 8 * (i.currentMetrics[e] - (i.previousMetrics[e] || 0)); return o <= 0 ? 0 : Math.trunc(o / r) }, this.secondsToMilliseconds = (e, t) => { const i = t ? this.streamMetricReports[t] : this.globalMetricReport; return Number(1e3 * i.currentMetrics[e]) }, this.globalMetricMap = { retransmittedBytesSent: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE }, totalEncodedBytesTarget: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE }, totalPacketSendDelay: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS }, packetsDiscardedOnSend: { transform: this.countPerSecond, type: r.SdkMetric.Type.SOCKET_DISCARDED_PPS }, availableIncomingBitrate: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH }, availableOutgoingBitrate: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH }, currentRoundTripTime: { transform: this.secondsToMilliseconds, type: r.SdkMetric.Type.STUN_RTT_MS } }, this.audioUpstreamMetricMap = { jitter: { transform: this.secondsToMilliseconds, type: r.SdkMetric.Type.RTC_MIC_JITTER_MS }, packetsSent: { transform: this.countPerSecond, type: r.SdkMetric.Type.RTC_MIC_PPS }, bytesSent: { transform: this.bitsPerSecond, type: r.SdkMetric.Type.RTC_MIC_BITRATE }, roundTripTime: { transform: this.secondsToMilliseconds, type: r.SdkMetric.Type.RTC_MIC_RTT_MS }, packetsLost: { transform: this.packetLossPercent, type: r.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT, source: "packetsSent" } }, this.audioDownstreamMetricMap = { concealedSamples: { transform: this.countPerSecond }, totalSamplesReceived: { transform: this.countPerSecond }, decoderLoss: { transform: this.decoderLossPercent, type: r.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT }, packetsReceived: { transform: this.countPerSecond, type: r.SdkMetric.Type.RTC_SPK_PPS }, packetsLost: { transform: this.packetLossPercent, type: r.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT, source: "packetsReceived" }, jitter: { transform: this.secondsToMilliseconds, type: r.SdkMetric.Type.RTC_SPK_JITTER_MS }, jitterBufferDelay: { transform: this.countPerSecond }, jitterBufferEmittedCount: { transform: this.countPerSecond }, jitterBufferMs: { transform: this.jitterBufferMs, type: r.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS }, bytesReceived: { transform: this.bitsPerSecond, type: r.SdkMetric.Type.RTC_SPK_BITRATE } }, this.videoUpstreamMetricMap = { roundTripTime: { transform: this.secondsToMilliseconds, type: r.SdkMetric.Type.VIDEO_SENT_RTT_MS }, nackCount: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_NACKS_RECEIVED }, pliCount: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_PLIS_RECEIVED }, firCount: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_FIRS_RECEIVED }, framesPerSecond: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_INPUT_FPS }, framesEncoded: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_ENCODE_FPS }, packetsSent: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_SENT_PPS }, packetsLost: { transform: this.packetLossPercent, type: r.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT, source: "packetsSent" }, bytesSent: { transform: this.bitsPerSecond, type: r.SdkMetric.Type.VIDEO_SENT_BITRATE }, qpSum: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_SENT_QP_SUM }, frameHeight: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_ENCODE_HEIGHT }, frameWidth: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_ENCODE_WIDTH }, jitter: { transform: this.secondsToMilliseconds } }, this.videoDownstreamMetricMap = { totalDecodeTime: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_DECODE_MS }, packetsReceived: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_RECEIVED_PPS }, packetsLost: { transform: this.packetLossPercent, type: r.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT, source: "packetsReceived" }, framesReceived: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_RECEIVED_FPS }, framesDecoded: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_DECODE_FPS }, nackCount: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_NACKS_SENT }, firCount: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_FIRS_SENT }, pliCount: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_PLIS_SENT }, bytesReceived: { transform: this.bitsPerSecond, type: r.SdkMetric.Type.VIDEO_RECEIVED_BITRATE }, jitter: { transform: this.secondsToMilliseconds, type: r.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS }, jitterBufferDelay: { transform: this.countPerSecond }, jitterBufferEmittedCount: { transform: this.countPerSecond }, jitterBufferMs: { transform: this.jitterBufferMs, type: r.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS }, qpSum: { transform: this.countPerSecond, type: r.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM }, frameHeight: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_DECODE_HEIGHT }, frameWidth: { transform: this.identityValue, type: r.SdkMetric.Type.VIDEO_DECODE_WIDTH } }, this.observableVideoMetricSpec = { videoUpstreamBitrate: { source: "bytesSent", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoUpstreamPacketsSent: { source: "packetsSent", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoUpstreamPacketLossPercent: { source: "packetsLost", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoUpstreamFramesEncodedPerSecond: { source: "framesEncoded", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoUpstreamFrameHeight: { source: "frameHeight", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoUpstreamFrameWidth: { source: "frameWidth", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoUpstreamJitterMs: { source: "jitter", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoUpstreamRoundTripTimeMs: { source: "roundTripTime", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoDownstreamBitrate: { source: "bytesReceived", media: n.default.VIDEO, dir: o.default.DOWNSTREAM }, videoDownstreamPacketLossPercent: { source: "packetsLost", media: n.default.VIDEO, dir: o.default.DOWNSTREAM }, videoDownstreamPacketsReceived: { source: "packetsReceived", media: n.default.VIDEO, dir: o.default.DOWNSTREAM }, videoDownstreamFramesDecodedPerSecond: { source: "framesDecoded", media: n.default.VIDEO, dir: o.default.DOWNSTREAM }, videoDownstreamFrameHeight: { source: "frameHeight", media: n.default.VIDEO, dir: o.default.DOWNSTREAM }, videoDownstreamFrameWidth: { source: "frameWidth", media: n.default.VIDEO, dir: o.default.DOWNSTREAM }, videoDownstreamJitterMs: { source: "jitter", media: n.default.VIDEO, dir: o.default.DOWNSTREAM }, videoDownstreamDelayMs: { source: "jitterBufferMs", media: n.default.VIDEO, dir: o.default.DOWNSTREAM } }, this.observableMetricSpec = { audioPacketsReceived: { source: "packetsReceived", media: n.default.AUDIO, dir: o.default.DOWNSTREAM }, audioPacketsReceivedFractionLoss: { source: "packetsLost", media: n.default.AUDIO, dir: o.default.DOWNSTREAM }, audioDecoderLoss: { source: "decoderLoss", media: n.default.AUDIO, dir: o.default.DOWNSTREAM }, audioPacketsSent: { source: "packetsSent", media: n.default.AUDIO, dir: o.default.UPSTREAM }, audioPacketLossPercent: { source: "packetsLost", media: n.default.AUDIO, dir: o.default.UPSTREAM }, audioUpstreamRoundTripTimeMs: { source: "roundTripTime", media: n.default.AUDIO, dir: o.default.UPSTREAM }, videoUpstreamBitrate: { source: "bytesSent", media: n.default.VIDEO, dir: o.default.UPSTREAM }, videoPacketSentPerSecond: { source: "packetsSent", media: n.default.VIDEO, dir: o.default.UPSTREAM }, audioSpeakerDelayMs: { source: "jitterBufferMs", media: n.default.AUDIO, dir: o.default.DOWNSTREAM }, audioUpstreamJitterMs: { source: "jitter", media: n.default.AUDIO, dir: o.default.UPSTREAM }, audioDownstreamJitterMs: { source: "jitter", media: n.default.AUDIO, dir: o.default.DOWNSTREAM }, nackCountReceivedPerSecond: { source: "nackCount", media: n.default.VIDEO, dir: o.default.UPSTREAM }, availableOutgoingBitrate: { source: "availableOutgoingBitrate" }, availableIncomingBitrate: { source: "availableIncomingBitrate" }, currentRoundTripTimeMs: { source: "currentRoundTripTime" } } } getMetricMap(e, t) { switch (e) { case n.default.AUDIO: switch (t) { case o.default.UPSTREAM: return this.audioUpstreamMetricMap; case o.default.DOWNSTREAM: return this.audioDownstreamMetricMap }case n.default.VIDEO: switch (t) { case o.default.UPSTREAM: return this.videoUpstreamMetricMap; case o.default.DOWNSTREAM: return this.videoDownstreamMetricMap }default: return this.globalMetricMap } } getObservableMetricValue(e) { const t = this.observableMetricSpec[e], i = this.getMetricMap(t.media, t.dir)[t.source], { transform: r, source: o } = i; if (!t.hasOwnProperty("media")) return r(o || t.source); for (const e in this.streamMetricReports) { const i = this.streamMetricReports[e]; if (i.direction === t.dir && i.mediaType === t.media) return r(o || t.source, Number(e)) } return 0 } getObservableVideoMetricValue(e, t) { const i = this.observableVideoMetricSpec[e], r = this.getMetricMap(i.media, i.dir)[i.source], { transform: o, source: n } = r; return o(n || i.source, t) } getObservableMetrics() { const e = {}; for (const t in this.observableMetricSpec) e[t] = this.getObservableMetricValue(t); return e } getObservableVideoMetrics() { const e = {}; if (!this.videoStreamIndex || !this.selfAttendeeId) return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"), e; for (const t in this.streamMetricReports) if (this.streamMetricReports[t].mediaType === n.default.VIDEO) { const i = {}; for (const e in this.observableVideoMetricSpec) if (this.observableVideoMetricSpec[e].dir === this.streamMetricReports[t].direction) { const r = this.getObservableVideoMetricValue(e, Number(t)); isNaN(r) || (i[e] = r) } const r = this.streamMetricReports[t].streamId, o = r ? this.videoStreamIndex.attendeeIdForStreamId(r) : this.selfAttendeeId; e[o] = e[o] ? e[o] : {}, e[o][t] = i } return e } getRTCStatsReport() { return this.rtcStatsReport } clone() { const e = new a(this.logger, this.videoStreamIndex, this.selfAttendeeId); return e.globalMetricReport = this.globalMetricReport, e.streamMetricReports = this.streamMetricReports, e.rtcStatsReport = this.rtcStatsReport, e.currentTimestampMs = this.currentTimestampMs, e.previousTimestampMs = this.previousTimestampMs, e } print() { const e = { globalMetricReport: this.globalMetricReport, streamMetricReports: this.streamMetricReports, currentTimestampMs: this.currentTimestampMs, previousTimestampMs: this.previousTimestampMs }; this.logger.debug((() => `Client Metric Report: ${JSON.stringify(e)}`)) } removeDestroyedSsrcs() { for (const e in this.streamMetricReports) this.currentSsrcs[e] || delete this.streamMetricReports[e] } } t.default = a }, 171: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.ClientMetricReportDirection = void 0, function (e) { e[e.UPSTREAM = 0] = "UPSTREAM", e[e.DOWNSTREAM = 1] = "DOWNSTREAM" }(i = t.ClientMetricReportDirection || (t.ClientMetricReportDirection = {})), t.default = i }, 7957: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.ClientMetricReportMediaType = void 0, function (e) { e[e.AUDIO = 0] = "AUDIO", e[e.VIDEO = 1] = "VIDEO" }(i = t.ClientMetricReportMediaType || (t.ClientMetricReportMediaType = {})), t.default = i }, 2840: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 1615: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.previousMetrics = {}, this.currentMetrics = {} } } }, 7562: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.previousMetrics = {}, this.currentMetrics = {} } } }, 9591: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t) { this.minHealth = e.minHealth, this.maxHealth = e.maxHealth, this.currentHealth = e.initialHealth, this.currentData = t.clone() } minimumHealth() { return this.minHealth } maximumHealth() { return this.maxHealth } health() { return this.maximumHealth() } update(e) { this.currentData = e } getConnectionHealthData() { return this.currentData.clone() } healthy() { return this.health() > this.minimumHealth() } healthIfChanged() { const e = this.health(); return e !== this.currentHealth ? (this.currentHealth = e, e) : null } } }, 2217: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor() { this.connectionStartTimestampMs = 0, this.consecutiveStatsWithNoPackets = 0, this.lastPacketLossInboundTimestampMs = 0, this.lastGoodSignalTimestampMs = 0, this.lastWeakSignalTimestampMs = 0, this.lastNoSignalTimestampMs = 0, this.consecutiveMissedPongs = 0, this.packetsReceivedInLastMinute = [], this.fractionPacketsLostInboundInLastMinute = [], this.audioSpeakerDelayMs = 0, this.connectionStartTimestampMs = Date.now(), this.lastGoodSignalTimestampMs = Date.now() } static isTimestampRecent(e, t) { return Date.now() < e + t } setConnectionStartTime() { this.connectionStartTimestampMs = Date.now(), this.lastGoodSignalTimestampMs = Date.now() } reset() { this.connectionStartTimestampMs = 0, this.consecutiveStatsWithNoPackets = 0, this.lastPacketLossInboundTimestampMs = 0, this.lastGoodSignalTimestampMs = 0, this.lastWeakSignalTimestampMs = 0, this.lastNoSignalTimestampMs = 0, this.consecutiveMissedPongs = 0, this.packetsReceivedInLastMinute = [], this.fractionPacketsLostInboundInLastMinute = [], this.audioSpeakerDelayMs = 0, this.connectionStartTimestampMs = Date.now(), this.lastGoodSignalTimestampMs = Date.now() } isConnectionStartRecent(e) { return i.isTimestampRecent(this.connectionStartTimestampMs, e) } isLastPacketLossRecent(e) { return i.isTimestampRecent(this.lastPacketLossInboundTimestampMs, e) } isGoodSignalRecent(e) { return i.isTimestampRecent(this.lastGoodSignalTimestampMs, e) } isWeakSignalRecent(e) { return i.isTimestampRecent(this.lastWeakSignalTimestampMs, e) } isNoSignalRecent(e) { return i.isTimestampRecent(this.lastNoSignalTimestampMs, e) } clone() { const e = new i; return e.connectionStartTimestampMs = this.connectionStartTimestampMs, e.consecutiveStatsWithNoPackets = this.consecutiveStatsWithNoPackets, e.lastPacketLossInboundTimestampMs = this.lastPacketLossInboundTimestampMs, e.lastGoodSignalTimestampMs = this.lastGoodSignalTimestampMs, e.lastWeakSignalTimestampMs = this.lastWeakSignalTimestampMs, e.lastNoSignalTimestampMs = this.lastNoSignalTimestampMs, e.consecutiveMissedPongs = this.consecutiveMissedPongs, e.packetsReceivedInLastMinute = this.packetsReceivedInLastMinute.slice(0), e.fractionPacketsLostInboundInLastMinute = this.fractionPacketsLostInboundInLastMinute.slice(0), e.audioSpeakerDelayMs = this.audioSpeakerDelayMs, e } setConsecutiveMissedPongs(e) { this.consecutiveMissedPongs = e } setConsecutiveStatsWithNoPackets(e) { this.consecutiveStatsWithNoPackets = e } setLastPacketLossInboundTimestampMs(e) { this.lastPacketLossInboundTimestampMs = e } setLastNoSignalTimestampMs(e) { this.lastNoSignalTimestampMs = e } setLastWeakSignalTimestampMs(e) { this.lastWeakSignalTimestampMs = e } setLastGoodSignalTimestampMs(e) { this.lastGoodSignalTimestampMs = e } setAudioSpeakerDelayMs(e) { this.audioSpeakerDelayMs = e } } t.default = i }, 2552: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.minHealth = 0, this.maxHealth = 1, this.initialHealth = 1, this.connectionUnhealthyThreshold = 25, this.noSignalThresholdTimeMs = 1e4, this.connectionWaitTimeMs = 1e4, this.zeroBarsNoSignalTimeMs = 5e3, this.oneBarWeakSignalTimeMs = 5e3, this.twoBarsTimeMs = 5e3, this.threeBarsTimeMs = 1e4, this.fourBarsTimeMs = 2e4, this.fiveBarsTimeMs = 6e4, this.cooldownTimeMs = 6e4, this.pastSamplesToConsider = 15, this.goodSignalTimeMs = 15e3, this.fractionalLoss = .5, this.packetsExpected = 50, this.maximumTimesToWarn = 2, this.missedPongsLowerThreshold = 1, this.missedPongsUpperThreshold = 4, this.maximumAudioDelayMs = 6e4, this.maximumAudioDelayDataPoints = 10 } } }, 2478: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9591); class o extends r.default { constructor(e, t, i) { super(t, i), this.logger = e, this.audioDelayPointsOverMaximum = 0, o.CONNECTION_UNHEALTHY_THRESHOLD = t.connectionUnhealthyThreshold, o.CONNECTION_WAIT_TIME_MS = t.connectionWaitTimeMs, o.MISSED_PONGS_THRESHOLD = t.missedPongsUpperThreshold, o.MAXIMUM_AUDIO_DELAY_MS = t.maximumAudioDelayMs, o.MAXIMUM_AUDIO_DELAY_DATA_POINTS = t.maximumAudioDelayDataPoints } health() { if (this.currentData.isConnectionStartRecent(o.CONNECTION_WAIT_TIME_MS)) return 1; const e = this.currentData.consecutiveStatsWithNoPackets >= o.CONNECTION_UNHEALTHY_THRESHOLD, t = this.currentData.consecutiveMissedPongs >= o.MISSED_PONGS_THRESHOLD; this.currentData.audioSpeakerDelayMs > o.MAXIMUM_AUDIO_DELAY_MS ? this.audioDelayPointsOverMaximum += 1 : this.audioDelayPointsOverMaximum = 0; const i = this.audioDelayPointsOverMaximum > o.MAXIMUM_AUDIO_DELAY_DATA_POINTS; return i && (this.audioDelayPointsOverMaximum = 0), e || t || i ? (this.logger.warn(`reconnection recommended due to: no packets received: ${e}, missed pongs: ${t}, bad audio delay: ${i}`), 0) : 1 } } t.default = o }, 1448: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9591); class o extends r.default { constructor(e, t) { super(e, t), this.coolDownTimeMs = e.cooldownTimeMs, this.pastSamplesToConsider = e.pastSamplesToConsider, this.fractionalLoss = e.fractionalLoss, this.packetsExpected = e.packetsExpected, this.maximumTimesToWarn = e.maximumTimesToWarn, this.lastWarnTimestampMs = 0, this.warnCount = 0 } calculateFractionalLoss() { if (this.currentData.packetsReceivedInLastMinute.length < this.pastSamplesToConsider) return 0; const e = this.pastSamplesToConsider, t = e * this.packetsExpected; let i = 0; for (let t = 0; t < e; t++)i += this.currentData.packetsReceivedInLastMinute[t]; return Math.min(Math.max(1 - i / t, 0), 1) } health() { return Date.now() - this.lastWarnTimestampMs < this.coolDownTimeMs ? this.currentHealth : this.calculateFractionalLoss() >= this.fractionalLoss ? 0 !== this.currentHealth && (this.lastWarnTimestampMs = Date.now(), this.warnCount++, this.warnCount > this.maximumTimesToWarn) ? 1 : 0 : 1 } } t.default = o }, 1: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2019); t.default = class { constructor(e, t, i, r, o) { this.audioVideoController = e, this.realtimeController = t, this.connectionHealthData = i, this.pingPong = r, this.statsCollector = o, this.isActive = !1, this.hasSeenValidPacketMetricsBefore = !1, this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange((e => { this.isActive && this.receiveSignalStrengthChange(e) })) } start() { this.isActive = !0, this.pingPong.addObserver(this), this.pingPong.start(), this.audioVideoController.addObserver(this) } stop() { this.isActive = !1, this.pingPong.removeObserver(this), this.pingPong.stop(), this.audioVideoController.removeObserver(this) } receiveSignalStrengthChange(e) { 0 === e ? this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()) : e <= .5 ? this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()) : this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()), this.updateConnectionHealth() } didReceivePong(e, t, i) { this.connectionHealthData.setConsecutiveMissedPongs(0), this.statsCollector.logLatency("ping_pong", t), this.statsCollector.logLatency("ping_pong_clock_skew", i), this.updateConnectionHealth() } didMissPongs() { this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs + 1), this.updateConnectionHealth() } metricsDidReceive(e) { let t = 0, i = 0; const r = e.getObservableMetrics(), o = r.audioPacketsReceived, n = r.audioPacketsReceivedFractionLoss, s = r.audioSpeakerDelayMs; "number" != typeof s || isNaN(s) || this.connectionHealthData.setAudioSpeakerDelayMs(s), "number" == typeof o && "number" == typeof n && (t = o, i = n, t < 0 || i < 0 || (this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute, t), this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute, i), t > 0 ? (this.hasSeenValidPacketMetricsBefore = !0, this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)) : this.hasSeenValidPacketMetricsBefore && this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets + 1), (0 === t || i > 0) && this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()), this.updateConnectionHealth())) } addToMinuteWindow(e, t) { e.unshift(t), e.length > 60 && e.pop() } updateConnectionHealth() { this.audioVideoController.forEachObserver((e => { r.Maybe.of(e.connectionHealthDidChange).map((t => t.bind(e)(this.connectionHealthData.clone()))) })) } } }, 9511: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), function (e) { e.Modality = "#content" }(i || (i = {})), t.default = i }, 3345: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9297), n = i(9802); class s { constructor(e) { this.logger = e } get mediaStream() { return this._mediaStream } set mediaStream(e) { this._mediaStream = e } acquireAudioInputStream() { return r(this, void 0, void 0, (function* () { return 0 === this._mediaStream.getAudioTracks().length ? (this.logger.info("No audio stream available. Synthesizing an audio stream."), n.default.synthesizeAudioDevice(0)) : this._mediaStream })) } acquireVideoInputStream() { return r(this, void 0, void 0, (function* () { return this._mediaStream })) } acquireDisplayInputStream(e) { return r(this, void 0, void 0, (function* () { return e && e.video && e.video.mandatory && e.video.mandatory.chromeMediaSource && e.video.mandatory.chromeMediaSourceId ? navigator.mediaDevices.getUserMedia(e) : navigator.mediaDevices.getDisplayMedia(e) })) } acquireScreenCaptureDisplayInputStream(e, t) { return r(this, void 0, void 0, (function* () { return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(e, t)) })) } screenCaptureDisplayMediaConstraints(e, t) { return { audio: !(e || !(new o.default).getDisplayMediaAudioCaptureSupport()), video: Object.assign(Object.assign({}, !e && { frameRate: { max: t || s.defaultFrameRate } }), e && { mandatory: { chromeMediaSource: "desktop", chromeMediaSourceId: e, maxFrameRate: t || s.defaultFrameRate } }) } } toggleMediaStream(e) { let t = !1; if (this.mediaStream) for (let i = 0; i < this.mediaStream.getTracks().length; i++)this.mediaStream.getTracks()[i].enabled !== e && (this.mediaStream.getTracks()[i].enabled = e, t = !0); return t } cleanup() { if (this.mediaStream) for (let e = 0; e < this.mediaStream.getTracks().length; e++)this.mediaStream.getTracks()[e].stop(); this.mediaStream = null } muteLocalAudioInputStream() { throw new Error("unsupported") } unmuteLocalAudioInputStream() { throw new Error("unsupported") } addMediaStreamBrokerObserver(e) { } removeMediaStreamBrokerObserver(e) { } } t.default = s, s.defaultFrameRate = 15 }, 3265: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(231), n = i(2721), s = i(6878), a = i(996), d = i(2019), l = i(6636), c = i(9511); t.default = class { constructor(e, t, i) { this.mediaStreamBroker = e, this.contentAudioVideo = t, this.attendeeAudioVideo = i, this.observerQueue = new Set, this.destroyed = !1, this.contentAudioVideo.addObserver(this), this.setupContentShareEvents() } static createContentShareMeetingSessionConfigure(e) { const t = new o.default; return t.meetingId = e.meetingId, t.externalMeetingId = e.externalMeetingId, t.urls = e.urls, t.credentials = new n.default, t.credentials.attendeeId = e.credentials.attendeeId + c.default.Modality, t.credentials.externalUserId = e.credentials.externalUserId, t.credentials.joinToken = e.credentials.joinToken + c.default.Modality, t } setContentAudioProfile(e) { this.contentAudioVideo.setAudioProfile(e) } enableSimulcastForContentShare(e, t) { e ? (this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers = !0, this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy = new l.default(this.contentAudioVideo.logger, t)) : (this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers = !1, this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy = void 0) } startContentShare(e) { return r(this, void 0, void 0, (function* () { if (e) { this.mediaStreamBroker.mediaStream = e; for (let e = 0; e < this.mediaStreamBroker.mediaStream.getTracks().length; e++)this.mediaStreamBroker.mediaStream.getTracks()[e].addEventListener("ended", (() => { this.stopContentShare() })); this.contentAudioVideo.start() } })) } startContentShareFromScreenCapture(e, t) { return r(this, void 0, void 0, (function* () { const i = yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(e, t); return yield this.startContentShare(i), i })) } pauseContentShare() { this.mediaStreamBroker.toggleMediaStream(!1) && this.forEachContentShareObserver((e => { d.Maybe.of(e.contentShareDidPause).map((t => t.call(e))) })) } unpauseContentShare() { this.mediaStreamBroker.toggleMediaStream(!0) && this.forEachContentShareObserver((e => { d.Maybe.of(e.contentShareDidUnpause).map((t => t.call(e))) })) } setContentShareVideoCodecPreferences(e) { this.contentAudioVideo.setVideoCodecSendPreferences(e) } destroy() { return r(this, void 0, void 0, (function* () { this.contentAudioVideo && (this.destroyed = !0, this.contentAudioVideo.removeObserver(this), this.stopContentShare(), this.observerQueue.clear(), this.contentAudioVideo = void 0, this.attendeeAudioVideo = void 0, this.mediaStreamBroker = void 0) })) } stopContentShare() { this.contentAudioVideo.stop(), this.mediaStreamBroker.cleanup() } addContentShareObserver(e) { this.observerQueue.add(e) } removeContentShareObserver(e) { this.observerQueue.delete(e) } forEachContentShareObserver(e) { for (const t of this.observerQueue) a.default.nextTick((() => { this.observerQueue.has(t) && e(t) })) } audioVideoDidStart() { this.mediaStreamBroker.mediaStream.getVideoTracks().length > 0 && this.contentAudioVideo.videoTileController.startLocalVideoTile() } audioVideoDidStop(e) { this.mediaStreamBroker.cleanup(), this.contentShareTile && (this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()), this.contentShareTile = null), this.forEachContentShareObserver((e => { d.Maybe.of(e.contentShareDidStop).map((t => t.call(e))) })) } setupContentShareEvents() { this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence(((e, t, i, r) => { const o = new s.default(e).hasModality(s.default.MODALITY_CONTENT), n = new s.default(e).base() === this.attendeeAudioVideo.configuration.credentials.attendeeId; if (!o || !n || !t || this.contentShareTile) return; const a = this.mediaStreamBroker.mediaStream; if (null == a ? void 0 : a.getVideoTracks().length) { this.contentShareTile = this.attendeeAudioVideo.videoTileController.addVideoTile(); const e = a.getVideoTracks()[0]; let t, i; if (e.getSettings) { const r = e.getSettings(); t = r.width, i = r.height } else { const r = e.getCapabilities(); t = r.width, i = r.height } this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId, !1, a, t, i, null, this.contentAudioVideo.configuration.credentials.externalUserId) } this.forEachContentShareObserver((e => { d.Maybe.of(e.contentShareDidStart).map((t => t.call(e))) })) })) } } }, 9020: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class r { static register() { "document" in i.g && document.addEventListener && r.shouldRegisterCSPMonitor && (r.added || (document.addEventListener("securitypolicyviolation", r.listener), r.added = !0)) } static unregister() { "document" in i.g && document.removeEventListener && (document.removeEventListener("securitypolicyviolation", r.listener), r.loggers = new Set, r.added = !1) } static disable() { r.shouldRegisterCSPMonitor = !1, r.unregister() } static addLogger(e) { e && r.loggers.add(e) } static removeLogger(e) { e && r.loggers.delete(e) } } t.default = r, r.loggers = new Set, r.shouldRegisterCSPMonitor = !0, r.added = !1, r.listener = e => { const t = `Security Policy Violation\nBlocked URI: ${e.blockedURI}\nViolated Directive: ${e.violatedDirective}\nOriginal Policy: ${e.originalPolicy}\nDocument URI: ${e.documentURI}\nSource File: ${e.sourceFile}\nLine No.: ${e.lineNumber}\n`; for (const e of r.loggers) e.error(t); 0 === r.loggers.size && console.error(t) } }, 3727: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i, r, o, n) { this.timestampMs = e, this.topic = t, this.data = i, this.senderAttendeeId = r, this.senderExternalUserId = o, this.throttled = !!n } text() { return (new TextDecoder).decode(this.data) } json() { return JSON.parse((new TextDecoder).decode(this.data)) } } }, 9457: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.isDestroyable = void 0, t.isDestroyable = function (e) { return e && "destroy" in e } }, 2619: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.isAudioTransformDevice = void 0, t.isAudioTransformDevice = function (e) { return !!e && "object" == typeof e && "mute" in e && "stop" in e && "intrinsicDevice" in e } }, 9802: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9297), n = i(1835), s = i(996), a = i(5849), d = i(2019), l = i(9912), c = i(2619), u = i(4297), h = i(2503), p = i(4465), m = i(1344), f = i(5459), g = i(5536), b = i(9485), v = i(8033), y = i(4153); class w { constructor(e, t, i = new o.default, r) { this.logger = e, this.browserBehavior = i, this.eventController = r, this.deviceInfoCache = null, this.activeDevices = { audio: null, video: null }, this.chosenVideoTransformDevice = null, this.audioOutputDeviceId = void 0, this.deviceChangeObservers = new Set, this.mediaStreamBrokerObservers = new Set, this.deviceLabelTrigger = () => navigator.mediaDevices.getUserMedia({ audio: !0, video: !0 }), this.audioInputDestinationNode = null, this.audioInputSourceNode = null, this.videoInputQualitySettings = null, this.useWebAudio = !1, this.useMediaConstraintsFallback = !0, this.audioInputTaskQueue = new a.default, this.videoInputTaskQueue = new a.default, this.muted = !1, this.mediaStreamMuteObserver = (e, t) => { for (const i of this.deviceChangeObservers) s.default.nextTick((() => { this.deviceChangeObservers.has(i) && i.audioInputMuteStateChanged && i.audioInputMuteStateChanged(e, t) })) }, this.alreadyHandlingDeviceChange = !1; const { enableWebAudio: d = !1, useMediaConstraintsFallback: l = !0 } = t || {}; this.useWebAudio = d, this.useMediaConstraintsFallback = l, this.videoInputQualitySettings = new v.default(w.defaultVideoWidth, w.defaultVideoHeight, w.defaultVideoFrameRate); const c = this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth, this.videoInputQualitySettings.videoHeight); this.videoInputQualitySettings.videoWidth = c[0], this.videoInputQualitySettings.videoHeight = c[1], this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`); try { this.mediaDeviceWrapper = (new n.default).create(); const e = navigator.mediaDevices.getSupportedConstraints(); this.logger.info(`Supported Constraints in this browser ${JSON.stringify(e)}`) } catch (t) { e.error(t.message) } } isWatchingForDeviceChanges() { return !!this.onDeviceChangeCallback } ensureWatchingDeviceChanges() { var e; this.isWatchingForDeviceChanges() || (this.logger.info("Starting devicechange listener."), this.onDeviceChangeCallback = () => { this.logger.info("Device change event callback is triggered"), this.handleDeviceChange() }, null === (e = this.mediaDeviceWrapper) || void 0 === e || e.addEventListener("devicechange", this.onDeviceChangeCallback)) } stopWatchingDeviceChanges() { var e; this.isWatchingForDeviceChanges() && (this.logger.info("Stopping devicechange listener."), null === (e = this.mediaDeviceWrapper) || void 0 === e || e.removeEventListener("devicechange", this.onDeviceChangeCallback), this.onDeviceChangeCallback = void 0) } shouldObserveDeviceChanges() { return !!this.deviceChangeObservers.size || (this.activeDevices.audio && null !== this.activeDevices.audio.constraints || this.activeDevices.video && null !== this.activeDevices.video.constraints || !!this.audioOutputDeviceId) } watchForDeviceChangesIfNecessary() { this.shouldObserveDeviceChanges() ? this.ensureWatchingDeviceChanges() : this.stopWatchingDeviceChanges() } destroy() { return r(this, void 0, void 0, (function* () { this.stopWatchingDeviceChanges(), yield this.stopAudioInput(), yield this.stopVideoInput() })) } listAudioInputDevices(e = !1) { return r(this, void 0, void 0, (function* () { const t = yield this.listDevicesOfKind("audioinput", e); return this.trace("listAudioInputDevices", e, t), t })) } listVideoInputDevices(e = !1) { return r(this, void 0, void 0, (function* () { const t = yield this.listDevicesOfKind("videoinput", e); return this.trace("listVideoInputDevices", e, t), t })) } listAudioOutputDevices(e = !1) { return r(this, void 0, void 0, (function* () { const t = yield this.listDevicesOfKind("audiooutput", e); return this.trace("listAudioOutputDevices", e, t), t })) } pushAudioMeetingStateForPermissions(e) { var t; null === (t = this.eventController) || void 0 === t || t.publishEvent(void 0 === e ? "audioInputUnselected" : "audioInputSelected") } pushVideoMeetingStateForPermissions(e) { var t; null === (t = this.eventController) || void 0 === t || t.publishEvent(void 0 === e ? "videoInputUnselected" : "videoInputSelected") } startAudioInput(e) { return r(this, void 0, void 0, (function* () { return yield this.audioInputTaskQueue.add((() => this.startAudioInputTask(e))) })) } startAudioInputTask(e) { var t; return r(this, void 0, void 0, (function* () { if (void 0 !== e) try { return c.isAudioTransformDevice(e) ? (this.logger.info(`Choosing transform input device ${e}`), yield this.chooseAudioTransformInputDevice(e)) : (this.logger.info(`Choosing intrinsic audio input device ${e}`), this.removeTransform(), yield this.chooseInputIntrinsicDevice("audio", e)), this.trace("startAudioInputDevice", e, "success"), this.useWebAudio ? (this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream), this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream), yield null === (t = this.transform) || void 0 === t ? void 0 : t.device.mute(this.muted), this.getMediaStreamDestinationNode().stream) : (this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream), this.activeDevices.audio.stream) } catch (e) { throw e } else this.logger.error("Audio input device cannot be undefined") })) } stopAudioInput() { return r(this, void 0, void 0, (function* () { return this.audioInputTaskQueue.add((() => this.stopAudioInputTask())) })) } stopAudioInputTask() { return r(this, void 0, void 0, (function* () { try { if (this.useWebAudio) return void this.releaseAudioTransformStream(); this.stopTracksAndRemoveCallbacks("audio") } finally { this.watchForDeviceChangesIfNecessary(), this.publishAudioInputDidChangeEvent(void 0) } })) } chooseAudioTransformInputDevice(e) { var t; return r(this, void 0, void 0, (function* () { if ((null === (t = this.transform) || void 0 === t ? void 0 : t.device) === e) return; if (!this.useWebAudio) throw new Error("Cannot apply transform device without enabling Web Audio."); const i = w.getAudioContext(); if (i instanceof OfflineAudioContext); else switch (i.state) { case "running": break; case "closed": throw new Error("Cannot choose a transform device with a closed audio context."); case "suspended": yield i.resume() }let r; try { r = yield e.createAudioNode(i) } catch (e) { throw this.logger.error(`Unable to create transform device node: ${e}.`), e } const o = yield e.intrinsicDevice(); yield this.chooseInputIntrinsicDevice("audio", o), this.logger.debug(`Got inner stream: ${o}.`), this.setTransform(e, r) })) } chooseVideoTransformInputDevice(e) { var t; return r(this, void 0, void 0, (function* () { if (e === this.chosenVideoTransformDevice) return void this.logger.info("Reselecting same VideoTransformDevice"); const i = this.chosenVideoTransformDevice; i && this.logger.info("Switched from previous VideoTransformDevice"); const r = !!i, o = yield e.intrinsicDevice(); if (!this.isMediaStreamReusableByDeviceId(null === (t = this.activeDevices.video) || void 0 === t ? void 0 : t.stream, o)) return this.logger.info("video transform device needs new intrinsic device"), r && i.onOutputStreamDisconnect(), this.chosenVideoTransformDevice = e, this.activeDevices.video = null, yield this.chooseInputIntrinsicDevice("video", o), this.logger.info("apply processors to transform"), void (yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream)); this.chosenVideoTransformDevice = e, this.logger.info("video transform device uses previous stream"), this.logger.info("apply processors to transform"), yield e.transformStream(this.activeDevices.video.stream) })) } startVideoInput(e) { return r(this, void 0, void 0, (function* () { return yield this.videoInputTaskQueue.add((() => this.startVideoInputTask(e))) })) } startVideoInputTask(e) { return r(this, void 0, void 0, (function* () { if (e) try { return y.isVideoTransformDevice(e) ? (this.logger.info(`Choosing video transform device ${e}`), yield this.chooseVideoTransformInputDevice(e), this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream), this.chosenVideoTransformDevice.outputMediaStream) : (this.chosenVideoInputIsTransformDevice() && (this.chosenVideoTransformDevice.onOutputStreamDisconnect(), this.chosenVideoTransformDevice = null), yield this.chooseInputIntrinsicDevice("video", e), this.trace("startVideoInputDevice", e), this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream), this.activeDevices.video.stream) } catch (e) { throw e } else this.logger.error("Invalid video input device") })) } stopVideoInput() { return r(this, void 0, void 0, (function* () { return this.videoInputTaskQueue.add((() => this.stopVideoInputTask())) })) } stopVideoInputTask() { return r(this, void 0, void 0, (function* () { try { if (this.chosenVideoInputIsTransformDevice()) return void this.releaseVideoTransformStream(); this.stopTracksAndRemoveCallbacks("video") } finally { this.watchForDeviceChangesIfNecessary(), this.publishVideoInputDidChangeEvent(void 0) } })) } chooseAudioOutput(e) { return r(this, void 0, void 0, (function* () { this.audioOutputDeviceId = e, this.watchForDeviceChangesIfNecessary(); const t = this.deviceInfoFromDeviceId("audiooutput", this.audioOutputDeviceId); this.publishAudioOutputDidChangeEvent(t), this.trace("chooseAudioOutput", e, null) })) } addDeviceChangeObserver(e) { this.logger.info("adding device change observer"), this.deviceChangeObservers.add(e), this.watchForDeviceChangesIfNecessary(), this.trace("addDeviceChangeObserver") } removeDeviceChangeObserver(e) { this.logger.info("removing device change observer"), this.deviceChangeObservers.delete(e), this.watchForDeviceChangesIfNecessary(), this.trace("removeDeviceChangeObserver") } createAnalyserNodeForAudioInput() { var e, t; if (!this.activeDevices.audio) return null; const i = null === (t = null === (e = this.transform) || void 0 === e ? void 0 : e.nodes) || void 0 === t ? void 0 : t.end; if (i) { const e = i.context.createAnalyser(); return e.removeOriginalInputs = () => { try { i.disconnect(e) } catch (e) { } }, i.connect(e), e } return this.createAnalyserNodeForRawAudioInput() } createAnalyserNodeForRawAudioInput() { return this.activeDevices.audio ? this.createAnalyserNodeForStream(this.activeDevices.audio.stream) : null } createAnalyserNodeForStream(e) { const t = w.getAudioContext(), i = t.createAnalyser(), r = t.createMediaStreamSource(e); return r.connect(i), this.trace("createAnalyserNodeForAudioInput"), i.removeOriginalInputs = () => { try { r.disconnect(i) } catch (e) { } }, i } startVideoPreviewForVideoInput(e) { if (!this.activeDevices.video) return this.logger.warn("cannot bind video preview since video input device has not been chosen"), void this.trace("startVideoPreviewForVideoInput", e.id); l.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice ? this.chosenVideoTransformDevice.outputMediaStream : this.activeDevices.video.stream, e, !0), this.trace("startVideoPreviewForVideoInput", e.id) } stopVideoPreviewForVideoInput(e) { l.default.disconnectVideoStreamFromVideoElement(e, !1), this.trace("stopVideoPreviewForVideoInput", e.id) } setDeviceLabelTrigger(e) { if (this.deviceInfoCache) for (const e of this.deviceInfoCache) if (!e.label) { this.deviceInfoCache = null; break } this.deviceLabelTrigger = e, this.trace("setDeviceLabelTrigger") } mixIntoAudioInput(e) { let t = null; return this.useWebAudio ? (t = w.getAudioContext().createMediaStreamSource(e), t.connect(this.getMediaStreamOutputNode())) : this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"), this.trace("mixIntoAudioInput", e.id), t } chooseVideoInputQuality(e, t, i) { const r = this.browserBehavior.requiresResolutionAlignment(e, t); this.videoInputQualitySettings = new v.default(r[0], r[1], i) } getVideoInputQualitySettings() { return this.videoInputQualitySettings } acquireAudioInputStream() { return r(this, void 0, void 0, (function* () { return this.activeDevices.audio || (this.logger.info("No audio device chosen, creating empty audio device"), yield this.startAudioInput(null)), this.useWebAudio ? this.getMediaStreamDestinationNode().stream : this.activeDevices.audio.stream })) } acquireVideoInputStream() { return r(this, void 0, void 0, (function* () { if (!this.activeDevices.video) throw new Error("No video device chosen"); return this.chosenVideoInputIsTransformDevice() ? this.chosenVideoTransformDevice.outputMediaStream : this.activeDevices.video.stream })) } acquireDisplayInputStream(e) { return r(this, void 0, void 0, (function* () { throw new Error("unsupported") })) } releaseAudioTransformStream() { this.logger.info("Stopping audio track for Web Audio graph"), this.stopTracksAndRemoveCallbacks("audio"), this.logger.info("Removing audio transform, if there is one."), this.removeTransform(), this.audioInputSourceNode && (this.audioInputSourceNode.disconnect(), this.audioInputSourceNode = void 0), this.audioInputDestinationNode && (this.audioInputDestinationNode.disconnect(), this.audioInputDestinationNode = void 0) } releaseVideoTransformStream() { this.logger.info("Stopping video track for transform"), this.stopTracksAndRemoveCallbacks("video"), this.logger.info("Disconnecting video transform"), this.chosenVideoTransformDevice.onOutputStreamDisconnect(), this.chosenVideoTransformDevice = null } stopTracksAndRemoveCallbacks(e) { const t = this.activeDevices[e]; if (!t) return; const i = t.endedCallback, r = t.trackMuteCallback, o = t.trackUnmuteCallback; for (const n of t.stream.getTracks()) n.stop(), i && n.removeEventListener("ended", i), r && n.removeEventListener("mute", r), o && n.removeEventListener("unmute", o), delete t.endedCallback, delete t.trackMuteCallback, delete t.trackUnmuteCallback, delete this.activeDevices[e] } chosenVideoInputIsTransformDevice() { return !!this.chosenVideoTransformDevice } muteLocalAudioInputStream() { this.toggleLocalAudioInputStream(!1) } unmuteLocalAudioInputStream() { this.toggleLocalAudioInputStream(!0) } toggleLocalAudioInputStream(e) { var t; let i = this.activeDevices.audio; if (this.useWebAudio && (i = this.getMediaStreamDestinationNode()), i) { for (const t of i.stream.getTracks()) t.enabled !== e && (t.enabled = e); this.muted !== !e && (this.muted = !e, null === (t = this.transform) || void 0 === t || t.device.mute(this.muted)) } } static getIntrinsicDeviceId(e) { if (!e) return; if ("string" == typeof e) return e; if (e.id) return e.id; const t = e.deviceId; if (!t) return; if ("string" == typeof t || Array.isArray(t)) return t; const i = t; return "string" == typeof i.exact || Array.isArray(i.exact) ? i.exact : void 0 } static createEmptyAudioDevice() { return w.synthesizeAudioDevice(0) } static synthesizeAudioDevice(e) { const t = w.getAudioContext(), i = t.createMediaStreamDestination(); if (e) { const r = t.createGain(); r.gain.value = .1, r.connect(i); const o = t.createOscillator(); o.frequency.value = e, o.connect(r), o.start() } else { const e = t.createBufferSource(); try { e.buffer = t.createBuffer(1, 5 * t.sampleRate, t.sampleRate) } catch (i) { if (!i || "NotSupportedError" !== i.name) throw i; e.buffer = t.createBuffer(1, 5 * w.defaultSampleRate, w.defaultSampleRate) } e.buffer.getChannelData(0)[0] = 3e-4, e.loop = !0, e.connect(i), e.start() } return i.stream } listDevicesOfKind(e, t) { return r(this, void 0, void 0, (function* () { return !t && null !== this.deviceInfoCache && this.isWatchingForDeviceChanges() || (yield this.updateDeviceInfoCacheFromBrowser()), this.listCachedDevicesOfKind(e) })) } updateDeviceInfoCacheFromBrowser() { return r(this, void 0, void 0, (function* () { if ("undefined" == typeof MediaDeviceInfo) return void (this.deviceInfoCache = []); let e = yield navigator.mediaDevices.enumerateDevices(), t = !0; for (const i of e) if (!i.label) { t = !1; break } if (!t) try { this.logger.info("attempting to trigger media device labels since they are hidden"); const t = yield this.deviceLabelTrigger(); e = yield navigator.mediaDevices.enumerateDevices(); for (const e of t.getTracks()) e.stop() } catch (e) { this.logger.info("unable to get media device labels") } this.logger.debug(`Update device info cache with devices: ${JSON.stringify(e)}`), this.deviceInfoCache = e })) } listCachedDevicesOfKind(e) { const t = []; if (this.deviceInfoCache) for (const i of this.deviceInfoCache) i.kind === e && t.push(i); return t } handleDeviceChange() { return r(this, void 0, void 0, (function* () { if (null === this.deviceInfoCache) return; if (this.alreadyHandlingDeviceChange) return void s.default.nextTick((() => { this.handleDeviceChange() })); this.alreadyHandlingDeviceChange = !0; const e = this.listCachedDevicesOfKind("audioinput"), t = this.listCachedDevicesOfKind("videoinput"), i = this.listCachedDevicesOfKind("audiooutput"); yield this.updateDeviceInfoCacheFromBrowser(); const r = this.listCachedDevicesOfKind("audioinput"), o = this.listCachedDevicesOfKind("videoinput"), n = this.listCachedDevicesOfKind("audiooutput"); this.forEachObserver((s => { this.areDeviceListsEqual(e, r) || d.Maybe.of(s.audioInputsChanged).map((e => e.bind(s)(r))), this.areDeviceListsEqual(t, o) || d.Maybe.of(s.videoInputsChanged).map((e => e.bind(s)(o))), this.areDeviceListsEqual(i, n) || d.Maybe.of(s.audioOutputsChanged).map((e => e.bind(s)(n))) })), this.alreadyHandlingDeviceChange = !1 })) } handleDeviceStreamEnded(e, t) { return r(this, void 0, void 0, (function* () { try { "audio" === e ? (this.logger.warn("Audio input device which was active is no longer available, resetting to null device"), yield this.startAudioInput(null)) : (this.logger.warn("Video input device which was active is no longer available, stopping video"), yield this.stopVideoInput()) } catch (e) { this.logger.error("Failed to choose null device after stream ended.") } "audio" === e ? this.forEachObserver((e => { d.Maybe.of(e.audioInputStreamEnded).map((i => i.bind(e)(t))) })) : this.forEachObserver((e => { d.Maybe.of(e.videoInputStreamEnded).map((i => i.bind(e)(t))) })) })) } forEachObserver(e) { for (const t of this.deviceChangeObservers) s.default.nextTick((() => { this.deviceChangeObservers.has(t) && e(t) })) } forEachMediaStreamBrokerObserver(e) { for (const t of this.mediaStreamBrokerObservers) e(t) } areDeviceListsEqual(e, t) { return JSON.stringify(e.map((e => JSON.stringify(e))).sort()) === JSON.stringify(t.map((e => JSON.stringify(e))).sort()) } intrinsicDeviceAsMediaStream(e) { return e && e.id ? e : null } hasSameMediaStreamId(e, t, i) { var r, o, n, s; let a; return "audio" === e ? (a = null == i ? void 0 : i.audio.streamId, !!a && a === (null === (o = null === (r = t.constraints) || void 0 === r ? void 0 : r.audio) || void 0 === o ? void 0 : o.streamId)) : (a = null == i ? void 0 : i.video.streamId, !!a && a === (null === (s = null === (n = null == t ? void 0 : t.constraints) || void 0 === n ? void 0 : n.video) || void 0 === s ? void 0 : s.streamId)) } hasSameGroupId(e, t, i) { if ("" === e) return !0; const r = w.getIntrinsicDeviceId(i); return this.logger.debug(`Checking deviceIds ${r} of type ${typeof r} with groupId ${e}`), "string" == typeof r && e === this.getGroupIdFromDeviceId(t, r) } getGroupIdFromDeviceId(e, t) { if (null !== this.deviceInfoCache) { const i = this.listCachedDevicesOfKind(`${e}input`).find((e => e.deviceId === t)); if (i && i.groupId) return this.logger.debug(`GroupId of deviceId ${t} found in cache is ${i.groupId}`), i.groupId } return this.logger.debug(`GroupId of deviceId ${t} found in cache is empty`), "" } handleGetUserMediaError(e, t) { if (!e) throw new h.default(e); switch (e.name) { case "NotReadableError": case "TrackStartError": throw new m.default(e); case "NotFoundError": case "DevicesNotFoundError": throw new p.default(e); case "NotAllowedError": case "PermissionDeniedError": case "SecurityError": throw t && t < w.permissionDeniedOriginDetectionThresholdMs ? new g.default(e, "Permission denied by browser") : new g.default(e, "Permission denied by user"); case "OverconstrainedError": case "ConstraintNotSatisfiedError": throw new f.default(e); case "TypeError": throw new b.default(e); default: throw new h.default(e) } } matchesDeviceSelection(e, t, i, r) { return !!(i && i.stream.active && (this.hasSameMediaStreamId(e, i, r) || null !== i.groupId && this.hasSameGroupId(i.groupId, e, t))) && (this.logger.debug(`Compare current device constraint ${JSON.stringify(i.constraints)} to proposed constraints ${JSON.stringify(r)}`), i.matchesConstraints(r)) } chooseInputIntrinsicDevice(e, t) { var i, o; return r(this, void 0, void 0, (function* () { const r = this.getMediaStreamConstraints(e, t); if (this.matchesDeviceSelection(e, t, this.activeDevices[e], r)) return void this.logger.info(`reusing existing ${e} input device`); this.activeDevices[e] && this.activeDevices[e].stream && this.stopTracksAndRemoveCallbacks(e); const n = Date.now(), s = new u.default; try { this.logger.info(`requesting new ${e} device with constraint ${JSON.stringify(r)}`); const i = this.intrinsicDeviceAsMediaStream(t); "audio" === e && null === t ? (s.stream = w.createEmptyAudioDevice(), s.constraints = null) : i ? (this.logger.info(`using media stream ${i.id} for ${e} device`), s.stream = i, s.constraints = r) : (s.stream = yield navigator.mediaDevices.getUserMedia(r), s.constraints = r), yield this.handleNewInputDevice(e, s) } catch (a) { const d = this.getErrorMessage(a); "audio" === e ? null === (i = this.eventController) || void 0 === i || i.publishEvent("audioInputFailed", { audioInputErrorMessage: d }) : null === (o = this.eventController) || void 0 === o || o.publishEvent("videoInputFailed", { videoInputErrorMessage: d }), this.logger.error(`failed to get ${e} device for constraints ${JSON.stringify(r)}: ${d}`); let l = !0; if (a && "constraint" in a && (this.logger.error(`Over-constrained by constraint: ${a.constraint}`), this.useMediaConstraintsFallback)) { const i = this.getMediaStreamConstraints(e, t, !0), o = JSON.stringify(i); if (o !== JSON.stringify(r)) { this.logger.info(`retry requesting new ${e} device with minimal constraint ${o}`); try { s.stream = yield navigator.mediaDevices.getUserMedia(i), s.constraints = i, yield this.handleNewInputDevice(e, s), l = !1 } catch (t) { this.logger.error(`failed to get ${e} device for constraints ${o}: ${this.getErrorMessage(t)}`) } } } if (l) { if ("audio" === e) { this.logger.info(`choosing null ${e} device instead`); try { s.stream = w.createEmptyAudioDevice(), s.constraints = null, yield this.handleNewInputDevice(e, s) } catch (t) { this.logger.error(`failed to choose null ${e} device. ${t.name}: ${t.message}`) } } this.handleGetUserMediaError(a, Date.now() - n) } } finally { this.watchForDeviceChangesIfNecessary() } })) } getErrorMessage(e) { return e ? e.name && e.message ? `${e.name}: ${e.message}` : e.name ? e.name : e.message ? e.message : "UnknownError" : "UnknownError" } handleNewInputDevice(e, t) { var i; return r(this, void 0, void 0, (function* () { this.logger.info(`got ${e} device for constraints ${JSON.stringify(t.constraints)}`); const r = null === (i = this.getMediaTrackSettings(t.stream)) || void 0 === i ? void 0 : i.deviceId; t.groupId = r ? this.getGroupIdFromDeviceId(e, r) : "", this.activeDevices[e] = t, this.logger.debug(`Set activeDevice to ${JSON.stringify(t)}`), this.watchForDeviceChangesIfNecessary(); const o = t.stream.getTracks()[0]; if (o && (t.endedCallback = () => { this.activeDevices[e] && this.activeDevices[e].stream === t.stream && (this.handleDeviceStreamEnded(e, r), delete t.endedCallback) }, o.addEventListener("ended", t.endedCallback, { once: !0 })), "audio" === e) { const e = t.stream.getAudioTracks()[0]; if (e) { const i = e.getSettings().deviceId || t.stream; t.trackMuteCallback = () => { this.mediaStreamMuteObserver(i, !0) }, t.trackUnmuteCallback = () => { this.mediaStreamMuteObserver(i, !1) }, e.addEventListener("mute", t.trackMuteCallback, { once: !1 }), e.addEventListener("unmute", t.trackUnmuteCallback, { once: !1 }), this.logger.debug("Notifying mute state after selection"), e.muted ? t.trackMuteCallback() : t.trackUnmuteCallback() } } })) } calculateMediaStreamConstraints(e, t, i, r) { if (r && 1 === this.listCachedDevicesOfKind(`${e}input`).length) return !0; const o = {}; return this.browserBehavior.requiresNoExactMediaStreamConstraints() ? o.deviceId = t : o.deviceId = { exact: t }, i && (o.groupId = i), r ? o : "video" === e ? (o.width = { ideal: this.videoInputQualitySettings.videoWidth }, o.height = { ideal: this.videoInputQualitySettings.videoHeight }, o.frameRate = { ideal: this.videoInputQualitySettings.videoFrameRate }, o) : (this.supportSampleRateConstraint() && (o.sampleRate = { ideal: w.defaultSampleRate }), this.supportSampleSizeConstraint() && (o.sampleSize = { ideal: w.defaultSampleSize }), this.supportChannelCountConstraint() && (o.channelCount = { ideal: w.defaultChannelCount }), Object.assign({ echoCancellation: !0, googEchoCancellation: !0, googEchoCancellation2: !0, googAutoGainControl: !0, googAutoGainControl2: !0, googNoiseSuppression: !0, googNoiseSuppression2: !0, googHighpassFilter: !0 }, o)) } getMediaStreamConstraintsFromTrackConstraints(e, t) { return "audio" === e ? { audio: t } : { video: t } } getMediaStreamConstraints(e, t, i = !1) { let r = {}; if (!t) return null; const o = this.intrinsicDeviceAsMediaStream(t); if (o) return r.streamId = o.id, this.getMediaStreamConstraintsFromTrackConstraints(e, r); if ("string" == typeof t) { let o = ""; return this.browserBehavior.requiresGroupIdMediaStreamConstraints() && (null !== this.deviceInfoCache ? o = this.getGroupIdFromDeviceId(e, t) : this.logger.error("Device cache is not populated. Please make sure to call list devices first")), r = this.calculateMediaStreamConstraints(e, t, o, i), this.getMediaStreamConstraintsFromTrackConstraints(e, r) } return function (e) { return "object" == typeof e && "deviceId" in e && "groupId" in e && "kind" in e && "label" in e }(t) ? (r = this.calculateMediaStreamConstraints(e, t.deviceId, t.groupId, i), this.getMediaStreamConstraintsFromTrackConstraints(e, r)) : (r = t, this.getMediaStreamConstraintsFromTrackConstraints(e, r)) } deviceInfoFromDeviceId(e, t) { if (null === this.deviceInfoCache) return null; for (const i of this.deviceInfoCache) if (i.kind === e && i.deviceId === t) return i; return null } hasAppliedTransform() { return !!this.transform } isMediaStreamReusableByDeviceId(e, t) { if (!e || !e.active || !t) return !1; if (t.id) return e.id === t.id; const i = this.getMediaTrackSettings(e); if (!i.deviceId) return !1; const r = w.getIntrinsicDeviceId(t); return "string" == typeof r && i.deviceId === r } getMediaTrackSettings(e) { var t; return null === (t = e.getTracks()[0]) || void 0 === t ? void 0 : t.getSettings() } reconnectAudioInputs() { if (!this.audioInputSourceNode) return; this.audioInputSourceNode.disconnect(); const e = this.getMediaStreamOutputNode(); this.audioInputSourceNode.connect(e) } setTransform(e, t) { var i, r; null === (r = null === (i = this.transform) || void 0 === i ? void 0 : i.nodes) || void 0 === r || r.end.disconnect(), this.transform = { nodes: t, device: e }; const o = null == t ? void 0 : t.end, n = this.getMediaStreamDestinationNode(); this.logger.debug(`Connecting transform node ${o} to destination ${n}.`), null == o || o.connect(n), this.reconnectAudioInputs() } removeTransform() { var e; const t = this.transform; if (t) return null === (e = this.transform.nodes) || void 0 === e || e.end.disconnect(), this.transform = void 0, this.reconnectAudioInputs(), t } attachAudioInputStreamToAudioContext(e) { var t; null === (t = this.audioInputSourceNode) || void 0 === t || t.disconnect(), this.audioInputSourceNode = w.getAudioContext().createMediaStreamSource(e); const i = this.getMediaStreamOutputNode(); this.audioInputSourceNode.connect(i) } getMediaStreamDestinationNode() { return this.audioInputDestinationNode || (this.audioInputDestinationNode = w.getAudioContext().createMediaStreamDestination()), this.audioInputDestinationNode } getMediaStreamOutputNode() { var e, t; return (null === (t = null === (e = this.transform) || void 0 === e ? void 0 : e.nodes) || void 0 === t ? void 0 : t.start) || this.getMediaStreamDestinationNode() } static getAudioContext() { if (!w.audioContext) { const e = {}; navigator.mediaDevices.getSupportedConstraints().sampleRate && (e.sampleRate = w.defaultSampleRate), w.audioContext = new (window.AudioContext || window.webkitAudioContext)(e) } return w.audioContext } static closeAudioContext() { if (w.audioContext) try { w.audioContext.close() } catch (e) { } w.audioContext = null } addMediaStreamBrokerObserver(e) { this.mediaStreamBrokerObservers.add(e) } removeMediaStreamBrokerObserver(e) { this.mediaStreamBrokerObservers.delete(e) } publishVideoInputDidChangeEvent(e) { this.forEachMediaStreamBrokerObserver((t => { t.videoInputDidChange && t.videoInputDidChange(e) })), this.pushVideoMeetingStateForPermissions(e) } publishAudioInputDidChangeEvent(e) { this.forEachMediaStreamBrokerObserver((t => { t.audioInputDidChange && t.audioInputDidChange(e) })), this.pushAudioMeetingStateForPermissions(e) } publishAudioOutputDidChangeEvent(e) { this.forEachMediaStreamBrokerObserver((t => { t.audioOutputDidChange && t.audioOutputDidChange(e) })) } supportSampleRateConstraint() { return this.useWebAudio && !!navigator.mediaDevices.getSupportedConstraints().sampleRate } supportSampleSizeConstraint() { return this.useWebAudio && !!navigator.mediaDevices.getSupportedConstraints().sampleSize } supportChannelCountConstraint() { return this.useWebAudio && !!navigator.mediaDevices.getSupportedConstraints().channelCount } trace(e, t, i) { let r = `API/DefaultDeviceController/${e}`; void 0 !== t && (r += ` ${JSON.stringify(t)}`), void 0 !== i && (r += ` -> ${JSON.stringify(i)}`), this.logger.info(r) } } t.default = w, w.permissionDeniedOriginDetectionThresholdMs = 500, w.defaultVideoWidth = 960, w.defaultVideoHeight = 540, w.defaultVideoFrameRate = 15, w.defaultSampleRate = 48e3, w.defaultSampleSize = 16, w.defaultChannelCount = 1, w.audioContext = null }, 4297: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.groupId = "" } matchesConstraints(e) { return JSON.stringify(this.constraints) === JSON.stringify(e) } } }, 2503: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i extends Error { constructor(e, t) { super(t || "Error fetching device."), this.cause = e, this.name = "GetUserMediaError" } } t.default = i }, 1014: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.NoOpDeviceControllerWithEventController = void 0; const o = i(3120); class n extends o.default { constructor(e) { super(), this.destroyed = !1 } destroy() { return r(this, void 0, void 0, (function* () { this.destroyed = !0 })) } listAudioInputDevices() { return Promise.resolve([]) } listVideoInputDevices() { return Promise.resolve([]) } listAudioOutputDevices() { return Promise.resolve([]) } startAudioInput(e) { return Promise.reject() } stopAudioInput() { return Promise.resolve() } startVideoInput(e) { return Promise.reject() } stopVideoInput() { return Promise.resolve() } chooseAudioOutput(e) { return Promise.reject() } addDeviceChangeObserver(e) { } removeDeviceChangeObserver(e) { } createAnalyserNodeForAudioInput() { return null } startVideoPreviewForVideoInput(e) { } stopVideoPreviewForVideoInput(e) { } setDeviceLabelTrigger(e) { } mixIntoAudioInput(e) { return null } chooseVideoInputQuality(e, t, i) { } getVideoInputQualitySettings() { return null } } t.default = n, t.NoOpDeviceControllerWithEventController = class extends n { constructor(e) { super(), this.eventController = e } } }, 4465: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2503); class o extends r.default { constructor(e) { super(e), this.name = "NotFoundError" } } t.default = o }, 1344: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2503); class o extends r.default { constructor(e) { super(e), this.name = "NotReadableError" } } t.default = o }, 5459: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2503); class o extends r.default { constructor(e, t) { super(e), this.constraint = t, this.name = "OverconstrainedError" } } t.default = o }, 5536: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2503); class o extends r.default { constructor(e, t) { super(e, t), this.name = "PermissionDeniedError" } } t.default = o }, 3981: function (e, t) { "use strict"; var i = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e) { this.inner = e } mute(e) { return i(this, void 0, void 0, (function* () { })) } stop() { var e; return i(this, void 0, void 0, (function* () { null === (e = this.node) || void 0 === e || e.disconnect() })) } intrinsicDevice() { return i(this, void 0, void 0, (function* () { return this.inner })) } createAudioNode(e) { var t; return i(this, void 0, void 0, (function* () { return null === (t = this.node) || void 0 === t || t.disconnect(), this.node = yield this.createSingleAudioNode(e), { start: this.node, end: this.node } })) } } }, 9485: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2503); class o extends r.default { constructor(e) { super(e), this.name = "TypeError" } } t.default = o }, 8033: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i) { this.videoWidth = e, this.videoHeight = t, this.videoFrameRate = i } } }, 4153: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.isVideoTransformDevice = void 0, t.isVideoTransformDevice = function (e) { return !!e && "object" == typeof e && "transformStream" in e && "stop" in e && "intrinsicDevice" in e } }, 8357: function (e, t) { "use strict"; var i = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t) { if (this.devicePixelRatioSource = e, this.observerQueue = new Set, this.mediaQueryListener = () => { this.observerQueue.forEach((e => { e.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio()) })) }, "undefined" == typeof window) return; const i = matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`); "function" == typeof i.addEventListener ? (i.addEventListener("change", this.mediaQueryListener), this.mediaQueryList = i) : "function" == typeof i.addListener ? (i.addListener(this.mediaQueryListener), this.mediaQueryList = i) : t.warn("ignoring DefaultDevicePixelRatioMonitor") } destroy() { return i(this, void 0, void 0, (function* () { this.mediaQueryList && ("function" == typeof this.mediaQueryList.addEventListener ? this.mediaQueryList.removeEventListener("change", this.mediaQueryListener) : this.mediaQueryList.removeListener(this.mediaQueryListener)), delete this.mediaQueryListener, this.observerQueue.clear() })) } registerObserver(e) { this.observerQueue.add(e), e.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio()) } removeObserver(e) { this.observerQueue.delete(e) } } }, 5174: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { devicePixelRatio() { return "undefined" != typeof window && window && window.devicePixelRatio ? window.devicePixelRatio : 1 } } }, 6388: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }, o = this && this.__rest || function (e, t) { var i = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (i[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var o = 0; for (r = Object.getOwnPropertySymbols(e); o < r.length; o++)t.indexOf(r[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[o]) && (i[r[o]] = e[r[o]]) } return i }; Object.defineProperty(t, "__esModule", { value: !0 }); const n = i(6467), s = i(2378), a = i(1971), d = i(7442); class l { constructor(e, t, i, n, s) { this.buffer = [], this.bufferSize = 0, this.maxBufferItemCapacityBytes = 0, this.ingestionEventSize = 0, this.flushIntervalMs = 0, this.flushSize = 0, this.failedIngestionEvents = [], this.retryCountLimit = 15, this.lock = !1, this.cancellableEvents = new Map, this.attributesToFilter = ["externalUserId", "externalMeetingId", "timestampMs"], this.deepCopyCurrentIngestionEvent = e => ({ type: e.type, v: e.v, payloads: [...e.payloads] }), this.sendEvents = () => r(this, void 0, void 0, (function* () { if (this.lock) return; const e = this.getItems(this.flushSize); if (0 === e.length) return; this.lock = !0; const t = this.makeRequestBody(e); let i = !1; const r = Date.now(); "firefox" === this.metadata.browserName.toLowerCase() && this.cancellableEvents.set(r, e); try { this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${t}`); const e = yield this.send(t); if (this.cancellableEvents.delete(r), e.ok) try { const i = yield e.json(); this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${t} message: ${JSON.stringify(i)}`) } catch (e) { this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${e} for events ${t}`) } else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${t} with response status ${e.status}`), i = !0 } catch (e) { i = !0, this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${t} to the ingestion endpoint ${e}`) } finally { this.lock = !1 } i && (this.cancellableEvents.delete(r), this.failedIngestionEvents.push(...e)) })); const d = new a.default(s).getParserResult(), { browserMajorVersion: l } = d, c = o(d, ["browserMajorVersion"]), u = t.toJSON(), { type: h, v: p } = u, m = o(u, ["type", "v"]); this.authenticationToken = t.getAuthenticationToken(), this.metadata = Object.assign(Object.assign({}, c), m), Object.keys(this.metadata).forEach((e => this.attributesToFilter.push(e))), this.type = h, this.v = p, this.ingestionURL = i, this.logger = s, this.importantEvents = new Set(n); const { maxBufferCapacityKb: f, totalBufferItems: g, flushSize: b, flushIntervalMs: v, retryCountLimit: y } = e; this.maxBufferCapacityBytes = 1024 * f, this.totalBufferItems = g, this.maxBufferItemCapacityBytes = Math.round(this.maxBufferCapacityBytes / g), this.flushIntervalMs = v, this.flushSize = b, this.retryCountLimit = y, this.currentIngestionEvent = this.initializeAndGetCurrentIngestionEvent(), this.beaconEventListener = e => this.beaconEventHandler(e), this.addEventListeners() } addEventListeners() { this.beaconEventListener && "window" in i.g && window.addEventListener && "document" in i.g && document.addEventListener && (this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"), window.addEventListener("pagehide", this.beaconEventListener), document.addEventListener("visibilitychange", this.beaconEventListener)) } beaconEventHandler(e) { ("visibilitychange" === e.type && "hidden" === document.visibilityState || "pagehide" === e.type) && (this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"), this.sendBeacon()) } removeEventListeners() { this.beaconEventListener && "window" in i.g && window.removeEventListener && "document" in i.g && document.removeEventListener && (window.removeEventListener("pagehide", this.beaconEventListener), document.removeEventListener("visibilitychange", this.beaconEventListener), this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners")) } start() { var e; this.removeEventListeners(), this.addEventListeners(), null === (e = this.intervalScheduler) || void 0 === e || e.stop(), this.intervalScheduler = new s.default(this.flushIntervalMs), this.intervalScheduler.start((() => this.sendEvents())) } stop() { var e; null === (e = this.intervalScheduler) || void 0 === e || e.stop(), this.intervalScheduler = void 0, this.sendBeacon(), this.removeEventListeners() } addItem(e) { return r(this, void 0, void 0, (function* () { this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(e)}`); const { name: t, ts: i, attributes: r } = e, o = r && this.filterAttributes(r, this.attributesToFilter), n = Object.assign({ name: t, ts: i }, o); this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(n)}`); const s = this.getSize(n); if (s > l.MAX_ITEM_SIZE_BYTES_ALLOWED) throw new Error(`Event Reporting - Item to be added has size ${s} bytes. Item cannot exceed max item size allowed of ${l.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`); if (this.importantEvents.has(t)) return this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(n)}`), void this.sendEventImmediately({ name: t, ts: i, attributes: o }); if (this.isFull()) throw this.logger.warn("Event Reporting - Event buffer is full"), new Error("Buffer full"); if (this.currentIngestionEvent.payloads.push(n), this.ingestionEventSize += s, this.bufferItemThresholdReached(s)) { const e = this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent); this.buffer.push(e), this.bufferSize += this.ingestionEventSize, this.currentIngestionEvent = this.initializeAndGetCurrentIngestionEvent(), this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`) } })) } filterAttributes(e, t) { const i = new Set(t); return Object.keys(e).filter((e => i.has(e))).forEach((t => delete e[t])), e } initializeAndGetCurrentIngestionEvent() { const e = { type: this.type, v: this.v, payloads: [] }; return this.ingestionEventSize = this.getSize(e), e } bufferItemThresholdReached(e) { return e + this.ingestionEventSize >= this.maxBufferItemCapacityBytes || this.currentIngestionEvent.payloads.length === l.MAX_PAYLOAD_ITEMS } getSize(e) { let t = 0; if ("object" == typeof e) for (const [i, r] of Object.entries(e)) t += this.getPrimitiveSize(i), t += this.getSize(r); else t += this.getPrimitiveSize(e); return t } getPrimitiveSize(e) { let t = 0; return "string" == typeof e ? t += 2 * e.length : "number" == typeof e && (t += 8), t } isFull() { return this.bufferSize === this.maxBufferCapacityBytes || this.buffer.length === this.totalBufferItems } isEmpty() { return 0 === this.buffer.length || 0 === this.bufferSize } getItems(e, t = 0) { return this.isEmpty() ? [] : (e = Math.min(this.buffer.length, e + 1), this.buffer.splice(t, e)) } makeBeaconRequestBody(e) { const t = { metadata: this.metadata, events: e, authorization: this.authenticationToken }; return JSON.stringify(t) } makeRequestBody(e) { const t = { metadata: this.metadata, events: e }; return JSON.stringify(t) } sendEventImmediately(e) { return r(this, void 0, void 0, (function* () { this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(e)}`); const { name: t, ts: i, attributes: r } = e, o = { type: this.type, v: this.v, payloads: [Object.assign({ name: t, ts: i }, r)] }; let n = !1, s = null; const a = this.makeRequestBody([o]); try { if (s = yield this.send(a), s.ok) { try { const e = yield s.json(); this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${a}, message: ${JSON.stringify(e)}`) } catch (e) { this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${e} for event ${a}`) } return } this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${a} with response status ${s.status}`), n = !0 } catch (e) { this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${a} to the ingestion endpoint ${e}.`), n = !0; try { if ("firefox" === this.metadata.browserName.toLowerCase()) { const e = this.makeBeaconRequestBody([o]); this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${e}`), n = !navigator.sendBeacon(`${this.ingestionURL}?beacon=1`, e) } } catch (e) { this.logger.warn(`Event Reporting - Error sending beacon for an important event ${a}`), n = !0 } } n && (this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${a}`), this.failedIngestionEvents.push(o)) })) } send(e) { return r(this, void 0, void 0, (function* () { const t = new n.default(l.RETRY_FIXED_BACKOFF_WAIT_MS, l.RETRY_SHORT_BACKOFF_MS, l.RETRY_LONG_BACKOFF_MS); try { let i = 0; for (; i < this.retryCountLimit;) { const r = yield fetch(this.ingestionURL, { method: "POST", headers: { Authorization: `Bearer ${this.authenticationToken}` }, body: e }); if (r.ok || !l.SENDING_FAILURE_CODES.has(r.status)) return r; if (this.logger.warn(`Will retry sending failure for ${e} due to status code ${r.status}.`), i++, i < this.retryCountLimit) { const e = t.nextBackoffAmountMs(); yield d.wait(e) } } if (i === this.retryCountLimit) throw new Error(`Retry count limit reached for ${e}`) } catch (e) { throw e } })) } sendBeacon() { return r(this, void 0, void 0, (function* () { const e = this.buffer; if (this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(e)}`), this.buffer = [], this.currentIngestionEvent.payloads.length > 0) { const t = this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent); e.push(t), this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(t)}`), this.currentIngestionEvent = this.initializeAndGetCurrentIngestionEvent() } if (this.failedIngestionEvents.length > 0) { const t = this.failedIngestionEvents.map((e => this.deepCopyCurrentIngestionEvent(e))); e.push(...t), this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(t)}`), this.failedIngestionEvents = [] } if (this.cancellableEvents.size > 0 && (this.cancellableEvents.forEach((t => { e.push(...t), this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(t)}`) })), this.cancellableEvents.clear()), 0 === e.length) return; const t = this.makeBeaconRequestBody(e); this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${t}`); try { navigator.sendBeacon(`${this.ingestionURL}?beacon=1`, t) || this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${t}`) } catch (e) { this.logger.warn(`Event Reporting - Sending beacon data ${t} failed with error ${e}`) } })) } reset() { this.maxBufferCapacityBytes = 0, this.totalBufferItems = 0, this.buffer = [], this.bufferSize = 0, this.maxBufferItemCapacityBytes = 0, this.ingestionEventSize = 0, this.flushIntervalMs = 0, this.flushSize = 0, this.failedIngestionEvents = [], this.lock = !1, this.beaconEventListener = void 0, this.cancellableEvents.clear() } destroy() { return r(this, void 0, void 0, (function* () { this.stop(), this.reset() })) } } t.default = l, l.SENDING_FAILURE_CODES = new Set([408, 429, 500, 502, 503, 504]), l.RETRY_FIXED_BACKOFF_WAIT_MS = 0, l.RETRY_SHORT_BACKOFF_MS = 1e3, l.RETRY_LONG_BACKOFF_MS = 15e3, l.MAX_PAYLOAD_ITEMS = 2, l.MAX_ITEM_SIZE_BYTES_ALLOWED = 3e3 }, 7004: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e = 5e3, t = 2, i = 64, r = 100, o = 15) { this.flushIntervalMs = e, this.flushSize = t, this.maxBufferCapacityKb = i, this.totalBufferItems = r, this.retryCountLimit = o } } }, 8672: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(6353), n = i(9457), s = i(299), a = i(9598), d = i(2267), l = i(996), c = i(8495), u = i(1231); class h { constructor(e, t, i) { var r, n, s, a, d, l, c; this.meetingHistoryStates = [], this.observerSet = new Set, this.destroyed = !1, this.logger = t, this.configuration = e, this.setupEventReporter(e, t, i); try { this.parserResult = navigator && navigator.userAgent ? new o.UAParser(navigator.userAgent).getResult() : null } catch (e) { this.logger.error(e.message) } this.browserMajorVersion = (null === (s = null === (n = null === (r = this.parserResult) || void 0 === r ? void 0 : r.browser) || void 0 === n ? void 0 : n.version) || void 0 === s ? void 0 : s.split(".")[0]) || h.UNAVAILABLE, this.browserName = (null === (a = this.parserResult) || void 0 === a ? void 0 : a.browser.name) || h.UNAVAILABLE, this.browserVersion = (null === (d = this.parserResult) || void 0 === d ? void 0 : d.browser.version) || h.UNAVAILABLE, this.deviceName = [(null === (l = this.parserResult) || void 0 === l ? void 0 : l.device.vendor) || "", (null === (c = this.parserResult) || void 0 === c ? void 0 : c.device.model) || ""].join(" ").trim() || h.UNAVAILABLE } addObserver(e) { this.observerSet.add(e) } removeObserver(e) { this.observerSet.delete(e) } forEachObserver(e) { for (const t of this.observerSet) l.default.nextTick((() => { this.observerSet.has(t) && e(t) })) } publishEvent(e, t) { return r(this, void 0, void 0, (function* () { const i = Date.now(); this.meetingHistoryStates.push({ name: e, timestampMs: i }); const r = Object.freeze(Object.assign(this.getAttributes(i), t)); this.forEachObserver((t => { t.eventDidReceive(e, r) })), this.reportEvent(e, i, t) })) } reportEvent(e, t, i) { var o; return r(this, void 0, void 0, (function* () { let r; try { i && (r = u.default(i)), yield null === (o = this.eventReporter) || void 0 === o ? void 0 : o.reportEvent(t, e, r) } catch (e) { this.logger.error(`Error reporting event ${e}`) } })) } setupEventReporter(e, t, i) { if (i) this._eventReporter = i; else if (e.urls) { const i = e.urls.eventIngestionURL; if (i) { this.logger.info("Event ingestion URL is present in the configuration"); const { meetingId: r, credentials: { attendeeId: o, joinToken: n } } = e, l = new d.default(r, o, n), c = new s.default(l, i); this._eventReporter = new a.default(c, t) } } } getAttributes(e) { var t, i; return { attendeeId: this.configuration.credentials.attendeeId, browserMajorVersion: this.browserMajorVersion, browserName: this.browserName, browserVersion: this.browserVersion, deviceName: this.deviceName, externalMeetingId: "string" == typeof this.configuration.externalMeetingId ? this.configuration.externalMeetingId : "", externalUserId: this.configuration.credentials.externalUserId, meetingHistory: this.meetingHistoryStates, meetingId: this.configuration.meetingId, osName: (null === (t = this.parserResult) || void 0 === t ? void 0 : t.os.name) || h.UNAVAILABLE, osVersion: (null === (i = this.parserResult) || void 0 === i ? void 0 : i.os.version) || h.UNAVAILABLE, sdkVersion: c.default.sdkVersion, sdkName: c.default.sdkName, timestampMs: e } } get eventReporter() { return this._eventReporter } destroy() { return r(this, void 0, void 0, (function* () { n.isDestroyable(this.eventReporter) && (yield this.eventReporter.destroy()), this.logger = void 0, this.configuration = void 0, this._eventReporter = void 0, this.destroyed = !0 })) } } t.default = h, h.UNAVAILABLE = "Unavailable" }, 1231: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = e => { const t = {}; for (const [i, r] of Object.entries(e)) if (null != r && "" !== r) { if ("number" != typeof r && "string" != typeof r) throw new TypeError("Unhandled type received while flattening attributes."); t[i] = r } return t } }, 299: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(7004); t.default = class { constructor(e, t, i = new r.default) { this.eventsClientConfiguration = e, this.ingestionURL = t, this.eventBufferConfiguration = i } } }, 9598: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9457), n = i(6388); t.default = class { constructor(e, t) { this.reportingEvents = !1, this.importantEvents = ["meetingEnded", "meetingFailed", "meetingStartFailed", "audioInputFailed", "videoInputFailed", "meetingStartSucceeded"], this.destroyed = !1; const { eventsClientConfiguration: i, ingestionURL: r, eventBufferConfiguration: o } = e, { eventsToIgnore: s } = i; this.eventBuffer = new n.default(o, i, r, this.importantEvents, t), this.logger = t, this.eventsToIgnore = s, this.start() } start() { if (!this.reportingEvents) try { this.eventBuffer.start(), this.logger.info("Event reporting started"), this.reportingEvents = !0 } catch (e) { this.logger.error(`Event Reporting - Error starting the event buffer ${e}`) } } stop() { if (this.reportingEvents) try { this.eventBuffer.stop(), this.logger.info("Event reporting stopped"), this.reportingEvents = !1 } catch (e) { this.logger.error(`Event Reporting - Error stopping the event buffer ${e}`) } } reportEvent(e, t, i) { return r(this, void 0, void 0, (function* () { if (this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${e}, ${t}, ${JSON.stringify(i)}`), this.eventsToIgnore.includes(t)) this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${t} event will be ignored as it is in events to ignore`); else try { this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"), yield this.eventBuffer.addItem({ ts: e, name: t, attributes: i }) } catch (e) { this.logger.error(`Event Reporting - Error adding event to buffer ${e}`) } })) } destroy() { return r(this, void 0, void 0, (function* () { this.destroyed = !0, this.stop(), o.isDestroyable(this.eventBuffer) && this.eventBuffer.destroy(), this.eventBuffer = void 0 })) } } }, 8567: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { } reportEvent(e, t, i) { } start() { } stop() { } } }, 2267: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i, r = []) { this.type = "Meet", this.v = 1, this.meetingId = e, this.attendeeId = t, this.eventsToIgnore = r, this.authenticationToken = i } getAuthenticationToken() { return this.authenticationToken } toJSON() { const e = {}; return e.type = this.type, e.v = this.v, e.meetingId = this.meetingId, e.attendeeId = this.attendeeId, e } } }, 2388: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.DefaultEventController = t.DefaultDevicePixelRatioMonitor = t.DefaultDeviceController = t.DefaultContentShareController = t.DefaultBrowserBehavior = t.DefaultAudioVideoFacade = t.DefaultAudioVideoController = t.DefaultAudioMixController = t.DefaultActiveSpeakerPolicy = t.DefaultActiveSpeakerDetector = t.DataMessage = t.CreateSDPTask = t.CreatePeerConnectionTask = t.ContentShareMediaStreamBroker = t.ContentShareConstants = t.ConsoleLogger = t.ConnectionHealthPolicyConfiguration = t.ConnectionHealthData = t.ClientVideoStreamReceivingReport = t.ClientMetricReportMediaType = t.ClientMetricReportDirection = t.ClientMetricReport = t.CleanStoppedSessionTask = t.CleanRestartedSessionTask = t.CheckVideoInputFeedback = t.CheckVideoConnectivityFeedback = t.CheckNetworkUDPConnectivityFeedback = t.CheckNetworkTCPConnectivityFeedback = t.CheckContentShareConnectivityFeedback = t.CheckCameraResolutionFeedback = t.CheckAudioOutputFeedback = t.CheckAudioInputFeedback = t.CheckAudioConnectivityFeedback = t.CanvasVideoFrameBuffer = t.CSPMonitor = t.BitrateParameters = t.BaseTask = t.BaseConnectionHealthPolicy = t.BackgroundReplacementVideoFrameProcessor = t.BackgroundFilterVideoFrameProcessor = t.BackgroundBlurVideoFrameProcessor = t.BackgroundBlurStrength = t.AudioVideoControllerState = t.AudioProfile = t.AudioLogEvent = t.Attendee = t.AttachMediaInputTask = t.AsyncScheduler = t.ApplicationMetadata = t.AllHighestVideoBandwidthPolicy = void 0, t.MeetingSessionCredentials = t.MeetingSessionConfiguration = t.MeetingReadinessCheckerConfiguration = t.MeetingEventsClientConfiguration = t.MediaDeviceProxyHandler = t.Maybe = t.LogLevel = t.Log = t.ListenForVolumeIndicatorsTask = t.LeaveAndReceiveLeaveAckTask = t.JoinAndReceiveIndexTask = t.IntervalScheduler = t.InMemoryJSONEventBuffer = t.GlobalMetricReport = t.GetUserMediaError = t.FullJitterLimitedBackoff = t.FullJitterBackoffFactory = t.FullJitterBackoff = t.FinishGatheringICECandidatesTask = t.EventIngestionConfiguration = t.EventBufferConfiguration = t.DeviceSelection = t.DevicePixelRatioWindowSource = t.DefaultWebSocketAdapter = t.DefaultVolumeIndicatorAdapter = t.DefaultVideoTransformDevice = t.DefaultVideoTileFactory = t.DefaultVideoTileController = t.DefaultVideoTile = t.DefaultVideoStreamIndex = t.DefaultVideoStreamIdSet = t.DefaultVideoFrameProcessorPipeline = t.DefaultVideoCaptureAndEncodeParameter = t.DefaultUserAgentParser = t.DefaultTranscriptionController = t.DefaultTransceiverController = t.DefaultSimulcastUplinkPolicyForContentShare = t.DefaultSimulcastUplinkPolicy = t.DefaultSignalingClient = t.DefaultSigV4 = t.DefaultSessionStateController = t.DefaultReconnectController = t.DefaultRealtimeController = t.DefaultPingPong = t.DefaultModality = t.DefaultMessagingSession = t.DefaultMeetingSession = t.DefaultMeetingReadinessChecker = t.DefaultMeetingEventReporter = t.DefaultMediaDeviceFactory = void 0, t.SendAndReceiveDataMessagesTask = t.SDPMediaSection = t.SDPCandidateType = t.SDP = t.RunnableTask = t.ReconnectionHealthPolicy = t.ReceiveVideoStreamIndexTask = t.ReceiveVideoInputTask = t.ReceiveTURNCredentialsTask = t.ReceiveAudioInputTask = t.RealtimeVolumeIndicator = t.RealtimeState = t.RealtimeAttendeePositionInFrame = t.PromoteToPrimaryMeetingTask = t.PromiseQueue = t.PrefetchOn = t.PermissionDeniedError = t.ParallelGroupTask = t.POSTLogger = t.OverconstrainedError = t.OpenSignalingConnectionTask = t.OnceTask = t.NotReadableError = t.NotFoundError = t.None = t.NoVideoUplinkBandwidthPolicy = t.NoVideoDownlinkBandwidthPolicy = t.NoOpVideoFrameProcessor = t.NoOpVideoElementFactory = t.NoOpTask = t.NoOpMediaStreamBroker = t.NoOpLogger = t.NoOpEventReporter = t.NoOpDeviceController = t.NoOpDebugLogger = t.NoOpAudioVideoController = t.NScaleVideoUplinkBandwidthPolicy = t.MutableVideoPreferences = t.MultiLogger = t.MonitorTask = t.ModelSpecBuilder = t.MessagingSessionConfiguration = t.Message = t.MeetingSessionVideoAvailability = t.MeetingSessionURLs = t.MeetingSessionTURNCredentials = t.MeetingSessionStatusCode = t.MeetingSessionStatus = t.MeetingSessionLifecycleEventCondition = t.MeetingSessionLifecycleEvent = void 0, t.VideoStreamDescription = t.VideoSource = t.VideoQualitySettings = t.VideoPriorityBasedPolicyConfig = t.VideoPriorityBasedPolicy = t.VideoPreferences = t.VideoPreference = t.VideoOnlyTransceiverController = t.VideoLogEvent = t.VideoCodecCapability = t.VideoAdaptiveProbePolicy = t.Versioning = t.UnusableAudioWarningConnectionHealthPolicy = t.TypeError = t.TranscriptionStatusType = t.TranscriptionStatus = t.TranscriptResult = t.TranscriptLanguageWithScore = t.TranscriptItemType = t.TranscriptItem = t.TranscriptEntity = t.TranscriptAlternative = t.Transcript = t.TimeoutTask = t.TimeoutScheduler = t.TaskStatus = t.TargetDisplaySize = t.SubscribeAndReceiveSubscribeAckTask = t.StreamMetricReport = t.Some = t.SingleNodeAudioTransformDevice = t.SimulcastVideoStreamIndex = t.SimulcastTransceiverController = t.SimulcastLayers = t.SimulcastContentShareTransceiverController = t.SignalingClientVideoSubscriptionConfiguration = t.SignalingClientSubscribe = t.SignalingClientJoin = t.SignalingClientEventType = t.SignalingClientEvent = t.SignalingClientConnectionRequest = t.SignalingAndMetricsConnectionMonitor = t.SetRemoteDescriptionTask = t.SetLocalDescriptionTask = t.SessionStateControllerTransitionResult = t.SessionStateControllerState = t.SessionStateControllerDeferPriority = t.SessionStateControllerAction = t.ServerSideNetworkAdaption = t.SerialGroupTask = void 0, t.isVideoTransformDevice = t.isDestroyable = t.isAudioTransformDevice = t.ZLIBTextCompressor = t.WebSocketReadyState = t.WaitForAttendeePresenceTask = t.VoiceFocusTransformDevice = t.VoiceFocusDeviceTransformer = t.VideoTileState = void 0; const r = i(2816); t.AllHighestVideoBandwidthPolicy = r.default; const o = i(8906); t.ApplicationMetadata = o.default; const n = i(996); t.AsyncScheduler = n.default; const s = i(1722); t.AttachMediaInputTask = s.default; const a = i(6943); t.Attendee = a.default; const d = i(7595); t.AudioLogEvent = d.default; const l = i(1545); t.AudioProfile = l.default; const c = i(2757); t.AudioVideoControllerState = c.default; const u = i(795); t.BackgroundBlurStrength = u.default; const h = i(4776); t.BackgroundBlurVideoFrameProcessor = h.default; const p = i(7012); t.BackgroundFilterVideoFrameProcessor = p.default; const m = i(6214); t.BackgroundReplacementVideoFrameProcessor = m.default; const f = i(9591); t.BaseConnectionHealthPolicy = f.default; const g = i(1072); t.BaseTask = g.default; const b = i(1934); t.BitrateParameters = b.default; const v = i(9020); t.CSPMonitor = v.default; const y = i(9874); t.CanvasVideoFrameBuffer = y.default; const w = i(7421); t.CheckAudioConnectivityFeedback = w.default; const S = i(2984); t.CheckAudioInputFeedback = S.default; const x = i(292); t.CheckAudioOutputFeedback = x.default; const k = i(5653); t.CheckCameraResolutionFeedback = k.default; const _ = i(4049); t.CheckContentShareConnectivityFeedback = _.default; const C = i(7735); t.CheckNetworkTCPConnectivityFeedback = C.default; const I = i(8350); t.CheckNetworkUDPConnectivityFeedback = I.default; const T = i(35); t.CheckVideoConnectivityFeedback = T.default; const E = i(1772); t.CheckVideoInputFeedback = E.default; const A = i(6310); t.CleanRestartedSessionTask = A.default; const M = i(8861); t.CleanStoppedSessionTask = M.default; const O = i(7057); t.ClientMetricReport = O.default; const P = i(171); t.ClientMetricReportDirection = P.default; const D = i(7957); t.ClientMetricReportMediaType = D.default; const R = i(2840); t.ClientVideoStreamReceivingReport = R.default; const L = i(2217); t.ConnectionHealthData = L.default; const B = i(2552); t.ConnectionHealthPolicyConfiguration = B.default; const V = i(6108); t.ConsoleLogger = V.default; const F = i(9511); t.ContentShareConstants = F.default; const N = i(3345); t.ContentShareMediaStreamBroker = N.default; const j = i(805); t.CreatePeerConnectionTask = j.default; const U = i(9098); t.CreateSDPTask = U.default; const z = i(3727); t.DataMessage = z.default; const $ = i(601); t.DefaultActiveSpeakerDetector = $.default; const H = i(3360); t.DefaultActiveSpeakerPolicy = H.default; const W = i(443); t.DefaultAudioMixController = W.default; const q = i(483); t.DefaultAudioVideoController = q.default; const K = i(8104); t.DefaultAudioVideoFacade = K.default; const G = i(9297); t.DefaultBrowserBehavior = G.default; const J = i(3265); t.DefaultContentShareController = J.default; const Z = i(9802); t.DefaultDeviceController = Z.default; const Q = i(8357); t.DefaultDevicePixelRatioMonitor = Q.default; const X = i(8672); t.DefaultEventController = X.default; const Y = i(1835); t.DefaultMediaDeviceFactory = Y.default; const ee = i(9598); t.DefaultMeetingEventReporter = ee.default; const te = i(608); t.DefaultMeetingReadinessChecker = te.default; const ie = i(4555); t.DefaultMeetingSession = ie.default; const re = i(156); t.DefaultMessagingSession = re.default; const oe = i(6878); t.DefaultModality = oe.default; const ne = i(744); t.DefaultPingPong = ne.default; const se = i(7461); t.DefaultRealtimeController = se.default; const ae = i(1316); t.DefaultReconnectController = ae.default; const de = i(4549); t.DefaultSessionStateController = de.default; const le = i(3429); t.DefaultSigV4 = le.default; const ce = i(3837); t.DefaultSignalingClient = ce.default; const ue = i(6932); t.DefaultSimulcastUplinkPolicy = ue.default; const he = i(6636); t.DefaultSimulcastUplinkPolicyForContentShare = he.default; const pe = i(1580); t.DefaultTransceiverController = pe.default; const me = i(797); t.DefaultTranscriptionController = me.default; const fe = i(1971); t.DefaultUserAgentParser = fe.default; const ge = i(6085); t.DefaultVideoCaptureAndEncodeParameter = ge.default; const be = i(1513); t.DefaultVideoFrameProcessorPipeline = be.default; const ve = i(4688); t.DefaultVideoStreamIdSet = ve.default; const ye = i(1688); t.DefaultVideoStreamIndex = ye.default; const we = i(9912); t.DefaultVideoTile = we.default; const Se = i(5695); t.DefaultVideoTileController = Se.default; const xe = i(4505); t.DefaultVideoTileFactory = xe.default; const ke = i(4317); t.DefaultVideoTransformDevice = ke.default; const _e = i(2187); t.DefaultVolumeIndicatorAdapter = _e.default; const Ce = i(5786); t.DefaultWebSocketAdapter = Ce.default; const Ie = i(5174); t.DevicePixelRatioWindowSource = Ie.default; const Te = i(4297); t.DeviceSelection = Te.default; const Ee = i(7004); t.EventBufferConfiguration = Ee.default; const Ae = i(299); t.EventIngestionConfiguration = Ae.default; const Me = i(7998); t.FinishGatheringICECandidatesTask = Me.default; const Oe = i(6467); t.FullJitterBackoff = Oe.default; const Pe = i(4742); t.FullJitterBackoffFactory = Pe.default; const De = i(9355); t.FullJitterLimitedBackoff = De.default; const Re = i(2503); t.GetUserMediaError = Re.default; const Le = i(1615); t.GlobalMetricReport = Le.default; const Be = i(6388); t.InMemoryJSONEventBuffer = Be.default; const Ve = i(2378); t.IntervalScheduler = Ve.default; const Fe = i(3333); t.JoinAndReceiveIndexTask = Fe.default; const Ne = i(3717); t.LeaveAndReceiveLeaveAckTask = Ne.default; const je = i(2325); t.ListenForVolumeIndicatorsTask = je.default; const Ue = i(7802); t.Log = Ue.default; const ze = i(7718); t.LogLevel = ze.default; const $e = i(766); t.MediaDeviceProxyHandler = $e.default; const He = i(2267); t.MeetingEventsClientConfiguration = He.default; const We = i(3022); t.MeetingReadinessCheckerConfiguration = We.default; const qe = i(231); t.MeetingSessionConfiguration = qe.default; const Ke = i(2721); t.MeetingSessionCredentials = Ke.default; const Ge = i(6454); t.MeetingSessionLifecycleEvent = Ge.default; const Je = i(5702); t.MeetingSessionLifecycleEventCondition = Je.default; const Ze = i(5956); t.MeetingSessionStatus = Ze.default; const Qe = i(1736); t.MeetingSessionStatusCode = Qe.default; const Xe = i(6744); t.MeetingSessionTURNCredentials = Xe.default; const Ye = i(9384); t.MeetingSessionURLs = Ye.default; const et = i(7840); t.MeetingSessionVideoAvailability = et.default; const tt = i(6664); t.Message = tt.default; const it = i(4665); t.MessagingSessionConfiguration = it.default; const rt = i(1831); t.ModelSpecBuilder = rt.default; const ot = i(6537); t.MonitorTask = ot.default; const nt = i(6023); t.MultiLogger = nt.default; const st = i(6640); t.NScaleVideoUplinkBandwidthPolicy = st.default; const at = i(3739); t.NoOpAudioVideoController = at.default; const dt = i(7677); t.NoOpDebugLogger = dt.default; const lt = i(1014); t.NoOpDeviceController = lt.default; const ct = i(8567); t.NoOpEventReporter = ct.default; const ut = i(3086); t.NoOpLogger = ut.default; const ht = i(3120); t.NoOpMediaStreamBroker = ht.default; const pt = i(1483); t.NoOpTask = pt.default; const mt = i(741); t.NoOpVideoElementFactory = mt.default; const ft = i(2850); t.NoOpVideoFrameProcessor = ft.default; const gt = i(8828); t.NoVideoDownlinkBandwidthPolicy = gt.default; const bt = i(1571); t.NoVideoUplinkBandwidthPolicy = bt.default; const vt = i(4465); t.NotFoundError = vt.default; const yt = i(1344); t.NotReadableError = yt.default; const wt = i(6036); t.OnceTask = wt.default; const St = i(406); t.OpenSignalingConnectionTask = St.default; const xt = i(5459); t.OverconstrainedError = xt.default; const kt = i(2210); t.POSTLogger = kt.default; const _t = i(9154); t.ParallelGroupTask = _t.default; const Ct = i(5536); t.PermissionDeniedError = Ct.default; const It = i(9017); t.PrefetchOn = It.default; const Tt = i(5849); t.PromiseQueue = Tt.default; const Et = i(8717); t.PromoteToPrimaryMeetingTask = Et.default; const At = i(6009); t.RealtimeAttendeePositionInFrame = At.default; const Mt = i(2260); t.RealtimeState = Mt.default; const Ot = i(6490); t.RealtimeVolumeIndicator = Ot.default; const Pt = i(6700); t.ReceiveAudioInputTask = Pt.default; const Dt = i(701); t.ReceiveTURNCredentialsTask = Dt.default; const Rt = i(6464); t.ReceiveVideoInputTask = Rt.default; const Lt = i(7946); t.ReceiveVideoStreamIndexTask = Lt.default; const Bt = i(2478); t.ReconnectionHealthPolicy = Bt.default; const Vt = i(8493); t.RunnableTask = Vt.default; const Ft = i(4052); t.SDP = Ft.default; const Nt = i(3534); t.SDPCandidateType = Nt.default; const jt = i(5131); t.SDPMediaSection = jt.default; const Ut = i(1967); t.SendAndReceiveDataMessagesTask = Ut.default; const zt = i(9231); t.SerialGroupTask = zt.default; const $t = i(3191); t.ServerSideNetworkAdaption = $t.default; const Ht = i(9694); t.SessionStateControllerAction = Ht.default; const Wt = i(5081); t.SessionStateControllerDeferPriority = Wt.default; const qt = i(9042); t.SessionStateControllerState = qt.default; const Kt = i(5462); t.SessionStateControllerTransitionResult = Kt.default; const Gt = i(686); t.SetLocalDescriptionTask = Gt.default; const Jt = i(9203); t.SetRemoteDescriptionTask = Jt.default; const Zt = i(1); t.SignalingAndMetricsConnectionMonitor = Zt.default; const Qt = i(7809); t.SignalingClientConnectionRequest = Qt.default; const Xt = i(9516); t.SignalingClientEvent = Xt.default; const Yt = i(4123); t.SignalingClientEventType = Yt.default; const ei = i(7100); t.SignalingClientJoin = ei.default; const ti = i(2190); t.SignalingClientSubscribe = ti.default; const ii = i(2402); t.SignalingClientVideoSubscriptionConfiguration = ii.default; const ri = i(2559); t.SimulcastContentShareTransceiverController = ri.default; const oi = i(1546); t.SimulcastLayers = oi.default; const ni = i(2205); t.SimulcastTransceiverController = ni.default; const si = i(507); t.SimulcastVideoStreamIndex = si.default; const ai = i(3981); t.SingleNodeAudioTransformDevice = ai.default; const di = i(7562); t.StreamMetricReport = di.default; const li = i(3913); t.SubscribeAndReceiveSubscribeAckTask = li.default; const ci = i(108); t.TargetDisplaySize = ci.default; const ui = i(5049); t.TaskStatus = ui.default; const hi = i(2405); t.TimeoutScheduler = hi.default; const pi = i(251); t.TimeoutTask = pi.default; const mi = i(9337); t.Transcript = mi.default; const fi = i(6412); t.TranscriptAlternative = fi.default; const gi = i(761); t.TranscriptEntity = gi.default; const bi = i(4234); t.TranscriptItem = bi.default; const vi = i(8152); t.TranscriptItemType = vi.default; const yi = i(2780); t.TranscriptLanguageWithScore = yi.default; const wi = i(8197); t.TranscriptResult = wi.default; const Si = i(1816); t.TranscriptionStatus = Si.default; const xi = i(3590); t.TranscriptionStatusType = xi.default; const ki = i(9485); t.TypeError = ki.default; const _i = i(1448); t.UnusableAudioWarningConnectionHealthPolicy = _i.default; const Ci = i(8495); t.Versioning = Ci.default; const Ii = i(8791); t.VideoAdaptiveProbePolicy = Ii.default; const Ti = i(9064); t.VideoCodecCapability = Ti.default; const Ei = i(7212); t.VideoLogEvent = Ei.default; const Ai = i(1706); t.VideoOnlyTransceiverController = Ai.default; const Mi = i(5935); t.VideoPreference = Mi.default; const Oi = i(5029); t.VideoPreferences = Oi.default; const Pi = i(137); t.VideoPriorityBasedPolicy = Pi.default; const Di = i(4074); t.VideoPriorityBasedPolicyConfig = Di.default; const Ri = i(8033); t.VideoQualitySettings = Ri.default; const Li = i(5008); t.VideoSource = Li.default; const Bi = i(7619); t.VideoStreamDescription = Bi.default; const Vi = i(2227); t.VideoTileState = Vi.default; const Fi = i(1619); t.VoiceFocusDeviceTransformer = Fi.default; const Ni = i(8063); t.VoiceFocusTransformDevice = Ni.default; const ji = i(5859); t.WaitForAttendeePresenceTask = ji.default; const Ui = i(4643); t.WebSocketReadyState = Ui.default; const zi = i(6195); t.ZLIBTextCompressor = zi.default; const $i = i(5029); Object.defineProperty(t, "MutableVideoPreferences", { enumerable: !0, get: function () { return $i.MutableVideoPreferences } }); const Hi = i(2019); Object.defineProperty(t, "Some", { enumerable: !0, get: function () { return Hi.Some } }), Object.defineProperty(t, "None", { enumerable: !0, get: function () { return Hi.None } }), Object.defineProperty(t, "Maybe", { enumerable: !0, get: function () { return Hi.Maybe } }); const Wi = i(2619); Object.defineProperty(t, "isAudioTransformDevice", { enumerable: !0, get: function () { return Wi.isAudioTransformDevice } }); const qi = i(9457); Object.defineProperty(t, "isDestroyable", { enumerable: !0, get: function () { return qi.isDestroyable } }); const Ki = i(4153); Object.defineProperty(t, "isVideoTransformDevice", { enumerable: !0, get: function () { return Ki.isVideoTransformDevice } }) }, 6108: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(7718); t.default = class { constructor(e, t = r.default.WARN) { this.name = e, this.level = t } info(e) { this.log(r.default.INFO, e) } warn(e) { this.log(r.default.WARN, e) } error(e) { this.log(r.default.ERROR, e) } debug(e) { r.default.DEBUG < this.level || ("string" == typeof e ? this.log(r.default.DEBUG, e) : e ? this.log(r.default.DEBUG, e()) : this.log(r.default.DEBUG, "" + e)) } setLogLevel(e) { this.level = e } getLogLevel() { return this.level } log(e, t) { if (e < this.level) return; const i = `${(new Date).toISOString()} [${r.default[e]}] ${this.name} - ${t}`; switch (e) { case r.default.ERROR: console.error(i); break; case r.default.WARN: console.warn(i); break; case r.default.DEBUG: console.debug(i.replace(/\\r\\n/g, "\n")); break; case r.default.INFO: console.info(i) } } } }, 7802: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i, r) { this.sequenceNumber = e, this.message = t, this.timestampMs = i, this.logLevel = r } } }, 7718: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.LogLevel = void 0, function (e) { e[e.DEBUG = 0] = "DEBUG", e[e.INFO = 1] = "INFO", e[e.WARN = 2] = "WARN", e[e.ERROR = 3] = "ERROR", e[e.OFF = 4] = "OFF" }(i = t.LogLevel || (t.LogLevel = {})), t.default = i }, 6023: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(7718); t.default = class { constructor(...e) { this._loggers = e } info(e) { for (const t of this._loggers) t.info(e) } warn(e) { for (const t of this._loggers) t.warn(e) } error(e) { for (const t of this._loggers) t.error(e) } debug(e) { let t, i; i = "string" == typeof e ? e : e ? () => (t || (t = e()), t) : "" + e; for (const e of this._loggers) e.debug(i) } setLogLevel(e) { for (const t of this._loggers) t.setLogLevel(e) } getLogLevel() { for (const e of this._loggers) return e.getLogLevel(); return r.default.OFF } } }, 7677: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(7718), o = i(3086); class n extends o.default { constructor() { super(r.default.DEBUG) } } t.default = n }, 3086: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(7718); t.default = class { constructor(e = r.default.OFF) { this.level = e } info(e) { } warn(e) { } error(e) { } debug(e) { r.default.DEBUG < this.level || "string" != typeof e && e() } setLogLevel(e) { this.level = e } getLogLevel() { return this.level } } }, 2210: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2378), n = i(7802), s = i(7718); class a { constructor(e) { this.logCapture = [], this.lock = !1, this.sequenceNumber = 0; const { url: t, batchSize: i = a.BATCH_SIZE, intervalMs: r = a.INTERVAL_MS, logLevel: o = s.default.WARN, metadata: n, headers: d } = e; this.url = t, this.batchSize = i, this.intervalMs = r, this.logLevel = o, this.metadata = n, this.headers = d, this.start(), this.eventListener = () => { this.stop() }, this.addEventListener() } addEventListener() { this.eventListener && "window" in i.g && window.addEventListener && window.addEventListener("unload", this.eventListener) } removeEventListener() { this.eventListener && "window" in i.g && window.removeEventListener && window.removeEventListener("unload", this.eventListener) } debug(e) { s.default.DEBUG < this.logLevel || ("string" == typeof e ? this.log(s.default.DEBUG, e) : e ? this.log(s.default.DEBUG, e()) : this.log(s.default.DEBUG, "" + e)) } info(e) { this.log(s.default.INFO, e) } warn(e) { this.log(s.default.WARN, e) } error(e) { this.log(s.default.ERROR, e) } setLogLevel(e) { this.logLevel = e } getLogLevel() { return this.logLevel } getLogCaptureSize() { return this.logCapture.length } start() { this.addEventListener(), this.intervalScheduler = new o.default(this.intervalMs), this.intervalScheduler.start((() => r(this, void 0, void 0, (function* () { if (!0 === this.lock || 0 === this.getLogCaptureSize()) return; this.lock = !0; const e = this.logCapture.slice(0, this.batchSize), t = this.makeRequestBody(e); try { 200 === (yield fetch(this.url, Object.assign({ method: "POST", body: t }, this.headers ? { headers: this.headers } : {}))).status && (this.logCapture = this.logCapture.slice(e.length)) } catch (e) { console.warn("[POSTLogger] " + e.message) } finally { this.lock = !1 } })))) } stop() { var e; null === (e = this.intervalScheduler) || void 0 === e || e.stop(), this.intervalScheduler = void 0, this.removeEventListener(); const t = this.makeRequestBody(this.logCapture); navigator.sendBeacon(this.url, t) } destroy() { return r(this, void 0, void 0, (function* () { this.stop(), this.metadata = void 0, this.headers = void 0, this.logCapture = [], this.sequenceNumber = 0, this.lock = !1, this.batchSize = 0, this.intervalMs = 0, this.url = void 0 })) } makeRequestBody(e) { return JSON.stringify(Object.assign(Object.assign({}, this.metadata), { logs: e })) } log(e, t) { if (e < this.logLevel) return; const i = Date.now(); this.logCapture.push(new n.default(this.sequenceNumber, t, i, s.default[e])), this.sequenceNumber += 1 } } t.default = a, a.BATCH_SIZE = 85, a.INTERVAL_MS = 2e3 }, 1835: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(766); t.default = class { constructor() { this.isMediaDevicesSupported = "undefined" != typeof navigator && !!navigator.mediaDevices } create() { if (this.isMediaDevicesSupported) return new Proxy(navigator.mediaDevices, new r.default); throw new Error("navigator.mediaDevices is not supported") } } }, 766: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(996), n = i(2378); class s { constructor() { this.scheduler = null, this.devices = null, this.deviceChangeListeners = new Set, this.get = (e, t, i) => { if (!Reflect.has(e, t)) return; if (!("ondevicechange" in navigator.mediaDevices)) { if ("addEventListener" === t) return this.patchAddEventListener(e, t, i); if ("removeEventListener" === t) return this.patchRemoveEventListener(e, t, i) } const r = Reflect.get(e, t, i); return "function" == typeof r ? r.bind(e) : r }, this.patchAddEventListener = (e, t, i) => { const r = Reflect.get(e, t, i); return (t, i, o) => { if ("devicechange" !== t) return Reflect.apply(r, e, [t, i, o]); this.deviceChangeListeners.add(i), this.scheduler || (this.scheduler = new n.default(s.INTERVAL_MS), this.scheduler.start(this.pollDeviceLists)) } }, this.patchRemoveEventListener = (e, t, i) => { const r = Reflect.get(e, t, i); return (t, i, o) => { if ("devicechange" !== t) return Reflect.apply(r, e, [t, i, o]); this.deviceChangeListeners.delete(i), 0 === this.deviceChangeListeners.size && this.scheduler && (this.scheduler.stop(), this.scheduler = null) } }, this.pollDeviceLists = () => r(this, void 0, void 0, (function* () { const e = yield this.sortedDeviceList(); this.devices && (e.length !== this.devices.length || e.some(((e, t) => e.deviceId !== this.devices[t].deviceId))) && this.handleDeviceChangeEvent(), this.devices = e })) } sortedDeviceList() { return r(this, void 0, void 0, (function* () { return (yield navigator.mediaDevices.enumerateDevices()).sort(((e, t) => e.deviceId < t.deviceId ? 1 : e.deviceId > t.deviceId ? -1 : 0)) })) } handleDeviceChangeEvent() { for (const e of this.deviceChangeListeners) o.default.nextTick((() => { if (this.deviceChangeListeners.has(e)) { const t = new Event("devicechange"); "function" == typeof e ? e(t) : e.handleEvent(t) } })) } } t.default = s, s.INTERVAL_MS = 1e3 }, 3120: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { acquireAudioInputStream() { return Promise.reject() } acquireVideoInputStream() { return Promise.reject() } acquireDisplayInputStream(e) { return Promise.reject() } muteLocalAudioInputStream() { } unmuteLocalAudioInputStream() { } addMediaStreamBrokerObserver(e) { } removeMediaStreamBrokerObserver(e) { } } }, 7421: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckAudioConnectivityFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.AudioInputRequestFailed = 1] = "AudioInputRequestFailed", e[e.AudioInputPermissionDenied = 2] = "AudioInputPermissionDenied", e[e.ConnectionFailed = 3] = "ConnectionFailed", e[e.AudioNotReceived = 4] = "AudioNotReceived" }(i = t.CheckAudioConnectivityFeedback || (t.CheckAudioConnectivityFeedback = {})), t.default = i }, 2984: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckAudioInputFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.Failed = 1] = "Failed", e[e.PermissionDenied = 2] = "PermissionDenied" }(i = t.CheckAudioInputFeedback || (t.CheckAudioInputFeedback = {})), t.default = i }, 292: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckAudioOutputFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.Failed = 1] = "Failed" }(i = t.CheckAudioOutputFeedback || (t.CheckAudioOutputFeedback = {})), t.default = i }, 5653: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckCameraResolutionFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.Failed = 1] = "Failed", e[e.ResolutionNotSupported = 2] = "ResolutionNotSupported", e[e.PermissionDenied = 3] = "PermissionDenied" }(i = t.CheckCameraResolutionFeedback || (t.CheckCameraResolutionFeedback = {})), t.default = i }, 4049: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckContentShareConnectivityFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.Failed = 1] = "Failed", e[e.PermissionDenied = 2] = "PermissionDenied", e[e.TimedOut = 3] = "TimedOut", e[e.ConnectionFailed = 4] = "ConnectionFailed" }(i = t.CheckContentShareConnectivityFeedback || (t.CheckContentShareConnectivityFeedback = {})), t.default = i }, 7735: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckNetworkTCPConnectivityFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.MeetingSessionURLsNotInitialized = 1] = "MeetingSessionURLsNotInitialized", e[e.ConnectionFailed = 2] = "ConnectionFailed", e[e.ICENegotiationFailed = 3] = "ICENegotiationFailed" }(i = t.CheckNetworkTCPConnectivityFeedback || (t.CheckNetworkTCPConnectivityFeedback = {})), t.default = i }, 8350: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckNetworkUDPConnectivityFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.MeetingSessionURLsNotInitialized = 1] = "MeetingSessionURLsNotInitialized", e[e.ConnectionFailed = 2] = "ConnectionFailed", e[e.ICENegotiationFailed = 3] = "ICENegotiationFailed" }(i = t.CheckNetworkUDPConnectivityFeedback || (t.CheckNetworkUDPConnectivityFeedback = {})), t.default = i }, 35: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckVideoConnectivityFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.VideoInputRequestFailed = 1] = "VideoInputRequestFailed", e[e.VideoInputPermissionDenied = 2] = "VideoInputPermissionDenied", e[e.ConnectionFailed = 3] = "ConnectionFailed", e[e.VideoNotSent = 4] = "VideoNotSent" }(i = t.CheckVideoConnectivityFeedback || (t.CheckVideoConnectivityFeedback = {})), t.default = i }, 1772: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.CheckVideoInputFeedback = void 0, function (e) { e[e.Succeeded = 0] = "Succeeded", e[e.Failed = 1] = "Failed", e[e.PermissionDenied = 2] = "PermissionDenied" }(i = t.CheckVideoInputFeedback || (t.CheckVideoInputFeedback = {})), t.default = i }, 608: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(443), n = i(9297), s = i(9802), a = i(5536), d = i(1072), l = i(251), c = i(7421), u = i(2984), h = i(292), p = i(5653), m = i(4049), f = i(7735), g = i(8350), b = i(35), v = i(1772), y = i(3022); class w { constructor(e, t, i = new y.default) { this.logger = e, this.meetingSession = t, this.configuration = i, this.browserBehavior = new n.default } static delay(e) { return r(this, void 0, void 0, (function* () { return new Promise((t => setTimeout(t, e))) })) } checkAudioInput(e) { return r(this, void 0, void 0, (function* () { try { return yield this.meetingSession.audioVideo.startAudioInput(e), yield this.meetingSession.audioVideo.stopAudioInput(), u.default.Succeeded } catch (e) { return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${e}`), e instanceof a.default ? u.default.PermissionDenied : u.default.Failed } })) } checkAudioOutput(e, t, i = null) { return r(this, void 0, void 0, (function* () { try { const r = e ? s.default.getIntrinsicDeviceId(e) : ""; return yield this.playTone(r, 440, i), (yield t()) ? h.default.Succeeded : h.default.Failed } catch (e) { return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${e}`), h.default.Failed } finally { this.stopTone() } })) } playTone(e, t, i) { return r(this, void 0, void 0, (function* () { this.oscillatorNode && this.stopTone(), this.audioContext = s.default.getAudioContext(), this.gainNode = this.audioContext.createGain(), this.gainNode.gain.value = 0, this.oscillatorNode = this.audioContext.createOscillator(), this.oscillatorNode.frequency.value = t, this.oscillatorNode.connect(this.gainNode), this.destinationStream = this.audioContext.createMediaStreamDestination(), this.gainNode.connect(this.destinationStream); const r = this.audioContext.currentTime + .1; this.gainNode.gain.linearRampToValueAtTime(0, r), this.gainNode.gain.linearRampToValueAtTime(.1, r + .1), this.oscillatorNode.start(); const n = new o.default(this.logger); try { this.browserBehavior.supportsSetSinkId() && (yield n.bindAudioDevice({ deviceId: e })) } catch (e) { this.logger.error(`Failed to bind audio device: ${e}`) } try { yield n.bindAudioElement(i || new Audio) } catch (e) { this.logger.error(`Failed to bind audio element: ${e}`) } yield n.bindAudioStream(this.destinationStream.stream) })) } stopTone() { if (!(this.audioContext && this.gainNode && this.oscillatorNode && this.destinationStream)) return; const e = this.audioContext.currentTime; this.gainNode.gain.linearRampToValueAtTime(.1, e + .1 + 1), this.gainNode.gain.linearRampToValueAtTime(0, e + .2 + 1), this.oscillatorNode.stop(), this.oscillatorNode.disconnect(this.gainNode), this.gainNode.disconnect(this.destinationStream), this.oscillatorNode = null, this.gainNode = null, this.destinationStream = null } checkVideoInput(e) { return r(this, void 0, void 0, (function* () { try { return yield this.meetingSession.audioVideo.startVideoInput(e), yield this.meetingSession.audioVideo.stopVideoInput(), v.default.Succeeded } catch (e) { return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${e}`), e instanceof a.default ? v.default.PermissionDenied : v.default.Failed } })) } checkCameraResolution(e, t, i) { return r(this, void 0, void 0, (function* () { let r; try { const o = s.default.getIntrinsicDeviceId(e), n = { video: this.calculateVideoConstraint(o, t, i) }; r = yield navigator.mediaDevices.getUserMedia(n) } catch (e) { return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${t} height ${i} failed with error ${e}`), e && "OverconstrainedError" === e.name ? p.default.ResolutionNotSupported : e && "NotAllowedError" === e.name ? p.default.PermissionDenied : p.default.Failed } finally { r && r.getTracks().forEach((function (e) { e.stop() })) } return p.default.Succeeded })) } calculateVideoConstraint(e, t, i) { const r = this.browserBehavior.requiresResolutionAlignment(t, i), o = {}; return this.browserBehavior.requiresNoExactMediaStreamConstraints() ? (o.deviceId = e, o.width = t, o.height = i) : (o.deviceId = { exact: e }, o.width = { exact: r[0] }, o.height = { exact: r[1] }), o } checkContentShareConnectivity(e) { return r(this, void 0, void 0, (function* () { let t = !1, i = !1; const o = { contentShareDidStart: () => { t = !0 } }, n = { audioVideoDidStart: () => { i = !0 } }; try { return this.meetingSession.audioVideo.addObserver(n), this.meetingSession.audioVideo.start(), this.meetingSession.audioVideo.addContentShareObserver(o), yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(e), yield this.executeTimeoutTask((() => r(this, void 0, void 0, (function* () { return i && t })))), i ? (yield this.stopMeeting(), t ? m.default.Succeeded : m.default.TimedOut) : m.default.ConnectionFailed } catch (e) { return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${e}`), "NotAllowedError" === e.name ? m.default.PermissionDenied : m.default.Failed } finally { this.meetingSession.audioVideo.removeObserver(n), this.meetingSession.audioVideo.stopContentShare(), this.meetingSession.audioVideo.removeContentShareObserver(o) } })) } checkAudioConnectivity(e) { return r(this, void 0, void 0, (function* () { let t = !1; const i = this.meetingSession.audioVideo, o = (e, i, r, o) => { e === this.meetingSession.configuration.credentials.attendeeId && i && (t = !0) }; try { yield i.startAudioInput(e) } catch (e) { return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${e}`), e instanceof a.default ? c.default.AudioInputPermissionDenied : c.default.AudioInputRequestFailed } return i.realtimeSubscribeToAttendeeIdPresence(o), (yield this.startMeeting()) ? (yield this.executeTimeoutTask((() => r(this, void 0, void 0, (function* () { return t })))), i.realtimeUnsubscribeToAttendeeIdPresence(o), yield this.stopMeeting(), yield this.meetingSession.audioVideo.stopAudioInput(), t ? c.default.Succeeded : c.default.AudioNotReceived) : (i.realtimeUnsubscribeToAttendeeIdPresence(o), yield this.meetingSession.audioVideo.stopAudioInput(), c.default.ConnectionFailed) })) } checkVideoConnectivity(e) { return r(this, void 0, void 0, (function* () { const t = this.meetingSession.audioVideo; let i = 0; const o = { metricsDidReceive(e) { e.getRTCStatsReport().forEach((e => { "outbound-rtp" === e.type && "video" === e.mediaType && (i = e.packetsSent) })) } }; try { yield t.startVideoInput(e) } catch (e) { return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${e}`), e instanceof a.default ? b.default.VideoInputPermissionDenied : b.default.VideoInputRequestFailed } return t.addObserver(o), (yield this.startMeeting()) ? (t.startLocalVideoTile(), yield this.executeTimeoutTask((() => r(this, void 0, void 0, (function* () { return i > 0 })))), yield t.stopVideoInput(), yield this.stopMeeting(), t.removeObserver(o), i <= 0 ? b.default.VideoNotSent : b.default.Succeeded) : b.default.ConnectionFailed })) } checkNetworkUDPConnectivity() { return r(this, void 0, void 0, (function* () { let e = !1; const t = { metricsDidReceive(t) { t.getRTCStatsReport().forEach((t => { "candidate-pair" === t.type && "succeeded" === t.state && (e = !0) })) } }; try { this.originalURLRewriter = this.meetingSession.configuration.urls.urlRewriter } catch (e) { return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${e}`), g.default.MeetingSessionURLsNotInitialized } this.meetingSession.configuration.urls.urlRewriter = e => { const t = this.originalURLRewriter(e); return t.includes("transport=tcp") ? "" : t }; const i = this.meetingSession.audioVideo; return i.addObserver(t), (yield this.startMeeting()) ? (yield this.executeTimeoutTask((() => r(this, void 0, void 0, (function* () { return e })))), this.meetingSession.configuration.urls.urlRewriter = this.originalURLRewriter, yield this.stopMeeting(), i.removeObserver(t), e ? g.default.Succeeded : g.default.ICENegotiationFailed) : (this.meetingSession.configuration.urls.urlRewriter = this.originalURLRewriter, g.default.ConnectionFailed) })) } checkNetworkTCPConnectivity() { return r(this, void 0, void 0, (function* () { let e = !1; const t = { metricsDidReceive(t) { t.getRTCStatsReport().forEach((t => { "candidate-pair" === t.type && "succeeded" === t.state && (e = !0) })) } }; try { this.originalURLRewriter = this.meetingSession.configuration.urls.urlRewriter } catch (e) { return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${e}`), f.default.MeetingSessionURLsNotInitialized } this.meetingSession.configuration.urls.urlRewriter = e => { const t = this.originalURLRewriter(e); return t.includes("transport=udp") ? "" : t }; const i = this.meetingSession.audioVideo; return i.addObserver(t), (yield this.startMeeting()) ? (yield this.executeTimeoutTask((() => r(this, void 0, void 0, (function* () { return e })))), this.meetingSession.configuration.urls.urlRewriter = this.originalURLRewriter, yield this.stopMeeting(), i.removeObserver(t), e ? f.default.Succeeded : f.default.ICENegotiationFailed) : (this.meetingSession.configuration.urls.urlRewriter = this.originalURLRewriter, f.default.ConnectionFailed) })) } startMeeting() { return r(this, void 0, void 0, (function* () { let e = !1; const t = { audioVideoDidStart: () => { e = !0 } }; return this.meetingSession.audioVideo.addObserver(t), this.meetingSession.audioVideo.start(), yield this.executeTimeoutTask((() => r(this, void 0, void 0, (function* () { return e })))), this.meetingSession.audioVideo.removeObserver(t), e })) } stopMeeting() { return r(this, void 0, void 0, (function* () { let e = !1; const t = { audioVideoDidStop: t => { e = !0 } }; return this.meetingSession.audioVideo.addObserver(t), this.meetingSession.audioVideo.stop(), yield this.executeTimeoutTask((() => r(this, void 0, void 0, (function* () { return e })))), this.meetingSession.audioVideo.removeObserver(t), e })) } executeTimeoutTask(e) { return r(this, void 0, void 0, (function* () { let t = !1; class i extends d.default { constructor(e, t) { super(e), this.waitDurationMs = t, this.isCancelled = !1 } cancel() { this.isCancelled = !0 } run() { return r(this, void 0, void 0, (function* () { for (; !this.isCancelled;) { if (yield e()) { t = !0; break } yield w.delay(this.waitDurationMs) } })) } } const o = new l.default(this.logger, new i(this.logger, this.configuration.waitDurationMs), this.configuration.timeoutMs); return yield o.run(), t })) } } t.default = w }, 3022: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.timeoutMs = 1e4, this.waitDurationMs = 3e3 } } }, 4555: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(483), n = i(8104), s = i(6467), a = i(9297), d = i(3345), l = i(3265), c = i(9020), u = i(9457), h = i(8672), p = i(1316), m = i(5786); t.default = class { constructor(e, t, i, r) { this._eventController = r, this._configuration = e, this._logger = t, this.checkBrowserSupportAndFeatureConfiguration(), c.default.addLogger(this._logger), c.default.register(), this._eventController || (this._eventController = new h.default(e, t)), i.eventController || (i.eventController = this.eventController), this.audioVideoController = new o.default(this._configuration, this._logger, new m.default(this._logger), i, new p.default(this._configuration.reconnectTimeoutMs, new s.default(this._configuration.reconnectFixedWaitMs, this._configuration.reconnectShortBackOffMs, this._configuration.reconnectLongBackOffMs)), this.eventController), this._deviceController = i; const a = new d.default(this._logger); this.contentShareController = new l.default(a, new o.default(l.default.createContentShareMeetingSessionConfigure(this._configuration), this._logger, new m.default(this._logger), a, new p.default(this._configuration.reconnectTimeoutMs, new s.default(this._configuration.reconnectFixedWaitMs, this._configuration.reconnectShortBackOffMs, this._configuration.reconnectLongBackOffMs))), this.audioVideoController), this.audioVideoFacade = new n.default(this.audioVideoController, this.audioVideoController.videoTileController, this.audioVideoController.realtimeController, this.audioVideoController.audioMixController, this._deviceController, this.contentShareController) } get configuration() { return this._configuration } get logger() { return this._logger } get audioVideo() { return this.audioVideoFacade } get contentShare() { return this.contentShareController } get deviceController() { return this._deviceController } get eventController() { return this._eventController } destroy() { return r(this, void 0, void 0, (function* () { u.isDestroyable(this.contentShareController) && (yield this.contentShareController.destroy()), u.isDestroyable(this.audioVideoController) && (yield this.audioVideoController.destroy()), u.isDestroyable(this.eventController) && (yield this.eventController.destroy()), c.default.removeLogger(this._logger), this._logger = void 0, this._configuration = void 0, this._deviceController = void 0, this.audioVideoFacade = void 0, this.audioVideoController = void 0, this.contentShareController = void 0, this._eventController = void 0 })) } checkBrowserSupportAndFeatureConfiguration() { const e = new a.default, t = `${e.name()} ${e.majorVersion()} (${e.version()})`; if (this.logger.info(`browser is ${t}`), e.isSupported() || this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${e.supportString()}.`), this._configuration.videoUplinkBandwidthPolicy) if (this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)) { if (!e.hasChromiumWebRTC()) throw new Error("Simulcast is only supported on Chromium-based browsers"); this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers = !0 } else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers = !1; this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers && (e.hasChromiumWebRTC() ? this.logger.info(`Simulcast is enabled for ${e.name()}`) : (this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers = !1, this.logger.info("Simulcast is only supported on Chromium-based browsers"))) } isSimulcastUplinkPolicy(e) { return !(!e || !e.addObserver) } } }, 231: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2552), o = i(7442), n = i(2721), s = i(9384); t.default = class { constructor(e, t) { this.meetingId = null, this.externalMeetingId = null, this.credentials = null, this.urls = null, this.connectionTimeoutMs = 15e3, this.attendeePresenceTimeoutMs = 0, this.connectionHealthPolicyConfiguration = new r.default, this.reconnectTimeoutMs = 12e4, this.reconnectFixedWaitMs = 0, this.reconnectShortBackOffMs = 1e3, this.reconnectLongBackOffMs = 5e3, this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers = !1, this.videoDownlinkBandwidthPolicy = null, this.videoUplinkBandwidthPolicy = null, this.keepLastFrameWhenPaused = !1, e && ((e = o.toLowerCasePropertyNames(e)).meeting && (e = e.meeting), this.meetingId = e.meetingid, this.externalMeetingId = e.externalmeetingid, this.urls = new s.default, this.urls.audioHostURL = e.mediaplacement.audiohosturl, this.urls.signalingURL = e.mediaplacement.signalingurl, this.urls.turnControlURL = e.mediaplacement.turncontrolurl, e.mediaplacement.eventingestionurl && (this.urls.eventIngestionURL = e.mediaplacement.eventingestionurl)), t && ((t = o.toLowerCasePropertyNames(t)).attendee && (t = t.attendee), this.credentials = new n.default, this.credentials.attendeeId = t.attendeeid, this.credentials.externalUserId = t.externaluserid, this.credentials.joinToken = t.jointoken) } } }, 2721: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.attendeeId = null, this.externalUserId = null, this.joinToken = null } toJSON() { return { attendeeId: this.attendeeId, joinToken: null === this.joinToken ? null : "<redacted>" } } } }, 6454: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.MeetingSessionLifecycleEvent = void 0, function (e) { e[e.Connecting = 0] = "Connecting", e[e.Started = 1] = "Started", e[e.Stopped = 2] = "Stopped" }(i = t.MeetingSessionLifecycleEvent || (t.MeetingSessionLifecycleEvent = {})), t.default = i }, 5702: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.MeetingSessionLifecycleEventCondition = void 0, function (e) { e[e.ConnectingNew = 0] = "ConnectingNew", e[e.ReconnectingExisting = 1] = "ReconnectingExisting", e[e.StartedNew = 2] = "StartedNew", e[e.StartedExisting = 3] = "StartedExisting", e[e.StartedAfterReconnect = 4] = "StartedAfterReconnect", e[e.StoppedCleanly = 5] = "StoppedCleanly", e[e.StoppedWithFailure = 6] = "StoppedWithFailure" }(i = t.MeetingSessionLifecycleEventCondition || (t.MeetingSessionLifecycleEventCondition = {})), t.default = i }, 5956: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(8330), o = i(1736); class n { constructor(e) { this._statusCode = e } statusCode() { return this._statusCode } isFailure() { switch (this._statusCode) { case o.default.AudioAuthenticationRejected: case o.default.AudioCallAtCapacity: case o.default.AudioInternalServerError: case o.default.AudioServiceUnavailable: case o.default.AudioDisconnected: case o.default.VideoCallAtSourceCapacity: case o.default.SignalingBadRequest: case o.default.SignalingInternalServerError: case o.default.SignalingRequestFailed: case o.default.ICEGatheringTimeoutWorkaround: case o.default.ConnectionHealthReconnect: case o.default.RealtimeApiFailed: case o.default.TaskFailed: case o.default.NoAttendeePresent: return !0; default: return !1 } } isTerminal() { switch (this._statusCode) { case o.default.Left: case o.default.AudioJoinedFromAnotherDevice: case o.default.AudioAuthenticationRejected: case o.default.AudioCallAtCapacity: case o.default.MeetingEnded: case o.default.AudioDisconnected: case o.default.TURNCredentialsForbidden: case o.default.SignalingBadRequest: case o.default.SignalingRequestFailed: case o.default.VideoCallAtSourceCapacity: case o.default.RealtimeApiFailed: case o.default.AudioAttendeeRemoved: return !0; default: return !1 } } isAudioConnectionFailure() { switch (this._statusCode) { case o.default.AudioAuthenticationRejected: case o.default.AudioInternalServerError: case o.default.AudioServiceUnavailable: case o.default.ICEGatheringTimeoutWorkaround: case o.default.SignalingBadRequest: case o.default.SignalingInternalServerError: case o.default.SignalingRequestFailed: case o.default.RealtimeApiFailed: case o.default.NoAttendeePresent: return !0; default: return !1 } } toString() { switch (this._statusCode) { case o.default.OK: return "Everything is OK so far."; case o.default.Left: return "The attendee left the meeting."; case o.default.AudioJoinedFromAnotherDevice: return "The attendee joined from another device."; case o.default.AudioAuthenticationRejected: return "The meeting rejected the attendee."; case o.default.AudioCallAtCapacity: return "The attendee couldn't join because the meeting was at capacity."; case o.default.MeetingEnded: return "The meeting ended."; case o.default.AudioInternalServerError: case o.default.AudioServiceUnavailable: case o.default.AudioDisconnected: return "The audio connection failed."; case o.default.VideoCallSwitchToViewOnly: return "The attendee couldn't start the local video because the maximum video capacity was reached."; case o.default.VideoCallAtSourceCapacity: return "The connection failed due to an internal server error."; case o.default.SignalingBadRequest: case o.default.SignalingInternalServerError: case o.default.SignalingRequestFailed: return "The signaling connection failed."; case o.default.ICEGatheringTimeoutWorkaround: return "Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN."; case o.default.ConnectionHealthReconnect: return "The meeting was reconnected."; case o.default.RealtimeApiFailed: return "The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception."; case o.default.TaskFailed: return "The connection failed. See the error message for more details."; case o.default.IncompatibleSDP: return "The connection failed due to incompatible SDP."; case o.default.TURNCredentialsForbidden: return "The meeting ended, or the attendee was removed."; case o.default.NoAttendeePresent: return "The attendee was not present."; case o.default.AudioAttendeeRemoved: return "The meeting ended because attendee removed."; case o.default.AudioVideoWasRemovedFromPrimaryMeeting: return "The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them."; case o.default.AudioDisconnectAudio: return "The audio connection failed."; default: { const e = this._statusCode; throw new Error(`Unhandled case: ${e}`) } } } static fromSignalFrame(e) { return e.error && e.error.status ? this.fromSignalingStatus(e.error.status) : e.type === r.SdkSignalFrame.Type.AUDIO_STATUS ? e.audioStatus ? this.fromAudioStatus(e.audioStatus.audioStatus) : new n(o.default.SignalingRequestFailed) : e.type === r.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE ? new n(o.default.AudioVideoWasRemovedFromPrimaryMeeting) : new n(o.default.OK) } static fromAudioStatus(e) { switch (e) { case 200: return new n(o.default.OK); case 301: return new n(o.default.AudioJoinedFromAnotherDevice); case 302: return new n(o.default.AudioDisconnectAudio); case 403: return new n(o.default.AudioAuthenticationRejected); case 409: return new n(o.default.AudioCallAtCapacity); case 410: return new n(o.default.MeetingEnded); case 411: return new n(o.default.AudioAttendeeRemoved); case 500: return new n(o.default.AudioInternalServerError); case 503: return new n(o.default.AudioServiceUnavailable); default: return 2 === Math.floor(e / 100) ? new n(o.default.OK) : new n(o.default.AudioDisconnected) } } static fromSignalingStatus(e) { switch (e) { case 206: return new n(o.default.VideoCallSwitchToViewOnly); case 509: return new n(o.default.VideoCallAtSourceCapacity); case 403: return new n(o.default.AudioAuthenticationRejected); case 409: return new n(o.default.AudioCallAtCapacity); default: switch (Math.floor(e / 100)) { case 2: return new n(o.default.OK); case 4: return new n(o.default.SignalingBadRequest); case 5: return new n(o.default.SignalingInternalServerError); default: return new n(o.default.SignalingRequestFailed) } } } } t.default = n }, 1736: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.MeetingSessionStatusCode = void 0, function (e) { e[e.OK = 0] = "OK", e[e.Left = 1] = "Left", e[e.AudioJoinedFromAnotherDevice = 2] = "AudioJoinedFromAnotherDevice", e[e.AudioAuthenticationRejected = 3] = "AudioAuthenticationRejected", e[e.AudioCallAtCapacity = 4] = "AudioCallAtCapacity", e[e.MeetingEnded = 5] = "MeetingEnded", e[e.AudioInternalServerError = 6] = "AudioInternalServerError", e[e.AudioServiceUnavailable = 7] = "AudioServiceUnavailable", e[e.AudioDisconnected = 8] = "AudioDisconnected", e[e.VideoCallSwitchToViewOnly = 9] = "VideoCallSwitchToViewOnly", e[e.VideoCallAtSourceCapacity = 10] = "VideoCallAtSourceCapacity", e[e.SignalingBadRequest = 11] = "SignalingBadRequest", e[e.SignalingInternalServerError = 12] = "SignalingInternalServerError", e[e.SignalingRequestFailed = 13] = "SignalingRequestFailed", e[e.ICEGatheringTimeoutWorkaround = 14] = "ICEGatheringTimeoutWorkaround", e[e.ConnectionHealthReconnect = 15] = "ConnectionHealthReconnect", e[e.RealtimeApiFailed = 16] = "RealtimeApiFailed", e[e.TaskFailed = 17] = "TaskFailed", e[e.IncompatibleSDP = 18] = "IncompatibleSDP", e[e.TURNCredentialsForbidden = 19] = "TURNCredentialsForbidden", e[e.NoAttendeePresent = 20] = "NoAttendeePresent", e[e.AudioAttendeeRemoved = 21] = "AudioAttendeeRemoved", e[e.AudioVideoWasRemovedFromPrimaryMeeting = 22] = "AudioVideoWasRemovedFromPrimaryMeeting", e[e.AudioDisconnectAudio = 23] = "AudioDisconnectAudio" }(i = t.MeetingSessionStatusCode || (t.MeetingSessionStatusCode = {})), t.default = i }, 6744: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.username = null, this.password = null, this.ttl = null, this.uris = null } } }, 9384: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this._audioHostURL = null, this._signalingURL = null, this._turnControlURL = null, this._eventIngestionURL = null, this.urlRewriter = e => e } get audioHostURL() { return this.urlRewriter(this._audioHostURL) } set audioHostURL(e) { this._audioHostURL = e } get signalingURL() { return this.urlRewriter(this._signalingURL) } set signalingURL(e) { this._signalingURL = e } get turnControlURL() { return this.urlRewriter(this._turnControlURL) } set turnControlURL(e) { this._turnControlURL = e } get eventIngestionURL() { return this.urlRewriter(this._eventIngestionURL) } set eventIngestionURL(e) { this._eventIngestionURL = e } } }, 7840: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor() { this.remoteVideoAvailable = !1, this.canStartLocalVideo = !1 } equal(e) { return this.remoteVideoAvailable === e.remoteVideoAvailable && this.canStartLocalVideo === e.canStartLocalVideo } clone() { const e = new i; return e.remoteVideoAvailable = this.remoteVideoAvailable, e.canStartLocalVideo = this.canStartLocalVideo, e } } t.default = i }, 6664: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i) { this.type = e, this.headers = t, this.payload = i } } }, 156: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(6467), n = i(9020), s = i(6664), a = i(1316), d = i(996), l = i(3429), c = i(5786), u = i(4643), h = i(9017); t.default = class { constructor(e, t, i, r, s) { this.configuration = e, this.logger = t, this.webSocket = i, this.reconnectController = r, this.sigV4 = s, this.observerQueue = new Set, this.webSocket || (this.webSocket = new c.default(this.logger)), this.reconnectController || (this.reconnectController = new a.default(e.reconnectTimeoutMs, new o.default(e.reconnectFixedWaitMs, e.reconnectShortBackoffMs, e.reconnectLongBackoffMs))), this.sigV4 || (this.sigV4 = new l.default(this.configuration.chimeClient)), n.default.addLogger(this.logger), n.default.register() } addObserver(e) { this.logger.info("adding messaging observer"), this.observerQueue.add(e) } removeObserver(e) { this.logger.info("removing messaging observer"), this.observerQueue.delete(e) } start() { return r(this, void 0, void 0, (function* () { this.isClosed() ? yield this.startConnecting(!1) : this.logger.info("messaging session already started") })) } stop() { this.isClosed() ? this.logger.info("no existing messaging session needs closing") : (this.isClosing = !0, this.webSocket.close(), n.default.removeLogger(this.logger)) } forEachObserver(e) { for (const t of this.observerQueue) d.default.nextTick((() => { this.observerQueue.has(t) && e(t) })) } setUpEventListeners() { this.webSocket.addEventListener("open", (() => { this.openEventHandler() })), this.webSocket.addEventListener("message", (e => { this.receiveMessageHandler(e.data) })), this.webSocket.addEventListener("close", (e => { this.closeEventHandler(e) })), this.webSocket.addEventListener("error", (() => { this.logger.error("WebSocket error") })) } startConnecting(e) { return r(this, void 0, void 0, (function* () { const t = yield this.prepareWebSocketUrl(); this.logger.info(`opening connection to ${t}`), e || this.reconnectController.reset(), this.reconnectController.hasStartedConnectionAttempt() ? this.reconnectController.startedConnectionAttempt(!1) : this.reconnectController.startedConnectionAttempt(!0), this.webSocket.create(t, [], !0), this.forEachObserver((t => { t.messagingSessionDidStartConnecting && t.messagingSessionDidStartConnecting(e) })), this.setUpEventListeners() })) } prepareWebSocketUrl() { return r(this, void 0, void 0, (function* () { const e = new Map; return e.set("userArn", [this.configuration.userArn]), e.set("sessionId", [this.configuration.messagingSessionId]), this.configuration.prefetchOn === h.default.Connect && e.set("prefetch-on", [h.default.Connect]), yield this.sigV4.signURL("GET", "wss", "chime", this.configuration.endpointUrl, "/connect", "", e) })) } isClosed() { return this.webSocket.readyState() === u.default.None || this.webSocket.readyState() === u.default.Closed } openEventHandler() { this.reconnectController.reset(), this.isSessionEstablished = !1 } receiveMessageHandler(e) { try { const t = JSON.parse(e), i = t.Headers["x-amz-chime-event-type"], r = new s.default(i, t.Headers, t.Payload || null); if (this.isSessionEstablished || "SESSION_ESTABLISHED" !== i) { if (!this.isSessionEstablished) return } else this.forEachObserver((e => { e.messagingSessionDidStart && e.messagingSessionDidStart() })), this.isSessionEstablished = !0; this.forEachObserver((e => { e.messagingSessionDidReceiveMessage && e.messagingSessionDidReceiveMessage(r) })) } catch (e) { this.logger.error(`Messaging parsing failed: ${e}`) } } closeEventHandler(e) { this.logger.info(`WebSocket close: ${e.code} ${e.reason}`), this.webSocket.destroy(), !this.isClosing && this.canReconnect(e.code) && this.reconnectController.retryWithBackoff((() => r(this, void 0, void 0, (function* () { this.startConnecting(!0) }))), null) || (this.isClosing = !1, this.isSessionEstablished && this.forEachObserver((t => { t.messagingSessionDidStop && t.messagingSessionDidStop(e) }))) } canReconnect(e) { return 1001 === e || 1006 === e || e >= 1011 && e <= 1014 || e > 4e3 && 4002 !== e && 4003 !== e && 4401 !== e } } }, 4665: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i, r) { this.userArn = e, this.messagingSessionId = t, this.endpointUrl = i, this.chimeClient = r, this.reconnectTimeoutMs = 1e4, this.reconnectFixedWaitMs = 0, this.reconnectShortBackoffMs = 1e3, this.reconnectLongBackoffMs = 5e3, this.prefetchOn = void 0, this.messagingSessionId || (this.messagingSessionId = this.generateSessionId()) } generateSessionId() { const e = new Uint32Array(1); return window.crypto.getRandomValues(e)[0].toString() } } }, 9017: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), function (e) { e.Connect = "connect" }(i || (i = {})), t.default = i }, 6878: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9511); class o { constructor(e) { this._id = e } id() { return this._id } base() { return this._id ? this._id.split(o.MODALITY_SEPARATOR)[0] : "" } modality() { if (!this._id) return ""; const e = this._id.split(o.MODALITY_SEPARATOR); return 2 === e.length ? e[1] : "" } hasModality(e) { return "" !== e && this.modality() === e } withModality(e) { const t = new o(this.base() + o.MODALITY_SEPARATOR + e); return "" === e || "" === this.base() || new o(t._id).modality() !== e ? new o(this.base()) : t } } t.default = o, o.MODALITY_SEPARATOR = r.default.Modality[0], o.MODALITY_CONTENT = r.default.Modality.substr(1) }, 744: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(996), o = i(2378), n = i(4123), s = i(8330), a = i(2019); t.default = class { constructor(e, t, i) { this.signalingClient = e, this.intervalMs = t, this.logger = i, this.observerQueue = new Set, this.consecutivePongsUnaccountedFor = 0, this.intervalScheduler = new o.default(this.intervalMs), this.pingId = 0 } addObserver(e) { this.logger.info("adding a ping-pong observer"), this.observerQueue.add(e) } removeObserver(e) { this.logger.info("removing a ping-pong observer"), this.observerQueue.delete(e) } forEachObserver(e) { for (const t of this.observerQueue) r.default.nextTick((() => { this.observerQueue.has(t) && e(t) })) } start() { this.stop(), this.signalingClient.registerObserver(this), this.signalingClient.ready() && this.startPingInterval() } stop() { this.stopPingInterval(), this.signalingClient.removeObserver(this) } startPingInterval() { this.intervalScheduler.start((() => { this.ping() })), this.ping() } stopPingInterval() { this.intervalScheduler.stop(), this.pingId = 0, this.consecutivePongsUnaccountedFor = 0 } ping() { this.consecutivePongsUnaccountedFor > 0 && (this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`), this.forEachObserver((e => { a.Maybe.of(e.didMissPongs).map((t => t.bind(e)(this.consecutivePongsUnaccountedFor))) }))), this.consecutivePongsUnaccountedFor += 1, this.pingId = this.pingId + 1 & 4294967295; const e = s.SdkPingPongFrame.create(); e.pingId = this.pingId, e.type = s.SdkPingPongType.PING, this.pingTimestampLocalMs = this.signalingClient.pingPong(e), this.logger.debug((() => `sent ping ${this.pingId}`)) } pong(e) { const t = s.SdkPingPongFrame.create(); t.pingId = e, t.type = s.SdkPingPongType.PONG, this.signalingClient.pingPong(t) } handleSignalingClientEvent(e) { switch (e.type) { case n.default.WebSocketOpen: this.startPingInterval(); break; case n.default.WebSocketFailed: case n.default.WebSocketError: this.logger.warn(`stopped pinging (${n.default[e.type]})`), this.stopPingInterval(); break; case n.default.WebSocketClosing: case n.default.WebSocketClosed: this.logger.info(`stopped pinging (${n.default[e.type]})`), this.stopPingInterval(); break; case n.default.ReceivedSignalFrame: if (e.message.type !== s.SdkSignalFrame.Type.PING_PONG) break; if (e.message.pingPong.type === s.SdkPingPongType.PONG) { const t = e.message.pingPong.pingId; if (t !== this.pingId) { this.logger.warn(`unexpected ping id ${t} (expected ${this.pingId})`); break } let i; if (this.consecutivePongsUnaccountedFor = 0, "number" != typeof e.message.timestampMs) break; i = e.message.timestampMs, this.logger.debug((() => `received pong ${t} with timestamp ${i}`)); const r = e.timestampMs - this.pingTimestampLocalMs, o = Math.round(i - r / 2), n = this.pingTimestampLocalMs - o; this.logger.info(`local clock skew estimate=${n}ms from ping-pong time=${r}ms`), this.forEachObserver((e => { a.Maybe.of(e.didReceivePong).map((i => i.bind(e)(t, n, r))) })) } else this.pong(e.message.pingPong.pingId) } } } }, 7461: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(797), o = i(2260), n = i(6490); t.default = class { constructor(e, t) { this.mediaStreamBroker = e, this.state = new o.default, this._transcriptionController = t || new r.default(this) } realtimeSetLocalAttendeeId(e, t) { this.state.localAttendeeId = e, this.state.localExternalUserId = t } realtimeSetAttendeeIdPresence(e, t, i, r, o) { try { t && (this.state.attendeeIdToExternalUserId[e] = i); for (const n of this.state.attendeeIdChangesCallbacks) n(e, t, i, r, o) } catch (e) { this.onError(e) } } realtimeSubscribeToAttendeeIdPresence(e) { try { this.state.attendeeIdChangesCallbacks.push(e) } catch (e) { this.onError(e) } } realtimeUnsubscribeToAttendeeIdPresence(e) { try { const t = this.state.attendeeIdChangesCallbacks.indexOf(e); -1 !== t && this.state.attendeeIdChangesCallbacks.splice(t, 1) } catch (e) { this.onError(e) } } realtimeSetCanUnmuteLocalAudio(e) { try { if (this.state.canUnmute === e) return; this.state.canUnmute = e; for (const t of this.state.setCanUnmuteLocalAudioCallbacks) t(e) } catch (e) { this.onError(e) } } realtimeSubscribeToSetCanUnmuteLocalAudio(e) { try { this.state.setCanUnmuteLocalAudioCallbacks.push(e) } catch (e) { this.onError(e) } } realtimeUnsubscribeToSetCanUnmuteLocalAudio(e) { try { const t = this.state.setCanUnmuteLocalAudioCallbacks.indexOf(e); -1 !== t && this.state.setCanUnmuteLocalAudioCallbacks.splice(t, 1) } catch (e) { this.onError(e) } } realtimeCanUnmuteLocalAudio() { return this.state.canUnmute } realtimeMuteLocalAudio() { if (!this.state.muted) try { this.setAudioInputEnabled(!1), this.state.muted = !0, this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId, null, null, null, this.state.localExternalUserId); for (const e of this.state.muteAndUnmuteLocalAudioCallbacks) e(!0) } catch (e) { this.onError(e) } } realtimeUnmuteLocalAudio() { if (!this.state.muted) return !0; if (!this.state.canUnmute) return !1; try { this.setAudioInputEnabled(!0), this.state.muted = !1, this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId, null, null, null, this.state.localExternalUserId); for (const e of this.state.muteAndUnmuteLocalAudioCallbacks) e(!1); return !0 } catch (e) { return this.onError(e), !1 } } realtimeSubscribeToMuteAndUnmuteLocalAudio(e) { try { this.state.muteAndUnmuteLocalAudioCallbacks.push(e) } catch (e) { this.onError(e) } } realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e) { try { const t = this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(e); -1 !== t && this.state.muteAndUnmuteLocalAudioCallbacks.splice(t, 1) } catch (e) { this.onError(e) } } realtimeIsLocalAudioMuted() { return this.state.muted } realtimeSubscribeToVolumeIndicator(e, t) { try { this.state.volumeIndicatorCallbacks.hasOwnProperty(e) || (this.state.volumeIndicatorCallbacks[e] = []), this.state.volumeIndicatorCallbacks[e].push(t), this.sendVolumeIndicatorChange(e, !0, !0, !0, this.state.attendeeIdToExternalUserId[e]) } catch (e) { this.onError(e) } } realtimeUnsubscribeFromVolumeIndicator(e, t) { if (this.state.volumeIndicatorCallbacks[e]) if (t) { const i = this.state.volumeIndicatorCallbacks[e].indexOf(t); i >= 0 && this.state.volumeIndicatorCallbacks[e].splice(i, 1) } else delete this.state.volumeIndicatorCallbacks[e] } realtimeUpdateVolumeIndicator(e, t, i, r, o) { try { i = this.applyLocalMuteOverride(e, i); const n = this.getVolumeIndicatorState(e); let s = !1, a = !1, d = !1; null !== i && n.muted !== i && (n.muted = i, a = !0, n.muted && 0 !== n.volume && (n.volume = 0, s = !0)), n.muted || null === t || (n.volume !== t && (n.volume = t, s = !0), null === n.muted && (n.muted = !1, a = !0)), null !== r && n.signalStrength !== r && (n.signalStrength = r, d = !0), this.sendVolumeIndicatorChange(e, s, a, d, o) } catch (e) { this.onError(e) } } realtimeSubscribeToLocalSignalStrengthChange(e) { try { if (this.state.localSignalStrengthChangeCallbacks.push(e), null === this.state.localAttendeeId) return; this.sendLocalSignalStrengthChange(this.state.localAttendeeId, !0) } catch (e) { this.onError(e) } } realtimeUnsubscribeToLocalSignalStrengthChange(e) { try { const t = this.state.localSignalStrengthChangeCallbacks.indexOf(e); -1 !== t && this.state.localSignalStrengthChangeCallbacks.splice(t, 1) } catch (e) { this.onError(e) } } realtimeSubscribeToSendDataMessage(e) { try { this.state.sendDataMessageCallbacks.push(e) } catch (e) { this.onError(e) } } realtimeUnsubscribeFromSendDataMessage(e) { try { const t = this.state.sendDataMessageCallbacks.indexOf(e); -1 !== t && this.state.sendDataMessageCallbacks.splice(t, 1) } catch (e) { this.onError(e) } } realtimeSendDataMessage(e, t, i) { try { for (const r of this.state.sendDataMessageCallbacks) r(e, t, i) } catch (e) { this.onError(e) } } realtimeSubscribeToReceiveDataMessage(e, t) { try { this.state.receiveDataMessageCallbacks.has(e) ? this.state.receiveDataMessageCallbacks.get(e).push(t) : this.state.receiveDataMessageCallbacks.set(e, [t]) } catch (e) { this.onError(e) } } realtimeUnsubscribeFromReceiveDataMessage(e) { try { this.state.receiveDataMessageCallbacks.delete(e) } catch (e) { this.onError(e) } } realtimeReceiveDataMessage(e) { try { if (this.state.receiveDataMessageCallbacks.has(e.topic)) for (const t of this.state.receiveDataMessageCallbacks.get(e.topic)) t(e) } catch (e) { this.onError(e) } } realtimeSubscribeToFatalError(e) { try { this.state.fatalErrorCallbacks.push(e) } catch (e) { this.onError(e) } } realtimeUnsubscribeToFatalError(e) { try { const t = this.state.fatalErrorCallbacks.indexOf(e); -1 !== t && this.state.fatalErrorCallbacks.splice(t, 1) } catch (e) { this.onError(e) } } get transcriptionController() { return this._transcriptionController } setAudioInputEnabled(e) { e ? this.mediaStreamBroker.unmuteLocalAudioInputStream() : this.mediaStreamBroker.muteLocalAudioInputStream() } applyLocalMuteOverride(e, t) { const i = this.state.localAttendeeId, r = this.state.muted; return e !== i ? t : "activeDevices" in this.mediaStreamBroker && this.mediaStreamBroker.activeDevices.audio ? r : t } sendVolumeIndicatorChange(e, t, i, r, o) { if (this.sendLocalSignalStrengthChange(e, r), !this.state.volumeIndicatorCallbacks.hasOwnProperty(e)) return; const s = this.getVolumeIndicatorState(e), a = new n.default; if (t && (a.volume = s.volume), i && (a.muted = s.muted), r && (a.signalStrength = s.signalStrength), !this.stateIsEmpty(a)) for (const t of this.state.volumeIndicatorCallbacks[e]) t(e, a.volume, a.muted, a.signalStrength, o) } sendLocalSignalStrengthChange(e, t) { if (!t) return; if (e !== this.state.localAttendeeId) return; const i = this.getVolumeIndicatorState(e).signalStrength; if (null !== i) for (const e of this.state.localSignalStrengthChangeCallbacks) e(i) } getVolumeIndicatorState(e) { return this.state.volumeIndicatorState.hasOwnProperty(e) || (this.state.volumeIndicatorState[e] = new n.default), this.state.volumeIndicatorState[e] } stateIsEmpty(e) { return null === e.volume && null === e.muted && null === e.signalStrength } onError(e) { try { for (const t of this.state.fatalErrorCallbacks) t(e) } catch (t) { try { console.error(e), console.error(t) } catch (e) { } } } } }, 6009: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.attendeeIndex = null, this.attendeesInFrame = null } } }, 2260: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.localAttendeeId = null, this.localExternalUserId = null, this.attendeeIdChangesCallbacks = [], this.canUnmute = !0, this.setCanUnmuteLocalAudioCallbacks = [], this.muted = !1, this.muteAndUnmuteLocalAudioCallbacks = [], this.volumeIndicatorState = {}, this.attendeeIdToExternalUserId = {}, this.volumeIndicatorCallbacks = {}, this.localSignalStrengthChangeCallbacks = [], this.fatalErrorCallbacks = [], this.sendDataMessageCallbacks = [], this.receiveDataMessageCallbacks = new Map } } }, 6490: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.volume = null, this.muted = null, this.signalStrength = null } } }, 1316: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2405); class o { constructor(e, t) { this.reconnectTimeoutMs = e, this.backoffPolicy = t, this.shouldReconnect = !0, this.onlyRestartPeerConnection = !1, this.firstConnectionAttempted = !1, this.firstConnectionAttemptTimestampMs = 0, this.lastActiveTimestampMs = 1 / 0, this._isFirstConnection = !0, this.backoffTimer = null, this.backoffCancel = null, this.reset() } timeSpentReconnectingMs() { return this.firstConnectionAttempted ? Date.now() - this.firstConnectionAttemptTimestampMs : 0 } hasPastReconnectDeadline() { return Date.now() - this.lastActiveTimestampMs >= this.reconnectTimeoutMs || this.timeSpentReconnectingMs() >= this.reconnectTimeoutMs } reset() { this.cancel(), this.shouldReconnect = !0, this.onlyRestartPeerConnection = !1, this.firstConnectionAttempted = !1, this.firstConnectionAttemptTimestampMs = 0, this.lastActiveTimestampMs = 1 / 0, this.backoffPolicy.reset() } startedConnectionAttempt(e) { this._isFirstConnection = e, this.firstConnectionAttempted || (this.firstConnectionAttempted = !0, this.firstConnectionAttemptTimestampMs = Date.now()) } hasStartedConnectionAttempt() { return this.firstConnectionAttempted } isFirstConnection() { return this._isFirstConnection } disableReconnect() { this.shouldReconnect = !1 } enableRestartPeerConnection() { this.onlyRestartPeerConnection = !0 } cancel() { this.disableReconnect(), this.backoffTimer && (this.backoffTimer.stop(), this.backoffCancel && (this.backoffCancel(), this.backoffCancel = null)) } retryWithBackoff(e, t) { const i = this.shouldReconnect && !this.hasPastReconnectDeadline(); return i && (this.backoffCancel = t, this.backoffTimer = new r.default(this.backoffPolicy.nextBackoffAmountMs()), this.backoffTimer.start((() => { this.backoffCancel = null, e() }))), i } shouldOnlyRestartPeerConnection() { return this.onlyRestartPeerConnection } clone() { return new o(this.reconnectTimeoutMs, this.backoffPolicy) } setLastActiveTimestampMs(e) { this.lastActiveTimestampMs = e } } t.default = o }, 996: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2405); class o extends r.default { constructor() { super(0) } static nextTick(e) { setTimeout(e, 0) } } t.default = o }, 2378: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e) { this.intervalMs = e } start(e) { this.stop(), this.timer = setInterval(e, this.intervalMs) } stop() { void 0 !== this.timer && (clearInterval(this.timer), this.timer = void 0) } running() { return void 0 !== this.timer } } }, 2405: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e) { this.timeoutMs = e, this.timer = null } start(e) { this.stop(), this.timer = setTimeout((() => { clearTimeout(this.timer), e() }), this.timeoutMs) } stop() { null !== this.timer && (clearTimeout(this.timer), this.timer = null) } } }, 4052: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(3534), o = i(5131), n = i(9064); class s { constructor(e) { this.sdp = e } clone() { return new s(this.sdp) } static isRTPCandidate(e) { const t = /candidate[:](\S+) (\d+)/g.exec(e); return null !== t && "1" === t[2] } static linesToSDP(e) { return new s(e.join(s.CRLF)) } static candidateTypeFromString(e) { switch (e) { case r.default.Host: return r.default.Host; case r.default.ServerReflexive: return r.default.ServerReflexive; case r.default.PeerReflexive: return r.default.PeerReflexive; case r.default.Relay: return r.default.Relay }return null } static candidateType(e) { const t = /a[=]candidate[:].* typ ([a-z]+) /g.exec(e); return null === t ? null : s.candidateTypeFromString(t[1]) } static mediaType(e) { const t = /m=(audio|video)/g.exec(e); if (null !== t) return t[1] } static mid(e) { if (e.includes("a=mid:")) return e.replace(/^(a=mid:)/, "") } static direction(e) { const t = /a=(sendrecv|sendonly|recvonly|inactive)/g.exec(e); if (null !== t) return t[1] } static splitLines(e) { return e.trim().split("\n").map((e => e.trim())) } static splitSections(e) { return e.split("\nm=").map(((e, t) => (t > 0 ? "m=" + e : e).trim() + s.CRLF)) } static findActiveCameraSection(e) { let t = 0, i = !1; for (const r of e) { if (/^m=video/.test(r) && (r.indexOf("sendrecv") > -1 || -1 === r.indexOf("sendonly") && -1 === r.indexOf("recvonly") && -1 === r.indexOf("inactive"))) { i = !0; break } t++ } return !1 === i && (t = -1), t } static extractSSRCsFromFIDGroupLine(e) { return /^a=ssrc-group:FID\s(.+)/.exec(e)[1] } static matchPrefix(e, t) { return s.splitLines(e).filter((e => 0 === e.indexOf(t))) } lines() { return this.sdp.split(s.CRLF) } hasVideo() { return null !== /^m=video/gm.exec(this.sdp) } hasCandidates() { return null !== /a[=]candidate[:]/g.exec(this.sdp) } hasCandidatesForAllMLines() { return !(this.sdp.indexOf("c=IN IP4 0.0.0.0") > -1) } withoutCandidateType(e) { return s.linesToSDP(this.lines().filter((t => s.candidateType(t) !== e))) } withoutServerReflexiveCandidates() { return this.withoutCandidateType(r.default.ServerReflexive) } withAudioMaxAverageBitrate(e) { if (!e) return this.clone(); e = Math.trunc(Math.min(Math.max(e, s.rfc7587LowestBitrate), s.rfc7587HighestBitrate)); const t = this.lines(), i = s.findOpusFmtpAttributes(t), r = s.updateOpusFmtpAttributes(t, i, [`maxaveragebitrate=${e}`]); return s.linesToSDP(r) } withStereoAudio() { const e = this.lines(), t = s.findOpusFmtpAttributes(e), i = s.updateOpusFmtpAttributes(e, t, ["stereo=1", "sprop-stereo=1"]); return s.linesToSDP(i) } static findOpusFmtpAttributes(e) { const t = /^a=rtpmap:\s*(\d+)\s+opus\/48000/; let i = !1; const r = []; for (const o of e) if (o.startsWith("m=audio") && (r.push(null), i = !0), o.startsWith("m=video") && (i = !1), i) { const e = t.exec(o); null !== e && (r[r.length - 1] = `a=fmtp:${e[1]} `) } return r } static updateOpusFmtpAttributes(e, t, i) { const r = []; let o = 0, n = null; for (const s of e) if (s.startsWith("m=audio") && (n = t[o], o++), s.startsWith("m=video") && (n = null), n && s.startsWith(n)) { const e = s.slice(n.length).split(";"), t = []; for (const r of e) i.findIndex((e => e.startsWith(r.split("=")[0]))) < 0 && t.push(r); for (const e of i) t.push(e); r.push(n + t.join(";")) } else r.push(s); return r } withUnifiedPlanFormat() { let e = this.sdp; return e.includes("mozilla") ? this.clone() : (e = e.replace("o=-", "o=mozilla-chrome"), new s(e)) } getUniqueRtpHeaderExtensionId(e) { const t = []; for (const i of e) if (/^a=extmap:/.test(i.trim())) { const e = +i.split("a=extmap:")[1].split(" ")[0]; t.includes(e) || t.push(e) } t.sort(((e, t) => e - t)); let i = 0; for (const e of t) { if (e - i > 1) return i + 1; i = e } return 14 === i ? -1 : i + 1 } withVideoLayersAllocationRtpHeaderExtension(e) { const t = "http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00", i = e ? e.getRtpHeaderExtensionId(t) : -1, r = -1 === i ? this.getUniqueRtpHeaderExtensionId(s.splitLines(this.sdp)) : i, o = s.splitSections(this.sdp), n = []; for (let e of o) { if (/^m=video/.test(e) && -1 === s.getRtpHeaderExtensionIdInSection(e, t)) { const i = s.splitLines(e), o = []; if (-1 === r || this.hasRtpHeaderExtensionId(r)) { n.push(e); continue } for (const e of i) if (o.push(e), /^a=sendrecv/.test(e.trim())) { const e = "a=extmap:" + r + " " + t; o.push(e) } e = o.join(s.CRLF) + s.CRLF } else if (-1 !== i && /^m=video/.test(e) && s.getRtpHeaderExtensionIdInSection(e, t) !== i) { const r = s.splitLines(e), o = []; for (const e of r) if (/^a=extmap:/.test(e.trim()) && e.split("a=extmap:")[1].split(" ")[1] === t) { if (!this.hasRtpHeaderExtensionId(i)) { const e = "a=extmap:" + i + " " + t; o.push(e) } } else o.push(e); e = o.join(s.CRLF) + s.CRLF } n.push(e) } const a = n.join(""); return new s(a) } ssrcForVideoSendingSection() { const e = this.sdp, t = s.splitSections(e); if (t.length < 2) return ""; const i = s.findActiveCameraSection(t); if (-1 === i) return ""; const r = s.matchPrefix(t[i], "a=ssrc-group:FID "); if (r.length < 1) return ""; const o = s.extractSSRCsFromFIDGroupLine(r[0]), [n] = o.split(" ").map((e => parseInt(e, 10))); return n.toString() } videoSendSectionHasDifferentSSRC(e) { const t = this.ssrcForVideoSendingSection(), i = e.ssrcForVideoSendingSection(); return "" !== t && "" !== i && parseInt(t, 10) !== parseInt(i, 10) } removeH264SupportFromSendSection() { const e = this.sdp, t = s.splitSections(e), i = s.findActiveCameraSection(t); if (-1 === i) return new s(this.sdp); const r = t[i], o = s.splitLines(r), n = [], a = new Map; o.forEach((e => { if (/^a=rtpmap:/.test(e)) { const t = /^a=rtpmap:([0-9]+)\s/.exec(e); t && e.toLowerCase().includes("h264") && n.push(parseInt(t[1], 10)) } if (/^a=fmtp:/.test(e)) { const t = /^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(e); if (t && 3 === t.length) { const e = parseInt(t[1], 10), i = parseInt(t[2], 10); a.has(i) ? a.get(i).push(e) : a.set(i, [e]) } } })); const d = new Set; for (const e of n) { d.add(e); const t = a.get(e); if (t) for (const e of t) d.add(e) } if (n.length > 0) { const e = o[0].split(" "); o[0] = e.filter((e => !d.has(parseInt(e)))).join(" ") } const l = o.filter((e => { if (!e.includes("rtpmap") && !e.includes("rtcp-fb") && !e.includes("fmtp")) return !0; for (const t of d) if (e.includes(t.toString())) return !1; return !0 })); t[i] = l.join(s.CRLF) + s.CRLF; const c = t.join(""); return new s(c) } mediaSections() { const e = s.splitSections(this.sdp); if (e.length < 2) return []; const t = []; for (let i = 1; i < e.length; i++) { const r = new o.default, n = s.splitLines(e[i]); for (const e of n) { const t = s.mediaType(e); if (void 0 !== t) { r.mediaType = t; continue } const i = s.direction(e); if (void 0 !== i) { r.direction = i; continue } const o = s.mid(e); void 0 === o || (r.mid = o) } t.push(r) } return t } static getRtpHeaderExtensionIdInSection(e, t) { const i = s.splitLines(e); for (const e of i) if (/^a=extmap:/.test(e.trim())) { const i = e.split("a=extmap:")[1].split(" "), r = +i[0]; if (i[1] === t) return r } return -1 } getRtpHeaderExtensionId(e) { const t = s.splitSections(this.sdp); for (const i of t) if (/^m=video/.test(i)) { const t = s.getRtpHeaderExtensionIdInSection(i, e); if (-1 !== t) return t } return -1 } hasRtpHeaderExtensionId(e) { const t = s.splitLines(this.sdp); for (const i of t) if (/^a=extmap:/.test(i.trim()) && +i.split("a=extmap:")[1].split(" ")[0] === e) return !0; return !1 } withVideoSendCodecPreferences(e) { const t = this.sdp, i = s.splitSections(t), r = s.findActiveCameraSection(i); if (-1 === r) return new s(this.sdp); i[r] = this.sectionWithCodecPreferences(i[r], e); const o = i.join(""); return new s(o) } sectionWithCodecPreferences(e, t) { const i = new Map, r = s.splitLines(e); r.forEach((e => { if (/^a=rtpmap:/.test(e)) for (const o of t) { if (!e.includes(`${o.codecName}/${o.codecCapability.clockRate}`)) continue; const t = /^a=rtpmap:([0-9]+)\s/.exec(e); let n = !1; if (void 0 !== o.codecCapability.sdpFmtpLine) { for (const e of r) if (e.startsWith(`a=fmtp:${t[1]} ${o.codecCapability.sdpFmtpLine}`)) { n = !0; break } } else n = !0; if (n) { i.set(o.codecName, t[1]); break } } })); const o = new Set(i.values()), n = r[0].split(" ").filter((e => !o.has(e))), a = Array.from(i.values()).sort(((e, r) => t.findIndex((t => i.get(t.codecName) === e)) - t.findIndex((e => i.get(e.codecName) === r)))); return n.splice(3, 0, ...a.values()), r[0] = n.join(" "), r.join(s.CRLF) + s.CRLF } highestPriorityVideoSendCodec() { const e = this.sdp, t = s.splitSections(e), i = s.findActiveCameraSection(t); if (-1 === i) return; const r = s.splitLines(t[i]), o = r[0].split(" "); if (o.length < 4) return; const a = o[3]; let d, l, c; for (const e of r) { const t = /^a=rtpmap:([0-9]+)\s/.exec(e); if (null === t || t.length < 2 || t[1] !== a) continue; const i = e.split(" ")[1].split("/"); if (!(void 0 === i || i.length < 2)) { d = i[0], l = i[1]; for (const e of r) if (e.startsWith(`a=fmtp:${a}`)) { const t = e.split(" "); if (void 0 === t || t.length < 2) return; c = t[1] } break } } return void 0 !== d ? new n.default(d, { clockRate: parseInt(l), mimeType: `video/${d}`, sdpFmtpLine: c }) : void 0 } } t.default = s, s.CRLF = "\r\n", s.rfc7587LowestBitrate = 6e3, s.rfc7587HighestBitrate = 51e4 }, 3534: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.SDPCandidateType = void 0, function (e) { e.Host = "host", e.ServerReflexive = "srflx", e.PeerReflexive = "prflx", e.Relay = "relay" }(i = t.SDPCandidateType || (t.SDPCandidateType = {})), t.default = i }, 5131: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 9064: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(8330); class o { constructor(e, t) { this.codecName = e, this.codecCapability = t } equals(e) { return void 0 !== e && this.codecName === e.codecName && this.codecCapability.mimeType === e.codecCapability.mimeType && this.codecCapability.clockRate === e.codecCapability.clockRate && this.codecCapability.sdpFmtpLine === e.codecCapability.sdpFmtpLine } static vp8() { return new o("VP8", { clockRate: 9e4, mimeType: "video/VP8" }) } static h264ConstrainedBaselineProfile() { return new o("H264", { clockRate: 9e4, mimeType: "video/H264", sdpFmtpLine: "level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f" }) } static h264() { return this.h264ConstrainedBaselineProfile() } static fromSignaled(e) { switch (e) { case r.SdkVideoCodecCapability.VP8: return this.vp8(); case r.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE: return this.h264ConstrainedBaselineProfile(); default: return } } } t.default = o }, 6195: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2845); class o { constructor(e) { this.logger = e } compress(e, t) { if (t.length > 0) { const e = Math.min(t.length, o.MAX_DICTIONARY_SIZE); t = t.slice(0, e) } const i = { memLevel: o.Z_MEM_LEVEL, dictionary: t }; return r.deflateRaw(e, i) } decompress(e, t) { if (t.length > 0) { const e = Math.min(t.length, o.MAX_DICTIONARY_SIZE); t = t.slice(0, e) } const i = { to: "string", dictionary: t, chunkSize: 4096 }; let n = ""; try { n = r.inflateRaw(e, i) } catch (e) { this.logger.error(`failed to decompress the string with error: [${e}]`) } return n } } t.default = o, o.Z_MEM_LEVEL = 9, o.MAX_DICTIONARY_SIZE = 31744 }, 4549: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9694), o = i(5081), n = i(9042), s = i(5462); t.default = class { constructor(e) { this.logger = e, this.currentState = n.SessionStateControllerState.NotConnected, this.deferredAction = null, this.deferredWork = null } perform(e, t) { const i = this.currentState; if (i === n.SessionStateControllerState.NotConnected && e === r.SessionStateControllerAction.Connect) this.transition(n.SessionStateControllerState.Connecting, e); else if (i === n.SessionStateControllerState.Connecting && e === r.SessionStateControllerAction.Fail) this.transition(n.SessionStateControllerState.Disconnecting, e); else if (i === n.SessionStateControllerState.Connecting && e === r.SessionStateControllerAction.FinishConnecting) this.transition(n.SessionStateControllerState.Connected, e); else if (i === n.SessionStateControllerState.Connected && e === r.SessionStateControllerAction.Disconnect) this.transition(n.SessionStateControllerState.Disconnecting, e); else if (i === n.SessionStateControllerState.Connected && e === r.SessionStateControllerAction.Reconnect) this.transition(n.SessionStateControllerState.Connecting, e); else if (i === n.SessionStateControllerState.Connected && e === r.SessionStateControllerAction.Fail) this.transition(n.SessionStateControllerState.Disconnecting, e); else if (i === n.SessionStateControllerState.Connected && e === r.SessionStateControllerAction.Update) this.transition(n.SessionStateControllerState.Updating, e); else if (i === n.SessionStateControllerState.Updating && e === r.SessionStateControllerAction.Fail) this.transition(n.SessionStateControllerState.Disconnecting, e); else if (i === n.SessionStateControllerState.Updating && e === r.SessionStateControllerAction.FinishUpdating) this.transition(n.SessionStateControllerState.Connected, e); else { if (i !== n.SessionStateControllerState.Disconnecting || e !== r.SessionStateControllerAction.FinishDisconnecting) return this.canDefer(e) ? (this.logger.info(`deferring transition from ${n.SessionStateControllerState[this.currentState]} with ${r.SessionStateControllerAction[e]}`), this.deferAction(e, t), s.SessionStateControllerTransitionResult.DeferredTransition) : (this.logger.warn(`no transition found from ${n.SessionStateControllerState[this.currentState]} with ${r.SessionStateControllerAction[e]}`), s.SessionStateControllerTransitionResult.NoTransitionAvailable); this.transition(n.SessionStateControllerState.NotConnected, e) } try { t() } catch (t) { return this.logger.error(`error during state ${n.SessionStateControllerState[this.currentState]} with action ${r.SessionStateControllerAction[e]}: ${t}`), this.logger.info(`rolling back transition to ${n.SessionStateControllerState[i]}`), this.currentState = i, s.SessionStateControllerTransitionResult.TransitionFailed } return this.performDeferredAction(), s.SessionStateControllerTransitionResult.Transitioned } state() { return this.currentState } transition(e, t) { this.logger.info(`transitioning from ${n.SessionStateControllerState[this.currentState]} to ${n.SessionStateControllerState[e]} with ${r.SessionStateControllerAction[t]}`), this.currentState = e } deferPriority(e) { switch (e) { case r.SessionStateControllerAction.Disconnect: return o.SessionStateControllerDeferPriority.VeryHigh; case r.SessionStateControllerAction.Fail: return o.SessionStateControllerDeferPriority.High; case r.SessionStateControllerAction.Reconnect: return o.SessionStateControllerDeferPriority.Medium; case r.SessionStateControllerAction.Update: return o.SessionStateControllerDeferPriority.Low; default: return o.SessionStateControllerDeferPriority.DoNotDefer } } deferAction(e, t) { null !== this.deferredAction && this.deferPriority(this.deferredAction) > this.deferPriority(e) || (this.deferredAction = e, this.deferredWork = t) } canDefer(e) { return this.deferPriority(e) !== o.SessionStateControllerDeferPriority.DoNotDefer && (this.currentState === n.SessionStateControllerState.Connecting || this.currentState === n.SessionStateControllerState.Updating) } performDeferredAction() { if (!this.deferredAction) return; const e = this.deferredAction, t = this.deferredWork; this.deferredAction = null, this.deferredWork = null, this.logger.info(`performing deferred action ${r.SessionStateControllerAction[e]}`), this.perform(e, t) !== s.SessionStateControllerTransitionResult.Transitioned && this.logger.info(`unable to perform deferred action ${r.SessionStateControllerAction[e]} in state ${n.SessionStateControllerState[this.currentState]}`) } } }, 9694: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.SessionStateControllerAction = void 0, function (e) { e[e.Connect = 0] = "Connect", e[e.FinishConnecting = 1] = "FinishConnecting", e[e.Update = 2] = "Update", e[e.FinishUpdating = 3] = "FinishUpdating", e[e.Reconnect = 4] = "Reconnect", e[e.Disconnect = 5] = "Disconnect", e[e.Fail = 6] = "Fail", e[e.FinishDisconnecting = 7] = "FinishDisconnecting" }(i = t.SessionStateControllerAction || (t.SessionStateControllerAction = {})), t.default = i }, 5081: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.SessionStateControllerDeferPriority = void 0, function (e) { e[e.DoNotDefer = 0] = "DoNotDefer", e[e.Low = 1] = "Low", e[e.Medium = 2] = "Medium", e[e.High = 3] = "High", e[e.VeryHigh = 4] = "VeryHigh" }(i = t.SessionStateControllerDeferPriority || (t.SessionStateControllerDeferPriority = {})), t.default = i }, 9042: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.SessionStateControllerState = void 0, function (e) { e[e.NotConnected = 0] = "NotConnected", e[e.Connecting = 1] = "Connecting", e[e.Connected = 2] = "Connected", e[e.Updating = 3] = "Updating", e[e.Disconnecting = 4] = "Disconnecting" }(i = t.SessionStateControllerState || (t.SessionStateControllerState = {})), t.default = i }, 5462: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.SessionStateControllerTransitionResult = void 0, function (e) { e[e.Transitioned = 0] = "Transitioned", e[e.NoTransitionAvailable = 1] = "NoTransitionAvailable", e[e.DeferredTransition = 2] = "DeferredTransition", e[e.TransitionFailed = 3] = "TransitionFailed" }(i = t.SessionStateControllerTransitionResult || (t.SessionStateControllerTransitionResult = {})), t.default = i }, 3837: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9297), o = i(2405), n = i(8330), s = i(8495), a = i(4643), d = i(3191), l = i(9516), c = i(4123); class u { constructor(e, t) { this.webSocket = e, this.logger = t, this.unloadHandler = null, this.closeEventHandler = e => { this.deactivatePageUnloadHandler(), this.resetConnection(), this.sendEvent(new l.default(this, c.default.WebSocketClosed, null, e.code, e.reason)), this.serviceConnectionRequestQueue() }, this.observerQueue = new Set, this.connectionRequestQueue = [], this.resetConnection(), this.logger.debug((() => "signaling client init")), this.audioSessionId = this.generateNewAudioSessionId() } registerObserver(e) { this.logger.debug((() => "registering signaling client observer")), this.observerQueue.add(e) } removeObserver(e) { this.logger.debug((() => "removing signaling client observer")), this.observerQueue.delete(e) } openConnection(e) { this.logger.info("adding connection request to queue: " + e.url()), this.connectionRequestQueue.push(e), this.closeConnection() } pingPong(e) { this.logger.debug((() => "sending ping")); const t = n.SdkSignalFrame.create(); return t.type = n.SdkSignalFrame.Type.PING_PONG, t.pingPong = e, this.sendMessage(t), t.timestampMs } join(e) { this.logger.info("sending join"); const t = n.SdkJoinFrame.create(); t.protocolVersion = 2, t.flags = n.SdkJoinFlags.HAS_STREAM_UPDATE; const i = new r.default, o = { platformName: i.name(), platformVersion: i.version(), clientSource: s.default.sdkName, chimeSdkVersion: s.default.sdkVersion }; if (e.applicationMetadata) { const { appName: t, appVersion: i } = e.applicationMetadata; o.appName = t, o.appVersion = i } t.clientDetails = n.SdkClientDetails.create(o), t.audioSessionId = this.audioSessionId, t.wantsCompressedSdp = u.CLIENT_SUPPORTS_COMPRESSION, t.serverSideNetworkAdaption = d.convertServerSideNetworkAdaptionEnumToSignaled(e.serverSideNetworkAdaption), e.serverSideNetworkAdaption === d.default.BandwidthProbing && (t.wantsServerSideNetworkProbingOnReceiveSideEstimator = !0), t.supportedServerSideNetworkAdaptions = e.supportedServerSideNetworkAdaptions.map(d.convertServerSideNetworkAdaptionEnumToSignaled); const a = n.SdkSignalFrame.create(); a.type = n.SdkSignalFrame.Type.JOIN, a.join = t, this.sendMessage(a) } subscribe(e) { const t = n.SdkSubscribeFrame.create(); if (t.sendStreams = [], t.sdpOffer = e.sdpOffer, e.connectionTypeHasVideo && (t.receiveStreamIds = e.receiveStreamIds), e.audioHost && (t.audioCheckin = e.audioCheckin, t.audioHost = e.audioHost, t.audioMuted = e.audioMuted, !e.audioCheckin)) { const i = n.SdkStreamDescriptor.create(); i.mediaType = n.SdkStreamMediaType.AUDIO, i.trackLabel = "AmazonChimeExpressAudio", i.attendeeId = e.attendeeId, i.streamId = 1, i.groupId = 1, i.framerate = 15, i.maxBitrateKbps = 600, i.avgBitrateBps = 4e5, t.sendStreams.push(i) } if (t.compressedSdpOffer = e.compressedSdpOffer, t.duplex = n.SdkStreamServiceType.RX, e.localVideoEnabled) { t.duplex = n.SdkStreamServiceType.DUPLEX; for (let i = 0; i < e.videoStreamDescriptions.length; i++) { const r = e.videoStreamDescriptions[i].clone(); r.attendeeId = e.attendeeId, t.sendStreams.push(r.toStreamDescriptor()) } } e.videoSubscriptionConfiguration.length > 0 && (t.videoSubscriptionConfiguration = e.videoSubscriptionConfiguration.map(this.convertVideoSubscriptionConfiguration)); const i = n.SdkSignalFrame.create(); i.type = n.SdkSignalFrame.Type.SUBSCRIBE, i.sub = t, this.sendMessage(i) } remoteVideoUpdate(e, t) { const i = n.SdkRemoteVideoUpdateFrame.create(); i.addedOrUpdatedVideoSubscriptions = e.map(this.convertVideoSubscriptionConfiguration), i.removedVideoSubscriptionMids = t; const r = n.SdkSignalFrame.create(); r.type = n.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE, r.remoteVideoUpdate = i, this.sendMessage(r) } convertVideoSubscriptionConfiguration(e) { const t = new n.SdkVideoSubscriptionConfiguration; return t.mid = e.mid, t.attendeeId = e.attendeeId, t.streamId = e.streamId, t.groupId = e.groupId, t.priority = e.priority, t.targetBitrateKbps = e.targetBitrateKbps, t } leave() { const e = n.SdkSignalFrame.create(); e.type = n.SdkSignalFrame.Type.LEAVE, e.leave = n.SdkLeaveFrame.create(), this.sendMessage(e), this.logger.debug((() => "sent leave")) } sendClientMetrics(e) { const t = n.SdkSignalFrame.create(); t.type = n.SdkSignalFrame.Type.CLIENT_METRIC, t.clientMetric = e, this.sendMessage(t) } sendDataMessage(e) { const t = n.SdkSignalFrame.create(); t.type = n.SdkSignalFrame.Type.DATA_MESSAGE, t.dataMessage = e, this.sendMessage(t) } closeConnection() { var e, t; if (this.webSocket.readyState() !== a.default.None && this.webSocket.readyState() !== a.default.Closed) { this.isClosing = !0, this.sendEvent(new l.default(this, c.default.WebSocketClosing, null)); const i = new o.default(u.CLOSE_EVENT_TIMEOUT_MS), r = e => { var t, o; null === (o = (t = this.webSocket).removeEventListener) || void 0 === o || o.call(t, "close", r), i.stop(), this.closeEventHandler(e) }; null === (t = (e = this.webSocket).removeEventListener) || void 0 === t || t.call(e, "close", this.closeEventHandler), this.webSocket.addEventListener("close", r), i.start((() => { r(new CloseEvent("close", { wasClean: !1, code: 1006, reason: "", bubbles: !1 })) })), this.webSocket.close(), this.deactivatePageUnloadHandler() } else this.logger.info("no existing signaling client connection needs closing"), this.serviceConnectionRequestQueue() } ready() { return this.webSocket.readyState() === a.default.Open && !this.isClosing && this.wasOpened } mute(e) { const t = n.SdkSignalFrame.create(); t.type = n.SdkSignalFrame.Type.AUDIO_CONTROL; const i = n.SdkAudioControlFrame.create(); i.muted = e, t.audioControl = i, this.sendMessage(t) } pause(e) { const t = n.SdkSignalFrame.create(); t.type = n.SdkSignalFrame.Type.PAUSE, t.pause = n.SdkPauseResumeFrame.create(), t.pause.streamIds = e, this.sendMessage(t) } resume(e) { const t = n.SdkSignalFrame.create(); t.type = n.SdkSignalFrame.Type.RESUME, t.pause = n.SdkPauseResumeFrame.create(), t.pause.streamIds = e, this.sendMessage(t) } resetConnection() { this.webSocket.destroy(), this.wasOpened = !1 } sendMessage(e) { e.timestampMs = Date.now(), this.logger.debug((() => `sending: ${JSON.stringify(e)}`)); const t = this.prependWithFrameTypeRTC(n.SdkSignalFrame.encode(e).finish()); if (this.ready()) { if (!this.webSocket.send(t)) return void this.sendEvent(new l.default(this, c.default.WebSocketSendMessageFailure, null)); this.sendEvent(new l.default(this, c.default.WebSocketSentMessage, null)) } else this.sendEvent(new l.default(this, c.default.WebSocketSkippedMessage, null)) } receiveMessage(e) { let t; try { t = n.SdkSignalFrame.decode(e) } catch (t) { return this.logger.info(`failed to decode: ${e}`), void this.sendEvent(new l.default(this, c.default.ProtocolDecodeFailure, null)) } this.logger.debug((() => `received: ${JSON.stringify(t)}`)), this.webSocket.readyState() === a.default.Open ? this.sendEvent(new l.default(this, c.default.ReceivedSignalFrame, t)) : this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(t)}`) } stripFrameTypeRTC(e) { const t = e[0]; return t !== u.FRAME_TYPE_RTC && 2 !== t && this.logger.warn(`expected FrameTypeRTC for message but got ${t}`), e.slice(1) } prependWithFrameTypeRTC(e) { const t = new Uint8Array(e.length + 1); return t[0] = u.FRAME_TYPE_RTC, t.set(e, 1), t } serviceConnectionRequestQueue() { if (0 === this.connectionRequestQueue.length) return void this.logger.info("no connection requests to service"); const e = this.connectionRequestQueue.shift(); this.logger.info(`opening connection to ${e.url()}`), this.isClosing = !1, this.webSocket.create(e.url(), e.protocols()), this.setUpEventListeners(), this.sendEvent(new l.default(this, c.default.WebSocketConnecting, null)) } sendEvent(e) { switch (e.type) { case c.default.WebSocketMessage: case c.default.ReceivedSignalFrame: case c.default.WebSocketSentMessage: this.logger.debug((() => `notifying event: ${c.default[e.type]}`)); break; case c.default.WebSocketSkippedMessage: this.logger.debug((() => `notifying event: ${c.default[e.type]}, websocket state=${a.default[this.webSocket.readyState()]}`)); break; default: this.logger.info(`notifying event: ${c.default[e.type]}`) }for (const t of this.observerQueue) t.handleSignalingClientEvent(e) } setUpEventListeners() { this.webSocket.addEventListener("open", (() => { this.activatePageUnloadHandler(), this.wasOpened = !0, this.sendEvent(new l.default(this, c.default.WebSocketOpen, null)) })), this.webSocket.addEventListener("message", (e => { this.sendEvent(new l.default(this, c.default.WebSocketMessage, null)), this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(e.data))) })), this.webSocket.addEventListener("close", this.closeEventHandler), this.webSocket.addEventListener("error", (() => { !this.isClosing || this.wasOpened ? this.wasOpened ? (this.logger.error("received error while connected"), this.sendEvent(new l.default(this, c.default.WebSocketError, null))) : (this.logger.error("failed to connect"), this.sendEvent(new l.default(this, c.default.WebSocketFailed, null))) : this.logger.info("ignoring error closing signaling while connecting") })) } activatePageUnloadHandler() { this.unloadHandler = () => { this.leave() }; const e = i.g; e.window && e.window.addEventListener && window.addEventListener("unload", this.unloadHandler) } deactivatePageUnloadHandler() { const e = i.g; e.window && e.window.removeEventListener && window.removeEventListener("unload", this.unloadHandler), this.unloadHandler = null } generateNewAudioSessionId() { const e = new Uint32Array(1); return window.crypto.getRandomValues(e)[0] } promoteToPrimaryMeeting(e) { const t = n.SdkMeetingSessionCredentials.create(); t.attendeeId = e.attendeeId, t.externalUserId = e.externalUserId, t.joinToken = e.joinToken; const i = n.SdkPrimaryMeetingJoinFrame.create(); i.credentials = t; const r = n.SdkSignalFrame.create(); r.type = n.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN, r.primaryMeetingJoin = i, this.sendMessage(r) } demoteFromPrimaryMeeting() { const e = n.SdkPrimaryMeetingLeaveFrame.create(), t = n.SdkSignalFrame.create(); t.type = n.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE, t.primaryMeetingLeave = e, this.sendMessage(t) } } t.default = u, u.FRAME_TYPE_RTC = 5, u.CLOSE_EVENT_TIMEOUT_MS = 2e3, u.CLIENT_SUPPORTS_COMPRESSION = !0 }, 3191: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.convertServerSideNetworkAdaptionEnumToSignaled = t.convertServerSideNetworkAdaptionEnumFromSignaled = t.ServerSideNetworkAdaption = void 0; const r = i(8330); var o; !function (e) { e[e.Default = 0] = "Default", e[e.None = 1] = "None", e[e.BandwidthProbing = 2] = "BandwidthProbing" }(o = t.ServerSideNetworkAdaption || (t.ServerSideNetworkAdaption = {})), t.default = o, t.convertServerSideNetworkAdaptionEnumFromSignaled = function (e) { switch (e) { case r.SdkServerSideNetworkAdaption.DEFAULT: return o.Default; case r.SdkServerSideNetworkAdaption.NONE: return o.None; case r.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING: return o.BandwidthProbing } }, t.convertServerSideNetworkAdaptionEnumToSignaled = function (e) { switch (e) { case o.Default: return r.SdkServerSideNetworkAdaption.DEFAULT; case o.None: return r.SdkServerSideNetworkAdaption.NONE; case o.BandwidthProbing: return r.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING } } }, 7809: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t) { this.signalingURL = e, this.joinToken = t } url() { return this.signalingURL + "?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1" } protocols() { return ["_aws_wt_session", this.joinToken] } } }, 9516: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(4123); t.default = class { constructor(e, t, i, r, o) { this.client = e, this.type = t, this.message = i, this.closeCode = r, this.closeReason = o, this.timestampMs = Date.now() } isConnectionTerminated() { switch (this.type) { case r.default.WebSocketFailed: case r.default.WebSocketError: case r.default.WebSocketClosing: case r.default.WebSocketClosed: return !0; default: return !1 } } } }, 4123: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.SignalingClientEventType = void 0, function (e) { e[e.WebSocketConnecting = 0] = "WebSocketConnecting", e[e.WebSocketOpen = 1] = "WebSocketOpen", e[e.WebSocketError = 2] = "WebSocketError", e[e.WebSocketClosing = 3] = "WebSocketClosing", e[e.WebSocketClosed = 4] = "WebSocketClosed", e[e.WebSocketFailed = 5] = "WebSocketFailed", e[e.WebSocketMessage = 6] = "WebSocketMessage", e[e.WebSocketSendMessageFailure = 7] = "WebSocketSendMessageFailure", e[e.WebSocketSentMessage = 8] = "WebSocketSentMessage", e[e.ProtocolDecodeFailure = 9] = "ProtocolDecodeFailure", e[e.ReceivedSignalFrame = 10] = "ReceivedSignalFrame", e[e.WebSocketSkippedMessage = 11] = "WebSocketSkippedMessage" }(i = t.SignalingClientEventType || (t.SignalingClientEventType = {})), t.default = i }, 7100: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(3191); t.default = class { constructor(e) { this.applicationMetadata = e, this.serverSideNetworkAdaption = r.default.Default, this.supportedServerSideNetworkAdaptions = [] } } }, 2190: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t, i, r, o, n, s, a, d, l) { this.attendeeId = e, this.sdpOffer = t, this.audioHost = i, this.audioMuted = r, this.audioCheckin = o, this.receiveStreamIds = n, this.localVideoEnabled = s, this.videoStreamDescriptions = a, this.connectionTypeHasVideo = d, this.compressedSdpOffer = l, this.videoSubscriptionConfiguration = [] } } }, 2402: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 8330: (e, t, i) => { "use strict"; var r, o, n = i(3737), s = n.Reader, a = n.Writer, d = n.util, l = n.roots.default || (n.roots.default = {}); l.SdkSignalFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } var t, i; return e.prototype.timestampMs = d.Long ? d.Long.fromBits(0, 0, !0) : 0, e.prototype.type = 1, e.prototype.error = null, e.prototype.join = null, e.prototype.joinack = null, e.prototype.sub = null, e.prototype.suback = null, e.prototype.index = null, e.prototype.pause = null, e.prototype.leave = null, e.prototype.leaveAck = null, e.prototype.bitrates = null, e.prototype.audioControl = null, e.prototype.audioMetadata = null, e.prototype.audioStreamIdInfo = null, e.prototype.pingPong = null, e.prototype.audioStatus = null, e.prototype.clientMetric = null, e.prototype.dataMessage = null, e.prototype.remoteVideoUpdate = null, e.prototype.primaryMeetingJoin = null, e.prototype.primaryMeetingJoinAck = null, e.prototype.primaryMeetingLeave = null, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), t.uint32(8).uint64(e.timestampMs), t.uint32(16).int32(e.type), null != e.error && Object.hasOwnProperty.call(e, "error") && l.SdkErrorFrame.encode(e.error, t.uint32(26).fork()).ldelim(), null != e.join && Object.hasOwnProperty.call(e, "join") && l.SdkJoinFrame.encode(e.join, t.uint32(34).fork()).ldelim(), null != e.joinack && Object.hasOwnProperty.call(e, "joinack") && l.SdkJoinAckFrame.encode(e.joinack, t.uint32(42).fork()).ldelim(), null != e.sub && Object.hasOwnProperty.call(e, "sub") && l.SdkSubscribeFrame.encode(e.sub, t.uint32(50).fork()).ldelim(), null != e.suback && Object.hasOwnProperty.call(e, "suback") && l.SdkSubscribeAckFrame.encode(e.suback, t.uint32(58).fork()).ldelim(), null != e.index && Object.hasOwnProperty.call(e, "index") && l.SdkIndexFrame.encode(e.index, t.uint32(66).fork()).ldelim(), null != e.pause && Object.hasOwnProperty.call(e, "pause") && l.SdkPauseResumeFrame.encode(e.pause, t.uint32(82).fork()).ldelim(), null != e.leave && Object.hasOwnProperty.call(e, "leave") && l.SdkLeaveFrame.encode(e.leave, t.uint32(90).fork()).ldelim(), null != e.leaveAck && Object.hasOwnProperty.call(e, "leaveAck") && l.SdkLeaveAckFrame.encode(e.leaveAck, t.uint32(98).fork()).ldelim(), null != e.bitrates && Object.hasOwnProperty.call(e, "bitrates") && l.SdkBitrateFrame.encode(e.bitrates, t.uint32(114).fork()).ldelim(), null != e.audioControl && Object.hasOwnProperty.call(e, "audioControl") && l.SdkAudioControlFrame.encode(e.audioControl, t.uint32(138).fork()).ldelim(), null != e.audioMetadata && Object.hasOwnProperty.call(e, "audioMetadata") && l.SdkAudioMetadataFrame.encode(e.audioMetadata, t.uint32(146).fork()).ldelim(), null != e.audioStreamIdInfo && Object.hasOwnProperty.call(e, "audioStreamIdInfo") && l.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo, t.uint32(154).fork()).ldelim(), null != e.pingPong && Object.hasOwnProperty.call(e, "pingPong") && l.SdkPingPongFrame.encode(e.pingPong, t.uint32(162).fork()).ldelim(), null != e.audioStatus && Object.hasOwnProperty.call(e, "audioStatus") && l.SdkAudioStatusFrame.encode(e.audioStatus, t.uint32(170).fork()).ldelim(), null != e.clientMetric && Object.hasOwnProperty.call(e, "clientMetric") && l.SdkClientMetricFrame.encode(e.clientMetric, t.uint32(178).fork()).ldelim(), null != e.dataMessage && Object.hasOwnProperty.call(e, "dataMessage") && l.SdkDataMessageFrame.encode(e.dataMessage, t.uint32(186).fork()).ldelim(), null != e.remoteVideoUpdate && Object.hasOwnProperty.call(e, "remoteVideoUpdate") && l.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate, t.uint32(202).fork()).ldelim(), null != e.primaryMeetingJoin && Object.hasOwnProperty.call(e, "primaryMeetingJoin") && l.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin, t.uint32(210).fork()).ldelim(), null != e.primaryMeetingJoinAck && Object.hasOwnProperty.call(e, "primaryMeetingJoinAck") && l.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck, t.uint32(218).fork()).ldelim(), null != e.primaryMeetingLeave && Object.hasOwnProperty.call(e, "primaryMeetingLeave") && l.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave, t.uint32(226).fork()).ldelim(), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkSignalFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.timestampMs = e.uint64(); break; case 2: r.type = e.int32(); break; case 3: r.error = l.SdkErrorFrame.decode(e, e.uint32()); break; case 4: r.join = l.SdkJoinFrame.decode(e, e.uint32()); break; case 5: r.joinack = l.SdkJoinAckFrame.decode(e, e.uint32()); break; case 6: r.sub = l.SdkSubscribeFrame.decode(e, e.uint32()); break; case 7: r.suback = l.SdkSubscribeAckFrame.decode(e, e.uint32()); break; case 8: r.index = l.SdkIndexFrame.decode(e, e.uint32()); break; case 10: r.pause = l.SdkPauseResumeFrame.decode(e, e.uint32()); break; case 11: r.leave = l.SdkLeaveFrame.decode(e, e.uint32()); break; case 12: r.leaveAck = l.SdkLeaveAckFrame.decode(e, e.uint32()); break; case 14: r.bitrates = l.SdkBitrateFrame.decode(e, e.uint32()); break; case 17: r.audioControl = l.SdkAudioControlFrame.decode(e, e.uint32()); break; case 18: r.audioMetadata = l.SdkAudioMetadataFrame.decode(e, e.uint32()); break; case 19: r.audioStreamIdInfo = l.SdkAudioStreamIdInfoFrame.decode(e, e.uint32()); break; case 20: r.pingPong = l.SdkPingPongFrame.decode(e, e.uint32()); break; case 21: r.audioStatus = l.SdkAudioStatusFrame.decode(e, e.uint32()); break; case 22: r.clientMetric = l.SdkClientMetricFrame.decode(e, e.uint32()); break; case 23: r.dataMessage = l.SdkDataMessageFrame.decode(e, e.uint32()); break; case 25: r.remoteVideoUpdate = l.SdkRemoteVideoUpdateFrame.decode(e, e.uint32()); break; case 26: r.primaryMeetingJoin = l.SdkPrimaryMeetingJoinFrame.decode(e, e.uint32()); break; case 27: r.primaryMeetingJoinAck = l.SdkPrimaryMeetingJoinAckFrame.decode(e, e.uint32()); break; case 28: r.primaryMeetingLeave = l.SdkPrimaryMeetingLeaveFrame.decode(e, e.uint32()); break; default: e.skipType(7 & o) } } if (!r.hasOwnProperty("timestampMs")) throw d.ProtocolError("missing required 'timestampMs'", { instance: r }); if (!r.hasOwnProperty("type")) throw d.ProtocolError("missing required 'type'", { instance: r }); return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (!(d.isInteger(e.timestampMs) || e.timestampMs && d.isInteger(e.timestampMs.low) && d.isInteger(e.timestampMs.high))) return "timestampMs: integer|Long expected"; switch (e.type) { default: return "type: enum value expected"; case 1: case 2: case 3: case 4: case 5: case 7: case 8: case 9: case 10: case 13: case 16: case 17: case 18: case 19: case 20: case 21: case 22: case 24: case 25: case 26: case 27: }var t; return null != e.error && e.hasOwnProperty("error") && (t = l.SdkErrorFrame.verify(e.error)) ? "error." + t : null != e.join && e.hasOwnProperty("join") && (t = l.SdkJoinFrame.verify(e.join)) ? "join." + t : null != e.joinack && e.hasOwnProperty("joinack") && (t = l.SdkJoinAckFrame.verify(e.joinack)) ? "joinack." + t : null != e.sub && e.hasOwnProperty("sub") && (t = l.SdkSubscribeFrame.verify(e.sub)) ? "sub." + t : null != e.suback && e.hasOwnProperty("suback") && (t = l.SdkSubscribeAckFrame.verify(e.suback)) ? "suback." + t : null != e.index && e.hasOwnProperty("index") && (t = l.SdkIndexFrame.verify(e.index)) ? "index." + t : null != e.pause && e.hasOwnProperty("pause") && (t = l.SdkPauseResumeFrame.verify(e.pause)) ? "pause." + t : null != e.leave && e.hasOwnProperty("leave") && (t = l.SdkLeaveFrame.verify(e.leave)) ? "leave." + t : null != e.leaveAck && e.hasOwnProperty("leaveAck") && (t = l.SdkLeaveAckFrame.verify(e.leaveAck)) ? "leaveAck." + t : null != e.bitrates && e.hasOwnProperty("bitrates") && (t = l.SdkBitrateFrame.verify(e.bitrates)) ? "bitrates." + t : null != e.audioControl && e.hasOwnProperty("audioControl") && (t = l.SdkAudioControlFrame.verify(e.audioControl)) ? "audioControl." + t : null != e.audioMetadata && e.hasOwnProperty("audioMetadata") && (t = l.SdkAudioMetadataFrame.verify(e.audioMetadata)) ? "audioMetadata." + t : null != e.audioStreamIdInfo && e.hasOwnProperty("audioStreamIdInfo") && (t = l.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo)) ? "audioStreamIdInfo." + t : null != e.pingPong && e.hasOwnProperty("pingPong") && (t = l.SdkPingPongFrame.verify(e.pingPong)) ? "pingPong." + t : null != e.audioStatus && e.hasOwnProperty("audioStatus") && (t = l.SdkAudioStatusFrame.verify(e.audioStatus)) ? "audioStatus." + t : null != e.clientMetric && e.hasOwnProperty("clientMetric") && (t = l.SdkClientMetricFrame.verify(e.clientMetric)) ? "clientMetric." + t : null != e.dataMessage && e.hasOwnProperty("dataMessage") && (t = l.SdkDataMessageFrame.verify(e.dataMessage)) ? "dataMessage." + t : null != e.remoteVideoUpdate && e.hasOwnProperty("remoteVideoUpdate") && (t = l.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate)) ? "remoteVideoUpdate." + t : null != e.primaryMeetingJoin && e.hasOwnProperty("primaryMeetingJoin") && (t = l.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin)) ? "primaryMeetingJoin." + t : null != e.primaryMeetingJoinAck && e.hasOwnProperty("primaryMeetingJoinAck") && (t = l.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck)) ? "primaryMeetingJoinAck." + t : null != e.primaryMeetingLeave && e.hasOwnProperty("primaryMeetingLeave") && (t = l.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave)) ? "primaryMeetingLeave." + t : null }, e.fromObject = function (e) { if (e instanceof l.SdkSignalFrame) return e; var t = new l.SdkSignalFrame; switch (null != e.timestampMs && (d.Long ? (t.timestampMs = d.Long.fromValue(e.timestampMs)).unsigned = !0 : "string" == typeof e.timestampMs ? t.timestampMs = parseInt(e.timestampMs, 10) : "number" == typeof e.timestampMs ? t.timestampMs = e.timestampMs : "object" == typeof e.timestampMs && (t.timestampMs = new d.LongBits(e.timestampMs.low >>> 0, e.timestampMs.high >>> 0).toNumber(!0))), e.type) { case "JOIN": case 1: t.type = 1; break; case "JOIN_ACK": case 2: t.type = 2; break; case "SUBSCRIBE": case 3: t.type = 3; break; case "SUBSCRIBE_ACK": case 4: t.type = 4; break; case "INDEX": case 5: t.type = 5; break; case "PAUSE": case 7: t.type = 7; break; case "RESUME": case 8: t.type = 8; break; case "LEAVE": case 9: t.type = 9; break; case "LEAVE_ACK": case 10: t.type = 10; break; case "BITRATES": case 13: t.type = 13; break; case "AUDIO_CONTROL": case 16: t.type = 16; break; case "AUDIO_METADATA": case 17: t.type = 17; break; case "AUDIO_STREAM_ID_INFO": case 18: t.type = 18; break; case "PING_PONG": case 19: t.type = 19; break; case "AUDIO_STATUS": case 20: t.type = 20; break; case "CLIENT_METRIC": case 21: t.type = 21; break; case "DATA_MESSAGE": case 22: t.type = 22; break; case "REMOTE_VIDEO_UPDATE": case 24: t.type = 24; break; case "PRIMARY_MEETING_JOIN": case 25: t.type = 25; break; case "PRIMARY_MEETING_JOIN_ACK": case 26: t.type = 26; break; case "PRIMARY_MEETING_LEAVE": case 27: t.type = 27 }if (null != e.error) { if ("object" != typeof e.error) throw TypeError(".SdkSignalFrame.error: object expected"); t.error = l.SdkErrorFrame.fromObject(e.error) } if (null != e.join) { if ("object" != typeof e.join) throw TypeError(".SdkSignalFrame.join: object expected"); t.join = l.SdkJoinFrame.fromObject(e.join) } if (null != e.joinack) { if ("object" != typeof e.joinack) throw TypeError(".SdkSignalFrame.joinack: object expected"); t.joinack = l.SdkJoinAckFrame.fromObject(e.joinack) } if (null != e.sub) { if ("object" != typeof e.sub) throw TypeError(".SdkSignalFrame.sub: object expected"); t.sub = l.SdkSubscribeFrame.fromObject(e.sub) } if (null != e.suback) { if ("object" != typeof e.suback) throw TypeError(".SdkSignalFrame.suback: object expected"); t.suback = l.SdkSubscribeAckFrame.fromObject(e.suback) } if (null != e.index) { if ("object" != typeof e.index) throw TypeError(".SdkSignalFrame.index: object expected"); t.index = l.SdkIndexFrame.fromObject(e.index) } if (null != e.pause) { if ("object" != typeof e.pause) throw TypeError(".SdkSignalFrame.pause: object expected"); t.pause = l.SdkPauseResumeFrame.fromObject(e.pause) } if (null != e.leave) { if ("object" != typeof e.leave) throw TypeError(".SdkSignalFrame.leave: object expected"); t.leave = l.SdkLeaveFrame.fromObject(e.leave) } if (null != e.leaveAck) { if ("object" != typeof e.leaveAck) throw TypeError(".SdkSignalFrame.leaveAck: object expected"); t.leaveAck = l.SdkLeaveAckFrame.fromObject(e.leaveAck) } if (null != e.bitrates) { if ("object" != typeof e.bitrates) throw TypeError(".SdkSignalFrame.bitrates: object expected"); t.bitrates = l.SdkBitrateFrame.fromObject(e.bitrates) } if (null != e.audioControl) { if ("object" != typeof e.audioControl) throw TypeError(".SdkSignalFrame.audioControl: object expected"); t.audioControl = l.SdkAudioControlFrame.fromObject(e.audioControl) } if (null != e.audioMetadata) { if ("object" != typeof e.audioMetadata) throw TypeError(".SdkSignalFrame.audioMetadata: object expected"); t.audioMetadata = l.SdkAudioMetadataFrame.fromObject(e.audioMetadata) } if (null != e.audioStreamIdInfo) { if ("object" != typeof e.audioStreamIdInfo) throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected"); t.audioStreamIdInfo = l.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo) } if (null != e.pingPong) { if ("object" != typeof e.pingPong) throw TypeError(".SdkSignalFrame.pingPong: object expected"); t.pingPong = l.SdkPingPongFrame.fromObject(e.pingPong) } if (null != e.audioStatus) { if ("object" != typeof e.audioStatus) throw TypeError(".SdkSignalFrame.audioStatus: object expected"); t.audioStatus = l.SdkAudioStatusFrame.fromObject(e.audioStatus) } if (null != e.clientMetric) { if ("object" != typeof e.clientMetric) throw TypeError(".SdkSignalFrame.clientMetric: object expected"); t.clientMetric = l.SdkClientMetricFrame.fromObject(e.clientMetric) } if (null != e.dataMessage) { if ("object" != typeof e.dataMessage) throw TypeError(".SdkSignalFrame.dataMessage: object expected"); t.dataMessage = l.SdkDataMessageFrame.fromObject(e.dataMessage) } if (null != e.remoteVideoUpdate) { if ("object" != typeof e.remoteVideoUpdate) throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected"); t.remoteVideoUpdate = l.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate) } if (null != e.primaryMeetingJoin) { if ("object" != typeof e.primaryMeetingJoin) throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected"); t.primaryMeetingJoin = l.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin) } if (null != e.primaryMeetingJoinAck) { if ("object" != typeof e.primaryMeetingJoinAck) throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected"); t.primaryMeetingJoinAck = l.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck) } if (null != e.primaryMeetingLeave) { if ("object" != typeof e.primaryMeetingLeave) throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected"); t.primaryMeetingLeave = l.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave) } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if (t.defaults) { if (d.Long) { var r = new d.Long(0, 0, !0); i.timestampMs = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r } else i.timestampMs = t.longs === String ? "0" : 0; i.type = t.enums === String ? "JOIN" : 1, i.error = null, i.join = null, i.joinack = null, i.sub = null, i.suback = null, i.index = null, i.pause = null, i.leave = null, i.leaveAck = null, i.bitrates = null, i.audioControl = null, i.audioMetadata = null, i.audioStreamIdInfo = null, i.pingPong = null, i.audioStatus = null, i.clientMetric = null, i.dataMessage = null, i.remoteVideoUpdate = null, i.primaryMeetingJoin = null, i.primaryMeetingJoinAck = null, i.primaryMeetingLeave = null } return null != e.timestampMs && e.hasOwnProperty("timestampMs") && ("number" == typeof e.timestampMs ? i.timestampMs = t.longs === String ? String(e.timestampMs) : e.timestampMs : i.timestampMs = t.longs === String ? d.Long.prototype.toString.call(e.timestampMs) : t.longs === Number ? new d.LongBits(e.timestampMs.low >>> 0, e.timestampMs.high >>> 0).toNumber(!0) : e.timestampMs), null != e.type && e.hasOwnProperty("type") && (i.type = t.enums === String ? l.SdkSignalFrame.Type[e.type] : e.type), null != e.error && e.hasOwnProperty("error") && (i.error = l.SdkErrorFrame.toObject(e.error, t)), null != e.join && e.hasOwnProperty("join") && (i.join = l.SdkJoinFrame.toObject(e.join, t)), null != e.joinack && e.hasOwnProperty("joinack") && (i.joinack = l.SdkJoinAckFrame.toObject(e.joinack, t)), null != e.sub && e.hasOwnProperty("sub") && (i.sub = l.SdkSubscribeFrame.toObject(e.sub, t)), null != e.suback && e.hasOwnProperty("suback") && (i.suback = l.SdkSubscribeAckFrame.toObject(e.suback, t)), null != e.index && e.hasOwnProperty("index") && (i.index = l.SdkIndexFrame.toObject(e.index, t)), null != e.pause && e.hasOwnProperty("pause") && (i.pause = l.SdkPauseResumeFrame.toObject(e.pause, t)), null != e.leave && e.hasOwnProperty("leave") && (i.leave = l.SdkLeaveFrame.toObject(e.leave, t)), null != e.leaveAck && e.hasOwnProperty("leaveAck") && (i.leaveAck = l.SdkLeaveAckFrame.toObject(e.leaveAck, t)), null != e.bitrates && e.hasOwnProperty("bitrates") && (i.bitrates = l.SdkBitrateFrame.toObject(e.bitrates, t)), null != e.audioControl && e.hasOwnProperty("audioControl") && (i.audioControl = l.SdkAudioControlFrame.toObject(e.audioControl, t)), null != e.audioMetadata && e.hasOwnProperty("audioMetadata") && (i.audioMetadata = l.SdkAudioMetadataFrame.toObject(e.audioMetadata, t)), null != e.audioStreamIdInfo && e.hasOwnProperty("audioStreamIdInfo") && (i.audioStreamIdInfo = l.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo, t)), null != e.pingPong && e.hasOwnProperty("pingPong") && (i.pingPong = l.SdkPingPongFrame.toObject(e.pingPong, t)), null != e.audioStatus && e.hasOwnProperty("audioStatus") && (i.audioStatus = l.SdkAudioStatusFrame.toObject(e.audioStatus, t)), null != e.clientMetric && e.hasOwnProperty("clientMetric") && (i.clientMetric = l.SdkClientMetricFrame.toObject(e.clientMetric, t)), null != e.dataMessage && e.hasOwnProperty("dataMessage") && (i.dataMessage = l.SdkDataMessageFrame.toObject(e.dataMessage, t)), null != e.remoteVideoUpdate && e.hasOwnProperty("remoteVideoUpdate") && (i.remoteVideoUpdate = l.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate, t)), null != e.primaryMeetingJoin && e.hasOwnProperty("primaryMeetingJoin") && (i.primaryMeetingJoin = l.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin, t)), null != e.primaryMeetingJoinAck && e.hasOwnProperty("primaryMeetingJoinAck") && (i.primaryMeetingJoinAck = l.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck, t)), null != e.primaryMeetingLeave && e.hasOwnProperty("primaryMeetingLeave") && (i.primaryMeetingLeave = l.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave, t)), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e.Type = (t = {}, (i = Object.create(t))[t[1] = "JOIN"] = 1, i[t[2] = "JOIN_ACK"] = 2, i[t[3] = "SUBSCRIBE"] = 3, i[t[4] = "SUBSCRIBE_ACK"] = 4, i[t[5] = "INDEX"] = 5, i[t[7] = "PAUSE"] = 7, i[t[8] = "RESUME"] = 8, i[t[9] = "LEAVE"] = 9, i[t[10] = "LEAVE_ACK"] = 10, i[t[13] = "BITRATES"] = 13, i[t[16] = "AUDIO_CONTROL"] = 16, i[t[17] = "AUDIO_METADATA"] = 17, i[t[18] = "AUDIO_STREAM_ID_INFO"] = 18, i[t[19] = "PING_PONG"] = 19, i[t[20] = "AUDIO_STATUS"] = 20, i[t[21] = "CLIENT_METRIC"] = 21, i[t[22] = "DATA_MESSAGE"] = 22, i[t[24] = "REMOTE_VIDEO_UPDATE"] = 24, i[t[25] = "PRIMARY_MEETING_JOIN"] = 25, i[t[26] = "PRIMARY_MEETING_JOIN_ACK"] = 26, i[t[27] = "PRIMARY_MEETING_LEAVE"] = 27, i), e }(), l.SdkErrorFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.status = 0, e.prototype.description = "", e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.status && Object.hasOwnProperty.call(e, "status") && t.uint32(8).uint32(e.status), null != e.description && Object.hasOwnProperty.call(e, "description") && t.uint32(18).string(e.description), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkErrorFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.status = e.uint32(); break; case 2: r.description = e.string(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.status && e.hasOwnProperty("status") && !d.isInteger(e.status) ? "status: integer expected" : null != e.description && e.hasOwnProperty("description") && !d.isString(e.description) ? "description: string expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkErrorFrame) return e; var t = new l.SdkErrorFrame; return null != e.status && (t.status = e.status >>> 0), null != e.description && (t.description = String(e.description)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.status = 0, i.description = ""), null != e.status && e.hasOwnProperty("status") && (i.status = e.status), null != e.description && e.hasOwnProperty("description") && (i.description = e.description), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkJoinFlags = (r = {}, (o = Object.create(r))[r[2] = "HAS_STREAM_UPDATE"] = 2, o[r[16] = "COMPLETE_VIDEO_SOURCES_LIST"] = 16, o[r[32] = "EXCLUDE_SELF_CONTENT_IN_INDEX"] = 32, o), l.SdkClientDetails = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.appName = "", e.prototype.appVersion = "", e.prototype.deviceModel = "", e.prototype.deviceMake = "", e.prototype.platformName = "", e.prototype.platformVersion = "", e.prototype.clientSource = "", e.prototype.chimeSdkVersion = "", e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.appName && Object.hasOwnProperty.call(e, "appName") && t.uint32(10).string(e.appName), null != e.appVersion && Object.hasOwnProperty.call(e, "appVersion") && t.uint32(18).string(e.appVersion), null != e.deviceModel && Object.hasOwnProperty.call(e, "deviceModel") && t.uint32(26).string(e.deviceModel), null != e.deviceMake && Object.hasOwnProperty.call(e, "deviceMake") && t.uint32(34).string(e.deviceMake), null != e.platformName && Object.hasOwnProperty.call(e, "platformName") && t.uint32(42).string(e.platformName), null != e.platformVersion && Object.hasOwnProperty.call(e, "platformVersion") && t.uint32(50).string(e.platformVersion), null != e.clientSource && Object.hasOwnProperty.call(e, "clientSource") && t.uint32(58).string(e.clientSource), null != e.chimeSdkVersion && Object.hasOwnProperty.call(e, "chimeSdkVersion") && t.uint32(66).string(e.chimeSdkVersion), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkClientDetails; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.appName = e.string(); break; case 2: r.appVersion = e.string(); break; case 3: r.deviceModel = e.string(); break; case 4: r.deviceMake = e.string(); break; case 5: r.platformName = e.string(); break; case 6: r.platformVersion = e.string(); break; case 7: r.clientSource = e.string(); break; case 8: r.chimeSdkVersion = e.string(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.appName && e.hasOwnProperty("appName") && !d.isString(e.appName) ? "appName: string expected" : null != e.appVersion && e.hasOwnProperty("appVersion") && !d.isString(e.appVersion) ? "appVersion: string expected" : null != e.deviceModel && e.hasOwnProperty("deviceModel") && !d.isString(e.deviceModel) ? "deviceModel: string expected" : null != e.deviceMake && e.hasOwnProperty("deviceMake") && !d.isString(e.deviceMake) ? "deviceMake: string expected" : null != e.platformName && e.hasOwnProperty("platformName") && !d.isString(e.platformName) ? "platformName: string expected" : null != e.platformVersion && e.hasOwnProperty("platformVersion") && !d.isString(e.platformVersion) ? "platformVersion: string expected" : null != e.clientSource && e.hasOwnProperty("clientSource") && !d.isString(e.clientSource) ? "clientSource: string expected" : null != e.chimeSdkVersion && e.hasOwnProperty("chimeSdkVersion") && !d.isString(e.chimeSdkVersion) ? "chimeSdkVersion: string expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkClientDetails) return e; var t = new l.SdkClientDetails; return null != e.appName && (t.appName = String(e.appName)), null != e.appVersion && (t.appVersion = String(e.appVersion)), null != e.deviceModel && (t.deviceModel = String(e.deviceModel)), null != e.deviceMake && (t.deviceMake = String(e.deviceMake)), null != e.platformName && (t.platformName = String(e.platformName)), null != e.platformVersion && (t.platformVersion = String(e.platformVersion)), null != e.clientSource && (t.clientSource = String(e.clientSource)), null != e.chimeSdkVersion && (t.chimeSdkVersion = String(e.chimeSdkVersion)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.appName = "", i.appVersion = "", i.deviceModel = "", i.deviceMake = "", i.platformName = "", i.platformVersion = "", i.clientSource = "", i.chimeSdkVersion = ""), null != e.appName && e.hasOwnProperty("appName") && (i.appName = e.appName), null != e.appVersion && e.hasOwnProperty("appVersion") && (i.appVersion = e.appVersion), null != e.deviceModel && e.hasOwnProperty("deviceModel") && (i.deviceModel = e.deviceModel), null != e.deviceMake && e.hasOwnProperty("deviceMake") && (i.deviceMake = e.deviceMake), null != e.platformName && e.hasOwnProperty("platformName") && (i.platformName = e.platformName), null != e.platformVersion && e.hasOwnProperty("platformVersion") && (i.platformVersion = e.platformVersion), null != e.clientSource && e.hasOwnProperty("clientSource") && (i.clientSource = e.clientSource), null != e.chimeSdkVersion && e.hasOwnProperty("chimeSdkVersion") && (i.chimeSdkVersion = e.chimeSdkVersion), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkServerSideNetworkAdaption = function () { var e = {}, t = Object.create(e); return t[e[1] = "DEFAULT"] = 1, t[e[2] = "NONE"] = 2, t[e[3] = "BANDWIDTH_PROBING"] = 3, t }(), l.SdkJoinFrame = function () { function e(e) { if (this.supportedServerSideNetworkAdaptions = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.protocolVersion = 2, e.prototype.maxNumOfVideos = 0, e.prototype.flags = 0, e.prototype.clientDetails = null, e.prototype.audioSessionId = d.Long ? d.Long.fromBits(0, 0, !0) : 0, e.prototype.wantsCompressedSdp = !1, e.prototype.wantsServerSideNetworkProbingOnReceiveSideEstimator = !1, e.prototype.serverSideNetworkAdaption = 1, e.prototype.supportedServerSideNetworkAdaptions = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.protocolVersion && Object.hasOwnProperty.call(e, "protocolVersion") && t.uint32(8).uint32(e.protocolVersion), null != e.maxNumOfVideos && Object.hasOwnProperty.call(e, "maxNumOfVideos") && t.uint32(16).uint32(e.maxNumOfVideos), null != e.flags && Object.hasOwnProperty.call(e, "flags") && t.uint32(24).uint32(e.flags), null != e.clientDetails && Object.hasOwnProperty.call(e, "clientDetails") && l.SdkClientDetails.encode(e.clientDetails, t.uint32(34).fork()).ldelim(), null != e.audioSessionId && Object.hasOwnProperty.call(e, "audioSessionId") && t.uint32(48).uint64(e.audioSessionId), null != e.wantsCompressedSdp && Object.hasOwnProperty.call(e, "wantsCompressedSdp") && t.uint32(56).bool(e.wantsCompressedSdp), null != e.wantsServerSideNetworkProbingOnReceiveSideEstimator && Object.hasOwnProperty.call(e, "wantsServerSideNetworkProbingOnReceiveSideEstimator") && t.uint32(64).bool(e.wantsServerSideNetworkProbingOnReceiveSideEstimator), null != e.serverSideNetworkAdaption && Object.hasOwnProperty.call(e, "serverSideNetworkAdaption") && t.uint32(80).int32(e.serverSideNetworkAdaption), null != e.supportedServerSideNetworkAdaptions && e.supportedServerSideNetworkAdaptions.length) for (var i = 0; i < e.supportedServerSideNetworkAdaptions.length; ++i)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[i]); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkJoinFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.protocolVersion = e.uint32(); break; case 2: r.maxNumOfVideos = e.uint32(); break; case 3: r.flags = e.uint32(); break; case 4: r.clientDetails = l.SdkClientDetails.decode(e, e.uint32()); break; case 6: r.audioSessionId = e.uint64(); break; case 7: r.wantsCompressedSdp = e.bool(); break; case 8: r.wantsServerSideNetworkProbingOnReceiveSideEstimator = e.bool(); break; case 10: r.serverSideNetworkAdaption = e.int32(); break; case 11: if (r.supportedServerSideNetworkAdaptions && r.supportedServerSideNetworkAdaptions.length || (r.supportedServerSideNetworkAdaptions = []), 2 == (7 & o)) for (var n = e.uint32() + e.pos; e.pos < n;)r.supportedServerSideNetworkAdaptions.push(e.int32()); else r.supportedServerSideNetworkAdaptions.push(e.int32()); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.protocolVersion && e.hasOwnProperty("protocolVersion") && !d.isInteger(e.protocolVersion)) return "protocolVersion: integer expected"; if (null != e.maxNumOfVideos && e.hasOwnProperty("maxNumOfVideos") && !d.isInteger(e.maxNumOfVideos)) return "maxNumOfVideos: integer expected"; if (null != e.flags && e.hasOwnProperty("flags") && !d.isInteger(e.flags)) return "flags: integer expected"; if (null != e.clientDetails && e.hasOwnProperty("clientDetails")) { var t = l.SdkClientDetails.verify(e.clientDetails); if (t) return "clientDetails." + t } if (null != e.audioSessionId && e.hasOwnProperty("audioSessionId") && !(d.isInteger(e.audioSessionId) || e.audioSessionId && d.isInteger(e.audioSessionId.low) && d.isInteger(e.audioSessionId.high))) return "audioSessionId: integer|Long expected"; if (null != e.wantsCompressedSdp && e.hasOwnProperty("wantsCompressedSdp") && "boolean" != typeof e.wantsCompressedSdp) return "wantsCompressedSdp: boolean expected"; if (null != e.wantsServerSideNetworkProbingOnReceiveSideEstimator && e.hasOwnProperty("wantsServerSideNetworkProbingOnReceiveSideEstimator") && "boolean" != typeof e.wantsServerSideNetworkProbingOnReceiveSideEstimator) return "wantsServerSideNetworkProbingOnReceiveSideEstimator: boolean expected"; if (null != e.serverSideNetworkAdaption && e.hasOwnProperty("serverSideNetworkAdaption")) switch (e.serverSideNetworkAdaption) { default: return "serverSideNetworkAdaption: enum value expected"; case 1: case 2: case 3: }if (null != e.supportedServerSideNetworkAdaptions && e.hasOwnProperty("supportedServerSideNetworkAdaptions")) { if (!Array.isArray(e.supportedServerSideNetworkAdaptions)) return "supportedServerSideNetworkAdaptions: array expected"; for (var i = 0; i < e.supportedServerSideNetworkAdaptions.length; ++i)switch (e.supportedServerSideNetworkAdaptions[i]) { default: return "supportedServerSideNetworkAdaptions: enum value[] expected"; case 1: case 2: case 3: } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkJoinFrame) return e; var t = new l.SdkJoinFrame; if (null != e.protocolVersion && (t.protocolVersion = e.protocolVersion >>> 0), null != e.maxNumOfVideos && (t.maxNumOfVideos = e.maxNumOfVideos >>> 0), null != e.flags && (t.flags = e.flags >>> 0), null != e.clientDetails) { if ("object" != typeof e.clientDetails) throw TypeError(".SdkJoinFrame.clientDetails: object expected"); t.clientDetails = l.SdkClientDetails.fromObject(e.clientDetails) } switch (null != e.audioSessionId && (d.Long ? (t.audioSessionId = d.Long.fromValue(e.audioSessionId)).unsigned = !0 : "string" == typeof e.audioSessionId ? t.audioSessionId = parseInt(e.audioSessionId, 10) : "number" == typeof e.audioSessionId ? t.audioSessionId = e.audioSessionId : "object" == typeof e.audioSessionId && (t.audioSessionId = new d.LongBits(e.audioSessionId.low >>> 0, e.audioSessionId.high >>> 0).toNumber(!0))), null != e.wantsCompressedSdp && (t.wantsCompressedSdp = Boolean(e.wantsCompressedSdp)), null != e.wantsServerSideNetworkProbingOnReceiveSideEstimator && (t.wantsServerSideNetworkProbingOnReceiveSideEstimator = Boolean(e.wantsServerSideNetworkProbingOnReceiveSideEstimator)), e.serverSideNetworkAdaption) { case "DEFAULT": case 1: t.serverSideNetworkAdaption = 1; break; case "NONE": case 2: t.serverSideNetworkAdaption = 2; break; case "BANDWIDTH_PROBING": case 3: t.serverSideNetworkAdaption = 3 }if (e.supportedServerSideNetworkAdaptions) { if (!Array.isArray(e.supportedServerSideNetworkAdaptions)) throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected"); t.supportedServerSideNetworkAdaptions = []; for (var i = 0; i < e.supportedServerSideNetworkAdaptions.length; ++i)switch (e.supportedServerSideNetworkAdaptions[i]) { default: case "DEFAULT": case 1: t.supportedServerSideNetworkAdaptions[i] = 1; break; case "NONE": case 2: t.supportedServerSideNetworkAdaptions[i] = 2; break; case "BANDWIDTH_PROBING": case 3: t.supportedServerSideNetworkAdaptions[i] = 3 } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.supportedServerSideNetworkAdaptions = []), t.defaults) { if (i.protocolVersion = 2, i.maxNumOfVideos = 0, i.flags = 0, i.clientDetails = null, d.Long) { var r = new d.Long(0, 0, !0); i.audioSessionId = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r } else i.audioSessionId = t.longs === String ? "0" : 0; i.wantsCompressedSdp = !1, i.wantsServerSideNetworkProbingOnReceiveSideEstimator = !1, i.serverSideNetworkAdaption = t.enums === String ? "DEFAULT" : 1 } if (null != e.protocolVersion && e.hasOwnProperty("protocolVersion") && (i.protocolVersion = e.protocolVersion), null != e.maxNumOfVideos && e.hasOwnProperty("maxNumOfVideos") && (i.maxNumOfVideos = e.maxNumOfVideos), null != e.flags && e.hasOwnProperty("flags") && (i.flags = e.flags), null != e.clientDetails && e.hasOwnProperty("clientDetails") && (i.clientDetails = l.SdkClientDetails.toObject(e.clientDetails, t)), null != e.audioSessionId && e.hasOwnProperty("audioSessionId") && ("number" == typeof e.audioSessionId ? i.audioSessionId = t.longs === String ? String(e.audioSessionId) : e.audioSessionId : i.audioSessionId = t.longs === String ? d.Long.prototype.toString.call(e.audioSessionId) : t.longs === Number ? new d.LongBits(e.audioSessionId.low >>> 0, e.audioSessionId.high >>> 0).toNumber(!0) : e.audioSessionId), null != e.wantsCompressedSdp && e.hasOwnProperty("wantsCompressedSdp") && (i.wantsCompressedSdp = e.wantsCompressedSdp), null != e.wantsServerSideNetworkProbingOnReceiveSideEstimator && e.hasOwnProperty("wantsServerSideNetworkProbingOnReceiveSideEstimator") && (i.wantsServerSideNetworkProbingOnReceiveSideEstimator = e.wantsServerSideNetworkProbingOnReceiveSideEstimator), null != e.serverSideNetworkAdaption && e.hasOwnProperty("serverSideNetworkAdaption") && (i.serverSideNetworkAdaption = t.enums === String ? l.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption] : e.serverSideNetworkAdaption), e.supportedServerSideNetworkAdaptions && e.supportedServerSideNetworkAdaptions.length) { i.supportedServerSideNetworkAdaptions = []; for (var o = 0; o < e.supportedServerSideNetworkAdaptions.length; ++o)i.supportedServerSideNetworkAdaptions[o] = t.enums === String ? l.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[o]] : e.supportedServerSideNetworkAdaptions[o] } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkJoinAckFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.turnCredentials = null, e.prototype.videoSubscriptionLimit = 0, e.prototype.wantsCompressedSdp = !1, e.prototype.defaultServerSideNetworkAdaption = 1, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.turnCredentials && Object.hasOwnProperty.call(e, "turnCredentials") && l.SdkTurnCredentials.encode(e.turnCredentials, t.uint32(10).fork()).ldelim(), null != e.videoSubscriptionLimit && Object.hasOwnProperty.call(e, "videoSubscriptionLimit") && t.uint32(16).uint32(e.videoSubscriptionLimit), null != e.wantsCompressedSdp && Object.hasOwnProperty.call(e, "wantsCompressedSdp") && t.uint32(24).bool(e.wantsCompressedSdp), null != e.defaultServerSideNetworkAdaption && Object.hasOwnProperty.call(e, "defaultServerSideNetworkAdaption") && t.uint32(32).int32(e.defaultServerSideNetworkAdaption), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkJoinAckFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.turnCredentials = l.SdkTurnCredentials.decode(e, e.uint32()); break; case 2: r.videoSubscriptionLimit = e.uint32(); break; case 3: r.wantsCompressedSdp = e.bool(); break; case 4: r.defaultServerSideNetworkAdaption = e.int32(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.turnCredentials && e.hasOwnProperty("turnCredentials")) { var t = l.SdkTurnCredentials.verify(e.turnCredentials); if (t) return "turnCredentials." + t } if (null != e.videoSubscriptionLimit && e.hasOwnProperty("videoSubscriptionLimit") && !d.isInteger(e.videoSubscriptionLimit)) return "videoSubscriptionLimit: integer expected"; if (null != e.wantsCompressedSdp && e.hasOwnProperty("wantsCompressedSdp") && "boolean" != typeof e.wantsCompressedSdp) return "wantsCompressedSdp: boolean expected"; if (null != e.defaultServerSideNetworkAdaption && e.hasOwnProperty("defaultServerSideNetworkAdaption")) switch (e.defaultServerSideNetworkAdaption) { default: return "defaultServerSideNetworkAdaption: enum value expected"; case 1: case 2: case 3: }return null }, e.fromObject = function (e) { if (e instanceof l.SdkJoinAckFrame) return e; var t = new l.SdkJoinAckFrame; if (null != e.turnCredentials) { if ("object" != typeof e.turnCredentials) throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected"); t.turnCredentials = l.SdkTurnCredentials.fromObject(e.turnCredentials) } switch (null != e.videoSubscriptionLimit && (t.videoSubscriptionLimit = e.videoSubscriptionLimit >>> 0), null != e.wantsCompressedSdp && (t.wantsCompressedSdp = Boolean(e.wantsCompressedSdp)), e.defaultServerSideNetworkAdaption) { case "DEFAULT": case 1: t.defaultServerSideNetworkAdaption = 1; break; case "NONE": case 2: t.defaultServerSideNetworkAdaption = 2; break; case "BANDWIDTH_PROBING": case 3: t.defaultServerSideNetworkAdaption = 3 }return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.turnCredentials = null, i.videoSubscriptionLimit = 0, i.wantsCompressedSdp = !1, i.defaultServerSideNetworkAdaption = t.enums === String ? "DEFAULT" : 1), null != e.turnCredentials && e.hasOwnProperty("turnCredentials") && (i.turnCredentials = l.SdkTurnCredentials.toObject(e.turnCredentials, t)), null != e.videoSubscriptionLimit && e.hasOwnProperty("videoSubscriptionLimit") && (i.videoSubscriptionLimit = e.videoSubscriptionLimit), null != e.wantsCompressedSdp && e.hasOwnProperty("wantsCompressedSdp") && (i.wantsCompressedSdp = e.wantsCompressedSdp), null != e.defaultServerSideNetworkAdaption && e.hasOwnProperty("defaultServerSideNetworkAdaption") && (i.defaultServerSideNetworkAdaption = t.enums === String ? l.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption] : e.defaultServerSideNetworkAdaption), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkLeaveFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkLeaveFrame; e.pos < i;) { var o = e.uint32(); e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null }, e.fromObject = function (e) { return e instanceof l.SdkLeaveFrame ? e : new l.SdkLeaveFrame }, e.toObject = function () { return {} }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkLeaveAckFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkLeaveAckFrame; e.pos < i;) { var o = e.uint32(); e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null }, e.fromObject = function (e) { return e instanceof l.SdkLeaveAckFrame ? e : new l.SdkLeaveAckFrame }, e.toObject = function () { return {} }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkStreamServiceType = function () { var e = {}, t = Object.create(e); return t[e[1] = "RX"] = 1, t[e[2] = "TX"] = 2, t[e[3] = "DUPLEX"] = 3, t }(), l.SdkStreamMediaType = function () { var e = {}, t = Object.create(e); return t[e[1] = "AUDIO"] = 1, t[e[2] = "VIDEO"] = 2, t }(), l.SdkSubscribeFrame = function () { function e(e) { if (this.sendStreams = [], this.receiveStreamIds = [], this.videoSubscriptionConfiguration = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.duplex = 1, e.prototype.sendStreams = d.emptyArray, e.prototype.receiveStreamIds = d.emptyArray, e.prototype.sdpOffer = "", e.prototype.audioHost = "", e.prototype.audioCheckin = !1, e.prototype.audioMuted = !1, e.prototype.compressedSdpOffer = d.newBuffer([]), e.prototype.videoSubscriptionConfiguration = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.duplex && Object.hasOwnProperty.call(e, "duplex") && t.uint32(8).int32(e.duplex), null != e.sendStreams && e.sendStreams.length) for (var i = 0; i < e.sendStreams.length; ++i)l.SdkStreamDescriptor.encode(e.sendStreams[i], t.uint32(18).fork()).ldelim(); if (null != e.receiveStreamIds && e.receiveStreamIds.length) for (i = 0; i < e.receiveStreamIds.length; ++i)t.uint32(24).uint32(e.receiveStreamIds[i]); if (null != e.sdpOffer && Object.hasOwnProperty.call(e, "sdpOffer") && t.uint32(34).string(e.sdpOffer), null != e.audioHost && Object.hasOwnProperty.call(e, "audioHost") && t.uint32(42).string(e.audioHost), null != e.audioCheckin && Object.hasOwnProperty.call(e, "audioCheckin") && t.uint32(48).bool(e.audioCheckin), null != e.audioMuted && Object.hasOwnProperty.call(e, "audioMuted") && t.uint32(56).bool(e.audioMuted), null != e.compressedSdpOffer && Object.hasOwnProperty.call(e, "compressedSdpOffer") && t.uint32(66).bytes(e.compressedSdpOffer), null != e.videoSubscriptionConfiguration && e.videoSubscriptionConfiguration.length) for (i = 0; i < e.videoSubscriptionConfiguration.length; ++i)l.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[i], t.uint32(74).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkSubscribeFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.duplex = e.int32(); break; case 2: r.sendStreams && r.sendStreams.length || (r.sendStreams = []), r.sendStreams.push(l.SdkStreamDescriptor.decode(e, e.uint32())); break; case 3: if (r.receiveStreamIds && r.receiveStreamIds.length || (r.receiveStreamIds = []), 2 == (7 & o)) for (var n = e.uint32() + e.pos; e.pos < n;)r.receiveStreamIds.push(e.uint32()); else r.receiveStreamIds.push(e.uint32()); break; case 4: r.sdpOffer = e.string(); break; case 5: r.audioHost = e.string(); break; case 6: r.audioCheckin = e.bool(); break; case 7: r.audioMuted = e.bool(); break; case 8: r.compressedSdpOffer = e.bytes(); break; case 9: r.videoSubscriptionConfiguration && r.videoSubscriptionConfiguration.length || (r.videoSubscriptionConfiguration = []), r.videoSubscriptionConfiguration.push(l.SdkVideoSubscriptionConfiguration.decode(e, e.uint32())); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.duplex && e.hasOwnProperty("duplex")) switch (e.duplex) { default: return "duplex: enum value expected"; case 1: case 2: case 3: }if (null != e.sendStreams && e.hasOwnProperty("sendStreams")) { if (!Array.isArray(e.sendStreams)) return "sendStreams: array expected"; for (var t = 0; t < e.sendStreams.length; ++t)if (i = l.SdkStreamDescriptor.verify(e.sendStreams[t])) return "sendStreams." + i } if (null != e.receiveStreamIds && e.hasOwnProperty("receiveStreamIds")) { if (!Array.isArray(e.receiveStreamIds)) return "receiveStreamIds: array expected"; for (t = 0; t < e.receiveStreamIds.length; ++t)if (!d.isInteger(e.receiveStreamIds[t])) return "receiveStreamIds: integer[] expected" } if (null != e.sdpOffer && e.hasOwnProperty("sdpOffer") && !d.isString(e.sdpOffer)) return "sdpOffer: string expected"; if (null != e.audioHost && e.hasOwnProperty("audioHost") && !d.isString(e.audioHost)) return "audioHost: string expected"; if (null != e.audioCheckin && e.hasOwnProperty("audioCheckin") && "boolean" != typeof e.audioCheckin) return "audioCheckin: boolean expected"; if (null != e.audioMuted && e.hasOwnProperty("audioMuted") && "boolean" != typeof e.audioMuted) return "audioMuted: boolean expected"; if (null != e.compressedSdpOffer && e.hasOwnProperty("compressedSdpOffer") && !(e.compressedSdpOffer && "number" == typeof e.compressedSdpOffer.length || d.isString(e.compressedSdpOffer))) return "compressedSdpOffer: buffer expected"; if (null != e.videoSubscriptionConfiguration && e.hasOwnProperty("videoSubscriptionConfiguration")) { if (!Array.isArray(e.videoSubscriptionConfiguration)) return "videoSubscriptionConfiguration: array expected"; for (t = 0; t < e.videoSubscriptionConfiguration.length; ++t) { var i; if (i = l.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t])) return "videoSubscriptionConfiguration." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkSubscribeFrame) return e; var t = new l.SdkSubscribeFrame; switch (e.duplex) { case "RX": case 1: t.duplex = 1; break; case "TX": case 2: t.duplex = 2; break; case "DUPLEX": case 3: t.duplex = 3 }if (e.sendStreams) { if (!Array.isArray(e.sendStreams)) throw TypeError(".SdkSubscribeFrame.sendStreams: array expected"); t.sendStreams = []; for (var i = 0; i < e.sendStreams.length; ++i) { if ("object" != typeof e.sendStreams[i]) throw TypeError(".SdkSubscribeFrame.sendStreams: object expected"); t.sendStreams[i] = l.SdkStreamDescriptor.fromObject(e.sendStreams[i]) } } if (e.receiveStreamIds) { if (!Array.isArray(e.receiveStreamIds)) throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected"); for (t.receiveStreamIds = [], i = 0; i < e.receiveStreamIds.length; ++i)t.receiveStreamIds[i] = e.receiveStreamIds[i] >>> 0 } if (null != e.sdpOffer && (t.sdpOffer = String(e.sdpOffer)), null != e.audioHost && (t.audioHost = String(e.audioHost)), null != e.audioCheckin && (t.audioCheckin = Boolean(e.audioCheckin)), null != e.audioMuted && (t.audioMuted = Boolean(e.audioMuted)), null != e.compressedSdpOffer && ("string" == typeof e.compressedSdpOffer ? d.base64.decode(e.compressedSdpOffer, t.compressedSdpOffer = d.newBuffer(d.base64.length(e.compressedSdpOffer)), 0) : e.compressedSdpOffer.length && (t.compressedSdpOffer = e.compressedSdpOffer)), e.videoSubscriptionConfiguration) { if (!Array.isArray(e.videoSubscriptionConfiguration)) throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected"); for (t.videoSubscriptionConfiguration = [], i = 0; i < e.videoSubscriptionConfiguration.length; ++i) { if ("object" != typeof e.videoSubscriptionConfiguration[i]) throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected"); t.videoSubscriptionConfiguration[i] = l.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.sendStreams = [], i.receiveStreamIds = [], i.videoSubscriptionConfiguration = []), t.defaults && (i.duplex = t.enums === String ? "RX" : 1, i.sdpOffer = "", i.audioHost = "", i.audioCheckin = !1, i.audioMuted = !1, t.bytes === String ? i.compressedSdpOffer = "" : (i.compressedSdpOffer = [], t.bytes !== Array && (i.compressedSdpOffer = d.newBuffer(i.compressedSdpOffer)))), null != e.duplex && e.hasOwnProperty("duplex") && (i.duplex = t.enums === String ? l.SdkStreamServiceType[e.duplex] : e.duplex), e.sendStreams && e.sendStreams.length) { i.sendStreams = []; for (var r = 0; r < e.sendStreams.length; ++r)i.sendStreams[r] = l.SdkStreamDescriptor.toObject(e.sendStreams[r], t) } if (e.receiveStreamIds && e.receiveStreamIds.length) for (i.receiveStreamIds = [], r = 0; r < e.receiveStreamIds.length; ++r)i.receiveStreamIds[r] = e.receiveStreamIds[r]; if (null != e.sdpOffer && e.hasOwnProperty("sdpOffer") && (i.sdpOffer = e.sdpOffer), null != e.audioHost && e.hasOwnProperty("audioHost") && (i.audioHost = e.audioHost), null != e.audioCheckin && e.hasOwnProperty("audioCheckin") && (i.audioCheckin = e.audioCheckin), null != e.audioMuted && e.hasOwnProperty("audioMuted") && (i.audioMuted = e.audioMuted), null != e.compressedSdpOffer && e.hasOwnProperty("compressedSdpOffer") && (i.compressedSdpOffer = t.bytes === String ? d.base64.encode(e.compressedSdpOffer, 0, e.compressedSdpOffer.length) : t.bytes === Array ? Array.prototype.slice.call(e.compressedSdpOffer) : e.compressedSdpOffer), e.videoSubscriptionConfiguration && e.videoSubscriptionConfiguration.length) for (i.videoSubscriptionConfiguration = [], r = 0; r < e.videoSubscriptionConfiguration.length; ++r)i.videoSubscriptionConfiguration[r] = l.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[r], t); return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkSubscribeAckFrame = function () { function e(e) { if (this.allocations = [], this.tracks = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.duplex = 1, e.prototype.allocations = d.emptyArray, e.prototype.sdpAnswer = "", e.prototype.tracks = d.emptyArray, e.prototype.compressedSdpAnswer = d.newBuffer([]), e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.duplex && Object.hasOwnProperty.call(e, "duplex") && t.uint32(8).int32(e.duplex), null != e.allocations && e.allocations.length) for (var i = 0; i < e.allocations.length; ++i)l.SdkStreamAllocation.encode(e.allocations[i], t.uint32(18).fork()).ldelim(); if (null != e.sdpAnswer && Object.hasOwnProperty.call(e, "sdpAnswer") && t.uint32(26).string(e.sdpAnswer), null != e.tracks && e.tracks.length) for (i = 0; i < e.tracks.length; ++i)l.SdkTrackMapping.encode(e.tracks[i], t.uint32(34).fork()).ldelim(); return null != e.compressedSdpAnswer && Object.hasOwnProperty.call(e, "compressedSdpAnswer") && t.uint32(42).bytes(e.compressedSdpAnswer), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkSubscribeAckFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.duplex = e.int32(); break; case 2: r.allocations && r.allocations.length || (r.allocations = []), r.allocations.push(l.SdkStreamAllocation.decode(e, e.uint32())); break; case 3: r.sdpAnswer = e.string(); break; case 4: r.tracks && r.tracks.length || (r.tracks = []), r.tracks.push(l.SdkTrackMapping.decode(e, e.uint32())); break; case 5: r.compressedSdpAnswer = e.bytes(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.duplex && e.hasOwnProperty("duplex")) switch (e.duplex) { default: return "duplex: enum value expected"; case 1: case 2: case 3: }if (null != e.allocations && e.hasOwnProperty("allocations")) { if (!Array.isArray(e.allocations)) return "allocations: array expected"; for (var t = 0; t < e.allocations.length; ++t)if (i = l.SdkStreamAllocation.verify(e.allocations[t])) return "allocations." + i } if (null != e.sdpAnswer && e.hasOwnProperty("sdpAnswer") && !d.isString(e.sdpAnswer)) return "sdpAnswer: string expected"; if (null != e.tracks && e.hasOwnProperty("tracks")) { if (!Array.isArray(e.tracks)) return "tracks: array expected"; for (t = 0; t < e.tracks.length; ++t) { var i; if (i = l.SdkTrackMapping.verify(e.tracks[t])) return "tracks." + i } } return null != e.compressedSdpAnswer && e.hasOwnProperty("compressedSdpAnswer") && !(e.compressedSdpAnswer && "number" == typeof e.compressedSdpAnswer.length || d.isString(e.compressedSdpAnswer)) ? "compressedSdpAnswer: buffer expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkSubscribeAckFrame) return e; var t = new l.SdkSubscribeAckFrame; switch (e.duplex) { case "RX": case 1: t.duplex = 1; break; case "TX": case 2: t.duplex = 2; break; case "DUPLEX": case 3: t.duplex = 3 }if (e.allocations) { if (!Array.isArray(e.allocations)) throw TypeError(".SdkSubscribeAckFrame.allocations: array expected"); t.allocations = []; for (var i = 0; i < e.allocations.length; ++i) { if ("object" != typeof e.allocations[i]) throw TypeError(".SdkSubscribeAckFrame.allocations: object expected"); t.allocations[i] = l.SdkStreamAllocation.fromObject(e.allocations[i]) } } if (null != e.sdpAnswer && (t.sdpAnswer = String(e.sdpAnswer)), e.tracks) { if (!Array.isArray(e.tracks)) throw TypeError(".SdkSubscribeAckFrame.tracks: array expected"); for (t.tracks = [], i = 0; i < e.tracks.length; ++i) { if ("object" != typeof e.tracks[i]) throw TypeError(".SdkSubscribeAckFrame.tracks: object expected"); t.tracks[i] = l.SdkTrackMapping.fromObject(e.tracks[i]) } } return null != e.compressedSdpAnswer && ("string" == typeof e.compressedSdpAnswer ? d.base64.decode(e.compressedSdpAnswer, t.compressedSdpAnswer = d.newBuffer(d.base64.length(e.compressedSdpAnswer)), 0) : e.compressedSdpAnswer.length && (t.compressedSdpAnswer = e.compressedSdpAnswer)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.allocations = [], i.tracks = []), t.defaults && (i.duplex = t.enums === String ? "RX" : 1, i.sdpAnswer = "", t.bytes === String ? i.compressedSdpAnswer = "" : (i.compressedSdpAnswer = [], t.bytes !== Array && (i.compressedSdpAnswer = d.newBuffer(i.compressedSdpAnswer)))), null != e.duplex && e.hasOwnProperty("duplex") && (i.duplex = t.enums === String ? l.SdkStreamServiceType[e.duplex] : e.duplex), e.allocations && e.allocations.length) { i.allocations = []; for (var r = 0; r < e.allocations.length; ++r)i.allocations[r] = l.SdkStreamAllocation.toObject(e.allocations[r], t) } if (null != e.sdpAnswer && e.hasOwnProperty("sdpAnswer") && (i.sdpAnswer = e.sdpAnswer), e.tracks && e.tracks.length) for (i.tracks = [], r = 0; r < e.tracks.length; ++r)i.tracks[r] = l.SdkTrackMapping.toObject(e.tracks[r], t); return null != e.compressedSdpAnswer && e.hasOwnProperty("compressedSdpAnswer") && (i.compressedSdpAnswer = t.bytes === String ? d.base64.encode(e.compressedSdpAnswer, 0, e.compressedSdpAnswer.length) : t.bytes === Array ? Array.prototype.slice.call(e.compressedSdpAnswer) : e.compressedSdpAnswer), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkIndexFrame = function () { function e(e) { if (this.sources = [], this.pausedAtSourceIds = [], this.supportedReceiveCodecIntersection = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.atCapacity = !1, e.prototype.sources = d.emptyArray, e.prototype.pausedAtSourceIds = d.emptyArray, e.prototype.numParticipants = 0, e.prototype.supportedReceiveCodecIntersection = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.atCapacity && Object.hasOwnProperty.call(e, "atCapacity") && t.uint32(8).bool(e.atCapacity), null != e.sources && e.sources.length) for (var i = 0; i < e.sources.length; ++i)l.SdkStreamDescriptor.encode(e.sources[i], t.uint32(18).fork()).ldelim(); if (null != e.pausedAtSourceIds && e.pausedAtSourceIds.length) for (i = 0; i < e.pausedAtSourceIds.length; ++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]); if (null != e.numParticipants && Object.hasOwnProperty.call(e, "numParticipants") && t.uint32(32).uint32(e.numParticipants), null != e.supportedReceiveCodecIntersection && e.supportedReceiveCodecIntersection.length) for (i = 0; i < e.supportedReceiveCodecIntersection.length; ++i)t.uint32(40).int32(e.supportedReceiveCodecIntersection[i]); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkIndexFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.atCapacity = e.bool(); break; case 2: r.sources && r.sources.length || (r.sources = []), r.sources.push(l.SdkStreamDescriptor.decode(e, e.uint32())); break; case 3: if (r.pausedAtSourceIds && r.pausedAtSourceIds.length || (r.pausedAtSourceIds = []), 2 == (7 & o)) for (var n = e.uint32() + e.pos; e.pos < n;)r.pausedAtSourceIds.push(e.uint32()); else r.pausedAtSourceIds.push(e.uint32()); break; case 4: r.numParticipants = e.uint32(); break; case 5: if (r.supportedReceiveCodecIntersection && r.supportedReceiveCodecIntersection.length || (r.supportedReceiveCodecIntersection = []), 2 == (7 & o)) for (n = e.uint32() + e.pos; e.pos < n;)r.supportedReceiveCodecIntersection.push(e.int32()); else r.supportedReceiveCodecIntersection.push(e.int32()); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.atCapacity && e.hasOwnProperty("atCapacity") && "boolean" != typeof e.atCapacity) return "atCapacity: boolean expected"; if (null != e.sources && e.hasOwnProperty("sources")) { if (!Array.isArray(e.sources)) return "sources: array expected"; for (var t = 0; t < e.sources.length; ++t) { var i = l.SdkStreamDescriptor.verify(e.sources[t]); if (i) return "sources." + i } } if (null != e.pausedAtSourceIds && e.hasOwnProperty("pausedAtSourceIds")) { if (!Array.isArray(e.pausedAtSourceIds)) return "pausedAtSourceIds: array expected"; for (t = 0; t < e.pausedAtSourceIds.length; ++t)if (!d.isInteger(e.pausedAtSourceIds[t])) return "pausedAtSourceIds: integer[] expected" } if (null != e.numParticipants && e.hasOwnProperty("numParticipants") && !d.isInteger(e.numParticipants)) return "numParticipants: integer expected"; if (null != e.supportedReceiveCodecIntersection && e.hasOwnProperty("supportedReceiveCodecIntersection")) { if (!Array.isArray(e.supportedReceiveCodecIntersection)) return "supportedReceiveCodecIntersection: array expected"; for (t = 0; t < e.supportedReceiveCodecIntersection.length; ++t)switch (e.supportedReceiveCodecIntersection[t]) { default: return "supportedReceiveCodecIntersection: enum value[] expected"; case 1: case 3: } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkIndexFrame) return e; var t = new l.SdkIndexFrame; if (null != e.atCapacity && (t.atCapacity = Boolean(e.atCapacity)), e.sources) { if (!Array.isArray(e.sources)) throw TypeError(".SdkIndexFrame.sources: array expected"); t.sources = []; for (var i = 0; i < e.sources.length; ++i) { if ("object" != typeof e.sources[i]) throw TypeError(".SdkIndexFrame.sources: object expected"); t.sources[i] = l.SdkStreamDescriptor.fromObject(e.sources[i]) } } if (e.pausedAtSourceIds) { if (!Array.isArray(e.pausedAtSourceIds)) throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected"); for (t.pausedAtSourceIds = [], i = 0; i < e.pausedAtSourceIds.length; ++i)t.pausedAtSourceIds[i] = e.pausedAtSourceIds[i] >>> 0 } if (null != e.numParticipants && (t.numParticipants = e.numParticipants >>> 0), e.supportedReceiveCodecIntersection) { if (!Array.isArray(e.supportedReceiveCodecIntersection)) throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected"); for (t.supportedReceiveCodecIntersection = [], i = 0; i < e.supportedReceiveCodecIntersection.length; ++i)switch (e.supportedReceiveCodecIntersection[i]) { default: case "VP8": case 1: t.supportedReceiveCodecIntersection[i] = 1; break; case "H264_CONSTRAINED_BASELINE_PROFILE": case 3: t.supportedReceiveCodecIntersection[i] = 3 } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.sources = [], i.pausedAtSourceIds = [], i.supportedReceiveCodecIntersection = []), t.defaults && (i.atCapacity = !1, i.numParticipants = 0), null != e.atCapacity && e.hasOwnProperty("atCapacity") && (i.atCapacity = e.atCapacity), e.sources && e.sources.length) { i.sources = []; for (var r = 0; r < e.sources.length; ++r)i.sources[r] = l.SdkStreamDescriptor.toObject(e.sources[r], t) } if (e.pausedAtSourceIds && e.pausedAtSourceIds.length) for (i.pausedAtSourceIds = [], r = 0; r < e.pausedAtSourceIds.length; ++r)i.pausedAtSourceIds[r] = e.pausedAtSourceIds[r]; if (null != e.numParticipants && e.hasOwnProperty("numParticipants") && (i.numParticipants = e.numParticipants), e.supportedReceiveCodecIntersection && e.supportedReceiveCodecIntersection.length) for (i.supportedReceiveCodecIntersection = [], r = 0; r < e.supportedReceiveCodecIntersection.length; ++r)i.supportedReceiveCodecIntersection[r] = t.enums === String ? l.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[r]] : e.supportedReceiveCodecIntersection[r]; return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkPauseResumeFrame = function () { function e(e) { if (this.streamIds = [], this.groupIds = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.streamIds = d.emptyArray, e.prototype.groupIds = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.streamIds && e.streamIds.length) for (var i = 0; i < e.streamIds.length; ++i)t.uint32(8).uint32(e.streamIds[i]); if (null != e.groupIds && e.groupIds.length) for (i = 0; i < e.groupIds.length; ++i)t.uint32(16).uint32(e.groupIds[i]); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkPauseResumeFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: if (r.streamIds && r.streamIds.length || (r.streamIds = []), 2 == (7 & o)) for (var n = e.uint32() + e.pos; e.pos < n;)r.streamIds.push(e.uint32()); else r.streamIds.push(e.uint32()); break; case 2: if (r.groupIds && r.groupIds.length || (r.groupIds = []), 2 == (7 & o)) for (n = e.uint32() + e.pos; e.pos < n;)r.groupIds.push(e.uint32()); else r.groupIds.push(e.uint32()); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.streamIds && e.hasOwnProperty("streamIds")) { if (!Array.isArray(e.streamIds)) return "streamIds: array expected"; for (var t = 0; t < e.streamIds.length; ++t)if (!d.isInteger(e.streamIds[t])) return "streamIds: integer[] expected" } if (null != e.groupIds && e.hasOwnProperty("groupIds")) { if (!Array.isArray(e.groupIds)) return "groupIds: array expected"; for (t = 0; t < e.groupIds.length; ++t)if (!d.isInteger(e.groupIds[t])) return "groupIds: integer[] expected" } return null }, e.fromObject = function (e) { if (e instanceof l.SdkPauseResumeFrame) return e; var t = new l.SdkPauseResumeFrame; if (e.streamIds) { if (!Array.isArray(e.streamIds)) throw TypeError(".SdkPauseResumeFrame.streamIds: array expected"); t.streamIds = []; for (var i = 0; i < e.streamIds.length; ++i)t.streamIds[i] = e.streamIds[i] >>> 0 } if (e.groupIds) { if (!Array.isArray(e.groupIds)) throw TypeError(".SdkPauseResumeFrame.groupIds: array expected"); for (t.groupIds = [], i = 0; i < e.groupIds.length; ++i)t.groupIds[i] = e.groupIds[i] >>> 0 } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.streamIds = [], i.groupIds = []), e.streamIds && e.streamIds.length) { i.streamIds = []; for (var r = 0; r < e.streamIds.length; ++r)i.streamIds[r] = e.streamIds[r] } if (e.groupIds && e.groupIds.length) for (i.groupIds = [], r = 0; r < e.groupIds.length; ++r)i.groupIds[r] = e.groupIds[r]; return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkBitrateFrame = function () { function e(e) { if (this.bitrates = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.bitrates = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.bitrates && e.bitrates.length) for (var i = 0; i < e.bitrates.length; ++i)l.SdkBitrate.encode(e.bitrates[i], t.uint32(10).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkBitrateFrame; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? (r.bitrates && r.bitrates.length || (r.bitrates = []), r.bitrates.push(l.SdkBitrate.decode(e, e.uint32()))) : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.bitrates && e.hasOwnProperty("bitrates")) { if (!Array.isArray(e.bitrates)) return "bitrates: array expected"; for (var t = 0; t < e.bitrates.length; ++t) { var i = l.SdkBitrate.verify(e.bitrates[t]); if (i) return "bitrates." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkBitrateFrame) return e; var t = new l.SdkBitrateFrame; if (e.bitrates) { if (!Array.isArray(e.bitrates)) throw TypeError(".SdkBitrateFrame.bitrates: array expected"); t.bitrates = []; for (var i = 0; i < e.bitrates.length; ++i) { if ("object" != typeof e.bitrates[i]) throw TypeError(".SdkBitrateFrame.bitrates: object expected"); t.bitrates[i] = l.SdkBitrate.fromObject(e.bitrates[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.bitrates = []), e.bitrates && e.bitrates.length) { i.bitrates = []; for (var r = 0; r < e.bitrates.length; ++r)i.bitrates[r] = l.SdkBitrate.toObject(e.bitrates[r], t) } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkStreamDescriptor = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.streamId = 0, e.prototype.framerate = 0, e.prototype.maxBitrateKbps = 0, e.prototype.trackLabel = "", e.prototype.groupId = 0, e.prototype.avgBitrateBps = 0, e.prototype.attendeeId = "", e.prototype.mediaType = 1, e.prototype.externalUserId = "", e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.streamId && Object.hasOwnProperty.call(e, "streamId") && t.uint32(8).uint32(e.streamId), null != e.framerate && Object.hasOwnProperty.call(e, "framerate") && t.uint32(16).uint32(e.framerate), null != e.maxBitrateKbps && Object.hasOwnProperty.call(e, "maxBitrateKbps") && t.uint32(24).uint32(e.maxBitrateKbps), null != e.trackLabel && Object.hasOwnProperty.call(e, "trackLabel") && t.uint32(34).string(e.trackLabel), null != e.groupId && Object.hasOwnProperty.call(e, "groupId") && t.uint32(48).uint32(e.groupId), null != e.avgBitrateBps && Object.hasOwnProperty.call(e, "avgBitrateBps") && t.uint32(56).uint32(e.avgBitrateBps), null != e.attendeeId && Object.hasOwnProperty.call(e, "attendeeId") && t.uint32(66).string(e.attendeeId), null != e.mediaType && Object.hasOwnProperty.call(e, "mediaType") && t.uint32(72).int32(e.mediaType), null != e.externalUserId && Object.hasOwnProperty.call(e, "externalUserId") && t.uint32(82).string(e.externalUserId), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkStreamDescriptor; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.streamId = e.uint32(); break; case 2: r.framerate = e.uint32(); break; case 3: r.maxBitrateKbps = e.uint32(); break; case 4: r.trackLabel = e.string(); break; case 6: r.groupId = e.uint32(); break; case 7: r.avgBitrateBps = e.uint32(); break; case 8: r.attendeeId = e.string(); break; case 9: r.mediaType = e.int32(); break; case 10: r.externalUserId = e.string(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.streamId && e.hasOwnProperty("streamId") && !d.isInteger(e.streamId)) return "streamId: integer expected"; if (null != e.framerate && e.hasOwnProperty("framerate") && !d.isInteger(e.framerate)) return "framerate: integer expected"; if (null != e.maxBitrateKbps && e.hasOwnProperty("maxBitrateKbps") && !d.isInteger(e.maxBitrateKbps)) return "maxBitrateKbps: integer expected"; if (null != e.trackLabel && e.hasOwnProperty("trackLabel") && !d.isString(e.trackLabel)) return "trackLabel: string expected"; if (null != e.groupId && e.hasOwnProperty("groupId") && !d.isInteger(e.groupId)) return "groupId: integer expected"; if (null != e.avgBitrateBps && e.hasOwnProperty("avgBitrateBps") && !d.isInteger(e.avgBitrateBps)) return "avgBitrateBps: integer expected"; if (null != e.attendeeId && e.hasOwnProperty("attendeeId") && !d.isString(e.attendeeId)) return "attendeeId: string expected"; if (null != e.mediaType && e.hasOwnProperty("mediaType")) switch (e.mediaType) { default: return "mediaType: enum value expected"; case 1: case 2: }return null != e.externalUserId && e.hasOwnProperty("externalUserId") && !d.isString(e.externalUserId) ? "externalUserId: string expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkStreamDescriptor) return e; var t = new l.SdkStreamDescriptor; switch (null != e.streamId && (t.streamId = e.streamId >>> 0), null != e.framerate && (t.framerate = e.framerate >>> 0), null != e.maxBitrateKbps && (t.maxBitrateKbps = e.maxBitrateKbps >>> 0), null != e.trackLabel && (t.trackLabel = String(e.trackLabel)), null != e.groupId && (t.groupId = e.groupId >>> 0), null != e.avgBitrateBps && (t.avgBitrateBps = e.avgBitrateBps >>> 0), null != e.attendeeId && (t.attendeeId = String(e.attendeeId)), e.mediaType) { case "AUDIO": case 1: t.mediaType = 1; break; case "VIDEO": case 2: t.mediaType = 2 }return null != e.externalUserId && (t.externalUserId = String(e.externalUserId)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.streamId = 0, i.framerate = 0, i.maxBitrateKbps = 0, i.trackLabel = "", i.groupId = 0, i.avgBitrateBps = 0, i.attendeeId = "", i.mediaType = t.enums === String ? "AUDIO" : 1, i.externalUserId = ""), null != e.streamId && e.hasOwnProperty("streamId") && (i.streamId = e.streamId), null != e.framerate && e.hasOwnProperty("framerate") && (i.framerate = e.framerate), null != e.maxBitrateKbps && e.hasOwnProperty("maxBitrateKbps") && (i.maxBitrateKbps = e.maxBitrateKbps), null != e.trackLabel && e.hasOwnProperty("trackLabel") && (i.trackLabel = e.trackLabel), null != e.groupId && e.hasOwnProperty("groupId") && (i.groupId = e.groupId), null != e.avgBitrateBps && e.hasOwnProperty("avgBitrateBps") && (i.avgBitrateBps = e.avgBitrateBps), null != e.attendeeId && e.hasOwnProperty("attendeeId") && (i.attendeeId = e.attendeeId), null != e.mediaType && e.hasOwnProperty("mediaType") && (i.mediaType = t.enums === String ? l.SdkStreamMediaType[e.mediaType] : e.mediaType), null != e.externalUserId && e.hasOwnProperty("externalUserId") && (i.externalUserId = e.externalUserId), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkStreamAllocation = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.trackLabel = "", e.prototype.streamId = 0, e.prototype.groupId = 0, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.trackLabel && Object.hasOwnProperty.call(e, "trackLabel") && t.uint32(10).string(e.trackLabel), null != e.streamId && Object.hasOwnProperty.call(e, "streamId") && t.uint32(16).uint32(e.streamId), null != e.groupId && Object.hasOwnProperty.call(e, "groupId") && t.uint32(24).uint32(e.groupId), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkStreamAllocation; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.trackLabel = e.string(); break; case 2: r.streamId = e.uint32(); break; case 3: r.groupId = e.uint32(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.trackLabel && e.hasOwnProperty("trackLabel") && !d.isString(e.trackLabel) ? "trackLabel: string expected" : null != e.streamId && e.hasOwnProperty("streamId") && !d.isInteger(e.streamId) ? "streamId: integer expected" : null != e.groupId && e.hasOwnProperty("groupId") && !d.isInteger(e.groupId) ? "groupId: integer expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkStreamAllocation) return e; var t = new l.SdkStreamAllocation; return null != e.trackLabel && (t.trackLabel = String(e.trackLabel)), null != e.streamId && (t.streamId = e.streamId >>> 0), null != e.groupId && (t.groupId = e.groupId >>> 0), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.trackLabel = "", i.streamId = 0, i.groupId = 0), null != e.trackLabel && e.hasOwnProperty("trackLabel") && (i.trackLabel = e.trackLabel), null != e.streamId && e.hasOwnProperty("streamId") && (i.streamId = e.streamId), null != e.groupId && e.hasOwnProperty("groupId") && (i.groupId = e.groupId), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTrackMapping = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.streamId = 0, e.prototype.ssrc = 0, e.prototype.trackLabel = "", e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.streamId && Object.hasOwnProperty.call(e, "streamId") && t.uint32(8).uint32(e.streamId), null != e.ssrc && Object.hasOwnProperty.call(e, "ssrc") && t.uint32(16).uint32(e.ssrc), null != e.trackLabel && Object.hasOwnProperty.call(e, "trackLabel") && t.uint32(26).string(e.trackLabel), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTrackMapping; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.streamId = e.uint32(); break; case 2: r.ssrc = e.uint32(); break; case 3: r.trackLabel = e.string(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.streamId && e.hasOwnProperty("streamId") && !d.isInteger(e.streamId) ? "streamId: integer expected" : null != e.ssrc && e.hasOwnProperty("ssrc") && !d.isInteger(e.ssrc) ? "ssrc: integer expected" : null != e.trackLabel && e.hasOwnProperty("trackLabel") && !d.isString(e.trackLabel) ? "trackLabel: string expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkTrackMapping) return e; var t = new l.SdkTrackMapping; return null != e.streamId && (t.streamId = e.streamId >>> 0), null != e.ssrc && (t.ssrc = e.ssrc >>> 0), null != e.trackLabel && (t.trackLabel = String(e.trackLabel)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.streamId = 0, i.ssrc = 0, i.trackLabel = ""), null != e.streamId && e.hasOwnProperty("streamId") && (i.streamId = e.streamId), null != e.ssrc && e.hasOwnProperty("ssrc") && (i.ssrc = e.ssrc), null != e.trackLabel && e.hasOwnProperty("trackLabel") && (i.trackLabel = e.trackLabel), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkBitrate = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.sourceStreamId = 0, e.prototype.avgBitrateBps = 0, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.sourceStreamId && Object.hasOwnProperty.call(e, "sourceStreamId") && t.uint32(8).uint32(e.sourceStreamId), null != e.avgBitrateBps && Object.hasOwnProperty.call(e, "avgBitrateBps") && t.uint32(16).uint32(e.avgBitrateBps), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkBitrate; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.sourceStreamId = e.uint32(); break; case 2: r.avgBitrateBps = e.uint32(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.sourceStreamId && e.hasOwnProperty("sourceStreamId") && !d.isInteger(e.sourceStreamId) ? "sourceStreamId: integer expected" : null != e.avgBitrateBps && e.hasOwnProperty("avgBitrateBps") && !d.isInteger(e.avgBitrateBps) ? "avgBitrateBps: integer expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkBitrate) return e; var t = new l.SdkBitrate; return null != e.sourceStreamId && (t.sourceStreamId = e.sourceStreamId >>> 0), null != e.avgBitrateBps && (t.avgBitrateBps = e.avgBitrateBps >>> 0), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.sourceStreamId = 0, i.avgBitrateBps = 0), null != e.sourceStreamId && e.hasOwnProperty("sourceStreamId") && (i.sourceStreamId = e.sourceStreamId), null != e.avgBitrateBps && e.hasOwnProperty("avgBitrateBps") && (i.avgBitrateBps = e.avgBitrateBps), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkAudioControlFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.muted = !1, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.muted && Object.hasOwnProperty.call(e, "muted") && t.uint32(8).bool(e.muted), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkAudioControlFrame; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? r.muted = e.bool() : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.muted && e.hasOwnProperty("muted") && "boolean" != typeof e.muted ? "muted: boolean expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkAudioControlFrame) return e; var t = new l.SdkAudioControlFrame; return null != e.muted && (t.muted = Boolean(e.muted)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.muted = !1), null != e.muted && e.hasOwnProperty("muted") && (i.muted = e.muted), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkAudioMetadataFrame = function () { function e(e) { if (this.attendeeStates = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.attendeeStates = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.attendeeStates && e.attendeeStates.length) for (var i = 0; i < e.attendeeStates.length; ++i)l.SdkAudioAttendeeState.encode(e.attendeeStates[i], t.uint32(10).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkAudioMetadataFrame; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? (r.attendeeStates && r.attendeeStates.length || (r.attendeeStates = []), r.attendeeStates.push(l.SdkAudioAttendeeState.decode(e, e.uint32()))) : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.attendeeStates && e.hasOwnProperty("attendeeStates")) { if (!Array.isArray(e.attendeeStates)) return "attendeeStates: array expected"; for (var t = 0; t < e.attendeeStates.length; ++t) { var i = l.SdkAudioAttendeeState.verify(e.attendeeStates[t]); if (i) return "attendeeStates." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkAudioMetadataFrame) return e; var t = new l.SdkAudioMetadataFrame; if (e.attendeeStates) { if (!Array.isArray(e.attendeeStates)) throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected"); t.attendeeStates = []; for (var i = 0; i < e.attendeeStates.length; ++i) { if ("object" != typeof e.attendeeStates[i]) throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected"); t.attendeeStates[i] = l.SdkAudioAttendeeState.fromObject(e.attendeeStates[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.attendeeStates = []), e.attendeeStates && e.attendeeStates.length) { i.attendeeStates = []; for (var r = 0; r < e.attendeeStates.length; ++r)i.attendeeStates[r] = l.SdkAudioAttendeeState.toObject(e.attendeeStates[r], t) } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkAudioAttendeeState = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.audioStreamId = 0, e.prototype.volume = 0, e.prototype.muted = !1, e.prototype.signalStrength = 0, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.audioStreamId && Object.hasOwnProperty.call(e, "audioStreamId") && t.uint32(8).uint32(e.audioStreamId), null != e.volume && Object.hasOwnProperty.call(e, "volume") && t.uint32(16).uint32(e.volume), null != e.muted && Object.hasOwnProperty.call(e, "muted") && t.uint32(24).bool(e.muted), null != e.signalStrength && Object.hasOwnProperty.call(e, "signalStrength") && t.uint32(32).uint32(e.signalStrength), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkAudioAttendeeState; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.audioStreamId = e.uint32(); break; case 2: r.volume = e.uint32(); break; case 3: r.muted = e.bool(); break; case 4: r.signalStrength = e.uint32(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.audioStreamId && e.hasOwnProperty("audioStreamId") && !d.isInteger(e.audioStreamId) ? "audioStreamId: integer expected" : null != e.volume && e.hasOwnProperty("volume") && !d.isInteger(e.volume) ? "volume: integer expected" : null != e.muted && e.hasOwnProperty("muted") && "boolean" != typeof e.muted ? "muted: boolean expected" : null != e.signalStrength && e.hasOwnProperty("signalStrength") && !d.isInteger(e.signalStrength) ? "signalStrength: integer expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkAudioAttendeeState) return e; var t = new l.SdkAudioAttendeeState; return null != e.audioStreamId && (t.audioStreamId = e.audioStreamId >>> 0), null != e.volume && (t.volume = e.volume >>> 0), null != e.muted && (t.muted = Boolean(e.muted)), null != e.signalStrength && (t.signalStrength = e.signalStrength >>> 0), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.audioStreamId = 0, i.volume = 0, i.muted = !1, i.signalStrength = 0), null != e.audioStreamId && e.hasOwnProperty("audioStreamId") && (i.audioStreamId = e.audioStreamId), null != e.volume && e.hasOwnProperty("volume") && (i.volume = e.volume), null != e.muted && e.hasOwnProperty("muted") && (i.muted = e.muted), null != e.signalStrength && e.hasOwnProperty("signalStrength") && (i.signalStrength = e.signalStrength), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkAudioStreamIdInfoFrame = function () { function e(e) { if (this.streams = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.streams = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.streams && e.streams.length) for (var i = 0; i < e.streams.length; ++i)l.SdkAudioStreamIdInfo.encode(e.streams[i], t.uint32(10).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkAudioStreamIdInfoFrame; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? (r.streams && r.streams.length || (r.streams = []), r.streams.push(l.SdkAudioStreamIdInfo.decode(e, e.uint32()))) : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.streams && e.hasOwnProperty("streams")) { if (!Array.isArray(e.streams)) return "streams: array expected"; for (var t = 0; t < e.streams.length; ++t) { var i = l.SdkAudioStreamIdInfo.verify(e.streams[t]); if (i) return "streams." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkAudioStreamIdInfoFrame) return e; var t = new l.SdkAudioStreamIdInfoFrame; if (e.streams) { if (!Array.isArray(e.streams)) throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected"); t.streams = []; for (var i = 0; i < e.streams.length; ++i) { if ("object" != typeof e.streams[i]) throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected"); t.streams[i] = l.SdkAudioStreamIdInfo.fromObject(e.streams[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.streams = []), e.streams && e.streams.length) { i.streams = []; for (var r = 0; r < e.streams.length; ++r)i.streams[r] = l.SdkAudioStreamIdInfo.toObject(e.streams[r], t) } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkAudioStreamIdInfo = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.audioStreamId = 0, e.prototype.attendeeId = "", e.prototype.muted = !1, e.prototype.externalUserId = "", e.prototype.dropped = !1, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.audioStreamId && Object.hasOwnProperty.call(e, "audioStreamId") && t.uint32(8).uint32(e.audioStreamId), null != e.attendeeId && Object.hasOwnProperty.call(e, "attendeeId") && t.uint32(18).string(e.attendeeId), null != e.muted && Object.hasOwnProperty.call(e, "muted") && t.uint32(24).bool(e.muted), null != e.externalUserId && Object.hasOwnProperty.call(e, "externalUserId") && t.uint32(34).string(e.externalUserId), null != e.dropped && Object.hasOwnProperty.call(e, "dropped") && t.uint32(40).bool(e.dropped), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkAudioStreamIdInfo; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.audioStreamId = e.uint32(); break; case 2: r.attendeeId = e.string(); break; case 3: r.muted = e.bool(); break; case 4: r.externalUserId = e.string(); break; case 5: r.dropped = e.bool(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.audioStreamId && e.hasOwnProperty("audioStreamId") && !d.isInteger(e.audioStreamId) ? "audioStreamId: integer expected" : null != e.attendeeId && e.hasOwnProperty("attendeeId") && !d.isString(e.attendeeId) ? "attendeeId: string expected" : null != e.muted && e.hasOwnProperty("muted") && "boolean" != typeof e.muted ? "muted: boolean expected" : null != e.externalUserId && e.hasOwnProperty("externalUserId") && !d.isString(e.externalUserId) ? "externalUserId: string expected" : null != e.dropped && e.hasOwnProperty("dropped") && "boolean" != typeof e.dropped ? "dropped: boolean expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkAudioStreamIdInfo) return e; var t = new l.SdkAudioStreamIdInfo; return null != e.audioStreamId && (t.audioStreamId = e.audioStreamId >>> 0), null != e.attendeeId && (t.attendeeId = String(e.attendeeId)), null != e.muted && (t.muted = Boolean(e.muted)), null != e.externalUserId && (t.externalUserId = String(e.externalUserId)), null != e.dropped && (t.dropped = Boolean(e.dropped)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.audioStreamId = 0, i.attendeeId = "", i.muted = !1, i.externalUserId = "", i.dropped = !1), null != e.audioStreamId && e.hasOwnProperty("audioStreamId") && (i.audioStreamId = e.audioStreamId), null != e.attendeeId && e.hasOwnProperty("attendeeId") && (i.attendeeId = e.attendeeId), null != e.muted && e.hasOwnProperty("muted") && (i.muted = e.muted), null != e.externalUserId && e.hasOwnProperty("externalUserId") && (i.externalUserId = e.externalUserId), null != e.dropped && e.hasOwnProperty("dropped") && (i.dropped = e.dropped), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkPingPongType = function () { var e = {}, t = Object.create(e); return t[e[1] = "PING"] = 1, t[e[2] = "PONG"] = 2, t }(), l.SdkPingPongFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.type = 1, e.prototype.pingId = 0, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), t.uint32(8).int32(e.type), t.uint32(16).uint32(e.pingId), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkPingPongFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.type = e.int32(); break; case 2: r.pingId = e.uint32(); break; default: e.skipType(7 & o) } } if (!r.hasOwnProperty("type")) throw d.ProtocolError("missing required 'type'", { instance: r }); if (!r.hasOwnProperty("pingId")) throw d.ProtocolError("missing required 'pingId'", { instance: r }); return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; switch (e.type) { default: return "type: enum value expected"; case 1: case 2: }return d.isInteger(e.pingId) ? null : "pingId: integer expected" }, e.fromObject = function (e) { if (e instanceof l.SdkPingPongFrame) return e; var t = new l.SdkPingPongFrame; switch (e.type) { case "PING": case 1: t.type = 1; break; case "PONG": case 2: t.type = 2 }return null != e.pingId && (t.pingId = e.pingId >>> 0), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.type = t.enums === String ? "PING" : 1, i.pingId = 0), null != e.type && e.hasOwnProperty("type") && (i.type = t.enums === String ? l.SdkPingPongType[e.type] : e.type), null != e.pingId && e.hasOwnProperty("pingId") && (i.pingId = e.pingId), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkAudioStatusFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.audioStatus = 0, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.audioStatus && Object.hasOwnProperty.call(e, "audioStatus") && t.uint32(8).uint32(e.audioStatus), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkAudioStatusFrame; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? r.audioStatus = e.uint32() : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.audioStatus && e.hasOwnProperty("audioStatus") && !d.isInteger(e.audioStatus) ? "audioStatus: integer expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkAudioStatusFrame) return e; var t = new l.SdkAudioStatusFrame; return null != e.audioStatus && (t.audioStatus = e.audioStatus >>> 0), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.audioStatus = 0), null != e.audioStatus && e.hasOwnProperty("audioStatus") && (i.audioStatus = e.audioStatus), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkMetric = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.type = 1, e.prototype.value = 0, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.type && Object.hasOwnProperty.call(e, "type") && t.uint32(8).int32(e.type), null != e.value && Object.hasOwnProperty.call(e, "value") && t.uint32(17).double(e.value), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkMetric; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.type = e.int32(); break; case 2: r.value = e.double(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.type && e.hasOwnProperty("type")) switch (e.type) { default: return "type: enum value expected"; case 1: case 2: case 3: case 4: case 5: case 6: case 7: case 8: case 9: case 10: case 11: case 12: case 13: case 14: case 15: case 16: case 17: case 18: case 19: case 20: case 21: case 22: case 23: case 24: case 25: case 26: case 27: case 28: case 29: case 30: case 31: case 32: case 33: case 34: case 35: case 36: case 37: case 38: case 39: case 40: case 41: case 42: case 43: case 44: case 45: case 46: case 47: case 48: case 49: case 64: case 66: case 69: case 72: case 86: case 87: }return null != e.value && e.hasOwnProperty("value") && "number" != typeof e.value ? "value: number expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkMetric) return e; var t = new l.SdkMetric; switch (e.type) { case "VIDEO_ACTUAL_ENCODER_BITRATE": case 1: t.type = 1; break; case "VIDEO_AVAILABLE_SEND_BANDWIDTH": case 2: t.type = 2; break; case "VIDEO_RETRANSMIT_BITRATE": case 3: t.type = 3; break; case "VIDEO_AVAILABLE_RECEIVE_BANDWIDTH": case 4: t.type = 4; break; case "VIDEO_TARGET_ENCODER_BITRATE": case 5: t.type = 5; break; case "VIDEO_BUCKET_DELAY_MS": case 6: t.type = 6; break; case "STUN_RTT_MS": case 7: t.type = 7; break; case "SOCKET_DISCARDED_PPS": case 8: t.type = 8; break; case "RTC_MIC_JITTER_MS": case 9: t.type = 9; break; case "RTC_MIC_PPS": case 10: t.type = 10; break; case "RTC_MIC_FRACTION_PACKET_LOST_PERCENT": case 11: t.type = 11; break; case "RTC_MIC_BITRATE": case 12: t.type = 12; break; case "RTC_MIC_RTT_MS": case 13: t.type = 13; break; case "RTC_SPK_PPS": case 14: t.type = 14; break; case "RTC_SPK_FRACTION_PACKET_LOST_PERCENT": case 15: t.type = 15; break; case "RTC_SPK_JITTER_MS": case 16: t.type = 16; break; case "RTC_SPK_FRACTION_DECODER_LOSS_PERCENT": case 17: t.type = 17; break; case "RTC_SPK_BITRATE": case 18: t.type = 18; break; case "RTC_SPK_CURRENT_DELAY_MS": case 19: t.type = 19; break; case "RTC_SPK_JITTER_BUFFER_MS": case 20: t.type = 20; break; case "VIDEO_SENT_RTT_MS": case 21: t.type = 21; break; case "VIDEO_ENCODE_USAGE_PERCENT": case 22: t.type = 22; break; case "VIDEO_NACKS_RECEIVED": case 23: t.type = 23; break; case "VIDEO_PLIS_RECEIVED": case 24: t.type = 24; break; case "VIDEO_AVERAGE_ENCODE_MS": case 25: t.type = 25; break; case "VIDEO_INPUT_FPS": case 26: t.type = 26; break; case "VIDEO_ENCODE_FPS": case 27: t.type = 27; break; case "VIDEO_SENT_FPS": case 28: t.type = 28; break; case "VIDEO_FIRS_RECEIVED": case 29: t.type = 29; break; case "VIDEO_SENT_PPS": case 30: t.type = 30; break; case "VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT": case 31: t.type = 31; break; case "VIDEO_SENT_BITRATE": case 32: t.type = 32; break; case "VIDEO_DROPPED_FPS": case 33: t.type = 33; break; case "VIDEO_TARGET_DELAY_MS": case 34: t.type = 34; break; case "VIDEO_DECODE_MS": case 35: t.type = 35; break; case "VIDEO_OUTPUT_FPS": case 36: t.type = 36; break; case "VIDEO_RECEIVED_PPS": case 37: t.type = 37; break; case "VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT": case 38: t.type = 38; break; case "VIDEO_RENDER_DELAY_MS": case 39: t.type = 39; break; case "VIDEO_RECEIVED_FPS": case 40: t.type = 40; break; case "VIDEO_DECODE_FPS": case 41: t.type = 41; break; case "VIDEO_NACKS_SENT": case 42: t.type = 42; break; case "VIDEO_FIRS_SENT": case 43: t.type = 43; break; case "VIDEO_RECEIVED_BITRATE": case 44: t.type = 44; break; case "VIDEO_CURRENT_DELAY_MS": case 45: t.type = 45; break; case "VIDEO_JITTER_BUFFER_MS": case 46: t.type = 46; break; case "VIDEO_DISCARDED_PPS": case 47: t.type = 47; break; case "VIDEO_PLIS_SENT": case 48: t.type = 48; break; case "VIDEO_RECEIVED_JITTER_MS": case 49: t.type = 49; break; case "VIDEO_ENCODE_HEIGHT": case 64: t.type = 64; break; case "VIDEO_SENT_QP_SUM": case 66: t.type = 66; break; case "VIDEO_DECODE_HEIGHT": case 69: t.type = 69; break; case "VIDEO_RECEIVED_QP_SUM": case 72: t.type = 72; break; case "VIDEO_ENCODE_WIDTH": case 86: t.type = 86; break; case "VIDEO_DECODE_WIDTH": case 87: t.type = 87 }return null != e.value && (t.value = Number(e.value)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.type = t.enums === String ? "VIDEO_ACTUAL_ENCODER_BITRATE" : 1, i.value = 0), null != e.type && e.hasOwnProperty("type") && (i.type = t.enums === String ? l.SdkMetric.Type[e.type] : e.type), null != e.value && e.hasOwnProperty("value") && (i.value = t.json && !isFinite(e.value) ? String(e.value) : e.value), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e.Type = function () { var e = {}, t = Object.create(e); return t[e[1] = "VIDEO_ACTUAL_ENCODER_BITRATE"] = 1, t[e[2] = "VIDEO_AVAILABLE_SEND_BANDWIDTH"] = 2, t[e[3] = "VIDEO_RETRANSMIT_BITRATE"] = 3, t[e[4] = "VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"] = 4, t[e[5] = "VIDEO_TARGET_ENCODER_BITRATE"] = 5, t[e[6] = "VIDEO_BUCKET_DELAY_MS"] = 6, t[e[7] = "STUN_RTT_MS"] = 7, t[e[8] = "SOCKET_DISCARDED_PPS"] = 8, t[e[9] = "RTC_MIC_JITTER_MS"] = 9, t[e[10] = "RTC_MIC_PPS"] = 10, t[e[11] = "RTC_MIC_FRACTION_PACKET_LOST_PERCENT"] = 11, t[e[12] = "RTC_MIC_BITRATE"] = 12, t[e[13] = "RTC_MIC_RTT_MS"] = 13, t[e[14] = "RTC_SPK_PPS"] = 14, t[e[15] = "RTC_SPK_FRACTION_PACKET_LOST_PERCENT"] = 15, t[e[16] = "RTC_SPK_JITTER_MS"] = 16, t[e[17] = "RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"] = 17, t[e[18] = "RTC_SPK_BITRATE"] = 18, t[e[19] = "RTC_SPK_CURRENT_DELAY_MS"] = 19, t[e[20] = "RTC_SPK_JITTER_BUFFER_MS"] = 20, t[e[21] = "VIDEO_SENT_RTT_MS"] = 21, t[e[22] = "VIDEO_ENCODE_USAGE_PERCENT"] = 22, t[e[23] = "VIDEO_NACKS_RECEIVED"] = 23, t[e[24] = "VIDEO_PLIS_RECEIVED"] = 24, t[e[25] = "VIDEO_AVERAGE_ENCODE_MS"] = 25, t[e[26] = "VIDEO_INPUT_FPS"] = 26, t[e[27] = "VIDEO_ENCODE_FPS"] = 27, t[e[28] = "VIDEO_SENT_FPS"] = 28, t[e[29] = "VIDEO_FIRS_RECEIVED"] = 29, t[e[30] = "VIDEO_SENT_PPS"] = 30, t[e[31] = "VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"] = 31, t[e[32] = "VIDEO_SENT_BITRATE"] = 32, t[e[33] = "VIDEO_DROPPED_FPS"] = 33, t[e[34] = "VIDEO_TARGET_DELAY_MS"] = 34, t[e[35] = "VIDEO_DECODE_MS"] = 35, t[e[36] = "VIDEO_OUTPUT_FPS"] = 36, t[e[37] = "VIDEO_RECEIVED_PPS"] = 37, t[e[38] = "VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"] = 38, t[e[39] = "VIDEO_RENDER_DELAY_MS"] = 39, t[e[40] = "VIDEO_RECEIVED_FPS"] = 40, t[e[41] = "VIDEO_DECODE_FPS"] = 41, t[e[42] = "VIDEO_NACKS_SENT"] = 42, t[e[43] = "VIDEO_FIRS_SENT"] = 43, t[e[44] = "VIDEO_RECEIVED_BITRATE"] = 44, t[e[45] = "VIDEO_CURRENT_DELAY_MS"] = 45, t[e[46] = "VIDEO_JITTER_BUFFER_MS"] = 46, t[e[47] = "VIDEO_DISCARDED_PPS"] = 47, t[e[48] = "VIDEO_PLIS_SENT"] = 48, t[e[49] = "VIDEO_RECEIVED_JITTER_MS"] = 49, t[e[64] = "VIDEO_ENCODE_HEIGHT"] = 64, t[e[66] = "VIDEO_SENT_QP_SUM"] = 66, t[e[69] = "VIDEO_DECODE_HEIGHT"] = 69, t[e[72] = "VIDEO_RECEIVED_QP_SUM"] = 72, t[e[86] = "VIDEO_ENCODE_WIDTH"] = 86, t[e[87] = "VIDEO_DECODE_WIDTH"] = 87, t }(), e }(), l.SdkStreamMetricFrame = function () { function e(e) { if (this.metrics = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.streamId = 0, e.prototype.groupId = 0, e.prototype.metrics = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.streamId && Object.hasOwnProperty.call(e, "streamId") && t.uint32(24).uint32(e.streamId), null != e.groupId && Object.hasOwnProperty.call(e, "groupId") && t.uint32(32).uint32(e.groupId), null != e.metrics && e.metrics.length) for (var i = 0; i < e.metrics.length; ++i)l.SdkMetric.encode(e.metrics[i], t.uint32(42).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkStreamMetricFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 3: r.streamId = e.uint32(); break; case 4: r.groupId = e.uint32(); break; case 5: r.metrics && r.metrics.length || (r.metrics = []), r.metrics.push(l.SdkMetric.decode(e, e.uint32())); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.streamId && e.hasOwnProperty("streamId") && !d.isInteger(e.streamId)) return "streamId: integer expected"; if (null != e.groupId && e.hasOwnProperty("groupId") && !d.isInteger(e.groupId)) return "groupId: integer expected"; if (null != e.metrics && e.hasOwnProperty("metrics")) { if (!Array.isArray(e.metrics)) return "metrics: array expected"; for (var t = 0; t < e.metrics.length; ++t) { var i = l.SdkMetric.verify(e.metrics[t]); if (i) return "metrics." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkStreamMetricFrame) return e; var t = new l.SdkStreamMetricFrame; if (null != e.streamId && (t.streamId = e.streamId >>> 0), null != e.groupId && (t.groupId = e.groupId >>> 0), e.metrics) { if (!Array.isArray(e.metrics)) throw TypeError(".SdkStreamMetricFrame.metrics: array expected"); t.metrics = []; for (var i = 0; i < e.metrics.length; ++i) { if ("object" != typeof e.metrics[i]) throw TypeError(".SdkStreamMetricFrame.metrics: object expected"); t.metrics[i] = l.SdkMetric.fromObject(e.metrics[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.metrics = []), t.defaults && (i.streamId = 0, i.groupId = 0), null != e.streamId && e.hasOwnProperty("streamId") && (i.streamId = e.streamId), null != e.groupId && e.hasOwnProperty("groupId") && (i.groupId = e.groupId), e.metrics && e.metrics.length) { i.metrics = []; for (var r = 0; r < e.metrics.length; ++r)i.metrics[r] = l.SdkMetric.toObject(e.metrics[r], t) } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkClientMetricFrame = function () { function e(e) { if (this.globalMetrics = [], this.streamMetricFrames = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.globalMetrics = d.emptyArray, e.prototype.streamMetricFrames = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.globalMetrics && e.globalMetrics.length) for (var i = 0; i < e.globalMetrics.length; ++i)l.SdkMetric.encode(e.globalMetrics[i], t.uint32(10).fork()).ldelim(); if (null != e.streamMetricFrames && e.streamMetricFrames.length) for (i = 0; i < e.streamMetricFrames.length; ++i)l.SdkStreamMetricFrame.encode(e.streamMetricFrames[i], t.uint32(18).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkClientMetricFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.globalMetrics && r.globalMetrics.length || (r.globalMetrics = []), r.globalMetrics.push(l.SdkMetric.decode(e, e.uint32())); break; case 2: r.streamMetricFrames && r.streamMetricFrames.length || (r.streamMetricFrames = []), r.streamMetricFrames.push(l.SdkStreamMetricFrame.decode(e, e.uint32())); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.globalMetrics && e.hasOwnProperty("globalMetrics")) { if (!Array.isArray(e.globalMetrics)) return "globalMetrics: array expected"; for (var t = 0; t < e.globalMetrics.length; ++t)if (i = l.SdkMetric.verify(e.globalMetrics[t])) return "globalMetrics." + i } if (null != e.streamMetricFrames && e.hasOwnProperty("streamMetricFrames")) { if (!Array.isArray(e.streamMetricFrames)) return "streamMetricFrames: array expected"; for (t = 0; t < e.streamMetricFrames.length; ++t) { var i; if (i = l.SdkStreamMetricFrame.verify(e.streamMetricFrames[t])) return "streamMetricFrames." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkClientMetricFrame) return e; var t = new l.SdkClientMetricFrame; if (e.globalMetrics) { if (!Array.isArray(e.globalMetrics)) throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected"); t.globalMetrics = []; for (var i = 0; i < e.globalMetrics.length; ++i) { if ("object" != typeof e.globalMetrics[i]) throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected"); t.globalMetrics[i] = l.SdkMetric.fromObject(e.globalMetrics[i]) } } if (e.streamMetricFrames) { if (!Array.isArray(e.streamMetricFrames)) throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected"); for (t.streamMetricFrames = [], i = 0; i < e.streamMetricFrames.length; ++i) { if ("object" != typeof e.streamMetricFrames[i]) throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected"); t.streamMetricFrames[i] = l.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.globalMetrics = [], i.streamMetricFrames = []), e.globalMetrics && e.globalMetrics.length) { i.globalMetrics = []; for (var r = 0; r < e.globalMetrics.length; ++r)i.globalMetrics[r] = l.SdkMetric.toObject(e.globalMetrics[r], t) } if (e.streamMetricFrames && e.streamMetricFrames.length) for (i.streamMetricFrames = [], r = 0; r < e.streamMetricFrames.length; ++r)i.streamMetricFrames[r] = l.SdkStreamMetricFrame.toObject(e.streamMetricFrames[r], t); return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkDataMessageFrame = function () { function e(e) { if (this.messages = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.messages = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.messages && e.messages.length) for (var i = 0; i < e.messages.length; ++i)l.SdkDataMessagePayload.encode(e.messages[i], t.uint32(10).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkDataMessageFrame; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? (r.messages && r.messages.length || (r.messages = []), r.messages.push(l.SdkDataMessagePayload.decode(e, e.uint32()))) : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.messages && e.hasOwnProperty("messages")) { if (!Array.isArray(e.messages)) return "messages: array expected"; for (var t = 0; t < e.messages.length; ++t) { var i = l.SdkDataMessagePayload.verify(e.messages[t]); if (i) return "messages." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkDataMessageFrame) return e; var t = new l.SdkDataMessageFrame; if (e.messages) { if (!Array.isArray(e.messages)) throw TypeError(".SdkDataMessageFrame.messages: array expected"); t.messages = []; for (var i = 0; i < e.messages.length; ++i) { if ("object" != typeof e.messages[i]) throw TypeError(".SdkDataMessageFrame.messages: object expected"); t.messages[i] = l.SdkDataMessagePayload.fromObject(e.messages[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.messages = []), e.messages && e.messages.length) { i.messages = []; for (var r = 0; r < e.messages.length; ++r)i.messages[r] = l.SdkDataMessagePayload.toObject(e.messages[r], t) } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkDataMessagePayload = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.topic = "", e.prototype.data = d.newBuffer([]), e.prototype.lifetimeMs = 0, e.prototype.senderAttendeeId = "", e.prototype.ingestTimeNs = d.Long ? d.Long.fromBits(0, 0, !1) : 0, e.prototype.senderExternalUserId = "", e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.topic && Object.hasOwnProperty.call(e, "topic") && t.uint32(10).string(e.topic), null != e.data && Object.hasOwnProperty.call(e, "data") && t.uint32(18).bytes(e.data), null != e.lifetimeMs && Object.hasOwnProperty.call(e, "lifetimeMs") && t.uint32(24).uint32(e.lifetimeMs), null != e.senderAttendeeId && Object.hasOwnProperty.call(e, "senderAttendeeId") && t.uint32(34).string(e.senderAttendeeId), null != e.ingestTimeNs && Object.hasOwnProperty.call(e, "ingestTimeNs") && t.uint32(40).int64(e.ingestTimeNs), null != e.senderExternalUserId && Object.hasOwnProperty.call(e, "senderExternalUserId") && t.uint32(50).string(e.senderExternalUserId), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkDataMessagePayload; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.topic = e.string(); break; case 2: r.data = e.bytes(); break; case 3: r.lifetimeMs = e.uint32(); break; case 4: r.senderAttendeeId = e.string(); break; case 5: r.ingestTimeNs = e.int64(); break; case 6: r.senderExternalUserId = e.string(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.topic && e.hasOwnProperty("topic") && !d.isString(e.topic) ? "topic: string expected" : null != e.data && e.hasOwnProperty("data") && !(e.data && "number" == typeof e.data.length || d.isString(e.data)) ? "data: buffer expected" : null != e.lifetimeMs && e.hasOwnProperty("lifetimeMs") && !d.isInteger(e.lifetimeMs) ? "lifetimeMs: integer expected" : null != e.senderAttendeeId && e.hasOwnProperty("senderAttendeeId") && !d.isString(e.senderAttendeeId) ? "senderAttendeeId: string expected" : null != e.ingestTimeNs && e.hasOwnProperty("ingestTimeNs") && !(d.isInteger(e.ingestTimeNs) || e.ingestTimeNs && d.isInteger(e.ingestTimeNs.low) && d.isInteger(e.ingestTimeNs.high)) ? "ingestTimeNs: integer|Long expected" : null != e.senderExternalUserId && e.hasOwnProperty("senderExternalUserId") && !d.isString(e.senderExternalUserId) ? "senderExternalUserId: string expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkDataMessagePayload) return e; var t = new l.SdkDataMessagePayload; return null != e.topic && (t.topic = String(e.topic)), null != e.data && ("string" == typeof e.data ? d.base64.decode(e.data, t.data = d.newBuffer(d.base64.length(e.data)), 0) : e.data.length && (t.data = e.data)), null != e.lifetimeMs && (t.lifetimeMs = e.lifetimeMs >>> 0), null != e.senderAttendeeId && (t.senderAttendeeId = String(e.senderAttendeeId)), null != e.ingestTimeNs && (d.Long ? (t.ingestTimeNs = d.Long.fromValue(e.ingestTimeNs)).unsigned = !1 : "string" == typeof e.ingestTimeNs ? t.ingestTimeNs = parseInt(e.ingestTimeNs, 10) : "number" == typeof e.ingestTimeNs ? t.ingestTimeNs = e.ingestTimeNs : "object" == typeof e.ingestTimeNs && (t.ingestTimeNs = new d.LongBits(e.ingestTimeNs.low >>> 0, e.ingestTimeNs.high >>> 0).toNumber())), null != e.senderExternalUserId && (t.senderExternalUserId = String(e.senderExternalUserId)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if (t.defaults) { if (i.topic = "", t.bytes === String ? i.data = "" : (i.data = [], t.bytes !== Array && (i.data = d.newBuffer(i.data))), i.lifetimeMs = 0, i.senderAttendeeId = "", d.Long) { var r = new d.Long(0, 0, !1); i.ingestTimeNs = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r } else i.ingestTimeNs = t.longs === String ? "0" : 0; i.senderExternalUserId = "" } return null != e.topic && e.hasOwnProperty("topic") && (i.topic = e.topic), null != e.data && e.hasOwnProperty("data") && (i.data = t.bytes === String ? d.base64.encode(e.data, 0, e.data.length) : t.bytes === Array ? Array.prototype.slice.call(e.data) : e.data), null != e.lifetimeMs && e.hasOwnProperty("lifetimeMs") && (i.lifetimeMs = e.lifetimeMs), null != e.senderAttendeeId && e.hasOwnProperty("senderAttendeeId") && (i.senderAttendeeId = e.senderAttendeeId), null != e.ingestTimeNs && e.hasOwnProperty("ingestTimeNs") && ("number" == typeof e.ingestTimeNs ? i.ingestTimeNs = t.longs === String ? String(e.ingestTimeNs) : e.ingestTimeNs : i.ingestTimeNs = t.longs === String ? d.Long.prototype.toString.call(e.ingestTimeNs) : t.longs === Number ? new d.LongBits(e.ingestTimeNs.low >>> 0, e.ingestTimeNs.high >>> 0).toNumber() : e.ingestTimeNs), null != e.senderExternalUserId && e.hasOwnProperty("senderExternalUserId") && (i.senderExternalUserId = e.senderExternalUserId), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTurnCredentials = function () { function e(e) { if (this.uris = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.username = "", e.prototype.password = "", e.prototype.ttl = 0, e.prototype.uris = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.username && Object.hasOwnProperty.call(e, "username") && t.uint32(10).string(e.username), null != e.password && Object.hasOwnProperty.call(e, "password") && t.uint32(18).string(e.password), null != e.ttl && Object.hasOwnProperty.call(e, "ttl") && t.uint32(24).uint32(e.ttl), null != e.uris && e.uris.length) for (var i = 0; i < e.uris.length; ++i)t.uint32(34).string(e.uris[i]); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTurnCredentials; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.username = e.string(); break; case 2: r.password = e.string(); break; case 3: r.ttl = e.uint32(); break; case 4: r.uris && r.uris.length || (r.uris = []), r.uris.push(e.string()); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.username && e.hasOwnProperty("username") && !d.isString(e.username)) return "username: string expected"; if (null != e.password && e.hasOwnProperty("password") && !d.isString(e.password)) return "password: string expected"; if (null != e.ttl && e.hasOwnProperty("ttl") && !d.isInteger(e.ttl)) return "ttl: integer expected"; if (null != e.uris && e.hasOwnProperty("uris")) { if (!Array.isArray(e.uris)) return "uris: array expected"; for (var t = 0; t < e.uris.length; ++t)if (!d.isString(e.uris[t])) return "uris: string[] expected" } return null }, e.fromObject = function (e) { if (e instanceof l.SdkTurnCredentials) return e; var t = new l.SdkTurnCredentials; if (null != e.username && (t.username = String(e.username)), null != e.password && (t.password = String(e.password)), null != e.ttl && (t.ttl = e.ttl >>> 0), e.uris) { if (!Array.isArray(e.uris)) throw TypeError(".SdkTurnCredentials.uris: array expected"); t.uris = []; for (var i = 0; i < e.uris.length; ++i)t.uris[i] = String(e.uris[i]) } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.uris = []), t.defaults && (i.username = "", i.password = "", i.ttl = 0), null != e.username && e.hasOwnProperty("username") && (i.username = e.username), null != e.password && e.hasOwnProperty("password") && (i.password = e.password), null != e.ttl && e.hasOwnProperty("ttl") && (i.ttl = e.ttl), e.uris && e.uris.length) { i.uris = []; for (var r = 0; r < e.uris.length; ++r)i.uris[r] = e.uris[r] } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTranscriptItem = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.content = "", e.prototype.endTime = d.Long ? d.Long.fromBits(0, 0, !1) : 0, e.prototype.speakerAttendeeId = "", e.prototype.speakerExternalUserId = "", e.prototype.startTime = d.Long ? d.Long.fromBits(0, 0, !1) : 0, e.prototype.type = 1, e.prototype.vocabularyFilterMatch = !1, e.prototype.confidence = 0, e.prototype.stable = !1, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.content && Object.hasOwnProperty.call(e, "content") && t.uint32(10).string(e.content), null != e.endTime && Object.hasOwnProperty.call(e, "endTime") && t.uint32(16).int64(e.endTime), null != e.speakerAttendeeId && Object.hasOwnProperty.call(e, "speakerAttendeeId") && t.uint32(26).string(e.speakerAttendeeId), null != e.speakerExternalUserId && Object.hasOwnProperty.call(e, "speakerExternalUserId") && t.uint32(34).string(e.speakerExternalUserId), null != e.startTime && Object.hasOwnProperty.call(e, "startTime") && t.uint32(40).int64(e.startTime), null != e.type && Object.hasOwnProperty.call(e, "type") && t.uint32(48).int32(e.type), null != e.vocabularyFilterMatch && Object.hasOwnProperty.call(e, "vocabularyFilterMatch") && t.uint32(56).bool(e.vocabularyFilterMatch), null != e.confidence && Object.hasOwnProperty.call(e, "confidence") && t.uint32(65).double(e.confidence), null != e.stable && Object.hasOwnProperty.call(e, "stable") && t.uint32(72).bool(e.stable), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscriptItem; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.content = e.string(); break; case 2: r.endTime = e.int64(); break; case 3: r.speakerAttendeeId = e.string(); break; case 4: r.speakerExternalUserId = e.string(); break; case 5: r.startTime = e.int64(); break; case 6: r.type = e.int32(); break; case 7: r.vocabularyFilterMatch = e.bool(); break; case 8: r.confidence = e.double(); break; case 9: r.stable = e.bool(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.content && e.hasOwnProperty("content") && !d.isString(e.content)) return "content: string expected"; if (null != e.endTime && e.hasOwnProperty("endTime") && !(d.isInteger(e.endTime) || e.endTime && d.isInteger(e.endTime.low) && d.isInteger(e.endTime.high))) return "endTime: integer|Long expected"; if (null != e.speakerAttendeeId && e.hasOwnProperty("speakerAttendeeId") && !d.isString(e.speakerAttendeeId)) return "speakerAttendeeId: string expected"; if (null != e.speakerExternalUserId && e.hasOwnProperty("speakerExternalUserId") && !d.isString(e.speakerExternalUserId)) return "speakerExternalUserId: string expected"; if (null != e.startTime && e.hasOwnProperty("startTime") && !(d.isInteger(e.startTime) || e.startTime && d.isInteger(e.startTime.low) && d.isInteger(e.startTime.high))) return "startTime: integer|Long expected"; if (null != e.type && e.hasOwnProperty("type")) switch (e.type) { default: return "type: enum value expected"; case 1: case 2: }return null != e.vocabularyFilterMatch && e.hasOwnProperty("vocabularyFilterMatch") && "boolean" != typeof e.vocabularyFilterMatch ? "vocabularyFilterMatch: boolean expected" : null != e.confidence && e.hasOwnProperty("confidence") && "number" != typeof e.confidence ? "confidence: number expected" : null != e.stable && e.hasOwnProperty("stable") && "boolean" != typeof e.stable ? "stable: boolean expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscriptItem) return e; var t = new l.SdkTranscriptItem; switch (null != e.content && (t.content = String(e.content)), null != e.endTime && (d.Long ? (t.endTime = d.Long.fromValue(e.endTime)).unsigned = !1 : "string" == typeof e.endTime ? t.endTime = parseInt(e.endTime, 10) : "number" == typeof e.endTime ? t.endTime = e.endTime : "object" == typeof e.endTime && (t.endTime = new d.LongBits(e.endTime.low >>> 0, e.endTime.high >>> 0).toNumber())), null != e.speakerAttendeeId && (t.speakerAttendeeId = String(e.speakerAttendeeId)), null != e.speakerExternalUserId && (t.speakerExternalUserId = String(e.speakerExternalUserId)), null != e.startTime && (d.Long ? (t.startTime = d.Long.fromValue(e.startTime)).unsigned = !1 : "string" == typeof e.startTime ? t.startTime = parseInt(e.startTime, 10) : "number" == typeof e.startTime ? t.startTime = e.startTime : "object" == typeof e.startTime && (t.startTime = new d.LongBits(e.startTime.low >>> 0, e.startTime.high >>> 0).toNumber())), e.type) { case "PRONUNCIATION": case 1: t.type = 1; break; case "PUNCTUATION": case 2: t.type = 2 }return null != e.vocabularyFilterMatch && (t.vocabularyFilterMatch = Boolean(e.vocabularyFilterMatch)), null != e.confidence && (t.confidence = Number(e.confidence)), null != e.stable && (t.stable = Boolean(e.stable)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if (t.defaults) { if (i.content = "", d.Long) { var r = new d.Long(0, 0, !1); i.endTime = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r } else i.endTime = t.longs === String ? "0" : 0; i.speakerAttendeeId = "", i.speakerExternalUserId = "", d.Long ? (r = new d.Long(0, 0, !1), i.startTime = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r) : i.startTime = t.longs === String ? "0" : 0, i.type = t.enums === String ? "PRONUNCIATION" : 1, i.vocabularyFilterMatch = !1, i.confidence = 0, i.stable = !1 } return null != e.content && e.hasOwnProperty("content") && (i.content = e.content), null != e.endTime && e.hasOwnProperty("endTime") && ("number" == typeof e.endTime ? i.endTime = t.longs === String ? String(e.endTime) : e.endTime : i.endTime = t.longs === String ? d.Long.prototype.toString.call(e.endTime) : t.longs === Number ? new d.LongBits(e.endTime.low >>> 0, e.endTime.high >>> 0).toNumber() : e.endTime), null != e.speakerAttendeeId && e.hasOwnProperty("speakerAttendeeId") && (i.speakerAttendeeId = e.speakerAttendeeId), null != e.speakerExternalUserId && e.hasOwnProperty("speakerExternalUserId") && (i.speakerExternalUserId = e.speakerExternalUserId), null != e.startTime && e.hasOwnProperty("startTime") && ("number" == typeof e.startTime ? i.startTime = t.longs === String ? String(e.startTime) : e.startTime : i.startTime = t.longs === String ? d.Long.prototype.toString.call(e.startTime) : t.longs === Number ? new d.LongBits(e.startTime.low >>> 0, e.startTime.high >>> 0).toNumber() : e.startTime), null != e.type && e.hasOwnProperty("type") && (i.type = t.enums === String ? l.SdkTranscriptItem.Type[e.type] : e.type), null != e.vocabularyFilterMatch && e.hasOwnProperty("vocabularyFilterMatch") && (i.vocabularyFilterMatch = e.vocabularyFilterMatch), null != e.confidence && e.hasOwnProperty("confidence") && (i.confidence = t.json && !isFinite(e.confidence) ? String(e.confidence) : e.confidence), null != e.stable && e.hasOwnProperty("stable") && (i.stable = e.stable), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e.Type = function () { var e = {}, t = Object.create(e); return t[e[1] = "PRONUNCIATION"] = 1, t[e[2] = "PUNCTUATION"] = 2, t }(), e }(), l.SdkTranscriptEntity = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.category = "", e.prototype.confidence = 0, e.prototype.content = "", e.prototype.endTime = d.Long ? d.Long.fromBits(0, 0, !1) : 0, e.prototype.startTime = d.Long ? d.Long.fromBits(0, 0, !1) : 0, e.prototype.type = "", e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.category && Object.hasOwnProperty.call(e, "category") && t.uint32(10).string(e.category), null != e.confidence && Object.hasOwnProperty.call(e, "confidence") && t.uint32(17).double(e.confidence), null != e.content && Object.hasOwnProperty.call(e, "content") && t.uint32(26).string(e.content), null != e.endTime && Object.hasOwnProperty.call(e, "endTime") && t.uint32(32).int64(e.endTime), null != e.startTime && Object.hasOwnProperty.call(e, "startTime") && t.uint32(40).int64(e.startTime), null != e.type && Object.hasOwnProperty.call(e, "type") && t.uint32(50).string(e.type), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscriptEntity; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.category = e.string(); break; case 2: r.confidence = e.double(); break; case 3: r.content = e.string(); break; case 4: r.endTime = e.int64(); break; case 5: r.startTime = e.int64(); break; case 6: r.type = e.string(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.category && e.hasOwnProperty("category") && !d.isString(e.category) ? "category: string expected" : null != e.confidence && e.hasOwnProperty("confidence") && "number" != typeof e.confidence ? "confidence: number expected" : null != e.content && e.hasOwnProperty("content") && !d.isString(e.content) ? "content: string expected" : null != e.endTime && e.hasOwnProperty("endTime") && !(d.isInteger(e.endTime) || e.endTime && d.isInteger(e.endTime.low) && d.isInteger(e.endTime.high)) ? "endTime: integer|Long expected" : null != e.startTime && e.hasOwnProperty("startTime") && !(d.isInteger(e.startTime) || e.startTime && d.isInteger(e.startTime.low) && d.isInteger(e.startTime.high)) ? "startTime: integer|Long expected" : null != e.type && e.hasOwnProperty("type") && !d.isString(e.type) ? "type: string expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscriptEntity) return e; var t = new l.SdkTranscriptEntity; return null != e.category && (t.category = String(e.category)), null != e.confidence && (t.confidence = Number(e.confidence)), null != e.content && (t.content = String(e.content)), null != e.endTime && (d.Long ? (t.endTime = d.Long.fromValue(e.endTime)).unsigned = !1 : "string" == typeof e.endTime ? t.endTime = parseInt(e.endTime, 10) : "number" == typeof e.endTime ? t.endTime = e.endTime : "object" == typeof e.endTime && (t.endTime = new d.LongBits(e.endTime.low >>> 0, e.endTime.high >>> 0).toNumber())), null != e.startTime && (d.Long ? (t.startTime = d.Long.fromValue(e.startTime)).unsigned = !1 : "string" == typeof e.startTime ? t.startTime = parseInt(e.startTime, 10) : "number" == typeof e.startTime ? t.startTime = e.startTime : "object" == typeof e.startTime && (t.startTime = new d.LongBits(e.startTime.low >>> 0, e.startTime.high >>> 0).toNumber())), null != e.type && (t.type = String(e.type)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if (t.defaults) { if (i.category = "", i.confidence = 0, i.content = "", d.Long) { var r = new d.Long(0, 0, !1); i.endTime = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r } else i.endTime = t.longs === String ? "0" : 0; d.Long ? (r = new d.Long(0, 0, !1), i.startTime = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r) : i.startTime = t.longs === String ? "0" : 0, i.type = "" } return null != e.category && e.hasOwnProperty("category") && (i.category = e.category), null != e.confidence && e.hasOwnProperty("confidence") && (i.confidence = t.json && !isFinite(e.confidence) ? String(e.confidence) : e.confidence), null != e.content && e.hasOwnProperty("content") && (i.content = e.content), null != e.endTime && e.hasOwnProperty("endTime") && ("number" == typeof e.endTime ? i.endTime = t.longs === String ? String(e.endTime) : e.endTime : i.endTime = t.longs === String ? d.Long.prototype.toString.call(e.endTime) : t.longs === Number ? new d.LongBits(e.endTime.low >>> 0, e.endTime.high >>> 0).toNumber() : e.endTime), null != e.startTime && e.hasOwnProperty("startTime") && ("number" == typeof e.startTime ? i.startTime = t.longs === String ? String(e.startTime) : e.startTime : i.startTime = t.longs === String ? d.Long.prototype.toString.call(e.startTime) : t.longs === Number ? new d.LongBits(e.startTime.low >>> 0, e.startTime.high >>> 0).toNumber() : e.startTime), null != e.type && e.hasOwnProperty("type") && (i.type = e.type), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTranscriptAlternative = function () { function e(e) { if (this.items = [], this.entities = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.items = d.emptyArray, e.prototype.transcript = "", e.prototype.entities = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.items && e.items.length) for (var i = 0; i < e.items.length; ++i)l.SdkTranscriptItem.encode(e.items[i], t.uint32(10).fork()).ldelim(); if (null != e.transcript && Object.hasOwnProperty.call(e, "transcript") && t.uint32(18).string(e.transcript), null != e.entities && e.entities.length) for (i = 0; i < e.entities.length; ++i)l.SdkTranscriptEntity.encode(e.entities[i], t.uint32(26).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscriptAlternative; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.items && r.items.length || (r.items = []), r.items.push(l.SdkTranscriptItem.decode(e, e.uint32())); break; case 2: r.transcript = e.string(); break; case 3: r.entities && r.entities.length || (r.entities = []), r.entities.push(l.SdkTranscriptEntity.decode(e, e.uint32())); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.items && e.hasOwnProperty("items")) { if (!Array.isArray(e.items)) return "items: array expected"; for (var t = 0; t < e.items.length; ++t)if (i = l.SdkTranscriptItem.verify(e.items[t])) return "items." + i } if (null != e.transcript && e.hasOwnProperty("transcript") && !d.isString(e.transcript)) return "transcript: string expected"; if (null != e.entities && e.hasOwnProperty("entities")) { if (!Array.isArray(e.entities)) return "entities: array expected"; for (t = 0; t < e.entities.length; ++t) { var i; if (i = l.SdkTranscriptEntity.verify(e.entities[t])) return "entities." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscriptAlternative) return e; var t = new l.SdkTranscriptAlternative; if (e.items) { if (!Array.isArray(e.items)) throw TypeError(".SdkTranscriptAlternative.items: array expected"); t.items = []; for (var i = 0; i < e.items.length; ++i) { if ("object" != typeof e.items[i]) throw TypeError(".SdkTranscriptAlternative.items: object expected"); t.items[i] = l.SdkTranscriptItem.fromObject(e.items[i]) } } if (null != e.transcript && (t.transcript = String(e.transcript)), e.entities) { if (!Array.isArray(e.entities)) throw TypeError(".SdkTranscriptAlternative.entities: array expected"); for (t.entities = [], i = 0; i < e.entities.length; ++i) { if ("object" != typeof e.entities[i]) throw TypeError(".SdkTranscriptAlternative.entities: object expected"); t.entities[i] = l.SdkTranscriptEntity.fromObject(e.entities[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.items = [], i.entities = []), t.defaults && (i.transcript = ""), e.items && e.items.length) { i.items = []; for (var r = 0; r < e.items.length; ++r)i.items[r] = l.SdkTranscriptItem.toObject(e.items[r], t) } if (null != e.transcript && e.hasOwnProperty("transcript") && (i.transcript = e.transcript), e.entities && e.entities.length) for (i.entities = [], r = 0; r < e.entities.length; ++r)i.entities[r] = l.SdkTranscriptEntity.toObject(e.entities[r], t); return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTranscriptLanguageWithScore = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.languageCode = "", e.prototype.score = 0, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.languageCode && Object.hasOwnProperty.call(e, "languageCode") && t.uint32(10).string(e.languageCode), null != e.score && Object.hasOwnProperty.call(e, "score") && t.uint32(17).double(e.score), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscriptLanguageWithScore; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.languageCode = e.string(); break; case 2: r.score = e.double(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.languageCode && e.hasOwnProperty("languageCode") && !d.isString(e.languageCode) ? "languageCode: string expected" : null != e.score && e.hasOwnProperty("score") && "number" != typeof e.score ? "score: number expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscriptLanguageWithScore) return e; var t = new l.SdkTranscriptLanguageWithScore; return null != e.languageCode && (t.languageCode = String(e.languageCode)), null != e.score && (t.score = Number(e.score)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.languageCode = "", i.score = 0), null != e.languageCode && e.hasOwnProperty("languageCode") && (i.languageCode = e.languageCode), null != e.score && e.hasOwnProperty("score") && (i.score = t.json && !isFinite(e.score) ? String(e.score) : e.score), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTranscriptResult = function () { function e(e) { if (this.alternatives = [], this.languageIdentification = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.alternatives = d.emptyArray, e.prototype.channelId = "", e.prototype.endTime = d.Long ? d.Long.fromBits(0, 0, !1) : 0, e.prototype.isPartial = !1, e.prototype.resultId = "", e.prototype.startTime = d.Long ? d.Long.fromBits(0, 0, !1) : 0, e.prototype.languageCode = "", e.prototype.languageIdentification = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.alternatives && e.alternatives.length) for (var i = 0; i < e.alternatives.length; ++i)l.SdkTranscriptAlternative.encode(e.alternatives[i], t.uint32(10).fork()).ldelim(); if (null != e.channelId && Object.hasOwnProperty.call(e, "channelId") && t.uint32(18).string(e.channelId), null != e.endTime && Object.hasOwnProperty.call(e, "endTime") && t.uint32(24).int64(e.endTime), null != e.isPartial && Object.hasOwnProperty.call(e, "isPartial") && t.uint32(32).bool(e.isPartial), null != e.resultId && Object.hasOwnProperty.call(e, "resultId") && t.uint32(42).string(e.resultId), null != e.startTime && Object.hasOwnProperty.call(e, "startTime") && t.uint32(48).int64(e.startTime), null != e.languageCode && Object.hasOwnProperty.call(e, "languageCode") && t.uint32(58).string(e.languageCode), null != e.languageIdentification && e.languageIdentification.length) for (i = 0; i < e.languageIdentification.length; ++i)l.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[i], t.uint32(66).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscriptResult; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.alternatives && r.alternatives.length || (r.alternatives = []), r.alternatives.push(l.SdkTranscriptAlternative.decode(e, e.uint32())); break; case 2: r.channelId = e.string(); break; case 3: r.endTime = e.int64(); break; case 4: r.isPartial = e.bool(); break; case 5: r.resultId = e.string(); break; case 6: r.startTime = e.int64(); break; case 7: r.languageCode = e.string(); break; case 8: r.languageIdentification && r.languageIdentification.length || (r.languageIdentification = []), r.languageIdentification.push(l.SdkTranscriptLanguageWithScore.decode(e, e.uint32())); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.alternatives && e.hasOwnProperty("alternatives")) { if (!Array.isArray(e.alternatives)) return "alternatives: array expected"; for (var t = 0; t < e.alternatives.length; ++t)if (i = l.SdkTranscriptAlternative.verify(e.alternatives[t])) return "alternatives." + i } if (null != e.channelId && e.hasOwnProperty("channelId") && !d.isString(e.channelId)) return "channelId: string expected"; if (null != e.endTime && e.hasOwnProperty("endTime") && !(d.isInteger(e.endTime) || e.endTime && d.isInteger(e.endTime.low) && d.isInteger(e.endTime.high))) return "endTime: integer|Long expected"; if (null != e.isPartial && e.hasOwnProperty("isPartial") && "boolean" != typeof e.isPartial) return "isPartial: boolean expected"; if (null != e.resultId && e.hasOwnProperty("resultId") && !d.isString(e.resultId)) return "resultId: string expected"; if (null != e.startTime && e.hasOwnProperty("startTime") && !(d.isInteger(e.startTime) || e.startTime && d.isInteger(e.startTime.low) && d.isInteger(e.startTime.high))) return "startTime: integer|Long expected"; if (null != e.languageCode && e.hasOwnProperty("languageCode") && !d.isString(e.languageCode)) return "languageCode: string expected"; if (null != e.languageIdentification && e.hasOwnProperty("languageIdentification")) { if (!Array.isArray(e.languageIdentification)) return "languageIdentification: array expected"; for (t = 0; t < e.languageIdentification.length; ++t) { var i; if (i = l.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t])) return "languageIdentification." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscriptResult) return e; var t = new l.SdkTranscriptResult; if (e.alternatives) { if (!Array.isArray(e.alternatives)) throw TypeError(".SdkTranscriptResult.alternatives: array expected"); t.alternatives = []; for (var i = 0; i < e.alternatives.length; ++i) { if ("object" != typeof e.alternatives[i]) throw TypeError(".SdkTranscriptResult.alternatives: object expected"); t.alternatives[i] = l.SdkTranscriptAlternative.fromObject(e.alternatives[i]) } } if (null != e.channelId && (t.channelId = String(e.channelId)), null != e.endTime && (d.Long ? (t.endTime = d.Long.fromValue(e.endTime)).unsigned = !1 : "string" == typeof e.endTime ? t.endTime = parseInt(e.endTime, 10) : "number" == typeof e.endTime ? t.endTime = e.endTime : "object" == typeof e.endTime && (t.endTime = new d.LongBits(e.endTime.low >>> 0, e.endTime.high >>> 0).toNumber())), null != e.isPartial && (t.isPartial = Boolean(e.isPartial)), null != e.resultId && (t.resultId = String(e.resultId)), null != e.startTime && (d.Long ? (t.startTime = d.Long.fromValue(e.startTime)).unsigned = !1 : "string" == typeof e.startTime ? t.startTime = parseInt(e.startTime, 10) : "number" == typeof e.startTime ? t.startTime = e.startTime : "object" == typeof e.startTime && (t.startTime = new d.LongBits(e.startTime.low >>> 0, e.startTime.high >>> 0).toNumber())), null != e.languageCode && (t.languageCode = String(e.languageCode)), e.languageIdentification) { if (!Array.isArray(e.languageIdentification)) throw TypeError(".SdkTranscriptResult.languageIdentification: array expected"); for (t.languageIdentification = [], i = 0; i < e.languageIdentification.length; ++i) { if ("object" != typeof e.languageIdentification[i]) throw TypeError(".SdkTranscriptResult.languageIdentification: object expected"); t.languageIdentification[i] = l.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.alternatives = [], i.languageIdentification = []), t.defaults) { if (i.channelId = "", d.Long) { var r = new d.Long(0, 0, !1); i.endTime = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r } else i.endTime = t.longs === String ? "0" : 0; i.isPartial = !1, i.resultId = "", d.Long ? (r = new d.Long(0, 0, !1), i.startTime = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r) : i.startTime = t.longs === String ? "0" : 0, i.languageCode = "" } if (e.alternatives && e.alternatives.length) { i.alternatives = []; for (var o = 0; o < e.alternatives.length; ++o)i.alternatives[o] = l.SdkTranscriptAlternative.toObject(e.alternatives[o], t) } if (null != e.channelId && e.hasOwnProperty("channelId") && (i.channelId = e.channelId), null != e.endTime && e.hasOwnProperty("endTime") && ("number" == typeof e.endTime ? i.endTime = t.longs === String ? String(e.endTime) : e.endTime : i.endTime = t.longs === String ? d.Long.prototype.toString.call(e.endTime) : t.longs === Number ? new d.LongBits(e.endTime.low >>> 0, e.endTime.high >>> 0).toNumber() : e.endTime), null != e.isPartial && e.hasOwnProperty("isPartial") && (i.isPartial = e.isPartial), null != e.resultId && e.hasOwnProperty("resultId") && (i.resultId = e.resultId), null != e.startTime && e.hasOwnProperty("startTime") && ("number" == typeof e.startTime ? i.startTime = t.longs === String ? String(e.startTime) : e.startTime : i.startTime = t.longs === String ? d.Long.prototype.toString.call(e.startTime) : t.longs === Number ? new d.LongBits(e.startTime.low >>> 0, e.startTime.high >>> 0).toNumber() : e.startTime), null != e.languageCode && e.hasOwnProperty("languageCode") && (i.languageCode = e.languageCode), e.languageIdentification && e.languageIdentification.length) for (i.languageIdentification = [], o = 0; o < e.languageIdentification.length; ++o)i.languageIdentification[o] = l.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[o], t); return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTranscript = function () { function e(e) { if (this.results = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.results = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.results && e.results.length) for (var i = 0; i < e.results.length; ++i)l.SdkTranscriptResult.encode(e.results[i], t.uint32(10).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscript; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? (r.results && r.results.length || (r.results = []), r.results.push(l.SdkTranscriptResult.decode(e, e.uint32()))) : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.results && e.hasOwnProperty("results")) { if (!Array.isArray(e.results)) return "results: array expected"; for (var t = 0; t < e.results.length; ++t) { var i = l.SdkTranscriptResult.verify(e.results[t]); if (i) return "results." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscript) return e; var t = new l.SdkTranscript; if (e.results) { if (!Array.isArray(e.results)) throw TypeError(".SdkTranscript.results: array expected"); t.results = []; for (var i = 0; i < e.results.length; ++i) { if ("object" != typeof e.results[i]) throw TypeError(".SdkTranscript.results: object expected"); t.results[i] = l.SdkTranscriptResult.fromObject(e.results[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.results = []), e.results && e.results.length) { i.results = []; for (var r = 0; r < e.results.length; ++r)i.results[r] = l.SdkTranscriptResult.toObject(e.results[r], t) } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTranscriptionStatus = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.type = 1, e.prototype.eventTime = d.Long ? d.Long.fromBits(0, 0, !1) : 0, e.prototype.transcriptionRegion = "", e.prototype.transcriptionConfiguration = "", e.prototype.message = "", e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.type && Object.hasOwnProperty.call(e, "type") && t.uint32(8).int32(e.type), null != e.eventTime && Object.hasOwnProperty.call(e, "eventTime") && t.uint32(16).int64(e.eventTime), null != e.transcriptionRegion && Object.hasOwnProperty.call(e, "transcriptionRegion") && t.uint32(26).string(e.transcriptionRegion), null != e.transcriptionConfiguration && Object.hasOwnProperty.call(e, "transcriptionConfiguration") && t.uint32(34).string(e.transcriptionConfiguration), null != e.message && Object.hasOwnProperty.call(e, "message") && t.uint32(42).string(e.message), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscriptionStatus; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.type = e.int32(); break; case 2: r.eventTime = e.int64(); break; case 3: r.transcriptionRegion = e.string(); break; case 4: r.transcriptionConfiguration = e.string(); break; case 5: r.message = e.string(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.type && e.hasOwnProperty("type")) switch (e.type) { default: return "type: enum value expected"; case 1: case 2: case 3: case 4: case 5: }return null != e.eventTime && e.hasOwnProperty("eventTime") && !(d.isInteger(e.eventTime) || e.eventTime && d.isInteger(e.eventTime.low) && d.isInteger(e.eventTime.high)) ? "eventTime: integer|Long expected" : null != e.transcriptionRegion && e.hasOwnProperty("transcriptionRegion") && !d.isString(e.transcriptionRegion) ? "transcriptionRegion: string expected" : null != e.transcriptionConfiguration && e.hasOwnProperty("transcriptionConfiguration") && !d.isString(e.transcriptionConfiguration) ? "transcriptionConfiguration: string expected" : null != e.message && e.hasOwnProperty("message") && !d.isString(e.message) ? "message: string expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscriptionStatus) return e; var t = new l.SdkTranscriptionStatus; switch (e.type) { case "STARTED": case 1: t.type = 1; break; case "INTERRUPTED": case 2: t.type = 2; break; case "RESUMED": case 3: t.type = 3; break; case "STOPPED": case 4: t.type = 4; break; case "FAILED": case 5: t.type = 5 }return null != e.eventTime && (d.Long ? (t.eventTime = d.Long.fromValue(e.eventTime)).unsigned = !1 : "string" == typeof e.eventTime ? t.eventTime = parseInt(e.eventTime, 10) : "number" == typeof e.eventTime ? t.eventTime = e.eventTime : "object" == typeof e.eventTime && (t.eventTime = new d.LongBits(e.eventTime.low >>> 0, e.eventTime.high >>> 0).toNumber())), null != e.transcriptionRegion && (t.transcriptionRegion = String(e.transcriptionRegion)), null != e.transcriptionConfiguration && (t.transcriptionConfiguration = String(e.transcriptionConfiguration)), null != e.message && (t.message = String(e.message)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if (t.defaults) { if (i.type = t.enums === String ? "STARTED" : 1, d.Long) { var r = new d.Long(0, 0, !1); i.eventTime = t.longs === String ? r.toString() : t.longs === Number ? r.toNumber() : r } else i.eventTime = t.longs === String ? "0" : 0; i.transcriptionRegion = "", i.transcriptionConfiguration = "", i.message = "" } return null != e.type && e.hasOwnProperty("type") && (i.type = t.enums === String ? l.SdkTranscriptionStatus.Type[e.type] : e.type), null != e.eventTime && e.hasOwnProperty("eventTime") && ("number" == typeof e.eventTime ? i.eventTime = t.longs === String ? String(e.eventTime) : e.eventTime : i.eventTime = t.longs === String ? d.Long.prototype.toString.call(e.eventTime) : t.longs === Number ? new d.LongBits(e.eventTime.low >>> 0, e.eventTime.high >>> 0).toNumber() : e.eventTime), null != e.transcriptionRegion && e.hasOwnProperty("transcriptionRegion") && (i.transcriptionRegion = e.transcriptionRegion), null != e.transcriptionConfiguration && e.hasOwnProperty("transcriptionConfiguration") && (i.transcriptionConfiguration = e.transcriptionConfiguration), null != e.message && e.hasOwnProperty("message") && (i.message = e.message), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e.Type = function () { var e = {}, t = Object.create(e); return t[e[1] = "STARTED"] = 1, t[e[2] = "INTERRUPTED"] = 2, t[e[3] = "RESUMED"] = 3, t[e[4] = "STOPPED"] = 4, t[e[5] = "FAILED"] = 5, t }(), e }(), l.SdkTranscriptEvent = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } var t; return e.prototype.status = null, e.prototype.transcript = null, Object.defineProperty(e.prototype, "Event", { get: d.oneOfGetter(t = ["status", "transcript"]), set: d.oneOfSetter(t) }), e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.status && Object.hasOwnProperty.call(e, "status") && l.SdkTranscriptionStatus.encode(e.status, t.uint32(10).fork()).ldelim(), null != e.transcript && Object.hasOwnProperty.call(e, "transcript") && l.SdkTranscript.encode(e.transcript, t.uint32(18).fork()).ldelim(), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscriptEvent; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.status = l.SdkTranscriptionStatus.decode(e, e.uint32()); break; case 2: r.transcript = l.SdkTranscript.decode(e, e.uint32()); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; var t = {}; if (null != e.status && e.hasOwnProperty("status") && (t.Event = 1, i = l.SdkTranscriptionStatus.verify(e.status))) return "status." + i; if (null != e.transcript && e.hasOwnProperty("transcript")) { if (1 === t.Event) return "Event: multiple values"; var i; if (t.Event = 1, i = l.SdkTranscript.verify(e.transcript)) return "transcript." + i } return null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscriptEvent) return e; var t = new l.SdkTranscriptEvent; if (null != e.status) { if ("object" != typeof e.status) throw TypeError(".SdkTranscriptEvent.status: object expected"); t.status = l.SdkTranscriptionStatus.fromObject(e.status) } if (null != e.transcript) { if ("object" != typeof e.transcript) throw TypeError(".SdkTranscriptEvent.transcript: object expected"); t.transcript = l.SdkTranscript.fromObject(e.transcript) } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return null != e.status && e.hasOwnProperty("status") && (i.status = l.SdkTranscriptionStatus.toObject(e.status, t), t.oneofs && (i.Event = "status")), null != e.transcript && e.hasOwnProperty("transcript") && (i.transcript = l.SdkTranscript.toObject(e.transcript, t), t.oneofs && (i.Event = "transcript")), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkTranscriptFrame = function () { function e(e) { if (this.events = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.events = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.events && e.events.length) for (var i = 0; i < e.events.length; ++i)l.SdkTranscriptEvent.encode(e.events[i], t.uint32(10).fork()).ldelim(); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkTranscriptFrame; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? (r.events && r.events.length || (r.events = []), r.events.push(l.SdkTranscriptEvent.decode(e, e.uint32()))) : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.events && e.hasOwnProperty("events")) { if (!Array.isArray(e.events)) return "events: array expected"; for (var t = 0; t < e.events.length; ++t) { var i = l.SdkTranscriptEvent.verify(e.events[t]); if (i) return "events." + i } } return null }, e.fromObject = function (e) { if (e instanceof l.SdkTranscriptFrame) return e; var t = new l.SdkTranscriptFrame; if (e.events) { if (!Array.isArray(e.events)) throw TypeError(".SdkTranscriptFrame.events: array expected"); t.events = []; for (var i = 0; i < e.events.length; ++i) { if ("object" != typeof e.events[i]) throw TypeError(".SdkTranscriptFrame.events: object expected"); t.events[i] = l.SdkTranscriptEvent.fromObject(e.events[i]) } } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.events = []), e.events && e.events.length) { i.events = []; for (var r = 0; r < e.events.length; ++r)i.events[r] = l.SdkTranscriptEvent.toObject(e.events[r], t) } return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkRemoteVideoUpdateFrame = function () { function e(e) { if (this.addedOrUpdatedVideoSubscriptions = [], this.removedVideoSubscriptionMids = [], e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.addedOrUpdatedVideoSubscriptions = d.emptyArray, e.prototype.removedVideoSubscriptionMids = d.emptyArray, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { if (t || (t = a.create()), null != e.addedOrUpdatedVideoSubscriptions && e.addedOrUpdatedVideoSubscriptions.length) for (var i = 0; i < e.addedOrUpdatedVideoSubscriptions.length; ++i)l.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[i], t.uint32(10).fork()).ldelim(); if (null != e.removedVideoSubscriptionMids && e.removedVideoSubscriptionMids.length) for (i = 0; i < e.removedVideoSubscriptionMids.length; ++i)t.uint32(18).string(e.removedVideoSubscriptionMids[i]); return t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkRemoteVideoUpdateFrame; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.addedOrUpdatedVideoSubscriptions && r.addedOrUpdatedVideoSubscriptions.length || (r.addedOrUpdatedVideoSubscriptions = []), r.addedOrUpdatedVideoSubscriptions.push(l.SdkVideoSubscriptionConfiguration.decode(e, e.uint32())); break; case 2: r.removedVideoSubscriptionMids && r.removedVideoSubscriptionMids.length || (r.removedVideoSubscriptionMids = []), r.removedVideoSubscriptionMids.push(e.string()); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.addedOrUpdatedVideoSubscriptions && e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")) { if (!Array.isArray(e.addedOrUpdatedVideoSubscriptions)) return "addedOrUpdatedVideoSubscriptions: array expected"; for (var t = 0; t < e.addedOrUpdatedVideoSubscriptions.length; ++t) { var i = l.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]); if (i) return "addedOrUpdatedVideoSubscriptions." + i } } if (null != e.removedVideoSubscriptionMids && e.hasOwnProperty("removedVideoSubscriptionMids")) { if (!Array.isArray(e.removedVideoSubscriptionMids)) return "removedVideoSubscriptionMids: array expected"; for (t = 0; t < e.removedVideoSubscriptionMids.length; ++t)if (!d.isString(e.removedVideoSubscriptionMids[t])) return "removedVideoSubscriptionMids: string[] expected" } return null }, e.fromObject = function (e) { if (e instanceof l.SdkRemoteVideoUpdateFrame) return e; var t = new l.SdkRemoteVideoUpdateFrame; if (e.addedOrUpdatedVideoSubscriptions) { if (!Array.isArray(e.addedOrUpdatedVideoSubscriptions)) throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected"); t.addedOrUpdatedVideoSubscriptions = []; for (var i = 0; i < e.addedOrUpdatedVideoSubscriptions.length; ++i) { if ("object" != typeof e.addedOrUpdatedVideoSubscriptions[i]) throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected"); t.addedOrUpdatedVideoSubscriptions[i] = l.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[i]) } } if (e.removedVideoSubscriptionMids) { if (!Array.isArray(e.removedVideoSubscriptionMids)) throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected"); for (t.removedVideoSubscriptionMids = [], i = 0; i < e.removedVideoSubscriptionMids.length; ++i)t.removedVideoSubscriptionMids[i] = String(e.removedVideoSubscriptionMids[i]) } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; if ((t.arrays || t.defaults) && (i.addedOrUpdatedVideoSubscriptions = [], i.removedVideoSubscriptionMids = []), e.addedOrUpdatedVideoSubscriptions && e.addedOrUpdatedVideoSubscriptions.length) { i.addedOrUpdatedVideoSubscriptions = []; for (var r = 0; r < e.addedOrUpdatedVideoSubscriptions.length; ++r)i.addedOrUpdatedVideoSubscriptions[r] = l.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[r], t) } if (e.removedVideoSubscriptionMids && e.removedVideoSubscriptionMids.length) for (i.removedVideoSubscriptionMids = [], r = 0; r < e.removedVideoSubscriptionMids.length; ++r)i.removedVideoSubscriptionMids[r] = e.removedVideoSubscriptionMids[r]; return i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkVideoSubscriptionConfiguration = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.mid = "", e.prototype.attendeeId = "", e.prototype.streamId = 0, e.prototype.priority = 0, e.prototype.targetBitrateKbps = 0, e.prototype.groupId = 0, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), t.uint32(10).string(e.mid), null != e.attendeeId && Object.hasOwnProperty.call(e, "attendeeId") && t.uint32(18).string(e.attendeeId), null != e.streamId && Object.hasOwnProperty.call(e, "streamId") && t.uint32(24).uint32(e.streamId), null != e.priority && Object.hasOwnProperty.call(e, "priority") && t.uint32(32).uint32(e.priority), null != e.targetBitrateKbps && Object.hasOwnProperty.call(e, "targetBitrateKbps") && t.uint32(40).uint32(e.targetBitrateKbps), null != e.groupId && Object.hasOwnProperty.call(e, "groupId") && t.uint32(48).uint32(e.groupId), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkVideoSubscriptionConfiguration; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.mid = e.string(); break; case 2: r.attendeeId = e.string(); break; case 3: r.streamId = e.uint32(); break; case 4: r.priority = e.uint32(); break; case 5: r.targetBitrateKbps = e.uint32(); break; case 6: r.groupId = e.uint32(); break; default: e.skipType(7 & o) } } if (!r.hasOwnProperty("mid")) throw d.ProtocolError("missing required 'mid'", { instance: r }); return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : d.isString(e.mid) ? null != e.attendeeId && e.hasOwnProperty("attendeeId") && !d.isString(e.attendeeId) ? "attendeeId: string expected" : null != e.streamId && e.hasOwnProperty("streamId") && !d.isInteger(e.streamId) ? "streamId: integer expected" : null != e.priority && e.hasOwnProperty("priority") && !d.isInteger(e.priority) ? "priority: integer expected" : null != e.targetBitrateKbps && e.hasOwnProperty("targetBitrateKbps") && !d.isInteger(e.targetBitrateKbps) ? "targetBitrateKbps: integer expected" : null != e.groupId && e.hasOwnProperty("groupId") && !d.isInteger(e.groupId) ? "groupId: integer expected" : null : "mid: string expected" }, e.fromObject = function (e) { if (e instanceof l.SdkVideoSubscriptionConfiguration) return e; var t = new l.SdkVideoSubscriptionConfiguration; return null != e.mid && (t.mid = String(e.mid)), null != e.attendeeId && (t.attendeeId = String(e.attendeeId)), null != e.streamId && (t.streamId = e.streamId >>> 0), null != e.priority && (t.priority = e.priority >>> 0), null != e.targetBitrateKbps && (t.targetBitrateKbps = e.targetBitrateKbps >>> 0), null != e.groupId && (t.groupId = e.groupId >>> 0), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.mid = "", i.attendeeId = "", i.streamId = 0, i.priority = 0, i.targetBitrateKbps = 0, i.groupId = 0), null != e.mid && e.hasOwnProperty("mid") && (i.mid = e.mid), null != e.attendeeId && e.hasOwnProperty("attendeeId") && (i.attendeeId = e.attendeeId), null != e.streamId && e.hasOwnProperty("streamId") && (i.streamId = e.streamId), null != e.priority && e.hasOwnProperty("priority") && (i.priority = e.priority), null != e.targetBitrateKbps && e.hasOwnProperty("targetBitrateKbps") && (i.targetBitrateKbps = e.targetBitrateKbps), null != e.groupId && e.hasOwnProperty("groupId") && (i.groupId = e.groupId), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkPrimaryMeetingJoinFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.credentials = null, e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.credentials && Object.hasOwnProperty.call(e, "credentials") && l.SdkMeetingSessionCredentials.encode(e.credentials, t.uint32(10).fork()).ldelim(), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkPrimaryMeetingJoinFrame; e.pos < i;) { var o = e.uint32(); o >>> 3 == 1 ? r.credentials = l.SdkMeetingSessionCredentials.decode(e, e.uint32()) : e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { if ("object" != typeof e || null === e) return "object expected"; if (null != e.credentials && e.hasOwnProperty("credentials")) { var t = l.SdkMeetingSessionCredentials.verify(e.credentials); if (t) return "credentials." + t } return null }, e.fromObject = function (e) { if (e instanceof l.SdkPrimaryMeetingJoinFrame) return e; var t = new l.SdkPrimaryMeetingJoinFrame; if (null != e.credentials) { if ("object" != typeof e.credentials) throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected"); t.credentials = l.SdkMeetingSessionCredentials.fromObject(e.credentials) } return t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.credentials = null), null != e.credentials && e.hasOwnProperty("credentials") && (i.credentials = l.SdkMeetingSessionCredentials.toObject(e.credentials, t)), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkPrimaryMeetingJoinAckFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkPrimaryMeetingJoinAckFrame; e.pos < i;) { var o = e.uint32(); e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null }, e.fromObject = function (e) { return e instanceof l.SdkPrimaryMeetingJoinAckFrame ? e : new l.SdkPrimaryMeetingJoinAckFrame }, e.toObject = function () { return {} }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkPrimaryMeetingLeaveFrame = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkPrimaryMeetingLeaveFrame; e.pos < i;) { var o = e.uint32(); e.skipType(7 & o) } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null }, e.fromObject = function (e) { return e instanceof l.SdkPrimaryMeetingLeaveFrame ? e : new l.SdkPrimaryMeetingLeaveFrame }, e.toObject = function () { return {} }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkMeetingSessionCredentials = function () { function e(e) { if (e) for (var t = Object.keys(e), i = 0; i < t.length; ++i)null != e[t[i]] && (this[t[i]] = e[t[i]]) } return e.prototype.attendeeId = "", e.prototype.externalUserId = "", e.prototype.joinToken = "", e.create = function (t) { return new e(t) }, e.encode = function (e, t) { return t || (t = a.create()), null != e.attendeeId && Object.hasOwnProperty.call(e, "attendeeId") && t.uint32(10).string(e.attendeeId), null != e.externalUserId && Object.hasOwnProperty.call(e, "externalUserId") && t.uint32(18).string(e.externalUserId), null != e.joinToken && Object.hasOwnProperty.call(e, "joinToken") && t.uint32(26).string(e.joinToken), t }, e.encodeDelimited = function (e, t) { return this.encode(e, t).ldelim() }, e.decode = function (e, t) { e instanceof s || (e = s.create(e)); for (var i = void 0 === t ? e.len : e.pos + t, r = new l.SdkMeetingSessionCredentials; e.pos < i;) { var o = e.uint32(); switch (o >>> 3) { case 1: r.attendeeId = e.string(); break; case 2: r.externalUserId = e.string(); break; case 3: r.joinToken = e.string(); break; default: e.skipType(7 & o) } } return r }, e.decodeDelimited = function (e) { return e instanceof s || (e = new s(e)), this.decode(e, e.uint32()) }, e.verify = function (e) { return "object" != typeof e || null === e ? "object expected" : null != e.attendeeId && e.hasOwnProperty("attendeeId") && !d.isString(e.attendeeId) ? "attendeeId: string expected" : null != e.externalUserId && e.hasOwnProperty("externalUserId") && !d.isString(e.externalUserId) ? "externalUserId: string expected" : null != e.joinToken && e.hasOwnProperty("joinToken") && !d.isString(e.joinToken) ? "joinToken: string expected" : null }, e.fromObject = function (e) { if (e instanceof l.SdkMeetingSessionCredentials) return e; var t = new l.SdkMeetingSessionCredentials; return null != e.attendeeId && (t.attendeeId = String(e.attendeeId)), null != e.externalUserId && (t.externalUserId = String(e.externalUserId)), null != e.joinToken && (t.joinToken = String(e.joinToken)), t }, e.toObject = function (e, t) { t || (t = {}); var i = {}; return t.defaults && (i.attendeeId = "", i.externalUserId = "", i.joinToken = ""), null != e.attendeeId && e.hasOwnProperty("attendeeId") && (i.attendeeId = e.attendeeId), null != e.externalUserId && e.hasOwnProperty("externalUserId") && (i.externalUserId = e.externalUserId), null != e.joinToken && e.hasOwnProperty("joinToken") && (i.joinToken = e.joinToken), i }, e.prototype.toJSON = function () { return this.constructor.toObject(this, n.util.toJSONOptions) }, e }(), l.SdkVideoCodecCapability = function () { var e = {}, t = Object.create(e); return t[e[1] = "VP8"] = 1, t[e[3] = "H264_CONSTRAINED_BASELINE_PROFILE"] = 3, t }(), e.exports = l, d.Long = void 0, n.configure() }, 3429: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9387), n = i(6145), s = i(8495); t.default = class { constructor(e) { this.chimeClient = e } makeTwoDigits(e) { return e > 9 ? e.toString() : "0" + e.toString() } hmac(e, t) { const i = new o.Sha256(t); return i.update(e), i.digest() } getDateTimeString() { const e = new Date; return e.getUTCFullYear() + this.makeTwoDigits(e.getUTCMonth() + 1) + this.makeTwoDigits(e.getUTCDate()) + "T" + this.makeTwoDigits(e.getUTCHours()) + this.makeTwoDigits(e.getUTCMinutes()) + this.makeTwoDigits(e.getUTCSeconds()) + "Z" } getDateString(e) { return e.substring(0, e.indexOf("T")) } getSignatureKey(e, t, i, o) { return r(this, void 0, void 0, (function* () { const r = yield this.hmac(t, "AWS4" + e), n = yield this.hmac(i, r), s = yield this.hmac(o, n); return yield this.hmac("aws4_request", s) })) } signURL(e, t, i, o, a, d, l) { return r(this, void 0, void 0, (function* () { const r = this.getDateTimeString(), c = this.getDateString(r); let u = ""; u = this.chimeClient.config.region instanceof Function ? yield this.chimeClient.config.region() : this.chimeClient.config.region; const h = "host:" + o.toLowerCase() + "\n", p = c + "/" + u + "/" + i + "/aws4_request"; let m; m = this.chimeClient.config.credentials instanceof Function ? yield this.chimeClient.config.credentials() : this.chimeClient.config.credentials; let f = new Map; f.set("X-Amz-Algorithm", ["AWS4-HMAC-SHA256"]), f.set("X-Amz-Credential", [encodeURIComponent(m.accessKeyId + "/" + p)]), f.set("X-Amz-Date", [r]), f.set("X-Amz-Expires", ["10"]), f.set("X-Amz-SignedHeaders", ["host"]), m.sessionToken && f.set("X-Amz-Security-Token", [encodeURIComponent(m.sessionToken)]), f.set(s.default.X_AMZN_VERSION, [encodeURIComponent(s.default.sdkVersion)]), f.set(s.default.X_AMZN_USER_AGENT, [encodeURIComponent(s.default.sdkUserAgentLowResolution)]), null == l || l.forEach(((e, t) => { const i = encodeURIComponent(t); e.sort().forEach((e => { f.has(i) || f.set(i, []), f.get(i).push(encodeURIComponent(e)) })) })); let g = ""; f = new Map([...f.entries()].sort()), f.forEach(((e, t) => { e.forEach((e => { g.length && (g += "&"), g += t + "=" + e })) })); const b = e + "\n" + a + "\n" + g + "\n" + h + "\nhost\n" + n.toHex(yield this.hmac(d)), v = n.toHex(yield this.hmac(b)), y = "AWS4-HMAC-SHA256\n" + r + "\n" + c + "/" + u + "/" + i + "/aws4_request\n" + v, w = yield this.getSignatureKey(m.secretAccessKey, c, u, i), S = n.toHex(yield this.hmac(y, w)); return t + "://" + o + a + "?" + g + "&X-Amz-Signature=" + S })) } } }, 1546: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.SimulcastLayers = void 0, function (e) { e[e.Low = 0] = "Low", e[e.LowAndMedium = 1] = "LowAndMedium", e[e.LowAndHigh = 2] = "LowAndHigh", e[e.Medium = 3] = "Medium", e[e.MediumAndHigh = 4] = "MediumAndHigh", e[e.High = 5] = "High" }(i = t.SimulcastLayers || (t.SimulcastLayers = {})), t.default = i }, 7595: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.AudioLogEvent = void 0, function (e) { e[e.DeviceChanged = 0] = "DeviceChanged", e[e.MutedLocal = 1] = "MutedLocal", e[e.UnmutedLocal = 2] = "UnmutedLocal", e[e.Connected = 3] = "Connected", e[e.ConnectFailed = 4] = "ConnectFailed", e[e.RedmicStartLoss = 5] = "RedmicStartLoss", e[e.RedmicEndLoss = 6] = "RedmicEndLoss" }(i = t.AudioLogEvent || (t.AudioLogEvent = {})), t.default = i }, 3081: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(7057), n = i(171), s = i(7957), a = i(7562), d = i(6454), l = i(5702), c = i(2378), u = i(8330), h = i(2019), p = i(7595), m = i(7212); class f { constructor(e, t, i = f.INTERVAL_MS) { this.audioVideoController = e, this.logger = t, this.interval = i, this.intervalScheduler = null, this.metricsAddTime = (e, t, i) => { }, this.metricsLogEvent = (e, t) => { } } toAttribute(e) { return this.toSuffix(e).substring(1) } toSuffix(e) { return e.toLowerCase() === e ? `_${e}` : e.toUpperCase() === e ? `_${e.toLowerCase()}` : e.replace(/([A-Z][a-z]+)/g, (function (e) { return `_${e}` })).replace(/([A-Z][A-Z]+)/g, (function (e) { return `_${e}` })).toLowerCase() } logLatency(e, t, i) { const r = this.toSuffix(e); this.logEventTime("meeting" + r, t, i) } logStateTimeout(e, t) { const i = this.toSuffix(e); this.logEvent("meeting_session_state_timeout", Object.assign(Object.assign({}, t), { state: `state${i}` })) } logAudioEvent(e, t) { const i = "audio" + this.toSuffix(p.default[e]); this.logEvent(i, t) } logVideoEvent(e, t) { const i = "video" + this.toSuffix(m.default[e]); this.logEvent(i, t) } logEventTime(e, t, i = {}) { const r = Object.assign(Object.assign({}, i), { call_id: this.audioVideoController.configuration.meetingId, client_type: f.CLIENT_TYPE, metric_type: "latency" }); this.logger.debug((() => `[StatsCollector] ${e}: ${JSON.stringify(r)}`)), this.metricsAddTime(e, t, r) } logMeetingSessionStatus(e) { const t = `${e.statusCode()}`; this.logEvent(t); const i = { status: t, status_code: `${e.statusCode()}` }; this.logEvent("meeting_session_status", i), e.isTerminal() && this.logEvent("meeting_session_stopped", i), e.isAudioConnectionFailure() && this.logEvent("meeting_session_audio_failed", i), e.isFailure() && this.logEvent("meeting_session_failed", i) } logLifecycleEvent(e, t) { const i = { lifecycle_event: `lifecycle${this.toSuffix(d.default[e])}`, lifecycle_event_code: `${e}`, lifecycle_event_condition: `condition${this.toSuffix(l.default[t])}`, lifecycle_event_condition_code: `${t}` }; this.logEvent("meeting_session_lifecycle", i) } logEvent(e, t = {}) { const i = Object.assign(Object.assign({}, t), { call_id: this.audioVideoController.configuration.meetingId, client_type: f.CLIENT_TYPE }); this.logger.debug((() => `[StatsCollector] ${e}: ${JSON.stringify(i)}`)), this.metricsLogEvent(e, i) } start(e, t) { return !this.intervalScheduler && (this.logger.info("Starting StatsCollector"), this.signalingClient = e, this.videoStreamIndex = t, this.clientMetricReport = new o.default(this.logger, this.videoStreamIndex, this.audioVideoController.configuration.credentials.attendeeId), this.intervalScheduler = new c.default(this.interval), this.intervalScheduler.start((() => r(this, void 0, void 0, (function* () { yield this.getStatsWrapper() })))), !0) } stop() { this.logger.info("Stopping StatsCollector"), this.intervalScheduler && this.intervalScheduler.stop(), this.intervalScheduler = null } updateMetricValues(e, t) { const i = t ? this.clientMetricReport.streamMetricReports[Number(e.ssrc)] : this.clientMetricReport.globalMetricReport; let r; r = t ? this.clientMetricReport.getMetricMap(i.mediaType, i.direction) : this.clientMetricReport.getMetricMap(); for (const t in e) t in r && (i.previousMetrics[t] = i.currentMetrics[t], i.currentMetrics[t] = e[t]) } processRawMetricReports(e) { this.clientMetricReport.currentSsrcs = {}; const t = Date.now(); for (const t of e) { const e = this.isStreamRawMetricReport(t.type); if (e) { const e = this.clientMetricReport.streamMetricReports[Number(t.ssrc)]; if (e) e.streamId = this.videoStreamIndex.streamIdForSSRC(Number(t.ssrc)); else { const e = new a.default; e.mediaType = this.getMediaType(t), e.direction = this.getDirectionType(t), this.videoStreamIndex.allStreams().empty() || (e.streamId = this.videoStreamIndex.streamIdForSSRC(Number(t.ssrc))), this.clientMetricReport.streamMetricReports[Number(t.ssrc)] = e } this.clientMetricReport.currentSsrcs[Number(t.ssrc)] = 1 } this.updateMetricValues(t, e) } this.clientMetricReport.removeDestroyedSsrcs(), this.clientMetricReport.previousTimestampMs = this.clientMetricReport.currentTimestampMs, this.clientMetricReport.currentTimestampMs = t, this.clientMetricReport.print() } addMetricFrame(e, t, i, r) { const o = i.type, n = i.transform, s = i.source, a = t.streamMetricFrames.length, d = t.streamMetricFrames[a - 1]; if (o) { const i = u.SdkMetric.create(); i.type = o, i.value = n(s || e, r), r ? d.metrics.push(i) : t.globalMetrics.push(i) } } addGlobalMetricsToProtobuf(e) { const t = this.clientMetricReport.getMetricMap(); for (const i in this.clientMetricReport.globalMetricReport.currentMetrics) this.addMetricFrame(i, e, t[i]) } addStreamMetricsToProtobuf(e) { for (const t in this.clientMetricReport.streamMetricReports) { const i = this.clientMetricReport.streamMetricReports[t], r = u.SdkStreamMetricFrame.create(); r.streamId = i.streamId, r.metrics = [], e.streamMetricFrames.push(r); const o = this.clientMetricReport.getMetricMap(i.mediaType, i.direction); for (const r in i.currentMetrics) this.addMetricFrame(r, e, o[r], Number(t)) } } makeClientMetricProtobuf() { const e = u.SdkClientMetricFrame.create(); return e.globalMetrics = [], e.streamMetricFrames = [], this.addGlobalMetricsToProtobuf(e), this.addStreamMetricsToProtobuf(e), e } sendClientMetricProtobuf(e) { this.signalingClient.sendClientMetrics(e) } isStreamRawMetricReport(e) { return ["inbound-rtp", "outbound-rtp", "remote-inbound-rtp", "remote-outbound-rtp"].includes(e) } getMediaType(e) { return "audio" === e.kind ? s.default.AUDIO : s.default.VIDEO } getDirectionType(e) { const { type: t } = e; return "inbound-rtp" === t || "remote-outbound-rtp" === t ? n.default.DOWNSTREAM : n.default.UPSTREAM } isValidStandardRawMetric(e) { return "inbound-rtp" === e.type || "outbound-rtp" === e.type || "remote-inbound-rtp" === e.type || "remote-outbound-rtp" === e.type || "candidate-pair" === e.type && "succeeded" === e.state } isValidSsrc(e) { let t = !0; return this.isStreamRawMetricReport(e.type) && this.getDirectionType(e) === n.default.DOWNSTREAM && this.getMediaType(e) === s.default.VIDEO && (t = this.videoStreamIndex.streamIdForSSRC(Number(e.ssrc)) > 0), t } isValidRawMetricReport(e) { return this.isValidStandardRawMetric(e) && this.isValidSsrc(e) } filterRawMetricReports(e) { const t = []; for (const i of e) this.isValidRawMetricReport(i) && t.push(i); return t } handleRawMetricReports(e) { const t = this.filterRawMetricReports(e); this.logger.debug((() => `Filtered raw metrics : ${JSON.stringify(t)}`)), this.processRawMetricReports(t); const i = this.makeClientMetricProtobuf(); this.sendClientMetricProtobuf(i), this.audioVideoController.forEachObserver((e => { h.Maybe.of(e.metricsDidReceive).map((t => t.bind(e)(this.clientMetricReport.clone()))) })) } getStatsWrapper() { return r(this, void 0, void 0, (function* () { if (!this.audioVideoController.rtcPeerConnection) return; const e = []; try { const t = yield this.audioVideoController.rtcPeerConnection.getStats(); this.clientMetricReport.rtcStatsReport = t, t.forEach((t => { e.push(t) })), this.handleRawMetricReports(e) } catch (e) { this.logger.error(e.message) } })) } } t.default = f, f.INTERVAL_MS = 1e3, f.CLIENT_TYPE = "amazon-chime-sdk-js" }, 7212: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.VideoLogEvent = void 0, function (e) { e[e.InputAttached = 0] = "InputAttached", e[e.SendingFailed = 1] = "SendingFailed", e[e.SendingSuccess = 2] = "SendingSuccess" }(i = t.VideoLogEvent || (t.VideoLogEvent = {})), t.default = i }, 1722: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(7212), n = i(1072); class s extends n.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "AttachMediaInputTask" } run() { return r(this, void 0, void 0, (function* () { const e = this.context.transceiverController; e.setPeer(this.context.peer), e.setupLocalTransceivers(); const t = this.context.activeAudioInput; if (t) { const i = t.getAudioTracks(); this.context.logger.info("attaching audio track to peer connection"), yield e.setAudioInput(i.length ? i[0] : null) } else yield e.setAudioInput(null), this.context.logger.info("no audio track"); const i = this.context.activeVideoInput; if (i) { const t = i.getVideoTracks(), r = t.length ? t[0] : null; if (this.context.logger.info("attaching video track to peer connection"), yield e.setVideoInput(r), this.context.enableSimulcast && this.context.videoUplinkBandwidthPolicy) { const t = this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(); e.setEncodingParameters(t) } r && (this.context.statsCollector.logVideoEvent(o.default.InputAttached, this.context.videoDeviceInformation), this.context.videoInputAttachedTimestampMs = Date.now()) } else yield e.setVideoInput(null), this.context.logger.info("no video track"); this.context.videoSubscriptions = e.updateVideoTransceivers(this.context.videoStreamIndex, this.context.videosToReceive) })) } } t.default = s }, 1072: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(6036), n = i(5049); t.default = class { constructor(e) { this.logger = e, this.taskName = "BaseTask", this.parentTask = null, this.status = n.default.IDLE, this.run = this.baseRun.bind(this, this.run), this.cancel = this.baseCancel.bind(this, this.cancel) } once(...e) { return new o.default(this.logger, this, e) } cancel() { } name() { return this.parentTask ? `${this.parentTask.name()}/${this.taskName}` : this.taskName } setParent(e) { this.parentTask = e } getStatus() { return this.status } logAndThrow(e) { throw this.logger.info(e), new Error(e) } baseRun(e) { return r(this, void 0, void 0, (function* () { try { const t = Date.now(); switch (this.logger.info(`running task ${this.name()}`), this.status) { case n.default.RUNNING: this.logAndThrow(`${this.name()} is already running`); case n.default.CANCELED: this.logAndThrow(`${this.name()} was canceled before running`); case n.default.FINISHED: this.logAndThrow(`${this.name()} was already finished`) }this.status = n.default.RUNNING, yield e.call(this), this.logger.info(`${this.name()} took ${Math.round(Date.now() - t)} ms`) } catch (e) { throw e } finally { this.status !== n.default.CANCELED && (this.status = n.default.FINISHED) } })) } baseCancel(e) { this.status !== n.default.CANCELED && this.status !== n.default.FINISHED ? (this.logger.info(`canceling task ${this.name()}`), this.status = n.default.CANCELED, e.call(this)) : this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`) } } }, 6310: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1072); class n extends o.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "CleanRestartedSessionTask" } run() { return r(this, void 0, void 0, (function* () { this.context.peer && this.context.peer.close(), this.context.transceiverController.reset(), this.context.peer = null, this.context.videoDownlinkBandwidthPolicy.reset(), this.context.videoUplinkBandwidthPolicy.reset && this.context.videoUplinkBandwidthPolicy.reset(), this.context.iceCandidateHandler = null, this.context.iceCandidates = [], this.context.previousSdpOffer = null })) } } t.default = n }, 8861: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(4123), n = i(1072); class s extends n.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "CleanStoppedSessionTask", this.taskCanceler = null } cancel() { this.taskCanceler && (this.taskCanceler.cancel(), this.taskCanceler = null) } run() { return r(this, void 0, void 0, (function* () { try { this.context.signalingClient.ready() && (this.context.signalingClient.closeConnection(), yield this.receiveWebSocketClosedEvent()) } catch (e) { throw e } finally { for (const e of this.context.removableObservers) e.removeObserver(); this.context.statsCollector.stop(), this.context.statsCollector = null, this.context.connectionMonitor.stop(), this.context.connectionMonitor = null, this.context.peer && this.context.peer.close(), this.context.peer = null, this.context.sdpAnswer = null, this.context.sdpOfferInit = null, this.context.indexFrame = null, this.context.videoDownlinkBandwidthPolicy.reset(), this.context.videoUplinkBandwidthPolicy.reset && this.context.videoUplinkBandwidthPolicy.reset(), this.context.iceCandidateHandler = null, this.context.iceCandidates = [], this.context.turnCredentials = null, this.context.videoSubscriptions = null, this.context.transceiverController.reset(), this.context.videoUplinkBandwidthPolicy.setTransceiverController && this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0), this.context.videoDownlinkBandwidthPolicy.bindToTileController && this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0); const e = this.context.videoTileController.getLocalVideoTile(); e && e.bindVideoStream("", !0, null, null, null, null), this.context.videoTileController.removeAllVideoTiles() } })) } receiveWebSocketClosedEvent() { return new Promise(((e, t) => { const i = new class { constructor(e) { this.signalingClient = e } cancel() { this.signalingClient.removeObserver(this), t(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event")) } handleSignalingClientEvent(t) { t.type === o.default.WebSocketClosed && (this.signalingClient.removeObserver(this), e()) } }(this.context.signalingClient); this.taskCanceler = i, this.context.signalingClient.registerObserver(i) })) } } t.default = s }, 805: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1072); class n extends o.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "CreatePeerConnectionTask", this.removeTrackAddedEventListener = null, this.removeTrackRemovedEventListeners = {}, this.trackEvents = ["ended", "mute", "unmute", "isolationchange", "overconstrained"], this.removeVideoTrackEventListeners = {}, this.trackAddedHandler = e => { const t = e.track; if (this.context.logger.info(`received track event: kind=${t.kind} id=${t.id} label=${t.label}`), e.transceiver && "inactive" === e.transceiver.currentDirection) return; if (0 === e.streams.length) return void this.context.logger.warn("Track event but no stream"); const i = e.streams[0]; "audio" === t.kind ? this.context.audioMixController.bindAudioStream(i) : "video" !== t.kind || this.trackIsVideoInput(t) || this.addRemoteVideoTrack(t, i) } } removeObserver() { this.removeTrackAddedEventListener && this.removeTrackAddedEventListener(); for (const e in this.removeTrackRemovedEventListeners) this.removeTrackRemovedEventListeners[e]() } addPeerConnectionEventLogger() { const e = this.context.peer; e.addEventListener("connectionstatechange", (() => { this.context.logger.info(`peer connection state changed: ${e.connectionState}`) })), e.addEventListener("negotiationneeded", (() => { this.context.logger.info("peer connection negotiation is needed") })), e.addEventListener("icegatheringstatechange", (() => { this.context.logger.info(`peer connection ice gathering state changed: ${e.iceGatheringState}`) })), e.addEventListener("icecandidate", (e => { this.context.logger.info(`peer connection ice candidate: ${e.candidate ? e.candidate.candidate : "(null)"}`) })), e.addEventListener("iceconnectionstatechange", (() => { this.context.logger.info(`peer connection ice connection state changed: ${e.iceConnectionState}`) })) } run() { return r(this, void 0, void 0, (function* () { this.context.removableObservers.push(this); const e = this.context.turnCredentials && this.context.turnCredentials.uris.length > 0 ? { iceServers: [{ urls: this.context.turnCredentials.uris, username: this.context.turnCredentials.username, credential: this.context.turnCredentials.password, credentialType: "password" }], iceTransportPolicy: "relay" } : {}; e.bundlePolicy = this.context.browserBehavior.requiresBundlePolicy(), e.sdpSemantics = "unified-plan", this.context.peer ? this.context.logger.info("reusing peer connection") : (this.context.logger.info("creating new peer connection"), this.context.peer = new RTCPeerConnection(e), this.addPeerConnectionEventLogger()), this.removeTrackAddedEventListener = () => { this.context.peer && this.context.peer.removeEventListener("track", this.trackAddedHandler), this.removeTrackAddedEventListener = null }, this.context.peer.addEventListener("track", this.trackAddedHandler) })) } trackIsVideoInput(e) { return !!this.context.transceiverController.useTransceivers() && (this.logger.debug((() => "getting video track type")), this.context.transceiverController.trackIsVideoInput(e)) } addRemoteVideoTrack(e, t) { var i; const r = t.id, o = this.context.videoStreamIndex.attendeeIdForTrack(r); let n, s; if (this.context.videoTileController.getVideoTileForAttendeeId ? (s = this.context.videoTileController.getVideoTileForAttendeeId(o), n = !!(null === (i = null == s ? void 0 : s.state()) || void 0 === i ? void 0 : i.boundVideoStream)) : n = this.context.videoTileController.haveVideoTileForAttendeeId(o), n) return void this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${o}`); s || (s = this.context.videoTileController.addVideoTile(), this.logger.info(`Created video tile ${s.id()}`)); let a, d, l = this.context.videoStreamIndex.streamIdForTrack(r); void 0 === l && (this.logger.warn(`stream not found for tile=${s.id()} track=${r}`), l = null); for (let i = 0; i < this.trackEvents.length; i++) { const r = this.trackEvents[i], o = t.getVideoTracks(); if (o && o.length) { const t = o[0], i = () => { this.context.logger.info(`received the ${r} event for tile=${s.id()} id=${e.id} streamId=${l}`), "ended" === r && this.removeRemoteVideoTrack(e, s.state()) }; t.addEventListener(r, i), this.removeVideoTrackEventListeners[e.id] || (this.removeVideoTrackEventListeners[e.id] = []), this.removeVideoTrackEventListeners[e.id].push((() => { t.removeEventListener(r, i) })) } } if (e.getSettings) { const t = e.getSettings(); a = t.width, d = t.height } else { const t = e.getCapabilities(); a = t.width, d = t.height } const c = this.context.videoStreamIndex.externalUserIdForTrack(r); s.bindVideoStream(o, !1, t, a, d, l, c), this.logger.info(`video track added, use tile=${s.id()} track=${r} streamId=${l}`); const u = "removetrack", h = t, p = () => this.removeRemoteVideoTrack(e, s.state()); this.removeTrackRemovedEventListeners[e.id] = () => { h.removeEventListener(u, p), delete this.removeTrackRemovedEventListeners[e.id] }, h.addEventListener(u, p) } removeRemoteVideoTrack(e, t) { if (this.removeTrackRemovedEventListeners.hasOwnProperty(e.id)) { this.removeTrackRemovedEventListeners[e.id](); for (const t of this.removeVideoTrackEventListeners[e.id]) t(); delete this.removeVideoTrackEventListeners[e.id] } this.logger.info(`video track ended, removing tile=${t.tileId} id=${e.id} stream=${t.streamId}`), t.streamId ? this.context.videosPaused.remove(t.streamId) : this.logger.warn(`no stream found for tile=${t.tileId}`), this.context.videoTileController.removeVideoTile(t.tileId) } } t.default = n, n.REMOVE_HANDLER_INTERVAL_MS = 1e4 }, 9098: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1736), n = i(4052), s = i(1072); class a extends s.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "CreateSDPTask" } cancel() { if (this.cancelPromise) { const e = new Error(`canceling ${this.name()}`); this.cancelPromise(e), delete this.cancelPromise } } sessionUsesAudio() { var e, t; return !!(null === (t = null === (e = this.context.meetingSessionConfiguration) || void 0 === e ? void 0 : e.urls) || void 0 === t ? void 0 : t.audioHostURL) } sessionUsesVideo() { let e; e = this.context.transceiverController.useTransceivers() ? this.context.transceiverController.hasVideoInput() : this.context.videoTileController.hasStartedLocalVideoTile(); const t = !!this.context.videosToReceive && !this.context.videosToReceive.empty(), i = e || t; return this.context.logger.info(`uses video: ${i} (enabled: true, sending: ${e}, receiving: ${t})`), i } run() { return r(this, void 0, void 0, (function* () { const e = { offerToReceiveAudio: this.sessionUsesAudio(), offerToReceiveVideo: this.sessionUsesVideo() }; this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`), yield new Promise(((t, i) => r(this, void 0, void 0, (function* () { this.cancelPromise = e => { i(e) }; try { if (this.context.sdpOfferInit = yield this.context.peer.createOffer(e), this.context.logger.info("peer connection created offer"), this.context.previousSdpOffer && new n.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)) { const e = new Error(`canceling ${this.name()} due to the meeting status code: ${o.default.IncompatibleSDP}`); return this.context.previousSdpOffer = null, void i(e) } t() } catch (e) { i(e) } finally { delete this.cancelPromise } })))) })) } } t.default = a }, 7998: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1736), n = i(4052), s = i(1072); class a extends s.default { constructor(e, t = a.CHROME_VPN_TIMEOUT_MS) { super(e.logger), this.context = e, this.chromeVpnTimeoutMs = t, this.taskName = "FinishGatheringICECandidatesTask" } removeEventListener() { this.context.peer && (this.context.peer.removeEventListener("icecandidate", this.context.iceCandidateHandler), this.context.turnCredentials || this.context.peer.removeEventListener("icegatheringstatechange", this.context.iceGatheringStateEventHandler)) } cancel() { let e; this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround() && this.chromeVpnTimeoutMs < this.context.meetingSessionConfiguration.connectionTimeoutMs && Date.now() - this.startTimestampMs > this.chromeVpnTimeoutMs && (e = new Error(`canceling ${this.name()} due to the meeting status code: ${o.default.ICEGatheringTimeoutWorkaround}`)), this.cancelPromise && (e = e || new Error(`canceling ${this.name()}`), this.cancelPromise(e), delete this.cancelPromise) } run() { return r(this, void 0, void 0, (function* () { if (this.context.peer || this.logAndThrow("session does not have peer connection; bypass ice gathering"), this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()) { if (new n.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()) return void this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`) } else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`); if (!this.context.browserBehavior.hasFirefoxWebRTC() && "complete" !== this.context.peer.iceGatheringState || !new n.default(this.context.peer.localDescription.sdp).hasCandidates()) try { yield new Promise(((e, t) => { this.cancelPromise = e => { this.removeEventListener(), t(e) }, this.context.turnCredentials || (this.context.iceGatheringStateEventHandler = () => { if ("complete" === this.context.peer.iceGatheringState) return this.removeEventListener(), e(), void delete this.cancelPromise }, this.context.peer.addEventListener("icegatheringstatechange", this.context.iceGatheringStateEventHandler)), this.context.iceCandidateHandler = i => { if (this.context.logger.info(`ice candidate: ${i.candidate ? i.candidate.candidate : "(null)"} state: ${this.context.peer.iceGatheringState}`), i.candidate && (n.default.isRTPCandidate(i.candidate.candidate) && this.context.iceCandidates.push(i.candidate), this.context.turnCredentials && this.context.iceCandidates.length >= 1)) return this.context.logger.info("gathered at least one relay candidate"), this.removeEventListener(), e(), void delete this.cancelPromise; "complete" === this.context.peer.iceGatheringState && (this.context.logger.info("done gathering ice candidates"), this.removeEventListener(), new n.default(this.context.peer.localDescription.sdp).hasCandidates() && 0 !== this.context.iceCandidates.length ? (e(), delete this.cancelPromise) : (t(new Error("no ice candidates were gathered")), delete this.cancelPromise)) }, this.context.peer.addEventListener("icecandidate", this.context.iceCandidateHandler), this.startTimestampMs = Date.now() })) } catch (e) { throw e } finally { this.startTimestampMs && (this.context.iceGatheringDurationMs = Math.round(Date.now() - this.startTimestampMs)) } else this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering") })) } } t.default = a, a.CHROME_VPN_TIMEOUT_MS = 5e3 }, 3333: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(5956), n = i(1736), s = i(6744), a = i(3191), d = i(4123), l = i(7100), c = i(8330), u = i(1072); class h extends u.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "JoinAndReceiveIndexTask", this.taskCanceler = null } cancel() { this.taskCanceler && (this.taskCanceler.cancel(), this.taskCanceler = null) } run() { return r(this, void 0, void 0, (function* () { const e = yield new Promise(((e, t) => { const i = this.context; i.turnCredentials = null; const r = new class { constructor(e) { this.signalingClient = e } cancel() { this.signalingClient.removeObserver(this), t(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame")) } handleSignalingClientEvent(t) { if (t.type === d.default.WebSocketClosed) { let e = `The signaling connection was closed with code ${t.closeCode} and reason: ${t.closeReason}`; i.logger.warn(e); let r = n.default.SignalingBadRequest; return 4410 === t.closeCode ? (e = "The meeting already ended.", i.logger.warn(e), r = n.default.MeetingEnded) : t.closeCode >= 4500 && t.closeCode < 4600 && (r = n.default.SignalingInternalServerError), void i.audioVideoController.handleMeetingSessionStatus(new o.default(r), new Error(e)) } if (t.type !== d.default.ReceivedSignalFrame) return; if (t.message.type === c.SdkSignalFrame.Type.JOIN_ACK) { const e = t.message.joinack; if (e && e.videoSubscriptionLimit && (i.videoSubscriptionLimit = e.videoSubscriptionLimit), i.serverSupportsCompression = null == e ? void 0 : e.wantsCompressedSdp, void 0 !== (null == e ? void 0 : e.defaultServerSideNetworkAdaption) && e.defaultServerSideNetworkAdaption !== a.default.Default && void 0 !== i.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption) { const t = e.defaultServerSideNetworkAdaption; i.logger.info(`Overriding server side network adaption value to ${t}`), i.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(a.convertServerSideNetworkAdaptionEnumFromSignaled(t)) } return void (e && e.turnCredentials ? (i.turnCredentials = new s.default, i.turnCredentials.username = e.turnCredentials.username, i.turnCredentials.password = e.turnCredentials.password, i.turnCredentials.ttl = e.turnCredentials.ttl, i.turnCredentials.uris = e.turnCredentials.uris.map((e => i.meetingSessionConfiguration.urls.urlRewriter(e))).filter((e => !!e))) : i.logger.error("missing TURN credentials in JoinAckFrame")) } if (t.message.type !== c.SdkSignalFrame.Type.INDEX) return; this.signalingClient.removeObserver(this); const r = t.message.index; e(r) } }(this.context.signalingClient); this.context.signalingClient.registerObserver(r), this.taskCanceler = r, this.context.previousSdpAnswerAsString = "", this.context.previousSdpOffer = null, this.context.serverSupportsCompression = !1; const u = new l.default(this.context.meetingSessionConfiguration.applicationMetadata); void 0 !== this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption && void 0 !== this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions && (u.serverSideNetworkAdaption = this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(), u.supportedServerSideNetworkAdaptions = this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()), this.context.signalingClient.join(u) })); this.context.logger.info(`received first index ${JSON.stringify(e)}`), this.context.indexFrame = e })) } } t.default = h }, 3717: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(4123), n = i(8330), s = i(1072); class a extends s.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "LeaveAndReceiveLeaveAckTask", this.taskCanceler = null } cancel() { this.taskCanceler && (this.taskCanceler.cancel(), this.taskCanceler = null) } run() { return r(this, void 0, void 0, (function* () { this.context.signalingClient.ready() && (this.context.signalingClient.leave(), this.context.logger.info("sent leave"), yield this.receiveLeaveAck()) })) } receiveLeaveAck() { return new Promise(((e, t) => { const i = new class { constructor(e, t) { this.signalingClient = e, this.logger = t } cancel() { this.signalingClient.removeObserver(this), t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame")) } handleSignalingClientEvent(t) { if (t.isConnectionTerminated()) return this.signalingClient.removeObserver(this), this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"), void e(); t.type === o.default.ReceivedSignalFrame && t.message.type === n.SdkSignalFrame.Type.LEAVE_ACK && (this.signalingClient.removeObserver(this), this.logger.info("got leave ack"), e()) } }(this.context.signalingClient, this.context.logger); this.taskCanceler = i, this.context.signalingClient.registerObserver(i) })) } } t.default = a }, 2325: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(4123), n = i(8330), s = i(1072); class a extends s.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "ListenForVolumeIndicatorsTask", this.realtimeMuteAndUnmuteHandler = e => { this.context.signalingClient.mute(e) } } run() { return r(this, void 0, void 0, (function* () { this.context.removableObservers.push(this), this.context.signalingClient.registerObserver(this), this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler) })) } removeObserver() { this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler), this.context.signalingClient.removeObserver(this) } handleSignalingClientEvent(e) { if (e.type === o.default.ReceivedSignalFrame) if (e.message.type === n.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO) { const t = e.message.audioStreamIdInfo; this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t) } else if (e.message.type === n.SdkSignalFrame.Type.AUDIO_METADATA) { const t = e.message.audioMetadata; this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t) } } } t.default = a }, 6537: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(171), n = i(7957), s = i(2840), a = i(2478), d = i(1448), l = i(5956), c = i(1736), u = i(4123), h = i(8330), p = i(7595), m = i(2019), f = i(1072); class g extends f.default { constructor(e, t, i) { super(e.logger), this.context = e, this.initialConnectionHealthData = i, this.taskName = "MonitorTask", this.prevSignalStrength = 1, this.currentVideoDownlinkBandwidthEstimationKbps = 1e4, this.currentAvailableStreamAvgBitrates = null, this.hasSignalingError = !1, this.presenceHandlerCalled = !1, this.isResubscribeCheckPaused = !1, this.pendingMetricsReport = void 0, this.checkAndSendWeakSignalEvent = e => { const t = e < 1, i = this.prevSignalStrength < 1, r = t ? i ? null : p.default.RedmicStartLoss : i ? p.default.RedmicEndLoss : null; r && this.context.statsCollector.logAudioEvent(r), this.prevSignalStrength = e }, this.realtimeFatalErrorCallback = e => { this.logger.error(`realtime error: ${e}: ${e.stack}`), this.context.audioVideoController.handleMeetingSessionStatus(new l.default(c.default.RealtimeApiFailed), e) }, this.realtimeAttendeeIdPresenceHandler = (e, t) => { var i; const r = this.context.meetingSessionConfiguration.credentials.attendeeId; this.logger.info(`attendeePresenceReceived: ${r}`), r === e && t && !this.presenceHandlerCalled && (this.presenceHandlerCalled = !0, this.context.attendeePresenceDurationMs = Date.now() - this.context.startAudioVideoTimestamp, null === (i = this.context.eventController) || void 0 === i || i.publishEvent("attendeePresenceReceived", { attendeePresenceDurationMs: this.context.attendeePresenceDurationMs })) }, this.generateAudioVideoEventAttributes = () => { const { signalingOpenDurationMs: e, poorConnectionCount: t, startTimeMs: i, iceGatheringDurationMs: r, attendeePresenceDurationMs: o, meetingStartDurationMs: n } = this.context; return { maxVideoTileCount: this.context.maxVideoTileCount, meetingDurationMs: null === i ? 0 : Math.round(Date.now() - i), signalingOpenDurationMs: e, iceGatheringDurationMs: r, attendeePresenceDurationMs: o, poorConnectionCount: t, meetingStartDurationMs: n } }, this.reconnectionHealthPolicy = new a.default(e.logger, Object.assign({}, t), this.initialConnectionHealthData.clone()), this.unusableAudioWarningHealthPolicy = new d.default(Object.assign({}, t), this.initialConnectionHealthData.clone()) } removeObserver() { this.context.audioVideoController.removeObserver(this), this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback), this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent), this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler), this.context.signalingClient.removeObserver(this) } run() { return r(this, void 0, void 0, (function* () { this.context.removableObservers.push(this), this.context.audioVideoController.addObserver(this), this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback), this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent), this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler), this.context.connectionMonitor.start(), this.context.statsCollector.start(this.context.signalingClient, this.context.videoStreamIndex), this.context.signalingClient.registerObserver(this) })) } pauseResubscribeCheck() { this.isResubscribeCheckPaused = !0 } resumeResubscribeCheck() { this.isResubscribeCheckPaused && (this.isResubscribeCheckPaused = !1, this.pendingMetricsReport && (this.context.logger.info("Resuming resubscribe check with pending metrics report"), this.checkResubscribe(this.pendingMetricsReport) && this.context.audioVideoController.update({ needsRenegotiation: !1 }))) } videoTileDidUpdate(e) { this.context.maxVideoTileCount = Math.max(this.context.maxVideoTileCount, this.context.videoTileController.getAllVideoTiles().length) } checkResubscribe(e) { if (this.isResubscribeCheckPaused) return this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"), void (this.pendingMetricsReport = e); this.pendingMetricsReport = void 0; const t = e.getObservableMetrics(); if (!t) return !1; const i = t.availableOutgoingBitrate, r = t.nackCountReceivedPerSecond; let o = !1; this.context.videoDownlinkBandwidthPolicy.updateMetrics(e); const n = this.context.videoDownlinkBandwidthPolicy.wantsResubscribe(); if (o = o || n, n) { const e = this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions(); this.context.videosToReceive = e.truncate(this.context.videoSubscriptionLimit), e.size() > this.context.videosToReceive.size() && this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`), this.logger.info(`trigger resubscribe for down=${n}; videosToReceive=[${this.context.videosToReceive.array()}]`) } if (this.context.videoTileController.hasStartedLocalVideoTile()) { this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({ uplinkKbps: i / 1e3, nackCountPerSecond: r }); const e = this.context.videoUplinkBandwidthPolicy.wantsResubscribe(); o = o || e, e && (this.logger.info(`trigger resubscribe for up=${e}; videosToReceive=[${this.context.videosToReceive.array()}]`), this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(), this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints()) } return o } metricsDidReceive(e) { const t = e; if (!t) return; if (this.checkResubscribe(e) && this.context.audioVideoController.update({ needsRenegotiation: !1 }), !this.currentAvailableStreamAvgBitrates) return; const i = t.streamMetricReports; if (!i) return; const r = e.getObservableMetrics(); this.currentVideoDownlinkBandwidthEstimationKbps = r.availableIncomingBitrate; const a = new Map, d = new Map; for (const e in i) i[e].mediaType === n.default.VIDEO && i[e].direction === o.default.DOWNSTREAM && a.set(i[e].streamId, i[e]); let l = !1; for (const e of this.currentAvailableStreamAvgBitrates.bitrates) if (a.has(e.sourceStreamId)) { const t = a.get(e.sourceStreamId), i = this.context.videoStreamIndex.attendeeIdForStreamId(e.sourceStreamId); if (!i) continue; const r = new s.default, o = t.previousMetrics.bytesReceived, n = t.currentMetrics.bytesReceived; if (!o || !n) continue; const c = 8 * (n - o) / 1e3; r.expectedAverageBitrateKbps = e.avgBitrateBps / 1e3, r.receivedAverageBitrateKbps = c, r.attendeeId = i, c < e.avgBitrateBps / 1e3 * g.DEFAULT_DOWNLINK_CALLRATE_UNDERSHOOT_FACTOR && (l = !0), d.set(i, r) } l && this.logger.info(`One or more video streams are not receiving expected amounts of data ${JSON.stringify(Array.from(d.values()))}`) } connectionHealthDidChange(e) { var t; 0 === e.consecutiveMissedPongs && this.context.reconnectController && this.context.reconnectController.setLastActiveTimestampMs(Date.now()), this.reconnectionHealthPolicy.update(e); const i = this.reconnectionHealthPolicy.healthIfChanged(); null !== i && (this.logger.info(`reconnection health is now: ${i}`), 0 === i && this.context.audioVideoController.handleMeetingSessionStatus(new l.default(c.default.ConnectionHealthReconnect), null)), this.unusableAudioWarningHealthPolicy.update(e); const r = this.unusableAudioWarningHealthPolicy.healthIfChanged(); if (null !== r) if (this.logger.info(`unusable audio warning is now: ${r}`), 0 === r) { this.context.poorConnectionCount += 1; const e = this.generateAudioVideoEventAttributes(); null === (t = this.context.eventController) || void 0 === t || t.publishEvent("receivingAudioDropped", e), this.context.videoTileController.haveVideoTilesWithStreams() ? this.context.audioVideoController.forEachObserver((e => { m.Maybe.of(e.connectionDidSuggestStopVideo).map((t => t.bind(e)())) })) : this.context.audioVideoController.forEachObserver((e => { m.Maybe.of(e.connectionDidBecomePoor).map((t => t.bind(e)())) })) } else this.context.audioVideoController.forEachObserver((e => { m.Maybe.of(e.connectionDidBecomeGood).map((t => t.bind(e)())) })) } handleBitrateFrame(e) { let t = 0; this.currentAvailableStreamAvgBitrates = e, this.logger.debug((() => `simulcast: bitrates from server ${JSON.stringify(e)}`)); for (const i of e.bitrates) this.context.videosToReceive.contain(i.sourceStreamId) && (t += i.avgBitrateBps); t /= 1e3, this.currentVideoDownlinkBandwidthEstimationKbps * g.DEFAULT_DOWNLINK_CALLRATE_OVERSHOOT_FACTOR < t && this.logger.info(`Downlink bandwidth pressure is high: estimated bandwidth ${this.currentVideoDownlinkBandwidthEstimationKbps}Kbps, required bandwidth ${t}Kbps`) } handleSignalingClientEvent(e) { var t; if (e.type === u.default.WebSocketClosed && (4410 === e.closeCode || e.closeCode >= 4500 && e.closeCode < 4600) || e.type === u.default.WebSocketError || e.type === u.default.WebSocketFailed) { if (!this.hasSignalingError) { const e = this.generateAudioVideoEventAttributes(); null === (t = this.context.eventController) || void 0 === t || t.publishEvent("signalingDropped", e), this.hasSignalingError = !0 } } else e.type === u.default.WebSocketOpen && (this.hasSignalingError = !1); if (e.type === u.default.ReceivedSignalFrame) { if (e.message.bitrates) { const t = e.message.bitrates; this.context.videoStreamIndex.integrateBitratesFrame(t), this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex), this.handleBitrateFrame(e.message.bitrates) } const t = l.default.fromSignalFrame(e.message); e.message.type !== h.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK && t.statusCode() !== c.default.OK && this.context.audioVideoController.handleMeetingSessionStatus(t, null) } } } t.default = g, g.DEFAULT_DOWNLINK_CALLRATE_OVERSHOOT_FACTOR = 2, g.DEFAULT_DOWNLINK_CALLRATE_UNDERSHOOT_FACTOR = .2 }, 1483: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { cancel() { } name() { return "NoOpTask" } run() { return Promise.resolve() } setParent(e) { } } }, 6036: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(7718), o = i(996); t.default = class { constructor(e, t, i) { this.logger = e, this.task = t, this.dependencies = i, this.canceled = !1 } name() { return `${this.task.name()} (once)` } cancel() { if (!this.canceled) { if (this.dependencies) for (const e of this.dependencies) e.cancel(); this.logger.info(`Canceling ${this.name()}`), o.default.nextTick((() => this.task.cancel())), this.canceled = !0, this.cancelPromise && o.default.nextTick((() => this.cancelPromise(new Error(`canceling ${this.name()}`)))) } } logDependencies() { if (this.logger.getLogLevel() > r.default.INFO) return; if (!this.dependencies) return; const e = this.dependencies.filter((e => e)).map((e => e.name())).join(", "); this.logger.info(`${this.task.name()} waiting for dependencies: ${e}`) } run() { if (this.promise) return this.promise; const e = this.dependencies ? Promise.all(this.dependencies.map((e => null == e ? void 0 : e.run()))) : Promise.resolve(); return this.logDependencies(), this.ongoing = e.then((() => this.task.run())), this.promise = new Promise(((e, t) => { this.cancelPromise = t, this.ongoing.then(e).catch(t) })) } setParent(e) { this.task.setParent(e) } } }, 406: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(7809), n = i(4123), s = i(1072); class a extends s.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "OpenSignalingConnectionTask", this.taskCanceler = null } cancel() { this.taskCanceler && (this.taskCanceler.cancel(), this.taskCanceler = null) } run() { return r(this, void 0, void 0, (function* () { const e = this.context.meetingSessionConfiguration; this.context.signalingClient.openConnection(new o.default(e.urls.signalingURL, e.credentials.joinToken)); const t = Date.now(); try { yield new Promise(((e, t) => { const i = new class { constructor(e) { this.signalingClient = e } cancel() { this.signalingClient.removeObserver(this), t(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection")) } handleSignalingClientEvent(i) { switch (i.type) { case n.default.WebSocketOpen: this.signalingClient.removeObserver(this), e(); break; case n.default.WebSocketFailed: this.signalingClient.removeObserver(this), t(new Error("WebSocket connection failed")) } } }(this.context.signalingClient); this.context.signalingClient.registerObserver(i), this.taskCanceler = i })) } catch (e) { throw e } finally { this.context.signalingOpenDurationMs = Math.round(Date.now() - t), this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`) } })) } } t.default = a }, 9154: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1072); class n extends o.default { constructor(e, t, i) { super(e), this.taskName = t, this.tasksToRunParallel = i; for (const e of i) e.setParent(this) } cancel() { for (const e of this.tasksToRunParallel) this.logger.info(`canceling parallel group task ${this.name()} subtask ${e.name()}`), e.cancel() } run() { return r(this, void 0, void 0, (function* () { const e = []; for (const t of this.tasksToRunParallel) this.logger.info(`parallel group task ${this.name()} running subtask ${t.name()}`), e.push(t.run()); const t = []; for (let i = 0; i < e.length; i++) { try { yield e[i] } catch (e) { t.push(`task ${this.tasksToRunParallel[i].name()} failed: ${e.message}`) } this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[i].name()}`) } if (t.length > 0) { const e = t.join(", "); this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`) } this.logger.info(`parallel group task ${this.name()} completed`) })) } } t.default = n }, 8717: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2388), n = i(4123), s = i(8330), a = i(1072); class d extends a.default { constructor(e, t, i) { super(e.logger), this.context = e, this.credentials = t, this.completionCallback = i, this.taskName = "PromoteToPrimaryMeetingTask", this.taskCanceler = null } cancel() { this.taskCanceler && (this.taskCanceler.cancel(), this.taskCanceler = null) } run() { return r(this, void 0, void 0, (function* () { this.context.signalingClient.ready() ? (this.context.signalingClient.promoteToPrimaryMeeting(this.credentials), this.context.logger.info("Sent request to join primary meeting"), yield this.receivePrimaryMeetingJoinAck()) : this.completionCallback(new o.MeetingSessionStatus(o.MeetingSessionStatusCode.SignalingRequestFailed)) })) } receivePrimaryMeetingJoinAck() { return new Promise(((e, t) => { const i = new class { constructor(e, t, i) { this.signalingClient = e, this.completionCallback = t, this.logger = i } cancel() { this.signalingClient.removeObserver(this), this.completionCallback(new o.MeetingSessionStatus(o.MeetingSessionStatusCode.SignalingRequestFailed)), e() } handleSignalingClientEvent(t) { t.isConnectionTerminated() && (this.signalingClient.removeObserver(this), this.logger.info("PromoteToPrimaryMeetingTask connection terminated"), this.completionCallback(new o.MeetingSessionStatus(o.MeetingSessionStatusCode.SignalingRequestFailed)), e()), t.type === n.default.ReceivedSignalFrame && t.message.type === s.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK && (this.signalingClient.removeObserver(this), this.logger.info("Got a primary meeting join ACK"), this.completionCallback(o.MeetingSessionStatus.fromSignalFrame(t.message)), e()) } }(this.context.signalingClient, this.completionCallback, this.context.logger); this.taskCanceler = i, this.context.signalingClient.registerObserver(i) })) } } t.default = d }, 6700: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1072); class n extends o.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "ReceiveAudioInputTask" } run() { var e, t; return r(this, void 0, void 0, (function* () { if (!(null === (t = null === (e = this.context.meetingSessionConfiguration) || void 0 === e ? void 0 : e.urls) || void 0 === t ? void 0 : t.audioHostURL)) return void this.context.logger.info("No audio connection: not acquiring audio input"); if (this.context.activeAudioInput) return void this.context.logger.info("an active audio input exists"); let i; try { i = yield this.context.mediaStreamBroker.acquireAudioInputStream() } catch (e) { this.context.logger.warn("could not acquire audio input from current device") } i ? this.context.activeAudioInput = i : this.context.logger.warn("an audio input is not available") })) } } t.default = n }, 701: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1736), n = i(6744), s = i(6878), a = i(8495), d = i(1072); class l extends d.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "ReceiveTURNCredentialsTask", this.url = e.meetingSessionConfiguration.urls.turnControlURL, this.meetingId = e.meetingSessionConfiguration.meetingId, this.joinToken = e.meetingSessionConfiguration.credentials.joinToken } cancel() { if (this.cancelPromise) { const e = new Error(`canceling ${this.name()}`); this.cancelPromise(e), delete this.cancelPromise } } run() { return r(this, void 0, void 0, (function* () { if (this.context.turnCredentials) return void this.context.logger.info("TURN credentials available, skipping credentials fetch"); if (this.context.logger.error("missing TURN credentials - falling back to fetch"), !this.url) return void this.context.logger.info("TURN control url not supplied, skipping credentials fetch"); const e = { method: "POST", mode: "cors", cache: "no-cache", credentials: "omit", headers: { "Content-Type": "application/json", "X-Chime-Auth-Token": "_aws_wt_session=" + new s.default(this.joinToken).base() }, redirect: "follow", referrer: "no-referrer", body: JSON.stringify({ meetingId: this.meetingId }) }; this.context.logger.info(`requesting TURN credentials from ${this.url}`); const t = yield new Promise(((t, i) => r(this, void 0, void 0, (function* () { this.cancelPromise = e => { i(e) }; try { const r = yield fetch(a.default.urlWithVersion(this.url), e); if (this.context.logger.info("received TURN credentials"), r.status && 403 === r.status) return void i(new Error(`canceling ${this.name()} due to the meeting status code: ${o.default.TURNCredentialsForbidden}`)); if (r.status && 404 === r.status) return void i(new Error(`canceling ${this.name()} due to the meeting status code: ${o.default.MeetingEnded}`)); t(yield r.json()) } catch (e) { i(e) } finally { delete this.cancelPromise } })))); this.context.turnCredentials = new n.default, this.context.turnCredentials.password = t.password, this.context.turnCredentials.ttl = t.ttl, this.context.turnCredentials.uris = t.uris.map((e => this.context.meetingSessionConfiguration.urls.urlRewriter(e))).filter((e => !!e)), this.context.turnCredentials.username = t.username })) } } t.default = l }, 6464: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(6878), n = i(8330), s = i(1072); class a extends s.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "ReceiveVideoInputTask" } run() { return r(this, void 0, void 0, (function* () { const e = this.context.videoDuplexMode === n.SdkStreamServiceType.RX || this.context.videoDuplexMode === n.SdkStreamServiceType.DUPLEX; if (this.context.videoTileController.hasStartedLocalVideoTile() ? this.context.videoDuplexMode = e ? n.SdkStreamServiceType.DUPLEX : n.SdkStreamServiceType.TX : this.context.videoDuplexMode = e ? n.SdkStreamServiceType.RX : 0, this.context.videoCaptureAndEncodeParameter = this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(), !this.context.videoTileController.hasStartedLocalVideoTile()) return this.context.logger.info("has not started local video tile"), void (this.context.activeVideoInput && (this.context.activeVideoInput = void 0, this.context.videoStreamIndex.integrateUplinkPolicyDecision([]))); const t = this.context.videoTileController.getLocalVideoTile(); let i; try { i = yield this.context.mediaStreamBroker.acquireVideoInputStream() } catch (e) { this.context.logger.warn("could not acquire video input from current device"), this.context.videoTileController.stopLocalVideoTile() } if (this.context.enableSimulcast) { const e = this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(); this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(e.values())) } if (this.context.activeVideoInput = i, i) { const e = i.getVideoTracks(); if (!e || 0 === e.length) return; const r = this.context.meetingSessionConfiguration.credentials.attendeeId, n = new o.default(r).hasModality(o.default.MODALITY_CONTENT), s = e[0].getSettings(); if (this.context.enableSimulcast && !n) { const t = this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints(); this.context.logger.info(`simulcast: choose constraint ${JSON.stringify(t)}`); try { yield e[0].applyConstraints(t) } catch (e) { this.context.logger.info("simulcast: pass video without more constraint") } } const a = this.context.audioVideoController.configuration.credentials.externalUserId; t.bindVideoStream(r, !0, i, s.width, s.height, null, a); for (let t = 0; t < e.length; t++) { const i = e[t]; this.logger.info(`using video device label=${i.label} id=${i.id}`), this.context.videoDeviceInformation.current_camera_name = i.label, this.context.videoDeviceInformation.current_camera_id = i.id } } })) } } t.default = a }, 7946: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(7840), n = i(6878), s = i(9064), a = i(4123), d = i(8330), l = i(2019), c = i(1072); class u extends c.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "ReceiveVideoStreamIndexTask", this.isIngestionPaused = !1, this.pendingIndex = null } removeObserver() { this.context.signalingClient.removeObserver(this) } run() { return r(this, void 0, void 0, (function* () { this.handleIndexFrame(this.context.indexFrame), this.context.signalingClient.registerObserver(this), this.context.removableObservers.push(this) })) } handleSignalingClientEvent(e) { if (e.type !== a.default.ReceivedSignalFrame || e.message.type !== d.SdkSignalFrame.Type.INDEX) return; const t = e.message.index; this.context.logger.info(`received new index ${JSON.stringify(t)}`), this.handleIndexFrame(t) } pauseIngestion() { this.isIngestionPaused = !0 } resumeIngestion() { this.isIngestionPaused && (this.isIngestionPaused = !1, this.pendingIndex && (this.context.logger.info("Resuming index ingestion with pending index"), this.handleIndexFrame(this.pendingIndex))) } handleIndexFrame(e) { if (!e) return; if (this.isIngestionPaused) return this.context.logger.info("Index ingestion is paused, setting most recent index as pending"), void (this.pendingIndex = e); this.pendingIndex = null; const t = this.context.audioVideoController.configuration.credentials.attendeeId; e.sources = e.sources.filter((e => { const i = new n.default(e.attendeeId); return !(i.base() === t && i.hasModality(n.default.MODALITY_CONTENT)) })); const { videoStreamIndex: i, videoDownlinkBandwidthPolicy: r, videoUplinkBandwidthPolicy: o } = this.context, s = i.allVideoSendingSourcesExcludingSelf(t); i.integrateIndexFrame(e), r.updateIndex(i), o.updateIndex(i), this.resubscribe(r, o), this.updateVideoAvailability(e), this.handleIndexVideosPausedAtSource(), e.supportedReceiveCodecIntersection.length > 0 && this.handleSupportedVideoReceiveCodecIntersection(e); const a = i.allVideoSendingSourcesExcludingSelf(t); this.areVideoSourcesEqual(s, a) || this.context.audioVideoController.forEachObserver((e => { l.Maybe.of(e.remoteVideoSourcesDidChange).map((t => t.bind(e)(a))) })) } areVideoSourcesEqual(e, t) { if (e.length !== t.length) return !1; const i = (e, t) => e.attendee.attendeeId.localeCompare(t.attendee.attendeeId), r = [...e].sort(i), o = [...t].sort(i); for (let e = 0; e < r.length; e++)if (r[e].attendee.attendeeId !== o[e].attendee.attendeeId) return !1; return !0 } resubscribe(e, t) { const i = e.wantsResubscribe(), r = (this.context.videoDuplexMode === d.SdkStreamServiceType.TX || this.context.videoDuplexMode === d.SdkStreamServiceType.DUPLEX) && t.wantsResubscribe(), o = i || r; if (this.logger.info(`should resubscribe: ${o} (downlink: ${i} uplink: ${r})`), !o) return; const n = e.chooseSubscriptions(); this.context.videosToReceive = n.truncate(this.context.videoSubscriptionLimit), n.size() > this.context.videosToReceive.size() && this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`), this.context.videoCaptureAndEncodeParameter = t.chooseCaptureAndEncodeParameters(), this.logger.info(`trigger resubscribe for up=${r} down=${i}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`), this.context.audioVideoController.update({ needsRenegotiation: !1 }) } updateVideoAvailability(e) { if (!this.context.videosToReceive) return void this.logger.error("videosToReceive must be set in the meeting context."); const t = new o.default; t.remoteVideoAvailable = !this.context.videosToReceive.empty(), t.canStartLocalVideo = !e.atCapacity, this.context.lastKnownVideoAvailability && this.context.lastKnownVideoAvailability.equal(t) || (this.context.lastKnownVideoAvailability = t.clone(), this.context.audioVideoController.forEachObserver((e => { l.Maybe.of(e.videoAvailabilityDidChange).map((i => i.bind(e)(t.clone()))) }))) } handleSupportedVideoReceiveCodecIntersection(e) { if (void 0 === this.context.videoSendCodecPreferences) return; const t = []; let i = !1; for (const r of this.context.videoSendCodecPreferences) { for (const i of e.supportedReceiveCodecIntersection) if (r.equals(s.default.fromSignaled(i))) { t.push(r); break } r.equals(this.context.currentVideoSendCodec) && (i = !0) } t.length > 0 ? this.context.meetingSupportedVideoSendCodecPreferences = t : (this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"), this.context.meetingSupportedVideoSendCodecPreferences = void 0), i && this.context.audioVideoController.update({ needsRenegotiation: !0 }) } handleIndexVideosPausedAtSource() { const e = this.context.videoStreamIndex.streamsPausedAtSource(); for (const t of this.context.videoTileController.getAllVideoTiles()) { const i = t.state(); e.contain(i.streamId) ? t.markPoorConnection() && this.logger.info(`marks the tile ${i.tileId} as having a poor connection`) : t.unmarkPoorConnection() && this.logger.info(`unmarks the tile ${i.tileId} as having a poor connection`) } } } t.default = u }, 8493: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(1072); class o extends r.default { constructor(e, t, i = "RunnableTask") { super(e), this.fn = t, this.taskName = i } run() { return this.fn().then((() => { })) } } t.default = o }, 1967: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(3727), n = i(4123), s = i(8330), a = i(1072); class d extends a.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "SendAndReceiveDataMessagesTask", this.sendDataMessageHandler = (e, t, i) => { if (this.context.signalingClient.ready()) { let r; r = t instanceof Uint8Array ? t : "string" == typeof t ? (new TextEncoder).encode(t) : (new TextEncoder).encode(JSON.stringify(t)), this.validateDataMessage(e, r, i); const o = s.SdkDataMessagePayload.create(); o.topic = e, o.lifetimeMs = i, o.data = r; const n = s.SdkDataMessageFrame.create(); n.messages = [o], this.context.signalingClient.sendDataMessage(n) } else this.context.logger.error("Signaling client is not ready") } } run() { return r(this, void 0, void 0, (function* () { this.context.removableObservers.push(this), this.context.signalingClient.registerObserver(this), this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler) })) } removeObserver() { this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler), this.context.signalingClient.removeObserver(this) } handleSignalingClientEvent(e) { if (e.type === n.default.ReceivedSignalFrame && e.message.type === s.SdkSignalFrame.Type.DATA_MESSAGE) for (const t of e.message.dataMessage.messages) { const e = new o.default(t.ingestTimeNs / 1e6, t.topic, t.data, t.senderAttendeeId, t.senderExternalUserId, 0 === t.ingestTimeNs); this.context.realtimeController.realtimeReceiveDataMessage(e) } } validateDataMessage(e, t, i) { if (!d.TOPIC_REGEX.test(e)) throw new Error("Invalid topic"); if (t.length > d.DATA_SIZE) throw new Error("Data size has to be less than 2048 bytes"); if (i && i < 0) throw new Error("The life time of the message has to be non negative") } } t.default = d, d.TOPIC_REGEX = new RegExp(/^[a-zA-Z0-9_-]{1,36}$/), d.DATA_SIZE = 2048 }, 9231: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1072), n = i(5049); class s extends o.default { constructor(e, t, i) { super(e), this.taskName = t, this.tasksToRunSerially = i, this.currentTask = null; for (const e of i) e.setParent(this) } cancel() { this.currentTask && (this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`), this.currentTask.cancel()) } run() { return r(this, void 0, void 0, (function* () { for (const e of this.tasksToRunSerially) { this.getStatus() === n.default.CANCELED && this.logAndThrow(`serial group task ${this.name()} was canceled`); try { this.logger.info(`serial group task ${this.name()} running subtask ${e.name()}`), this.currentTask = e, yield e.run(), this.logger.info(`serial group task ${this.name()} completed subtask ${e.name()}`) } catch (e) { this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`) } finally { this.currentTask = null } } this.logger.info(`serial group task ${this.name()} completed`) })) } } t.default = s }, 686: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9297), n = i(4052), s = i(1072); class a extends s.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "SetLocalDescriptionTask" } cancel() { if (this.cancelPromise) { const e = new Error(`canceling ${this.name()}`); this.cancelPromise(e), delete this.cancelPromise } } run() { return r(this, void 0, void 0, (function* () { const e = this.context.peer; let t = this.context.sdpOfferInit.sdp; this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension() && (t = new n.default(t).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp), (new o.default).requiresDisablingH264Encoding() && (t = new n.default(t).removeH264SupportFromSendSection().sdp), void 0 !== this.context.videoSendCodecPreferences && this.context.videoSendCodecPreferences.length > 0 && (t = new n.default(t).withVideoSendCodecPreferences(void 0 !== this.context.meetingSupportedVideoSendCodecPreferences ? this.context.meetingSupportedVideoSendCodecPreferences : this.context.videoSendCodecPreferences).sdp), this.context.audioProfile && (t = new n.default(t).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp, this.context.audioProfile.isStereo() && (t = new n.default(t).withStereoAudio().sdp)), this.logger.debug((() => `local description is >>>${t}<<<`)); const i = { type: "offer", sdp: t, toJSON: null }; yield new Promise(((t, o) => r(this, void 0, void 0, (function* () { this.cancelPromise = e => { o(e) }; try { yield e.setLocalDescription(i), t() } catch (e) { o(e) } finally { delete this.cancelPromise } })))), this.context.logger.info("set local description") })) } } t.default = a }, 9203: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(4052), n = i(1072); class s extends n.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "SetRemoteDescriptionTask" } cancel() { this.cancelICEPromise && this.cancelICEPromise() } run() { return r(this, void 0, void 0, (function* () { this.context.peer || this.logAndThrow("session does not have peer connection; bypass set remote description"); let e = this.context.sdpAnswer; e = new o.default(e).withoutServerReflexiveCandidates().sdp, this.context.audioProfile && (e = new o.default(e).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp, this.context.audioProfile.isStereo() && (e = new o.default(e).withStereoAudio().sdp)), void 0 !== this.context.videoSendCodecPreferences && this.context.videoSendCodecPreferences.length > 0 && (e = new o.default(e).withVideoSendCodecPreferences(void 0 !== this.context.meetingSupportedVideoSendCodecPreferences ? this.context.meetingSupportedVideoSendCodecPreferences : this.context.videoSendCodecPreferences).sdp, this.context.currentVideoSendCodec = new o.default(e).highestPriorityVideoSendCodec()), this.logger.info(`processed remote description is >>>${e}<<<`); const t = { type: "answer", sdp: e, toJSON: null }; try { yield this.createICEConnectionCompletedPromise(t) } catch (e) { throw e } })) } createICEConnectionCompletedPromise(e) { return new Promise(((t, i) => r(this, void 0, void 0, (function* () { const r = () => { "connected" !== this.context.peer.iceConnectionState && "completed" !== this.context.peer.iceConnectionState || (this.context.peer.removeEventListener("iceconnectionstatechange", r), t()) }; this.cancelICEPromise = () => { this.context.peer && this.context.peer.removeEventListener("iceconnectionstatechange", r), i(new Error(`${this.name()} got canceled while waiting for the ICE connection state`)) }, this.context.peer.addEventListener("iceconnectionstatechange", r); try { yield this.context.peer.setRemoteDescription(e), this.logger.info("set remote description, waiting for ICE connection"), r() } catch (e) { i(e) } })))) } } t.default = s }, 3913: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(5956), n = i(1736), s = i(4052), a = i(6195), d = i(3191), l = i(4123), c = i(2190), u = i(2402), h = i(8330), p = i(1072); class m extends p.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "SubscribeAndReceiveSubscribeAckTask", this.taskCanceler = null, this.textCompressor = new a.default(e.logger) } cancel() { this.taskCanceler && (this.taskCanceler.cancel(), this.taskCanceler = null) } run() { return r(this, void 0, void 0, (function* () { let e = ""; if (this.context.peer && this.context.peer.localDescription && (e = new s.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp), !this.context.enableSimulcast) { let e = 0, t = 0; this.context.videoCaptureAndEncodeParameter && (e = this.context.videoCaptureAndEncodeParameter.captureFrameRate(), t = this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]); const i = { rid: "hi", maxBitrate: 1e3 * t, maxFramerate: e, active: !0 }; this.context.videoStreamIndex.integrateUplinkPolicyDecision([i]) } this.context.videoStreamIndex.subscribeFrameSent(); const t = this.fixUpSubscriptionOrder(e, this.context.videoSubscriptions), i = this.context.videoDuplexMode === h.SdkStreamServiceType.TX || this.context.videoDuplexMode === h.SdkStreamServiceType.DUPLEX; let r; const o = e; if (this.context.serverSupportsCompression) { const t = this.context.previousSdpOffer ? this.context.previousSdpOffer.sdp : ""; r = this.textCompressor.compress(o, t), this.context.logger.info(`Compressed the SDP message from ${o.length} to ${r.length} bytes.`), e = "" } this.context.previousSdpOffer = new s.default(o); const n = new c.default(this.context.meetingSessionConfiguration.credentials.attendeeId, e, this.context.meetingSessionConfiguration.urls.audioHostURL, this.context.realtimeController.realtimeIsLocalAudioMuted(), !1, t, i, this.context.videoStreamIndex.localStreamDescriptions(), !0, r); void 0 !== this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption && this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption() !== d.default.None && void 0 !== this.context.videoDownlinkBandwidthPolicy.getVideoPreferences && (n.videoSubscriptionConfiguration = this.convertVideoPreferencesToVideoSubscriptionConfiguration(t, this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())), this.context.logger.info(`sending subscribe: ${JSON.stringify(n)}`), this.context.signalingClient.subscribe(n); const a = yield this.receiveSubscribeAck(); this.context.logger.info(`got subscribe ack: ${JSON.stringify(a)}`); let l = ""; a.compressedSdpAnswer && a.compressedSdpAnswer.length ? (l = this.textCompressor.decompress(a.compressedSdpAnswer, this.context.previousSdpAnswerAsString), 0 === l.length && (this.context.sdpAnswer = "", this.context.previousSdpAnswerAsString = "", this.logAndThrow("Error occurred while trying to decompress the SDP answer.")), this.context.logger.info(`Decompressed the SDP message from ${a.compressedSdpAnswer.length} to ${l.length} bytes.`), this.context.sdpAnswer = l) : this.context.sdpAnswer = a.sdpAnswer, this.context.previousSdpAnswerAsString = this.context.sdpAnswer, this.context.videoStreamIndex.integrateSubscribeAckFrame(a) })) } fixUpSubscriptionOrder(e, t) { if (void 0 === this.context.transceiverController.getMidForStreamId) return t; const i = new Map; for (const e of t) { const t = this.context.transceiverController.getMidForStreamId(e); void 0 !== t ? i.set(t, e) : 0 !== e && this.logger.warn(`Could not find MID for stream ID: ${e}`) } const r = new s.default(e).mediaSections(), o = []; for (const e of r) if ("video" === e.mediaType) if ("recvonly" === e.direction) { const t = i.get(e.mid); if (void 0 === t) { this.logger.warn(`Could not find stream ID for MID: ${e.mid}`); continue } o.push(t) } else o.push(0); return this.logger.info(`Fixed up ${JSON.stringify(t)} to ${JSON.stringify(o)} (may be same))}`), o } convertVideoPreferencesToVideoSubscriptionConfiguration(e, t) { if (void 0 === this.context.transceiverController.getMidForStreamId || void 0 === t) return []; const i = new Array, r = new Map, o = new Map; for (const t of e) { const e = this.context.transceiverController.getMidForStreamId(t); if (void 0 === e) { 0 !== t && this.context.logger.warn(`Could not find MID for stream ID: ${t}`); continue } const i = this.context.videoStreamIndex.attendeeIdForStreamId(t); r.set(i, e), o.set(i, this.context.videoStreamIndex.groupIdForStreamId(t)) } for (const e of t) { const t = new u.default, n = r.get(e.attendeeId); void 0 !== n ? (t.mid = n, t.attendeeId = e.attendeeId, t.groupId = o.get(e.attendeeId), t.priority = Number.MAX_SAFE_INTEGER - e.priority, t.targetBitrateKbps = e.targetSizeToBitrateKbps(e.targetSize), i.push(t)) : this.context.logger.warn(`Could not find MID for attendee ID: ${e.attendeeId}`) } return i } receiveSubscribeAck() { return new Promise(((e, t) => { const i = this.context, r = new class { constructor(e) { this.signalingClient = e } cancel() { this.signalingClient.removeObserver(this), t(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame")) } handleSignalingClientEvent(t) { if (t.isConnectionTerminated()) { const e = `SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${t.closeCode} and reason: ${t.closeReason}`; i.logger.warn(e); let r = n.default.TaskFailed; return t.closeCode >= 4500 && t.closeCode < 4600 && (r = n.default.SignalingInternalServerError), void i.audioVideoController.handleMeetingSessionStatus(new o.default(r), new Error(e)) } if (t.type !== l.default.ReceivedSignalFrame || t.message.type !== h.SdkSignalFrame.Type.SUBSCRIBE_ACK) return; this.signalingClient.removeObserver(this); const r = t.message.suback; e(r) } }(this.context.signalingClient); this.context.signalingClient.registerObserver(r), this.taskCanceler = r })) } } t.default = m }, 5049: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), function (e) { e.IDLE = "IDLE", e.RUNNING = "RUNNING", e.CANCELED = "CANCELED", e.FINISHED = "FINISHED" }(i || (i = {})), t.default = i }, 251: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2405), n = i(1072); class s extends n.default { constructor(e, t, i) { super(e), this.taskToRunBeforeTimeout = t, this.timeoutMs = i, this.taskName = `Timeout${this.timeoutMs}ms`, t.setParent(this) } cancel() { this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`), this.taskToRunBeforeTimeout.cancel() } run() { return r(this, void 0, void 0, (function* () { const e = new o.default(this.timeoutMs); e.start((() => { this.logger.info(`timeout reached for task ${this.name()}`), this.taskToRunBeforeTimeout.cancel() })); try { yield this.taskToRunBeforeTimeout.run() } finally { e.stop() } this.logger.info(`timeout task ${this.name()} completed`) })) } } t.default = s }, 5859: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1736), n = i(1072); class s extends n.default { constructor(e) { super(e.logger), this.context = e, this.taskName = "WaitForAttendeePresenceTask" } cancel() { if (this.cancelPromise) { const e = new Error(`canceling ${this.name()} due to the meeting status code: ${o.default.NoAttendeePresent}`); this.cancelPromise(e), delete this.cancelPromise } } run() { return r(this, void 0, void 0, (function* () { const e = this.context.meetingSessionConfiguration.credentials.attendeeId; return new Promise(((t, i) => { const r = (i, o, n, s, a) => { e === i && o && (this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r), t(), delete this.cancelPromise) }; this.cancelPromise = e => { this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(r), i(e) }, this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(r) })) })) } } t.default = s }, 1580: function (e, t) { "use strict"; var i = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e, t) { this.logger = e, this.browserBehavior = t, this._localCameraTransceiver = null, this._localAudioTransceiver = null, this.videoSubscriptions = [], this.defaultMediaStream = null, this.peer = null, this.streamIdToTransceiver = new Map } setEncodingParameters(e) { return i(this, void 0, void 0, (function* () { if (!this._localCameraTransceiver || "sendrecv" !== this._localCameraTransceiver.direction) return; const t = this._localCameraTransceiver.sender; if (!e || 0 === e.size) return; const i = Array.from(e.values()), r = t.getParameters(); if (r.encodings && 0 !== r.encodings.length) for (const e of r.encodings) for (const t of i) { if ((e.rid || t.rid) && e.rid !== t.rid) continue; let i; for (i in t) "rid" !== i && "codecPayloadType" !== i && t.hasOwnProperty(i) && (e[i] = t[i]) } else r.encodings = i; yield t.setParameters(r) })) } localAudioTransceiver() { return this._localAudioTransceiver } localVideoTransceiver() { return this._localCameraTransceiver } setVideoSendingBitrateKbps(e) { return i(this, void 0, void 0, (function* () { if (!this._localCameraTransceiver || "sendrecv" !== this._localCameraTransceiver.direction) return; const t = this._localCameraTransceiver.sender; if (!t || e <= 0) return; const i = t.getParameters(); i.encodings || (i.encodings = [{}]); for (const t of i.encodings) t.maxBitrate = 1e3 * e; yield t.setParameters(i) })) } setPeer(e) { this.peer = e } reset() { this._localCameraTransceiver = null, this._localAudioTransceiver = null, this.videoSubscriptions = [], this.defaultMediaStream = null, this.peer = null } useTransceivers() { return !!this.peer && void 0 !== this.peer.getTransceivers } hasVideoInput() { return !(!this._localCameraTransceiver || "sendrecv" !== this._localCameraTransceiver.direction) } trackIsVideoInput(e) { return !!this._localCameraTransceiver && (e === this._localCameraTransceiver.sender.track || e === this._localCameraTransceiver.receiver.track) } setupLocalTransceivers() { this.useTransceivers() && (this.defaultMediaStream || "undefined" == typeof MediaStream || (this.defaultMediaStream = new MediaStream), this._localAudioTransceiver || (this._localAudioTransceiver = this.peer.addTransceiver("audio", { direction: "inactive", streams: [this.defaultMediaStream] })), this._localCameraTransceiver || (this._localCameraTransceiver = this.peer.addTransceiver("video", { direction: "inactive", streams: [this.defaultMediaStream] }))) } replaceAudioTrack(e) { return i(this, void 0, void 0, (function* () { return this._localAudioTransceiver && "sendrecv" === this._localAudioTransceiver.direction ? (yield this._localAudioTransceiver.sender.replaceTrack(e), !0) : (this.logger.info("audio transceiver direction is not set up or not activated"), !1) })) } setAudioInput(e) { return i(this, void 0, void 0, (function* () { yield this.setTransceiverInput(this._localAudioTransceiver, e) })) } setVideoInput(e) { return i(this, void 0, void 0, (function* () { yield this.setTransceiverInput(this._localCameraTransceiver, e) })) } updateVideoTransceivers(e, t) { if (!this.useTransceivers()) return t.array(); const i = this.peer.getTransceivers(); return this.videoSubscriptions = [0], t = t.clone(), this.updateTransceivers(i, e, t), this.logger.debug((() => this.debugDumpTransceivers())), this.videoSubscriptions } updateTransceivers(e, t, i) { const r = i.array(); 0 === e.length || e[0].stop ? 0 !== e.length && this.updateTransceiverWithStop(e, t, r) : (this.logger.info("Updating transceivers without `stop` function"), this.updateTransceiverWithoutStop(e, t, r)); for (const e of r) { const t = this.peer.addTransceiver("video", { direction: "recvonly", streams: [new MediaStream] }); this.streamIdToTransceiver.set(e, t), this.videoSubscriptions.push(e), this.logger.info(`adding transceiver mid: ${t.mid} subscription: ${e} direction: recvonly`) } } updateTransceiverWithStop(e, t, i) { let r = 1; this.videoSubscriptions = [0]; for (const o of e) { if (o === this._localCameraTransceiver || !this.transceiverIsVideo(o) || !o.mid) continue; let e = !1; const n = t.streamIdForTrack("v_" + o.mid); if ("inactive" !== o.direction && void 0 !== n) for (const [s, a] of i.entries()) if (t.StreamIdsInSameGroup(n, a)) { o.direction = "recvonly", this.videoSubscriptions[r] = a, e = !0, this.streamIdToTransceiver.delete(n), this.streamIdToTransceiver.set(a, o), i.splice(s, 1); break } if (!e) { this.videoSubscriptions[r] = 0, this.logger.info(`Stopping MID: ${o.mid}, direction: ${o.direction}, current direction: ${o.currentDirection}`), o.stop(); for (const [e, t] of this.streamIdToTransceiver.entries()) o.mid === t.mid && this.streamIdToTransceiver.delete(e) } r += 1 } } updateTransceiverWithoutStop(e, t, i) { let r = 1; for (const o of e) if (o !== this._localCameraTransceiver && this.transceiverIsVideo(o)) { if (this.videoSubscriptions[r] = 0, "inactive" !== o.direction) { const e = t.streamIdForTrack("v_" + o.mid); if (void 0 !== e) for (const [n, s] of i.entries()) if (t.StreamIdsInSameGroup(e, s)) { o.direction = "recvonly", this.videoSubscriptions[r] = s, this.streamIdToTransceiver.delete(e), this.streamIdToTransceiver.set(s, o), i.splice(n, 1); break } } r += 1 } r = 1; for (const t of e) if (t !== this._localCameraTransceiver && this.transceiverIsVideo(t)) { if ("inactive" === t.direction && i.length > 0) { t.direction = "recvonly"; const e = i.shift(); this.videoSubscriptions[r] = e, this.streamIdToTransceiver.set(e, t) } else if (0 === this.videoSubscriptions[r]) { t.direction = "inactive"; for (const [e, i] of this.streamIdToTransceiver.entries()) t === i && this.streamIdToTransceiver.delete(e) } r += 1 } } getMidForStreamId(e) { var t; return null === (t = this.streamIdToTransceiver.get(e)) || void 0 === t ? void 0 : t.mid } setStreamIdForMid(e, t) { for (const [i, r] of this.streamIdToTransceiver.entries()) if (r.mid === e) return this.streamIdToTransceiver.delete(i), void this.streamIdToTransceiver.set(t, r) } transceiverIsVideo(e) { return e.receiver && e.receiver.track && "video" === e.receiver.track.kind || e.sender && e.sender.track && "video" === e.sender.track.kind } debugDumpTransceivers() { let e = "", t = 0; for (const i of this.peer.getTransceivers()) this.transceiverIsVideo(i) && (e += `transceiver index=${t} mid=${i.mid} subscription=${this.videoSubscriptions[t]} direction=${i.direction}\n`, t += 1); return e } setTransceiverInput(e, t) { return i(this, void 0, void 0, (function* () { e && (e.direction = t ? "sendrecv" : "inactive", yield e.sender.replaceTrack(t)) })) } } }, 2559: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2205); class n extends o.default { constructor(e, t) { super(e, t); let i = 2; this.videoQualityControlParameterMap = new Map; for (let e = 0; e < n.NAME_ARR_ASCENDING.length; e++) { const t = n.NAME_ARR_ASCENDING[e]; this.videoQualityControlParameterMap.set(t, { rid: t, scaleResolutionDownBy: i, maxBitrate: 1e3 * n.BITRATE_ARR_ASCENDING[e] }), i /= 2 } } setEncodingParameters(e) { return r(this, void 0, void 0, (function* () { if (!this._localCameraTransceiver || "sendrecv" !== this._localCameraTransceiver.direction) return; const t = this._localCameraTransceiver.sender, i = Array.from(e.values()); if (i.length <= 0) return; const r = t.getParameters(); if (r.encodings) for (let t = 0; t < r.encodings.length; t++)r.encodings[t].rid === o.default.LOW_LEVEL_NAME && this.copyEncodingParams(e.get(o.default.LOW_LEVEL_NAME), r.encodings[t]), r.encodings[t].rid === o.default.HIGH_LEVEL_NAME && this.copyEncodingParams(e.get(o.default.HIGH_LEVEL_NAME), r.encodings[t]); else r.encodings = i; yield t.setParameters(r), this.logVideoTransceiverParameters() })) } } t.default = n, n.NAME_ARR_ASCENDING = ["low", "hi"], n.BITRATE_ARR_ASCENDING = [300, 1200] }, 2205: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(1580); class n extends o.default { constructor(e, t) { super(e, t), this.videoQualityControlParameterMap = new Map; let i = 4; for (let e = 0; e < n.NAME_ARR_ASCENDING.length; e++) { const t = n.NAME_ARR_ASCENDING[e]; this.videoQualityControlParameterMap.set(t, { rid: t, scaleResolutionDownBy: i, maxBitrate: 1e3 * n.BITRATE_ARR_ASCENDING[e] }), i /= 2 } } setEncodingParameters(e) { return r(this, void 0, void 0, (function* () { if (!this._localCameraTransceiver || "sendrecv" !== this._localCameraTransceiver.direction) return; const t = this._localCameraTransceiver.sender, i = Array.from(e.values()); if (i.length <= 0) return; const r = t.getParameters(); if (r.encodings) for (let t = 0; t < r.encodings.length; t++)r.encodings[t].rid === n.LOW_LEVEL_NAME && this.copyEncodingParams(e.get(n.LOW_LEVEL_NAME), r.encodings[t]), r.encodings[t].rid === n.MID_LEVEL_NAME && this.copyEncodingParams(e.get(n.MID_LEVEL_NAME), r.encodings[t]), r.encodings[t].rid === n.HIGH_LEVEL_NAME && this.copyEncodingParams(e.get(n.HIGH_LEVEL_NAME), r.encodings[t]); else r.encodings = i; yield t.setParameters(r), this.logVideoTransceiverParameters() })) } setVideoSendingBitrateKbps(e) { return r(this, void 0, void 0, (function* () { })) } setupLocalTransceivers() { if (this.useTransceivers() && (this.defaultMediaStream || "undefined" == typeof MediaStream || (this.defaultMediaStream = new MediaStream), this._localAudioTransceiver || (this._localAudioTransceiver = this.peer.addTransceiver("audio", { direction: "inactive", streams: [this.defaultMediaStream] })), !this._localCameraTransceiver)) { const e = Array.from(this.videoQualityControlParameterMap.values()); this._localCameraTransceiver = this.peer.addTransceiver("video", { direction: "inactive", streams: [this.defaultMediaStream], sendEncodings: e }) } } logVideoTransceiverParameters() { const e = this._localCameraTransceiver.sender.getParameters().encodings; let t = "simulcast: current encoding parameters \n"; for (const i of e) t += `rid=${i.rid} maxBitrate=${i.maxBitrate} active=${i.active} scaleDownBy=${i.scaleResolutionDownBy} maxFrameRate = ${i.maxFramerate} \n`; this.logger.info(t) } copyEncodingParams(e, t) { t.active = e.active, t.maxBitrate = e.maxBitrate, t.scaleResolutionDownBy = e.scaleResolutionDownBy, t.maxFramerate = e.maxFramerate } } t.default = n, n.LOW_LEVEL_NAME = "low", n.MID_LEVEL_NAME = "mid", n.HIGH_LEVEL_NAME = "hi", n.NAME_ARR_ASCENDING = ["low", "mid", "hi"], n.BITRATE_ARR_ASCENDING = [200, 400, 1100] }, 1706: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(1580); class o extends r.default { constructor(e, t) { super(e, t) } setupLocalTransceivers() { this.useTransceivers() && (this.defaultMediaStream || "undefined" == typeof MediaStream || (this.defaultMediaStream = new MediaStream), this._localCameraTransceiver || (this._localCameraTransceiver = this.peer.addTransceiver("video", { direction: "inactive", streams: [this.defaultMediaStream] }))) } } t.default = o }, 797: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.TRANSCRIPTION_DATA_MESSAGE_TOPIC = void 0; const r = i(1800); t.TRANSCRIPTION_DATA_MESSAGE_TOPIC = "aws:chime:transcription", t.default = class { constructor(e) { this.realtimeController = e, this.transcriptEventCallbacks = new Set } subscribeToTranscriptEvent(e) { 0 === this.transcriptEventCallbacks.size && this.realtimeController.realtimeSubscribeToReceiveDataMessage(t.TRANSCRIPTION_DATA_MESSAGE_TOPIC, (e => { for (const t of r.TranscriptEventConverter.from(e)) for (const e of this.transcriptEventCallbacks) e(t) })), this.transcriptEventCallbacks.add(e) } unsubscribeFromTranscriptEvent(e) { this.transcriptEventCallbacks.delete(e), 0 === this.transcriptEventCallbacks.size && this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(t.TRANSCRIPTION_DATA_MESSAGE_TOPIC) } } }, 9337: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 6412: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 761: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 1800: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.TranscriptEventConverter = void 0; const r = i(8330), o = i(9337), n = i(1816), s = i(3590), a = i(8152), d = { [r.SdkTranscriptionStatus.Type.STARTED]: s.default.STARTED, [r.SdkTranscriptionStatus.Type.INTERRUPTED]: s.default.INTERRUPTED, [r.SdkTranscriptionStatus.Type.RESUMED]: s.default.RESUMED, [r.SdkTranscriptionStatus.Type.STOPPED]: s.default.STOPPED, [r.SdkTranscriptionStatus.Type.FAILED]: s.default.FAILED }; t.TranscriptEventConverter = class { static from(e) { let t; try { t = r.SdkTranscriptFrame.decode(e.data) } catch (e) { throw new Error("Cannot decode transcript data message: " + e) } const i = []; for (const e of t.events) if (e.status) { const t = d[e.status.type]; if (!t) continue; const r = new n.default; r.type = t, r.eventTimeMs = e.status.eventTime, r.transcriptionRegion = e.status.transcriptionRegion, r.transcriptionConfiguration = e.status.transcriptionConfiguration, e.status.message && (r.message = e.status.message), i.push(r) } else if (e.transcript) { const t = new o.default; t.results = []; for (const i of e.transcript.results) { const e = { channelId: i.channelId, isPartial: i.isPartial, resultId: i.resultId, startTimeMs: i.startTime, endTimeMs: i.endTime, alternatives: [] }; if (i.languageCode && (e.languageCode = i.languageCode), i.languageIdentification && i.languageIdentification.length > 0) { e.languageIdentification = []; for (const t of i.languageIdentification) { const i = { languageCode: t.languageCode, score: t.score }; e.languageIdentification.push(i) } } for (const t of i.alternatives) { const i = { items: [], transcript: t.transcript }; for (const e of t.items) { const t = { content: e.content, attendee: { attendeeId: e.speakerAttendeeId, externalUserId: e.speakerExternalUserId }, startTimeMs: e.startTime, endTimeMs: e.endTime, type: null }; switch (e.vocabularyFilterMatch && (t.vocabularyFilterMatch = e.vocabularyFilterMatch), e.hasOwnProperty("stable") && (t.stable = e.stable), e.hasOwnProperty("confidence") && (t.confidence = e.confidence), e.type) { case r.SdkTranscriptItem.Type.PRONUNCIATION: t.type = a.default.PRONUNCIATION; break; case r.SdkTranscriptItem.Type.PUNCTUATION: t.type = a.default.PUNCTUATION }i.items.push(t) } for (const e of t.entities) { i.entities || (i.entities = []); const t = { category: e.category, confidence: e.confidence, content: e.content, startTimeMs: e.startTime, endTimeMs: e.endTime }; e.type && (t.type = e.type), i.entities.push(t) } e.alternatives.push(i) } t.results.push(e) } i.push(t) } return i } } }, 4234: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 8152: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), function (e) { e.PRONUNCIATION = "pronunciation", e.PUNCTUATION = "punctuation" }(i || (i = {})), t.default = i }, 2780: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 8197: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 1816: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 3590: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), function (e) { e.STARTED = "started", e.INTERRUPTED = "interrupted", e.RESUMED = "resumed", e.STOPPED = "stopped", e.FAILED = "failed" }(i || (i = {})), t.default = i }, 1971: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(6353), o = i(8495); class n { constructor(e) { var t, i, o, s, a, d, l; try { this.parserResult = navigator && navigator.userAgent ? new r.UAParser(navigator.userAgent).getResult() : void 0 } catch (t) { e.error(t.message) } this.browserMajorVersion = (null === (o = null === (i = null === (t = this.parserResult) || void 0 === t ? void 0 : t.browser) || void 0 === i ? void 0 : i.version) || void 0 === o ? void 0 : o.split(".")[0]) || n.UNAVAILABLE, this.browserName = (null === (s = this.parserResult) || void 0 === s ? void 0 : s.browser.name) || n.UNAVAILABLE, this.browserVersion = (null === (a = this.parserResult) || void 0 === a ? void 0 : a.browser.version) || n.UNAVAILABLE, this.deviceName = [(null === (d = this.parserResult) || void 0 === d ? void 0 : d.device.vendor) || "", (null === (l = this.parserResult) || void 0 === l ? void 0 : l.device.model) || ""].join(" ").trim() || n.UNAVAILABLE } getParserResult() { var e, t; return { browserMajorVersion: this.browserMajorVersion, browserName: this.browserName, browserVersion: this.browserVersion, deviceName: this.deviceName, osName: (null === (e = this.parserResult) || void 0 === e ? void 0 : e.os.name) || n.UNAVAILABLE, osVersion: (null === (t = this.parserResult) || void 0 === t ? void 0 : t.os.version) || n.UNAVAILABLE, sdkVersion: o.default.sdkVersion, sdkName: o.default.sdkName } } } t.default = n, n.UNAVAILABLE = "Unavailable" }, 5849: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.queue = Promise.resolve() } add(e) { return new Promise(((t, i) => { this.queue = this.queue.then(e).then(t).catch(i) })) } } }, 2019: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.None = t.Some = t.Maybe = void 0; class i { static of(e) { return null == e ? o.of() : r.of(e) } } t.Maybe = i; class r { constructor(e) { this.value = e, this.isSome = !0, this.isNone = !1 } map(e) { return i.of(e(this.value)) } flatMap(e) { return e(this.value) } get() { return this.value } getOrElse(e) { return this.value } defaulting(e) { return i.of(this.getOrElse(e)) } static of(e) { if (null == e) throw new Error("value is ${value}"); return new r(e) } } t.Some = r; class o { constructor() { this.isSome = !1, this.isNone = !0 } get() { throw new Error("value is null") } getOrElse(e) { return e } map(e) { return new o } flatMap(e) { return new o } defaulting(e) { return i.of(this.getOrElse(e)) } static of() { return new o } } t.None = o }, 7442: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.toLowerCasePropertyNames = t.isIFramed = t.wait = void 0, t.wait = function (e) { return new Promise((t => setTimeout(t, e))) }, t.isIFramed = function () { var e; try { return "IFRAME" === (null === (e = window.frameElement) || void 0 === e ? void 0 : e.nodeName) || parent !== top } catch (e) { return !0 } }, t.toLowerCasePropertyNames = function e(t) { return null === t ? null : "object" != typeof t ? t : Array.isArray(t) ? t.map(e) : Object.keys(t).reduce(((i, r) => { const o = t[r], n = "object" == typeof o ? e(o) : o; return i[r.toLowerCase()] = n, i }), {}) } }, 8495: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9297), o = i(8976); class n { static get sdkName() { return "amazon-chime-sdk-js" } static get sdkVersion() { return o.default.semverString } static get sdkVersionSemVer() { var e, t, i, r; const n = o.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/); return { major: null === (e = null == n ? void 0 : n.groups) || void 0 === e ? void 0 : e.major, minor: null === (t = null == n ? void 0 : n.groups) || void 0 === t ? void 0 : t.minor, patch: null === (i = null == n ? void 0 : n.groups) || void 0 === i ? void 0 : i.patch, preRelease: null === (r = null == n ? void 0 : n.groups) || void 0 === r ? void 0 : r.preRelease } } static get buildSHA() { return o.default.hash.substr(1) } static get sdkUserAgentLowResolution() { const e = new r.default; return `${e.name()}-${e.majorVersion()}` } static urlWithVersion(e) { const t = new URL(e); return t.searchParams.append(n.X_AMZN_VERSION, n.sdkVersion), t.searchParams.append(n.X_AMZN_USER_AGENT, n.sdkUserAgentLowResolution), t.toString() } } t.default = n, n.X_AMZN_VERSION = "X-Amzn-Version", n.X_AMZN_USER_AGENT = "X-Amzn-User-Agent" }, 8976: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = { hash: "24d31b9", raw: "v3.7.0", semverString: "3.7.0" } }, 6085: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor(e, t, i, r, o, n = 1) { this.cameraWidth = e, this.cameraHeight = t, this.cameraFrameRate = i, this.maxEncodeBitrateKbps = r, this.isSimulcast = o, this.scaleResolutionDownBy = n } equal(e) { let t = e.captureWidth() === this.cameraWidth && e.captureHeight() === this.cameraHeight && e.captureFrameRate() === this.cameraFrameRate && e.encodeBitrates().length === this.encodeBitrates().length && e.encodeScaleResolutionDownBy().length === this.encodeScaleResolutionDownBy().length && e.encodeWidths().length === this.encodeWidths().length && e.encodeHeights().length === this.encodeHeights().length; if (t) for (let i = 0; i < e.encodeWidths().length; i++)if (e.encodeWidths()[i] !== this.encodeWidths()[i] || e.encodeHeights()[i] !== this.encodeHeights()[i] || e.encodeBitrates()[i] !== this.encodeBitrates()[i] || e.encodeScaleResolutionDownBy()[i] !== this.encodeScaleResolutionDownBy()[i]) return t = !1, t; return t } clone() { return new i(this.cameraWidth, this.cameraHeight, this.cameraFrameRate, this.maxEncodeBitrateKbps, this.isSimulcast, this.scaleResolutionDownBy) } captureWidth() { return this.cameraWidth } captureHeight() { return this.cameraHeight } captureFrameRate() { return this.cameraFrameRate } encodeBitrates() { return [this.maxEncodeBitrateKbps] } encodeScaleResolutionDownBy() { return [this.scaleResolutionDownBy] } encodeWidths() { return [this.cameraWidth] } encodeHeights() { return [this.cameraHeight] } } t.default = i }, 2816: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(4688); t.default = class { constructor(e) { this.selfAttendeeId = e, this.reset() } reset() { this.optimalReceiveSet = new r.default, this.subscribedReceiveSet = new r.default, this.videoSources = void 0 } updateIndex(e) { this.videoIndex = e, this.optimalReceiveSet = this.calculateOptimalReceiveSet(e) } updateMetrics(e) { } wantsResubscribe() { return !this.subscribedReceiveSet.equal(this.optimalReceiveSet) } chooseSubscriptions() { return this.subscribedReceiveSet = this.optimalReceiveSet.clone(), this.subscribedReceiveSet.clone() } chooseRemoteVideoSources(e) { this.videoSources = e, this.optimalReceiveSet = this.calculateOptimalReceiveSet(this.videoIndex).clone() } calculateOptimalReceiveSet(e) { const t = new r.default; if (!this.videoIndex || this.videoIndex.allStreams().empty()) return t; const i = e.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId); if (void 0 === this.videoSources) return i; const o = this.videoIndex.remoteStreamDescriptions(), n = new Map; for (const e of o) i.contain(e.streamId) && n.set(e.attendeeId, e.streamId); for (const e of this.videoSources) { const i = e.attendee.attendeeId; n.has(i) && t.add(n.get(i)) } return t } } }, 8828: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(4688); t.default = class { reset() { } updateIndex(e) { } updateMetrics(e) { } wantsResubscribe() { return !1 } chooseSubscriptions() { return new r.default } } }, 108: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.TargetDisplaySize = void 0, function (e) { e[e.Low = 0] = "Low", e[e.Medium = 1] = "Medium", e[e.High = 2] = "High" }(i = t.TargetDisplaySize || (t.TargetDisplaySize = {})), t.default = i }, 8791: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9511), o = i(5935), n = i(5029), s = i(137); class a extends s.default { constructor(e) { super(e), this.logger = e, super.shouldPauseTiles = !1, this.videoPreferences = void 0 } reset() { super.reset(), super.shouldPauseTiles = !1, this.videoPreferences = void 0 } updateIndex(e) { super.updateIndex(e); const t = n.VideoPreferences.prepare(); let i = !1; const s = e.remoteStreamDescriptions(); for (const e of s) t.some((t => t.attendeeId === e.attendeeId)) || (e.attendeeId.endsWith(r.default.Modality) ? (t.add(new o.default(e.attendeeId, 1)), i = !0) : t.add(new o.default(e.attendeeId, 2))); i ? (this.videoPreferences = t.build(), this.videoPreferencesUpdated = !0) : this.videoPreferences = void 0 } chooseRemoteVideoSources(e) { this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy") } } t.default = a }, 5935: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(108); class o { constructor(e, t, i) { this.attendeeId = e, this.priority = t, this.targetSize = void 0 !== i ? i : r.default.High } partialCompare(e) { return this.priority - e.priority } equals(e) { return this.attendeeId === e.attendeeId && this.targetSize === e.targetSize && this.priority === e.priority } clone() { return new o(this.attendeeId, this.priority, this.targetSize) } targetSizeToBitrateKbps(e) { switch (e) { case r.default.High: return o.HIGH_BITRATE_KBPS; case r.default.Medium: return o.MID_BITRATE_KBPS; case r.default.Low: return o.LOW_BITRATE_KBPS } } } t.default = o, o.LOW_BITRATE_KBPS = 300, o.MID_BITRATE_KBPS = 600, o.HIGH_BITRATE_KBPS = 1200 }, 5029: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.VideoPreferences = t.MutableVideoPreferences = void 0; class i { constructor(e = []) { this.items = e } static default() { return new i([]) } [Symbol.iterator]() { let e = 0; const t = this.items; return { next: () => e < t.length ? { done: !1, value: t[e++] } : { done: !0, value: null } } } first() { return this.items[0] } add(e) { this.items.push(e) } replaceFirst(e, t) { const i = this.items.findIndex(t); -1 === i ? this.items.push(e) : this.has(e) ? this.items.splice(i, 1) : this.items[i] = e } remove(e) { this.items = this.items.filter((t => !t.equals(e))) } clear() { this.items = [] } isEmpty() { return 0 === this.items.length } equals(e) { if (e === this) return !0; if (e.items.length !== this.items.length) return !1; for (const t of this.items) if (!e.items.some((e => e.equals(t)))) return !1; return !0 } has(e) { return this.items.some((t => t.equals(e))) } some(e) { return this.items.some(e) } clone() { return new i([...this.items]) } sort() { this.items.sort(((e, t) => e.partialCompare(t))) } modify() { return new r(this) } } class r { constructor(e = new i) { this.items = e, this.copied = !1 } cow() { this.copied || (this.items = this.items.clone(), this.copied = !0) } add(e) { this.items.has(e) || (this.cow(), this.items.add(e)) } replaceFirst(e, t) { this.items.has(e) && !this.items.some(t) || (this.cow(), this.items.replaceFirst(e, t)) } remove(e) { this.items.has(e) && (this.cow(), this.items.remove(e)) } some(e) { return this.items.some(e) } clear() { this.items.isEmpty() || (this.cow(), this.items.clear()) } build() { return this.copied && this.items.sort(), this.copied = !1, this.items } } class o { constructor(e) { this.builder = e } add(e) { this.builder.add(e) } replaceFirst(e, t) { this.builder.replaceFirst(e, t) } remove(e) { this.builder.remove(e) } some(e) { return this.builder.some(e) } clear() { this.builder.clear() } build() { return new n(this.builder.build()) } } t.MutableVideoPreferences = o; class n { constructor(e) { this.items = e } static prepare() { return new o(new r) } static default() { return new n(i.default()) } [Symbol.iterator]() { return this.items[Symbol.iterator]() } highestPriority() { var e; return null === (e = this.items.first()) || void 0 === e ? void 0 : e.priority } sorted() { return this.items[Symbol.iterator]() } equals(e) { return e === this || this.items.equals(e.items) } modify() { return new o(this.items.modify()) } some(e) { return this.items.some(e) } isEmpty() { return this.items.isEmpty() } clone() { const e = n.prepare(); for (const t of this.items) e.add(t.clone()); return e.build() } } t.VideoPreferences = n, t.default = n }, 137: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(171), o = i(7957), n = i(9511), s = i(7718), a = i(3191), d = i(4688), l = i(108), c = i(5935), u = i(5029), h = i(4074); class p { constructor() { this.bandwidthEstimateKbps = 0, this.usedBandwidthKbps = 0, this.packetsLost = 0, this.nackCount = 0, this.rttMs = 0 } } class m { constructor(e, t = h.default.Default) { this.logger = e, this.videoPriorityBasedPolicyConfig = t, this.shouldPauseTiles = !0, this.observerQueue = new Set, this.pausedBwAttendeeIds = new Set, this.reset() } reset() { this.optimalReceiveSet = new d.default, this.optimalReceiveStreams = [], this.optimalNonPausedReceiveStreams = [], this.subscribedReceiveSet = new d.default, this.subscribedReceiveStreams = [], this.videoPreferences = void 0, this.defaultVideoPreferences = void 0, this.shouldPauseTiles = !0, this.pausedStreamIds = new d.default, this.pausedBwAttendeeIds = new Set, this.videoPreferencesUpdated = !1, this.logCount = 0, this.startupPeriod = !0, this.usingPrevTargetRate = !1, this.rateProbeState = "Not Probing", this.firstEstimateTimestamp = 0, this.lastUpgradeRateKbps = 0, this.timeBeforeAllowSubscribeMs = m.MIN_TIME_BETWEEN_SUBSCRIBE_MS, this.lastProbeTimestamp = Date.now(), this.timeBeforeAllowProbeMs = m.MIN_TIME_BETWEEN_PROBE_MS, this.downlinkStats = new p, this.prevDownlinkStats = new p, this.probeFailed = !1, this.serverSideNetworkAdaption = this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption } bindToTileController(e) { this.tileController = e, this.logger.info("tileController bound") } chooseRemoteVideoSources(e) { var t; (null === (t = this.videoPreferences) || void 0 === t ? void 0 : t.equals(e)) || (this.videoPreferences = null == e ? void 0 : e.clone(), this.videoPreferencesUpdated = !0, this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(e)}`)) } updateIndex(e) { this.videoIndex = e, this.videoPreferences || this.updateDefaultVideoPreferences() } updateDefaultVideoPreferences() { const e = new Set; for (const t of this.videoIndex.remoteStreamDescriptions()) e.add(t.attendeeId); const t = u.VideoPreferences.prepare(), i = e.size; let r = l.default.High; i > 8 ? r = l.default.Low : i > 4 && (r = l.default.Medium); for (const i of e) t.add(new c.default(i, 1, r)); this.defaultVideoPreferences = t.build() } updateMetrics(e) { if (!this.videoIndex || this.videoIndex.allStreams().empty()) return; this.prevDownlinkStats = this.downlinkStats, this.downlinkStats = new p; const t = e.getObservableMetrics(); this.downlinkStats.bandwidthEstimateKbps = t.availableIncomingBitrate / 1e3; for (const t in e.streamMetricReports) { const i = Number.parseInt(t, 10), n = e.streamMetricReports[i]; n.direction === r.default.DOWNSTREAM && n.mediaType === o.default.VIDEO && (n.currentMetrics.hasOwnProperty("nackCount") && (this.downlinkStats.nackCount += e.countPerSecond("nackCount", i)), n.currentMetrics.hasOwnProperty("packetsLost") && (this.downlinkStats.packetsLost += e.countPerSecond("packetsLost", i)), n.currentMetrics.hasOwnProperty("bytesReceived") && (this.downlinkStats.usedBandwidthKbps += e.bitsPerSecond("bytesReceived", i) / 1e3)) } } wantsResubscribe() { return this.calculateOptimalReceiveSet(), !this.subscribedReceiveSet.equal(this.optimalReceiveSet) } chooseSubscriptions() { return this.subscribedReceiveSet.equal(this.optimalReceiveSet) || (this.lastSubscribeTimestamp = Date.now()), this.subscribedReceiveSet = this.optimalReceiveSet.clone(), this.subscribedReceiveStreams = this.optimalReceiveStreams.slice(), this.subscribedReceiveSet.clone() } addObserver(e) { this.observerQueue.add(e) } removeObserver(e) { this.observerQueue.delete(e) } forEachObserver(e) { for (const t of this.observerQueue) e(t) } setVideoPriorityBasedPolicyConfigs(e) { this.videoPriorityBasedPolicyConfig = e } calculateOptimalReceiveStreams() { var e; const t = [], i = this.videoIndex.remoteStreamDescriptions(); if (0 === i.length || (null === (e = this.videoPreferences) || void 0 === e ? void 0 : e.isEmpty())) return void (this.optimalReceiveStreams = []); const r = this.rateProbeState; this.cleanBwPausedTiles(i), this.handleAppPausedStreams(t, i); const o = this.availStreamsSameAsLast(i), d = !this.startupPeriod && o; if (d && Date.now() - this.lastSubscribeTimestamp < this.timeBeforeAllowSubscribeMs) return; i.sort(((e, t) => e.maxBitrateKbps === t.maxBitrateKbps ? e.streamId - t.streamId : e.maxBitrateKbps - t.maxBitrateKbps)); for (const e of i) (0 === e.avgBitrateKbps || e.avgBitrateKbps > e.maxBitrateKbps) && (e.attendeeId.endsWith(n.default.Modality) && e.maxBitrateKbps < 100 ? e.maxBitrateKbps = e.avgBitrateKbps : e.avgBitrateKbps = e.maxBitrateKbps); const l = { targetDownlinkBitrate: 0, chosenTotalBitrate: 0, deltaToNextUpgrade: 0 }; l.targetDownlinkBitrate = this.determineTargetRate(); const c = this.subscribedReceiveSet.size(), u = this.downlinkStats.bandwidthEstimateKbps, h = !this.videoPriorityBasedPolicyConfig.allowSubscribe(c, u); if (this.probeFailed && (this.probeFailed = !1, this.timeBeforeAllowSubscribeMs = m.MIN_TIME_BETWEEN_SUBSCRIBE_MS, d && h)) return; const p = this.priorityPolicy(l, i, t); let f = 0; if (this.serverSideNetworkAdaption !== a.default.None && this.serverSideNetworkAdaption !== a.default.Default || this.startupPeriod || !o ? (this.setProbeState("Not Probing"), this.lastUpgradeRateKbps = 0) : "Probing" === this.rateProbeState ? f = this.handleProbe(t, l.targetDownlinkBitrate) : 0 !== l.deltaToNextUpgrade && (f = this.maybeOverrideOrProbe(t, l, p)), this.prevRemoteInfos = i, this.videoPreferencesUpdated = !1, 1 === f) return this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`), void (this.prevTargetRateKbps = l.targetDownlinkBitrate); if (2 === f) { const e = this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams); return this.optimalReceiveStreams = this.preProbeReceiveStreams.slice(), this.processBwPausedStreams(i, this.preProbeNonPausedReceiveStreams), void this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:" + e) } this.optimalNonPausedReceiveStreams = t.slice(); const g = this.pausedBwAttendeeIds.size; this.processBwPausedStreams(i, t), this.logger.getLogLevel() <= s.LogLevel.INFO && (this.logCount % 15 == 0 || this.rateProbeState !== r || this.optimalReceiveStreams.length !== t.length || g !== this.pausedBwAttendeeIds.size) && (this.logger.info(this.policyStateLogStr(i, l.targetDownlinkBitrate)), this.logCount = 0), this.logCount++, this.prevTargetRateKbps = l.targetDownlinkBitrate, this.optimalReceiveStreams = t.slice() } calculateOptimalReceiveSet() { const e = new d.default; this.calculateOptimalReceiveStreams(); for (const t of this.optimalReceiveStreams) e.add(t.streamId); if (!this.optimalReceiveSet.equal(e)) { const t = this.calculateSubscribeRate(this.optimalReceiveStreams); this.logger.info(`bwe: new streamSelection: ${JSON.stringify(e)} subscribedRate:${t}`) } this.optimalReceiveSet = e } determineTargetRate() { let e = 0; const t = Date.now(); return 0 !== this.downlinkStats.bandwidthEstimateKbps ? (0 === this.firstEstimateTimestamp && (this.firstEstimateTimestamp = t), this.startupPeriod && (this.downlinkStats.bandwidthEstimateKbps > m.DEFAULT_BANDWIDTH_KBPS || this.downlinkStats.packetsLost > 0 || t - this.firstEstimateTimestamp > m.STARTUP_PERIOD_MS && this.downlinkStats.bandwidthEstimateKbps <= this.prevDownlinkStats.bandwidthEstimateKbps) && (this.startupPeriod = !1, this.prevTargetRateKbps = this.downlinkStats.bandwidthEstimateKbps), this.startupPeriod ? e = m.DEFAULT_BANDWIDTH_KBPS : "Probing" === this.rateProbeState && this.downlinkStats.usedBandwidthKbps > this.downlinkStats.bandwidthEstimateKbps && this.downlinkStats.packetsLost < m.SPURIOUS_PACKET_LOST_THRESHOLD ? (this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`), e = this.downlinkStats.usedBandwidthKbps + m.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS) : e = this.downlinkStats.bandwidthEstimateKbps) : e = 0 === this.firstEstimateTimestamp ? m.DEFAULT_BANDWIDTH_KBPS : this.prevTargetRateKbps, !this.startupPeriod && (this.usingPrevTargetRate && this.downlinkStats.bandwidthEstimateKbps < this.prevTargetRateKbps || this.downlinkStats.bandwidthEstimateKbps < this.prevTargetRateKbps * (100 - m.LARGE_RATE_CHANGE_TRIGGER_PERCENT) / 100 || this.downlinkStats.bandwidthEstimateKbps < this.downlinkStats.usedBandwidthKbps * m.LARGE_RATE_CHANGE_TRIGGER_PERCENT / 100) && 0 === this.downlinkStats.packetsLost ? (this.logger.debug((() => "bwe: ValidateRate: Using Previous rate " + this.prevTargetRateKbps)), this.usingPrevTargetRate = !0, e = this.prevTargetRateKbps) : this.usingPrevTargetRate = !1, e } setProbeState(e) { if (this.rateProbeState === e) return !1; const t = Date.now(); switch (e) { case "Not Probing": this.probePendingStartTimestamp = 0; break; case "Probe Pending": if (!(0 === this.lastProbeTimestamp || t - this.lastProbeTimestamp > m.MIN_TIME_BETWEEN_PROBE_MS)) return !1; this.probePendingStartTimestamp = t; break; case "Probing": if (!(t - this.probePendingStartTimestamp > this.timeBeforeAllowProbeMs)) return !1; this.lastProbeTimestamp = t, this.preProbeReceiveStreams = this.subscribedReceiveStreams.slice(), this.preProbeNonPausedReceiveStreams = this.optimalNonPausedReceiveStreams, this.timeBeforeAllowProbeMs = Math.min(2 * this.timeBeforeAllowProbeMs, m.MAX_HOLD_BEFORE_PROBE_MS) }return this.logger.info("bwe: setProbeState to " + e + " from " + this.rateProbeState), this.rateProbeState = e, !0 } upgradeToStream(e, t) { for (let i = 0; i < e.length; i++)if (e[i].groupId === t.groupId) { const r = t.avgBitrateKbps - e[i].avgBitrateKbps; return this.logger.info("bwe: upgradeStream from " + JSON.stringify(e[i]) + " to " + t), this.lastUpgradeRateKbps = r, e[i] = t, r } return e.push(t), this.lastUpgradeRateKbps = t.avgBitrateKbps, this.lastUpgradeRateKbps } handleProbe(e, t) { if (Date.now() - this.lastProbeTimestamp > m.MAX_ALLOWED_PROBE_TIME_MS) return this.logger.info("bwe: Canceling probe due to timeout"), this.setProbeState("Not Probing"), 0; if (this.downlinkStats.packetsLost > 0 && (this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`), this.downlinkStats.packetsLost > m.SPURIOUS_PACKET_LOST_THRESHOLD)) return this.setProbeState("Not Probing"), this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`), this.probeFailed = !0, this.timeBeforeAllowSubscribeMs = 3 * Math.max(m.MIN_TIME_BETWEEN_SUBSCRIBE_MS, this.timeBeforeAllowSubscribeMs), 2; const i = this.calculateSubscribeRate(this.optimalReceiveStreams); return this.chosenStreamsSameAsLast(e) || t > i ? (this.logger.info("bwe: Probe successful"), this.setProbeState("Not Probing"), this.timeBeforeAllowProbeMs = m.MIN_TIME_BETWEEN_PROBE_MS, 0) : 1 } maybeOverrideOrProbe(e, t, i) { const r = this.chosenStreamsSameAsLast(e); let o = 0; const n = t.targetDownlinkBitrate > m.LOW_BITRATE_THRESHOLD_KBPS ? m.TARGET_RATE_CHANGE_TRIGGER_PERCENT : 2 * m.TARGET_RATE_CHANGE_TRIGGER_PERCENT, s = t.targetDownlinkBitrate * n / 100; if (this.targetRateBaselineForDeltaCheckKbps = void 0 !== this.targetRateBaselineForDeltaCheckKbps ? this.targetRateBaselineForDeltaCheckKbps : this.prevTargetRateKbps, !r && Math.abs(t.targetDownlinkBitrate - this.targetRateBaselineForDeltaCheckKbps) < s ? (this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {" + JSON.stringify(this.subscribedReceiveSet) + "}"), o = 1) : this.targetRateBaselineForDeltaCheckKbps = t.targetDownlinkBitrate, this.downlinkStats.packetsLost > this.prevDownlinkStats.packetsLost) return this.setProbeState("Not Probing"), this.lastUpgradeRateKbps = 0, o; if (r || 1 === o) switch (this.rateProbeState) { case "Not Probing": this.setProbeState("Probe Pending"); break; case "Probe Pending": this.setProbeState("Probing") && (this.upgradeToStream(e, i), o = 0) } else this.setProbeState("Not Probing"); return o } calculateSubscribeRate(e) { let t = 0; for (const i of e) this.pausedStreamIds.contain(i.streamId) || this.pausedBwAttendeeIds.has(i.attendeeId) || (t += i.maxBitrateKbps); return t } handleAppPausedStreams(e, t) { if (!this.tileController) return void this.logger.warn("tileController not found!"); this.pausedStreamIds = new d.default; const i = this.tileController.getAllRemoteVideoTiles(); for (const r of i) { const i = r.state(); if (i.paused && !this.pausedBwAttendeeIds.has(i.boundAttendeeId)) { let r = t.length; for (; r--;)t[r].attendeeId === i.boundAttendeeId && (this.logger.info("bwe: removed paused attendee " + i.boundAttendeeId + " streamId: " + t[r].streamId), this.pausedStreamIds.add(t[r].streamId), this.subscribedReceiveSet.contain(t[r].streamId) && e.push(t[r]), t.splice(r, 1)) } } } processBwPausedStreams(e, t) { if (!this.tileController) return void this.logger.warn("tileController not found!"); const i = this.getCurrentVideoPreferences(); if (i && this.shouldPauseTiles) { const r = this.tileController.getAllVideoTiles(); for (const o of i) { const i = this.getVideoTileForAttendeeId(o.attendeeId, r), n = (null == i ? void 0 : i.state().paused) || !1; if (t.some((e => e.attendeeId === o.attendeeId))) n && this.pausedBwAttendeeIds.has(o.attendeeId) && (this.logger.info(`bwe: unpausing attendee ${o.attendeeId} due to bandwidth`), this.forEachObserver((e => { e.tileWillBeUnpausedByDownlinkPolicy(i.id()) })), this.tileController.unpauseVideoTile(i.id()), this.pausedBwAttendeeIds.delete(o.attendeeId)); else { const r = e.some((e => e.attendeeId === o.attendeeId)); if (i && r) { const e = this.optimalReceiveStreams.find((e => e.attendeeId === o.attendeeId)); void 0 !== e && (n || (this.logger.info(`bwe: pausing streamId ${e.streamId} attendee ${o.attendeeId} due to bandwidth`), this.forEachObserver((e => { e.tileWillBePausedByDownlinkPolicy(i.id()) })), this.tileController.pauseVideoTile(i.id())), t.push(e)), this.pausedBwAttendeeIds.add(o.attendeeId) } else if (r) { const e = this.tileController.addVideoTile(); e.bindVideoStream(o.attendeeId, !1, null, 0, 0, 0, null), this.forEachObserver((t => { t.tileWillBePausedByDownlinkPolicy(e.id()) })), e.pause(), this.logger.info(`bwe: Created video tile ${e.id()} for bw paused attendee ${o.attendeeId}`), this.pausedBwAttendeeIds.add(o.attendeeId) } } } } } cleanBwPausedTiles(e) { if (!this.tileController) return void this.logger.warn("tileController not found!"); const t = this.tileController.getAllRemoteVideoTiles(), i = this.getCurrentVideoPreferences(); for (const r of t) { const t = r.state(); t.boundVideoStream || (e.some((e => e.attendeeId === t.boundAttendeeId)) ? void 0 === i || i.some((e => e.attendeeId === t.boundAttendeeId)) || this.tileController.removeVideoTile(t.tileId) : (this.tileController.removeVideoTile(t.tileId), this.logger.info(`bwe: Removed video tile ${t.tileId} for bw paused attendee ${t.boundAttendeeId}`))) } } priorityPolicy(e, t, i) { let r; const o = this.getCurrentVideoPreferences(), s = o.highestPriority(); let a, d = s; for (; -1 !== d;) { a = -1; for (const n of o) if (n.priority === d) for (const o of t) o.attendeeId === n.attendeeId && (i.some((e => e.groupId === o.groupId)) || (e.chosenTotalBitrate + o.avgBitrateKbps <= e.targetDownlinkBitrate ? (i.push(o), e.chosenTotalBitrate += o.avgBitrateKbps) : 0 === e.deltaToNextUpgrade && (e.deltaToNextUpgrade = o.avgBitrateKbps, r = o))); else if (n.priority > d) { a = n.priority; break } for (const s of o) if (s.priority === d) { for (const o of t) if (o.attendeeId === s.attendeeId) { const a = i.findIndex((e => e.groupId === o.groupId && e.maxBitrateKbps < o.maxBitrateKbps)); if (-1 !== a) { const d = o.avgBitrateKbps - i[a].avgBitrateKbps; this.hasSimulcastStreams(t, o.attendeeId, o.groupId) && this.canUpgrade(o.avgBitrateKbps, s.targetSize, s.targetSizeToBitrateKbps(s.targetSize), o.attendeeId.endsWith(n.default.Modality)) ? (this.logger.info(`bwe: attendee: ${o.attendeeId} group: ${o.groupId} has simulcast and can upgrade avgBitrate: ${o.avgBitrateKbps} target: ${s.targetSizeToBitrateKbps(s.targetSize)} targetTotalBitrate: ${e.targetDownlinkBitrate}`), e.chosenTotalBitrate + d <= e.targetDownlinkBitrate ? (e.chosenTotalBitrate += d, i[a] = o) : 0 === e.deltaToNextUpgrade && (e.deltaToNextUpgrade = d, r = o)) : this.logger.info("bwe: cannot upgrade stream quality beyond target size") } } } else if (s.priority > d) break; if (d === s && 0 !== e.deltaToNextUpgrade) break; d = a } return r } getVideoTileForAttendeeId(e, t) { for (const i of t) if (i.state().boundAttendeeId === e) return i; return null } canUpgrade(e, t, i, r) { let o = !1; return r ? (t === l.default.High || t === l.default.Medium && e <= i) && (o = !0) : e <= i && (o = !0), o ? (this.logger.info(`bwe: canUpgrade: bitrateKbp: ${e} targetBitrateKbp: ${i}`), !0) : (this.logger.info(`bwe: cannot Upgrade: bitrateKbp: ${e} targetBitrateKbp: ${i}`), !1) } hasSimulcastStreams(e, t, i) { let r = 0; for (const o of e) o.attendeeId === t && o.groupId === i && r++; return this.logger.info(`bwe: attendeeId: ${t} groupId: ${i} hasSimulcastStreams: streamCount: ${r}`), r > 1 } availStreamsSameAsLast(e) { if (void 0 === this.prevRemoteInfos || e.length !== this.prevRemoteInfos.length || !0 === this.videoPreferencesUpdated) return !1; for (const t of e) if (void 0 === this.prevRemoteInfos.find((e => e.groupId === t.groupId && e.streamId === t.streamId && e.maxBitrateKbps === t.maxBitrateKbps))) return !1; return !0 } chosenStreamsSameAsLast(e) { if (this.optimalNonPausedReceiveStreams.length !== e.length) return !1; for (const t of this.optimalNonPausedReceiveStreams) if (!e.some((e => e.streamId === t.streamId))) return !1; return !0 } policyStateLogStr(e, t) { const i = { targetBitrate: t, subscribedRate: this.calculateSubscribeRate(this.optimalReceiveStreams), probeState: this.rateProbeState, startupPeriod: this.startupPeriod }; let r = "remoteInfos: ["; for (const t of e) r += `{grpId:${t.groupId} strId:${t.streamId} maxBr:${t.maxBitrateKbps} avgBr:${t.avgBitrateKbps}}, `; r += "]"; let o = `bwe: optimalReceiveSet ${JSON.stringify(i)}\nbwe:   prev ${JSON.stringify(this.prevDownlinkStats)}\nbwe:   now  ${JSON.stringify(this.downlinkStats)}\nbwe:   ${r}\n`; return (this.pausedStreamIds.size() > 0 || this.pausedBwAttendeeIds.size > 0) && (o += `bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }\n`), this.videoPreferences ? o += `bwe:   preferences: ${JSON.stringify(this.videoPreferences)}` : o += `bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`, o } getCurrentVideoPreferences() { return this.videoPreferences || this.defaultVideoPreferences } getServerSideNetworkAdaption() { return this.serverSideNetworkAdaption } setServerSideNetworkAdaption(e) { this.serverSideNetworkAdaption = e, this.setProbeState("Not Probing") } supportedServerSideNetworkAdaptions() { return [a.default.None, a.default.BandwidthProbing] } getVideoPreferences() { let e = this.getCurrentVideoPreferences(); return e || (e = u.VideoPreferences.prepare().build()), e } } t.default = m, m.DEFAULT_BANDWIDTH_KBPS = 2800, m.STARTUP_PERIOD_MS = 6e3, m.LARGE_RATE_CHANGE_TRIGGER_PERCENT = 20, m.TARGET_RATE_CHANGE_TRIGGER_PERCENT = 15, m.LOW_BITRATE_THRESHOLD_KBPS = 300, m.MIN_TIME_BETWEEN_PROBE_MS = 5e3, m.MIN_TIME_BETWEEN_SUBSCRIBE_MS = 2e3, m.MAX_HOLD_BEFORE_PROBE_MS = 3e4, m.MAX_ALLOWED_PROBE_TIME_MS = 6e4, m.SPURIOUS_PACKET_LOST_THRESHOLD = 2, m.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS = 100 }, 4074: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(3191); class o { constructor(e = 0, t = 0) { this.networkIssueResponseDelayFactor = e, this.networkIssueRecoveryDelayFactor = t, this.currentNetworkEvent = 0, this.bandwidthDecreaseTimestamp = 0, this.referenceBitrate = 0, this.serverSideNetworkAdaption = r.default.Default, e < 0 ? e = 0 : e > 1 && (e = 1), this.networkIssueResponseDelayFactor = e, t < 0 ? t = 0 : t > 1 && (t = 1), this.networkIssueRecoveryDelayFactor = t } allowSubscribe(e, t) { let i = 0; const r = this.currentNetworkEvent; if (t > this.referenceBitrate) return this.currentNetworkEvent = 2, this.referenceBitrate = t, !0; if (t < this.referenceBitrate) { if (this.currentNetworkEvent = 1, i = this.getSubscribeDelay(this.currentNetworkEvent, e), 1 !== r) this.bandwidthDecreaseTimestamp = Date.now(); else if (Date.now() - this.bandwidthDecreaseTimestamp > i) return this.referenceBitrate = t, !0; return !1 } return this.currentNetworkEvent = 0, !1 } getSubscribeDelay(e, t) { let i = o.MINIMUM_DELAY_MS; const r = o.MAXIMUM_DELAY_MS - o.MINIMUM_DELAY_MS, n = this.networkIssueResponseDelayFactor; return 1 === e && (i += r * n * (1 + t / 10), i = Math.min(o.MAXIMUM_DELAY_MS, i)), i } } t.default = o, o.MINIMUM_DELAY_MS = 2e3, o.MAXIMUM_DELAY_MS = 8e3, o.Default = new o(0, 0), o.UnstableNetworkPreset = new o(0, 1), o.StableNetworkPreset = new o(1, 0) }, 741: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { create() { const e = { clientWidth: 400, clientHeight: 300, width: 400, height: 300, videoWidth: 400, videoHeight: 300, style: { transform: "" }, hasAttribute: () => !1, removeAttribute: () => { }, setAttribute: () => { }, srcObject: !1, paused: !0, pause: () => { e.paused = !0 }, play: () => (e.paused = !1, Promise.resolve()) }; return e } } }, 9874: function (e, t) { "use strict"; var i = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e) { this.canvas = e, this.destroyed = !1 } destroy() { this.canvas = null, this.destroyed = !0 } asCanvasImageSource() { return i(this, void 0, void 0, (function* () { return this.destroyed ? Promise.reject("canvas buffer is destroyed") : Promise.resolve(this.canvas) })) } asCanvasElement() { return this.canvas } } }, 1513: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9874); t.default = class { constructor(e, t) { this.logger = e, this.stages = t, this.fr = 15, this.outputMediaStream = new MediaStream, this.videoInput = document.createElement("video"), this.canvasOutput = document.createElement("canvas"), this.outputCtx = this.canvasOutput.getContext("2d"), this.canvasInput = document.createElement("canvas"), this.inputCtx = this.canvasInput.getContext("2d"), this.inputVideoStream = null, this.sourceBuffers = [], this.destBuffers = [], this.observers = new Set, this.hasStarted = !1, this.process = e => r(this, void 0, void 0, (function* () { if (!this.inputVideoStream) return; const e = performance.now(); this.videoInput.videoWidth && (this.canvasInput.width !== this.videoInput.videoWidth && (this.canvasInput.width = this.videoInput.videoWidth, this.canvasInput.height = this.videoInput.videoHeight, this.sourceBuffers[0].height = this.canvasInput.height, this.sourceBuffers[0].width = this.canvasInput.width, this.sourceBuffers[0].framerate = this.framerate), this.inputCtx.drawImage(this.videoInput, 0, 0)); let t, i = []; i.push(this.sourceBuffers[0]); try { for (const e of this.processors) i = yield e.process(i) } catch (e) { return void this.forEachObserver((e => { e.processingDidFailToStart && e.processingDidFailToStart() })) } this.destBuffers = i; try { t = yield this.destBuffers[0].asCanvasImageSource() } catch (e) { return void (this.inputVideoStream && (this.logger.info("buffers are destroyed and pipeline could not start"), this.forEachObserver((e => { e.processingDidFailToStart && e.processingDidFailToStart() })))) } const r = t.width, o = t.height; 0 !== r && 0 !== o && (this.canvasOutput.width !== r && this.canvasOutput.height !== o && (this.canvasOutput.width = r, this.canvasOutput.height = o), this.outputCtx.drawImage(t, 0, 0, r, o, 0, 0, r, o), this.hasStarted || (this.hasStarted = !0, this.forEachObserver((e => { e.processingDidStart && e.processingDidStart() })))); const n = performance.now() - e, s = 2e3 / this.framerate - n, a = Math.max(0, 1e3 / this.framerate - n); s <= 0 && this.forEachObserver((e => { e.processingLatencyTooHigh && e.processingLatencyTooHigh(n) })), this.lastTimeOut = setTimeout(this.process, a) })) } destroy() { if (this.stop(), this.stages) for (const e of this.stages) e.destroy() } get framerate() { return this.fr } set framerate(e) { this.fr = e < 0 ? 15 : e } stop() { if (this.videoInput.removeEventListener("loadedmetadata", this.process), this.videoInput.srcObject = null, this.destroyInputMediaStreamAndBuffers(), this.outputMediaStream) for (const e of this.outputMediaStream.getVideoTracks()) e.stop(); this.lastTimeOut && (clearTimeout(this.lastTimeOut), this.lastTimeOut = void 0), this.hasStarted && (this.hasStarted = !1, this.forEachObserver((e => { e.processingDidStop && e.processingDidStop() }))) } addObserver(e) { this.observers.add(e) } removeObserver(e) { this.observers.delete(e) } getInputMediaStream() { return r(this, void 0, void 0, (function* () { return this.inputVideoStream })) } getActiveOutputMediaStream() { return this.outputMediaStream && this.outputMediaStream.active ? this.outputMediaStream : this.outputMediaStream = this.canvasOutput.captureStream(this.framerate) } setInputMediaStream(e) { return r(this, void 0, void 0, (function* () { if (!e) return void this.stop(); if (0 === e.getVideoTracks().length) return void this.logger.error("No video tracks in input media stream, ignoring"); this.inputVideoStream = e; const t = this.inputVideoStream.getVideoTracks()[0].getSettings(); this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`), this.canvasOutput.width = t.width, this.canvasOutput.height = t.height, this.videoInput.addEventListener("loadedmetadata", this.process), this.videoInput.srcObject = this.inputVideoStream, this.videoInput.setAttribute("playsinline", "true"); const i = new o.default(this.canvasInput); this.sourceBuffers.push(i), this.videoInput.load(); try { yield this.videoInput.play() } catch (e) { this.logger.warn("Video element play() overrided by another load().") } })) } set processors(e) { this.stages = e } get processors() { return this.stages } forEachObserver(e) { for (const t of this.observers) setTimeout((() => { e(t) }), 0) } destroyInputMediaStreamAndBuffers() { if (this.inputVideoStream) for (const e of this.inputVideoStream.getTracks()) e.stop(); this.inputVideoStream = null; for (const e of this.sourceBuffers) e.destroy(); this.sourceBuffers = [] } } }, 4317: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9297), n = i(1513); class s { constructor(e, t, i, r = new o.default) { this.logger = e, this.device = t, this.processors = i, this.browserBehavior = r, this.observers = new Set, this.pipe = new n.default(this.logger, this.processors), this.pipe.addObserver(this) } get outputMediaStream() { return this.pipe.outputMediaStream } chooseNewInnerDevice(e) { const t = new s(this.logger, e, this.processors, this.browserBehavior); return t.pipe = this.pipe, t } getInnerDevice() { return this.device } intrinsicDevice() { return r(this, void 0, void 0, (function* () { return this.device })) } transformStream(e) { return r(this, void 0, void 0, (function* () { return yield this.pipe.setInputMediaStream(e), this.inputMediaStream = e, this.pipe.getActiveOutputMediaStream() })) } onOutputStreamDisconnect() { this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream"); const e = this.device && this.device.id; if (this.pipe.stop(), !e && this.inputMediaStream) for (const e of this.inputMediaStream.getVideoTracks()) e.stop() } stop() { return r(this, void 0, void 0, (function* () { if (this.inputMediaStream) for (const e of this.inputMediaStream.getVideoTracks()) e.stop(); this.pipe.destroy(), this.inputMediaStream = null })) } addObserver(e) { this.observers.add(e) } removeObserver(e) { this.observers.delete(e) } processingDidStart() { this.logger.info("video transform device processing started"), this.forEachObserver((e => { e.processingDidStart && e.processingDidStart() })) } processingLatencyTooHigh(e) { this.forEachObserver((t => { t.processingLatencyTooHigh && t.processingLatencyTooHigh(e) })) } processingDidFailToStart() { this.logger.info("video transform device processing failed to start"), this.forEachObserver((e => { e.processingDidFailToStart && e.processingDidFailToStart() })) } processingDidStop() { this.logger.info("video transform device processing stopped"), this.forEachObserver((e => { e.processingDidStop && e.processingDidStop() })) } forEachObserver(e) { for (const t of this.observers) setTimeout((() => { e(t) }), 0) } } t.default = s }, 2850: function (e, t) { "use strict"; var i = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { process(e) { return i(this, void 0, void 0, (function* () { return e })) } destroy() { return i(this, void 0, void 0, (function* () { })) } } }, 5008: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 4688: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor(e) { this.ids = new Set(e) } add(e) { this.ids.add(e) } array() { return Array.from(this.ids.values()).sort(((e, t) => e - t)) } contain(e) { return this.ids.has(e) } forEach(e) { this.ids.forEach(e) } empty() { return 0 === this.ids.size } size() { return this.ids.size } equal(e) { if (!e) return 0 === this.ids.size; const t = this.array(), i = e.array(); if (t.length !== i.length) return !1; for (let e = 0; e < t.length; e++)if (t[e] !== i[e]) return !1; return !0 } clone() { return new i(this.array()) } remove(e) { this.ids.delete(e) } toJSON() { return this.array() } truncate(e) { const t = this.array(); return new i(t.splice(0, e)) } } t.default = i }, 1688: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(8330), o = i(4688), n = i(7619); t.default = class { constructor(e) { this.logger = e, this.currentIndex = null, this.indexForSubscribe = null, this.currentSubscribeAck = null, this.subscribeTrackToStreamMap = null, this.subscribeStreamToAttendeeMap = null, this.subscribeStreamToExternalUserIdMap = null, this.subscribeSsrcToStreamMap = null, this.streamToAttendeeMap = null, this.streamToExternalUserIdMap = null, this.videoStreamDescription = new n.default, this.videoStreamDescription.trackLabel = "AmazonChimeExpressVideo", this.videoStreamDescription.streamId = 2, this.videoStreamDescription.groupId = 2 } localStreamDescriptions() { return [this.videoStreamDescription.clone()] } convertBpsToKbps(e) { return e > 0 && e < 1e3 ? 1 : Math.trunc(e / 1e3) } remoteStreamDescriptions() { if (!this.currentIndex || !this.currentIndex.sources) return []; const e = []; return this.currentIndex.sources.forEach((t => { const i = new n.default; i.attendeeId = t.attendeeId, i.groupId = t.groupId, i.streamId = t.streamId, i.maxBitrateKbps = t.maxBitrateKbps, i.avgBitrateKbps = this.convertBpsToKbps(t.avgBitrateBps), e.push(i) })), e } integrateUplinkPolicyDecision(e) { if (e && e.length) { const t = e[0]; this.videoStreamDescription.maxBitrateKbps = t.maxBitrate / 1e3, this.videoStreamDescription.maxFrameRate = t.maxFramerate } } integrateIndexFrame(e) { this.currentIndex = e; const t = new Map; let i = !1; for (const r of e.sources) { if (!t.has(r.attendeeId)) { t.set(r.attendeeId, r.groupId); continue } const e = t.get(r.attendeeId); e < r.groupId && (this.logger.warn(`Old group ID ${e} found for attendee ID ${r.attendeeId}, replacing with newer group ID ${r.groupId}`), t.set(r.attendeeId, r.groupId)), i = !0 } i && (this.currentIndex.sources = this.currentIndex.sources.filter((e => t.get(e.attendeeId) === e.groupId))), this.streamToAttendeeMap = null, this.streamToExternalUserIdMap = null } subscribeFrameSent() { this.indexForSubscribe = this.currentIndex } integrateSubscribeAckFrame(e) { this.currentSubscribeAck = e, this.subscribeTrackToStreamMap = this.buildTrackToStreamMap(this.currentSubscribeAck), this.subscribeSsrcToStreamMap = this.buildSSRCToStreamMap(this.currentSubscribeAck), this.subscribeStreamToAttendeeMap = this.buildStreamToAttendeeMap(this.indexForSubscribe), this.subscribeStreamToExternalUserIdMap = this.buildStreamExternalUserIdMap(this.indexForSubscribe) } integrateBitratesFrame(e) { if (this.currentIndex) for (const t of e.bitrates) { const e = this.currentIndex.sources.find((e => e.streamId === t.sourceStreamId)); void 0 !== e && (e.avgBitrateBps = t.avgBitrateBps) } } allStreams() { const e = new o.default; if (this.currentIndex) for (const t of this.currentIndex.sources) e.add(t.streamId); return e } allVideoSendingSourcesExcludingSelf(e) { const t = [], i = new Set; if (this.currentIndex && this.currentIndex.sources && this.currentIndex.sources.length) for (const o of this.currentIndex.sources) { const { attendeeId: n, externalUserId: s, mediaType: a } = o; n !== e && a === r.SdkStreamMediaType.VIDEO && (i.has(n) || (t.push({ attendee: { attendeeId: n, externalUserId: s } }), i.add(n))) } return t } streamSelectionUnderBandwidthConstraint(e, t, i, n) { const s = new Set; if (this.currentIndex) for (const o of this.currentIndex.sources) o.attendeeId !== e && o.mediaType === r.SdkStreamMediaType.VIDEO && (t.has(o.attendeeId) || i.has(o.attendeeId) || s.add(o.attendeeId)); const a = this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(e), d = new Map; let l = 0; a.forEach(((e, t) => { d.set(t, e[0]), l += e[0].maxBitrateKbps })), l = this.trySelectHighBitrateForAttendees(a, t, l, n, d), this.trySelectHighBitrateForAttendees(a, s, l, n, d); const c = new o.default; for (const e of d.values()) c.add(e.streamId); return c } highestQualityStreamFromEachGroupExcludingSelf(e) { const t = new o.default; if (this.currentIndex) { const i = new Map; for (const t of this.currentIndex.sources) t.attendeeId !== e && t.mediaType === r.SdkStreamMediaType.VIDEO && (!i.has(t.groupId) || t.maxBitrateKbps > i.get(t.groupId).maxBitrateKbps) && i.set(t.groupId, t); for (const e of i.values()) t.add(e.streamId) } return t } numberOfVideoPublishingParticipantsExcludingSelf(e) { return this.highestQualityStreamFromEachGroupExcludingSelf(e).array().length } numberOfParticipants() { return this.currentIndex.numParticipants ? this.currentIndex.numParticipants : -1 } attendeeIdForTrack(e) { const t = this.streamIdForTrack(e); if (void 0 === t || !this.subscribeStreamToAttendeeMap) return this.logger.warn(`no attendee found for track ${e}`), ""; return this.subscribeStreamToAttendeeMap.get(t) || (this.logger.info(`track ${e} (stream ${t}) does not correspond to a known attendee`), "") } externalUserIdForTrack(e) { const t = this.streamIdForTrack(e); if (void 0 === t || !this.subscribeStreamToExternalUserIdMap) return this.logger.warn(`no external user id found for track ${e}`), ""; return this.subscribeStreamToExternalUserIdMap.get(t) || (this.logger.info(`track ${e} (stream ${t}) does not correspond to a known externalUserId`), "") } attendeeIdForStreamId(e) { if (!this.streamToAttendeeMap) { if (!this.currentIndex) return ""; this.streamToAttendeeMap = this.buildStreamToAttendeeMap(this.currentIndex) } return this.streamToAttendeeMap.get(e) || (this.logger.info(`stream ${e}) does not correspond to a known attendee`), "") } groupIdForStreamId(e) { if (this.currentIndex && this.currentIndex.sources) { for (const t of this.currentIndex.sources) if (t.streamId === e) return t.groupId; if (this.indexForSubscribe) for (const t of this.indexForSubscribe.sources) if (t.streamId === e) return t.groupId } } StreamIdsInSameGroup(e, t) { return this.groupIdForStreamId(e) === this.groupIdForStreamId(t) } streamIdForTrack(e) { if (this.subscribeTrackToStreamMap) return this.subscribeTrackToStreamMap.get(e) } streamIdForSSRC(e) { if (this.subscribeSsrcToStreamMap) return this.subscribeSsrcToStreamMap.get(e) } overrideStreamIdMappings(e, t) { if (this.subscribeTrackToStreamMap) for (const [i, r] of this.subscribeTrackToStreamMap.entries()) if (e === r) { this.subscribeTrackToStreamMap.set(i, t); break } if (this.subscribeSsrcToStreamMap) for (const [i, r] of this.subscribeSsrcToStreamMap.entries()) if (e === r) { this.subscribeSsrcToStreamMap.set(i, t); break } } streamsPausedAtSource() { const e = new o.default; if (this.currentIndex) for (const t of this.currentIndex.pausedAtSourceIds) e.add(t); return e } buildTrackToStreamMap(e) { const t = new Map; this.logger.debug((() => `trackMap ${JSON.stringify(e.tracks)}`)); for (const i of e.tracks) i.trackLabel.length > 0 && i.streamId > 0 && t.set(i.trackLabel, i.streamId); return t } buildSSRCToStreamMap(e) { const t = new Map; this.logger.debug((() => `ssrcMap ${JSON.stringify(e.tracks)}`)); for (const i of e.tracks) i.trackLabel.length > 0 && i.streamId > 0 && t.set(i.ssrc, i.streamId); return t } buildStreamToAttendeeMap(e) { const t = new Map; if (e) for (const i of e.sources) t.set(i.streamId, i.attendeeId); return t } buildStreamExternalUserIdMap(e) { const t = new Map; if (e) for (const i of e.sources) i.externalUserId && t.set(i.streamId, i.externalUserId); return t } trySelectHighBitrateForAttendees(e, t, i, r, o) { for (const n of t) { if (i >= r) break; if (e.has(n)) { const t = e.get(n); for (const e of t.reverse()) if (i - o.get(n).maxBitrateKbps + e.maxBitrateKbps < r) { i = i - o.get(n).maxBitrateKbps + e.maxBitrateKbps, o.set(n, e); break } } } return i } buildAttendeeToSortedStreamDescriptorMapExcludingSelf(e) { const t = new Map; if (this.currentIndex) for (const i of this.currentIndex.sources) i.attendeeId !== e && i.mediaType === r.SdkStreamMediaType.VIDEO && (t.has(i.attendeeId) ? t.get(i.attendeeId).push(i) : t.set(i.attendeeId, [i])); return t.forEach(((e, t) => { e.sort(((e, t) => e.maxBitrateKbps > t.maxBitrateKbps ? 1 : e.maxBitrateKbps < t.maxBitrateKbps ? -1 : 0)) })), t } } }, 507: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(8330), o = i(1688), n = i(7619); class s extends o.default { constructor(e) { super(e), this.streamIdToBitrateKbpsMap = new Map, this._localStreamInfos = [], this._lastBitRateMsgTime = Date.now() } localStreamDescriptions() { const e = []; return this._localStreamInfos.forEach((t => { e.push(t.clone()) })), e } integrateUplinkPolicyDecision(e) { let t = !0, i = 0; for (let r = 0; r < e.length; r++) { const o = e[r].maxBitrate / 1e3, s = e[r].maxFramerate; if (t && r !== this._localStreamInfos.length) 0 === this._localStreamInfos[i].maxBitrateKbps && o > 0 && (this._localStreamInfos[i].timeEnabled = Date.now()), this._localStreamInfos[i].maxBitrateKbps = o, this._localStreamInfos[i].maxFrameRate = s, this._localStreamInfos[i].disabledByUplinkPolicy = 0 === o, !0 === this._localStreamInfos[i].disabledByUplinkPolicy && (this._localStreamInfos[i].disabledByWebRTC = !1), i++; else { t = !1; const e = new n.default; e.maxBitrateKbps = o, e.maxFrameRate = s, e.disabledByUplinkPolicy = 0 === o, 0 !== o && (e.timeEnabled = Date.now()), this._localStreamInfos.push(e), i++ } } t && this._localStreamInfos.splice(i) } integrateBitratesFrame(e) { super.integrateBitratesFrame(e); const t = new Set, i = new Set(this.streamIdToBitrateKbpsMap.keys()); for (const i of e.bitrates) t.add(i.sourceStreamId), this.streamIdToBitrateKbpsMap.set(i.sourceStreamId, this.convertBpsToKbps(i.avgBitrateBps)); for (const e of i) t.has(e) || (this.streamIdToBitrateKbpsMap.get(e) === s.UNSEEN_STREAM_BITRATE ? this.streamIdToBitrateKbpsMap.set(e, s.RECENTLY_INACTIVE_STREAM_BITRATE) : this.streamIdToBitrateKbpsMap.set(e, s.NOT_SENDING_STREAM_BITRATE)); for (let e = 0; e < this._localStreamInfos.length; e++) { this._localStreamInfos[e].disabledByWebRTC = !1; const t = this._localStreamInfos[e].streamId; this._localStreamInfos[e].disabledByUplinkPolicy || (this.streamIdToBitrateKbpsMap.has(t) ? this.streamIdToBitrateKbpsMap.get(t) === s.NOT_SENDING_STREAM_BITRATE && this._lastBitRateMsgTime - this._localStreamInfos[e].timeEnabled > s.BitratesMsgFrequencyMs && (this._localStreamInfos[e].disabledByWebRTC = !0) : this._lastBitRateMsgTime - this._localStreamInfos[e].timeEnabled > s.BitratesMsgFrequencyMs && (this._localStreamInfos[e].disabledByWebRTC = !0)) } this._lastBitRateMsgTime = Date.now(), this.logLocalStreamDescriptions() } logLocalStreamDescriptions() { let e = ""; for (const t of this._localStreamInfos) e += `streamId=${t.streamId} maxBitrate=${t.maxBitrateKbps} disabledByWebRTC=${t.disabledByWebRTC} disabledByUplink=${t.disabledByUplinkPolicy}\n`; this.logger.debug((() => e)) } integrateIndexFrame(e) { super.integrateIndexFrame(e); const t = new Set, i = new Set(this.streamIdToBitrateKbpsMap.keys()); for (const e of this.currentIndex.sources) e.mediaType === r.SdkStreamMediaType.VIDEO && (t.add(e.streamId), this.streamIdToBitrateKbpsMap.has(e.streamId) || this.streamIdToBitrateKbpsMap.set(e.streamId, s.UNSEEN_STREAM_BITRATE)); for (const e of i) t.has(e) || this.streamIdToBitrateKbpsMap.delete(e) } integrateSubscribeAckFrame(e) { if (super.integrateSubscribeAckFrame(e), !e.allocations || void 0 === e.allocations) return; let t = 0; for (const i of e.allocations) { if (this._localStreamInfos.length < t + 1) { this.logger.info("simulcast: allocation has more than number of local streams"); break } this._localStreamInfos[t].groupId = i.groupId, this._localStreamInfos[t].streamId = i.streamId, this.streamIdToBitrateKbpsMap.has(i.streamId) || this.streamIdToBitrateKbpsMap.set(i.streamId, s.UNSEEN_STREAM_BITRATE), t++ } } } t.default = s, s.UNSEEN_STREAM_BITRATE = -2, s.RECENTLY_INACTIVE_STREAM_BITRATE = -1, s.NOT_SENDING_STREAM_BITRATE = 0, s.BitratesMsgFrequencyMs = 4e3 }, 7619: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(8330); class o { constructor(e, t, i, r, o) { this.attendeeId = "", this.groupId = 0, this.streamId = 0, this.ssrc = 0, this.trackLabel = "", this.maxBitrateKbps = 0, this.avgBitrateKbps = 0, this.maxFrameRate = 0, this.timeEnabled = 0, this.disabledByWebRTC = !1, this.disabledByUplinkPolicy = !1, this.attendeeId = e, this.groupId = t, this.streamId = i, this.maxBitrateKbps = r, this.avgBitrateKbps = o } clone() { const e = new o; return e.attendeeId = this.attendeeId, e.groupId = this.groupId, e.streamId = this.streamId, e.ssrc = this.ssrc, e.trackLabel = this.trackLabel, e.maxBitrateKbps = this.maxBitrateKbps, e.avgBitrateKbps = this.avgBitrateKbps, e.maxFrameRate = this.maxFrameRate, e.timeEnabled = this.timeEnabled, e.disabledByWebRTC = this.disabledByWebRTC, e.disabledByUplinkPolicy = this.disabledByUplinkPolicy, e } toStreamDescriptor() { const e = r.SdkStreamDescriptor.create(); return e.mediaType = r.SdkStreamMediaType.VIDEO, e.trackLabel = this.trackLabel, e.attendeeId = this.attendeeId, e.streamId = this.streamId, e.groupId = this.groupId, e.framerate = this.maxFrameRate, e.maxBitrateKbps = this.disabledByUplinkPolicy || this.disabledByWebRTC ? 0 : this.maxBitrateKbps, e.avgBitrateBps = this.avgBitrateKbps, e } } t.default = o }, 9912: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9297), o = i(6878), n = i(2227); class s { constructor(e, t, i, r) { this.tileController = i, this.devicePixelRatioMonitor = r, this.tileState = new n.default, this.tileState.tileId = e, this.tileState.localTile = t, this.devicePixelRatioMonitor.registerObserver(this) } static connectVideoStreamToVideoElement(e, t, i) { const o = i && "environment" !== e.getVideoTracks()[0].getSettings().facingMode ? "rotateY(180deg)" : ""; s.setVideoElementFlag(t, "disablePictureInPicture", i), s.setVideoElementFlag(t, "disableRemotePlayback", i), t.style.transform !== o && (t.style.transform = o), t.hasAttribute("controls") && t.removeAttribute("controls"), t.hasAttribute("autoplay") || t.setAttribute("autoplay", "true"), t.hasAttribute("playsinline") || t.setAttribute("playsinline", "true"), t.hasAttribute("muted") || (t.setAttribute("muted", "true"), t.muted = !0), t.srcObject !== e && (t.srcObject = e, (new r.default).requiresVideoPlayWorkaround() && t.paused && t.play()) } static disconnectVideoStreamFromVideoElement(e, t, i = !1) { if (e) if (t) i || (e.srcObject = null, e.style.transform = ""); else { if (!e.srcObject) return; e.pause(), e.style.transform = "", s.setVideoElementFlag(e, "disablePictureInPicture", !1), s.setVideoElementFlag(e, "disableRemotePlayback", !1), e.srcObject = null } } destroy() { this.devicePixelRatioMonitor.removeObserver(this), this.tileState.boundVideoElement && this.tileState.boundVideoElement.srcObject === this.tileState.boundVideoStream && s.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement, !1), this.tileState = new n.default } devicePixelRatioChanged(e) { this.tileState.devicePixelRatio = e, this.sendTileStateUpdate() } id() { return this.tileState.tileId } state() { return this.tileState.clone() } stateRef() { return this.tileState } bindVideoStream(e, t, i, r, n, s, a) { let d = !1; this.tileState.boundAttendeeId !== e && (this.tileState.boundAttendeeId = e, new o.default(e).hasModality(o.default.MODALITY_CONTENT) && (this.tileState.isContent = !0), d = !0), this.tileState.boundExternalUserId !== a && (this.tileState.boundExternalUserId = a, d = !0), this.tileState.localTile !== t && (this.tileState.localTile = t, d = !0), this.tileState.boundVideoStream !== i && (this.tileState.boundVideoStream = i, d = !0), this.tileState.videoStreamContentWidth !== r && (this.tileState.videoStreamContentWidth = r, d = !0), this.tileState.videoStreamContentHeight !== n && (this.tileState.videoStreamContentHeight = n, d = !0), this.tileState.streamId !== s && (this.tileState.streamId = s, d = !0), d && this.sendTileStateUpdate() } bindVideoElement(e) { let t = !1; this.tileState.boundVideoElement !== e && (this.tileState.boundVideoElement = e, t = !0), null !== this.tileState.boundVideoElement ? (this.tileState.videoElementCSSWidthPixels !== e.clientWidth && (this.tileState.videoElementCSSWidthPixels = e.clientWidth, t = !0), this.tileState.videoElementCSSHeightPixels !== e.clientHeight && (this.tileState.videoElementCSSHeightPixels = e.clientHeight, t = !0)) : (this.tileState.videoElementCSSWidthPixels = null, this.tileState.videoElementCSSHeightPixels = null), t && this.sendTileStateUpdate() } pause() { this.tileState.paused || (this.tileState.paused = !0, this.sendTileStateUpdate()) } unpause() { this.tileState.paused && (this.tileState.paused = !1, this.sendTileStateUpdate()) } markPoorConnection() { return !this.tileState.poorConnection && (this.tileState.poorConnection = !0, this.sendTileStateUpdate(), !0) } unmarkPoorConnection() { return !!this.tileState.poorConnection && (this.tileState.poorConnection = !1, this.sendTileStateUpdate(), !0) } capture() { if (!this.tileState.active) return null; const e = document.createElement("canvas"), t = this.tileState.boundVideoElement; e.width = t.videoWidth || t.width, e.height = t.videoHeight || t.height; const i = e.getContext("2d"); return i.drawImage(t, 0, 0, e.width, e.height), i.getImageData(0, 0, e.width, e.height) } setStreamId(e) { this.tileState.streamId = e, this.tileController.sendTileStateUpdate(this.state()) } sendTileStateUpdate() { this.updateActiveState(), this.updateVideoStreamOnVideoElement(), this.updateVideoElementPhysicalPixels(), this.tileController.sendTileStateUpdate(this.state()) } updateActiveState() { this.tileState.active = !(this.tileState.paused || this.tileState.poorConnection || !this.tileState.boundAttendeeId || !this.tileState.boundVideoElement || !this.tileState.boundVideoStream) } updateVideoElementPhysicalPixels() { "number" == typeof this.tileState.videoElementCSSWidthPixels && "number" == typeof this.tileState.videoElementCSSHeightPixels ? (this.tileState.videoElementPhysicalWidthPixels = this.tileState.devicePixelRatio * this.tileState.videoElementCSSWidthPixels, this.tileState.videoElementPhysicalHeightPixels = this.tileState.devicePixelRatio * this.tileState.videoElementCSSHeightPixels) : (this.tileState.videoElementPhysicalWidthPixels = null, this.tileState.videoElementPhysicalHeightPixels = null) } updateVideoStreamOnVideoElement() { this.tileState.active ? s.connectVideoStreamToVideoElement(this.tileState.boundVideoStream, this.tileState.boundVideoElement, this.tileState.localTile) : s.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement, this.tileState.paused, this.tileController.keepLastFrameWhenPaused) } static setVideoElementFlag(e, t, i) { t in e && (e[t] = i) } } t.default = s }, 2227: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor() { this.tileId = null, this.localTile = !1, this.localTileStarted = !1, this.isContent = !1, this.active = !1, this.paused = !1, this.poorConnection = !1, this.boundAttendeeId = null, this.boundExternalUserId = null, this.boundVideoStream = null, this.boundVideoElement = null, this.nameplate = null, this.videoStreamContentWidth = null, this.videoStreamContentHeight = null, this.videoElementCSSWidthPixels = null, this.videoElementCSSHeightPixels = null, this.devicePixelRatio = 0, this.videoElementPhysicalWidthPixels = null, this.videoElementPhysicalHeightPixels = null, this.streamId = null } clone() { const e = new i; return e.tileId = this.tileId, e.localTile = this.localTile, e.isContent = this.isContent, e.active = this.active, e.paused = this.paused, e.poorConnection = this.poorConnection, e.boundAttendeeId = this.boundAttendeeId, e.boundExternalUserId = this.boundExternalUserId, e.boundVideoStream = this.boundVideoStream, e.boundVideoElement = this.boundVideoElement, e.nameplate = this.nameplate, e.videoStreamContentWidth = this.videoStreamContentWidth, e.videoStreamContentHeight = this.videoStreamContentHeight, e.videoElementCSSWidthPixels = this.videoElementCSSWidthPixels, e.videoElementCSSHeightPixels = this.videoElementCSSHeightPixels, e.devicePixelRatio = this.devicePixelRatio, e.videoElementPhysicalWidthPixels = this.videoElementPhysicalWidthPixels, e.videoElementPhysicalHeightPixels = this.videoElementPhysicalHeightPixels, e.streamId = this.streamId, e } } t.default = i }, 5695: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(8357), n = i(5174), s = i(2019), a = i(9912); t.default = class { constructor(e, t, i) { this.tileFactory = e, this.audioVideoController = t, this.logger = i, this.tileMap = new Map, this.nextTileId = 1, this.currentLocalTile = null, this.currentPausedTilesByIds = new Set, this.keepLastFrameWhenPaused = !1, this.keepLastFrameWhenPaused = t.configuration.keepLastFrameWhenPaused } createDevicePixelRatioMonitorIfNeeded() { this.devicePixelRatioMonitor || (this.devicePixelRatioMonitor = new o.default(new n.default, this.logger)) } discardDevicePixelRatioMonitorIfNotNeeded() { return r(this, void 0, void 0, (function* () { if (this.tileMap.size || !this.devicePixelRatioMonitor) return; const e = this.devicePixelRatioMonitor; return this.devicePixelRatioMonitor = void 0, e.destroy() })) } bindVideoElement(e, t) { const i = this.getVideoTile(e); null !== i ? i.bindVideoElement(t) : this.logger.warn(`Ignoring video element binding for unknown tile id ${e}`) } unbindVideoElement(e, t = !0) { const i = this.getVideoTile(e); if (null === i) return void this.logger.warn(`Ignoring video element unbinding for unknown tile id ${e}`); this.logger.info("Unbinding the video element"); const r = i.stateRef().boundVideoElement; i.bindVideoElement(null), t && (this.logger.info("Cleaning up the video element"), a.default.disconnectVideoStreamFromVideoElement(r, !1)) } startLocalVideoTile() { const e = this.findOrCreateLocalVideoTile(); return this.currentLocalTile.stateRef().localTileStarted = !0, this.audioVideoController.update({ needsRenegotiation: !0 }), e.id() } stopLocalVideoTile() { this.currentLocalTile && (this.currentLocalTile.stateRef().localTileStarted = !1, this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId, !0, null, null, null, null, this.audioVideoController.configuration.credentials.externalUserId), this.audioVideoController.update({ needsRenegotiation: !0 })) } hasStartedLocalVideoTile() { return !(!this.currentLocalTile || !this.currentLocalTile.stateRef().localTileStarted) } removeLocalVideoTile() { this.currentLocalTile && this.removeVideoTile(this.currentLocalTile.id()) } getLocalVideoTile() { return this.currentLocalTile } pauseVideoTile(e) { const t = this.getVideoTile(e); t && (this.currentPausedTilesByIds.has(e) || (this.audioVideoController.pauseReceivingStream(t.stateRef().streamId), this.currentPausedTilesByIds.add(e)), t.pause()) } unpauseVideoTile(e) { const t = this.getVideoTile(e); t && (this.currentPausedTilesByIds.has(e) && (this.audioVideoController.resumeReceivingStream(t.stateRef().streamId), this.currentPausedTilesByIds.delete(e)), t.unpause()) } getVideoTile(e) { return this.tileMap.has(e) ? this.tileMap.get(e) : null } getVideoTileArea(e) { const t = e.state(); let i = 0, r = 0; return t.boundVideoElement && (i = t.boundVideoElement.clientHeight * t.devicePixelRatio, r = t.boundVideoElement.clientWidth * t.devicePixelRatio), i * r } getAllRemoteVideoTiles() { const e = new Array; return this.tileMap.forEach(((t, i) => { this.currentLocalTile && i === this.currentLocalTile.id() || e.push(t) })), e } getAllVideoTiles() { return Array.from(this.tileMap.values()) } addVideoTile(e = !1) { const t = this.nextTileId; this.nextTileId += 1, this.createDevicePixelRatioMonitorIfNeeded(); const i = this.tileFactory.makeTile(t, e, this, this.devicePixelRatioMonitor); return this.tileMap.set(t, i), i } removeVideoTile(e) { if (!this.tileMap.has(e)) return; const t = this.tileMap.get(e); this.currentLocalTile === t && (this.currentLocalTile = null), t.destroy(), this.tileMap.delete(e), this.audioVideoController.forEachObserver((t => { s.Maybe.of(t.videoTileWasRemoved).map((i => i.bind(t)(e))) })), this.discardDevicePixelRatioMonitorIfNotNeeded() } removeVideoTilesByAttendeeId(e) { const t = []; for (const i of this.getAllVideoTiles()) { const r = i.state(); r.boundAttendeeId === e && (this.removeVideoTile(r.tileId), t.push(r.tileId)) } return t } removeAllVideoTiles() { const e = Array.from(this.tileMap.keys()); for (const t of e) this.removeVideoTile(t) } sendTileStateUpdate(e) { this.audioVideoController.forEachObserver((t => { s.Maybe.of(t.videoTileDidUpdate).map((i => i.bind(t)(e))) })) } haveVideoTilesWithStreams() { for (const e of this.getAllVideoTiles()) if (e.state().boundVideoStream) return !0; return !1 } haveVideoTileForAttendeeId(e) { return !!this.getVideoTileForAttendeeId(e) } getVideoTileForAttendeeId(e) { for (const t of this.getAllVideoTiles()) if (t.state().boundAttendeeId === e) return t } captureVideoTile(e) { const t = this.getVideoTile(e); return t ? t.capture() : null } findOrCreateLocalVideoTile() { return this.currentLocalTile || (this.currentLocalTile = this.addVideoTile(!0), this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId, !0, null, null, null, null, this.audioVideoController.configuration.credentials.externalUserId)), this.currentLocalTile } } }, 4505: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(9912); t.default = class { makeTile(e, t, i, o) { return new r.default(e, t, i, o) } } }, 1934: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { } }, 6932: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(1546), o = i(2205), n = i(2019), s = i(6085), a = i(1934); class d { constructor(e, t) { this.selfAttendeeId = e, this.logger = t, this.numSenders = 0, this.shouldDisableSimulcast = !1, this.newQualityMap = new Map, this.currentQualityMap = new Map, this.newActiveStreams = 1, this.currentActiveStreams = 1, this.lastUplinkBandwidthKbps = d.defaultUplinkBandwidthKbps, this.startTimeMs = 0, this.lastUpdatedMs = Date.now(), this.videoIndex = null, this.currLocalDescriptions = [], this.nextLocalDescriptions = [], this.observerQueue = new Set, this.optimalParameters = new s.default(0, 0, 0, 0, !0), this.parametersInEffect = new s.default(0, 0, 0, 0, !0), this.lastUplinkBandwidthKbps = d.defaultUplinkBandwidthKbps, this.currentQualityMap = this.fillEncodingParamWithBitrates([300, 0, 1200]), this.newQualityMap = this.fillEncodingParamWithBitrates([300, 0, 1200]) } updateConnectionMetric({ uplinkKbps: e = 0 }) { if (isNaN(e)) return; 0 === this.startTimeMs && (this.startTimeMs = Date.now()), Date.now() - this.startTimeMs < d.startupDurationMs ? this.lastUplinkBandwidthKbps = d.defaultUplinkBandwidthKbps : this.lastUplinkBandwidthKbps = e, this.logger.debug((() => `simulcast: uplink policy update metrics ${this.lastUplinkBandwidthKbps}`)); let t = d.holdDownDurationMs; 3 === this.currentActiveStreams ? t = 2 * d.holdDownDurationMs : (2 === this.currentActiveStreams && e <= d.kMidDisabledRate || 1 === this.currentActiveStreams && e <= d.kHiDisabledRate) && (t = d.holdDownDurationMs / 2), Date.now() < this.lastUpdatedMs + t || (this.newQualityMap = this.calculateEncodingParameters(!1)) } calculateEncodingParameters(e) { const t = [new a.default, new a.default, new a.default]; let i = 0, r = 0; if (0 === this.currentActiveStreams ? (i = this.lastUplinkBandwidthKbps + 1, r = 0) : 1 === this.currentActiveStreams ? (i = 2400, r = d.kHiDisabledRate) : 2 === this.currentActiveStreams ? (i = 1e3, r = d.kMidDisabledRate) : (i = 300, r = 0), e || this.lastUplinkBandwidthKbps >= i || this.lastUplinkBandwidthKbps <= r) { this.shouldDisableSimulcast ? (this.newActiveStreams = 0, t[0].maxBitrateKbps = 0, t[1].maxBitrateKbps = 1200, t[2].maxBitrateKbps = 0) : this.numSenders <= 4 && this.lastUplinkBandwidthKbps >= d.kHiDisabledRate ? (this.newActiveStreams = 1, t[0].maxBitrateKbps = 300, t[1].maxBitrateKbps = 0, t[2].maxBitrateKbps = 1200) : this.lastUplinkBandwidthKbps >= d.kMidDisabledRate ? (this.newActiveStreams = 2, t[0].maxBitrateKbps = this.lastUplinkBandwidthKbps >= 350 ? 200 : 150, t[1].maxBitrateKbps = this.numSenders <= 6 ? 600 : 350, t[2].maxBitrateKbps = 0) : (this.newActiveStreams = 3, t[0].maxBitrateKbps = 300, t[1].maxBitrateKbps = 0, t[2].maxBitrateKbps = 0); const e = t.map(((e, t, i) => e.maxBitrateKbps)); this.newQualityMap = this.fillEncodingParamWithBitrates(e), this.encodingParametersEqual() || this.logger.info(`simulcast: policy:calculateEncodingParameters bw:${this.lastUplinkBandwidthKbps} numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`) } return this.newQualityMap } chooseMediaTrackConstraints() { return { width: { ideal: 1280 }, height: { ideal: 768 }, frameRate: { ideal: 15 } } } chooseEncodingParameters() { return this.currentQualityMap = this.newQualityMap, this.currentActiveStreams = this.newActiveStreams, this.activeStreamsToPublish !== this.newActiveStreams && (this.activeStreamsToPublish = this.newActiveStreams, this.publishEncodingSimulcastLayer()), this.currentQualityMap } updateIndex(e) { const t = e.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId) + 1, i = t !== this.numSenders, r = e.numberOfParticipants(), o = r >= 0 && r <= 2, n = this.shouldDisableSimulcast !== o; this.numSenders = t, this.shouldDisableSimulcast = o, this.optimalParameters = new s.default(this.captureWidth(), this.captureHeight(), this.captureFrameRate(), this.maxBandwidthKbps(), !1), this.videoIndex = e, this.newQualityMap = this.calculateEncodingParameters(i || n) } wantsResubscribe() { let e = !this.encodingParametersEqual(); this.nextLocalDescriptions = this.videoIndex.localStreamDescriptions(); for (let t = 0; t < this.nextLocalDescriptions.length; t++) { const i = this.nextLocalDescriptions[t].streamId; if (0 !== i && i) { const r = this.currLocalDescriptions.findIndex((e => e.streamId === i)); -1 !== r && this.nextLocalDescriptions[t].disabledByWebRTC !== this.currLocalDescriptions[r].disabledByWebRTC && (e = !0) } } return e && (this.lastUpdatedMs = Date.now()), this.currLocalDescriptions = this.nextLocalDescriptions, e } compareEncodingParameter(e, t) { return JSON.stringify(e) === JSON.stringify(t) } encodingParametersEqual() { let e = !1; for (const t of o.default.NAME_ARR_ASCENDING) if (e = e || !this.compareEncodingParameter(this.newQualityMap.get(t), this.currentQualityMap.get(t)), e) break; return !e } chooseCaptureAndEncodeParameters() { return this.parametersInEffect = this.optimalParameters.clone(), this.parametersInEffect.clone() } captureWidth() { return 1280 } captureHeight() { return 768 } captureFrameRate() { return 15 } maxBandwidthKbps() { return 1400 } setIdealMaxBandwidthKbps(e) { } setHasBandwidthPriority(e) { } fillEncodingParamWithBitrates(e) { const t = new Map, i = o.default.NAME_ARR_ASCENDING, r = e; let n = this.shouldDisableSimulcast ? 1 : 4; for (let e = 0; e < i.length; e++) { const o = i[e]; t.set(o, { rid: o, active: r[e] > 0, scaleResolutionDownBy: Math.max(n, 1), maxBitrate: 1e3 * r[e] }), n /= 2 } return t } getQualityMapString(e) { let t = ""; const i = this.videoIndex.localStreamDescriptions(); return 3 === i.length && e.forEach((e => { let r = !1; r = "low" === e.rid ? i[0].disabledByWebRTC : "mid" === e.rid ? i[1].disabledByWebRTC : i[2].disabledByWebRTC, t += `{ rid: ${e.rid} active:${e.active} disabledByWebRTC: ${r} maxBitrate:${e.maxBitrate}}` })), t } getEncodingSimulcastLayer(e) { switch (e) { case 0: return r.default.High; case 1: return r.default.LowAndHigh; case 2: return r.default.LowAndMedium; case 3: return r.default.Low } } publishEncodingSimulcastLayer() { const e = this.getEncodingSimulcastLayer(this.activeStreamsToPublish); this.forEachObserver((t => { n.Maybe.of(t.encodingSimulcastLayersDidChange).map((i => i.bind(t)(e))) })) } addObserver(e) { this.logger.info("adding simulcast uplink observer"), this.observerQueue.add(e) } removeObserver(e) { this.logger.info("removing simulcast uplink observer"), this.observerQueue.delete(e) } forEachObserver(e) { for (const t of this.observerQueue) e(t) } } t.default = d, d.defaultUplinkBandwidthKbps = 1200, d.startupDurationMs = 6e3, d.holdDownDurationMs = 4e3, d.defaultMaxFrameRate = 15, d.kHiDisabledRate = 700, d.kMidDisabledRate = 240 }, 6636: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2559); t.default = class { constructor(e, t) { this.logger = e, this.encodingParams = t, this.videoIndex = null, this.currLocalDescriptions = [], this.nextLocalDescriptions = [] } updateConnectionMetric(e) { } chooseMediaTrackConstraints() { } chooseEncodingParameters() { var e, t, i, o, n, s, a, d, l, c, u, h; const p = new Map, m = r.default.NAME_ARR_ASCENDING; return p.set(m[0], { rid: m[0], active: !0, scaleResolutionDownBy: (null === (t = null === (e = this.encodingParams) || void 0 === e ? void 0 : e.low) || void 0 === t ? void 0 : t.scaleResolutionDownBy) || 2, maxBitrate: 1e3 * ((null === (o = null === (i = this.encodingParams) || void 0 === i ? void 0 : i.low) || void 0 === o ? void 0 : o.maxBitrateKbps) || 300), maxFramerate: (null === (s = null === (n = this.encodingParams) || void 0 === n ? void 0 : n.low) || void 0 === s ? void 0 : s.maxFramerate) || 5 }), p.set(m[1], { rid: m[1], active: !0, scaleResolutionDownBy: (null === (d = null === (a = this.encodingParams) || void 0 === a ? void 0 : a.high) || void 0 === d ? void 0 : d.scaleResolutionDownBy) || 1, maxBitrate: 1e3 * ((null === (c = null === (l = this.encodingParams) || void 0 === l ? void 0 : l.high) || void 0 === c ? void 0 : c.maxBitrateKbps) || 1200), maxFramerate: null === (h = null === (u = this.encodingParams) || void 0 === u ? void 0 : u.high) || void 0 === h ? void 0 : h.maxFramerate }), this.getQualityMapString(p), p } updateIndex(e) { this.videoIndex = e } wantsResubscribe() { var e, t; let i = !1; this.nextLocalDescriptions = null === (e = this.videoIndex) || void 0 === e ? void 0 : e.localStreamDescriptions(); for (let e = 0; e < (null === (t = this.nextLocalDescriptions) || void 0 === t ? void 0 : t.length); e++) { const t = this.nextLocalDescriptions[e].streamId; if (0 !== t && t) { const r = this.currLocalDescriptions.findIndex((e => e.streamId === t)); -1 !== r && this.nextLocalDescriptions[e].disabledByWebRTC !== this.currLocalDescriptions[r].disabledByWebRTC && (i = !0) } } return this.currLocalDescriptions = this.nextLocalDescriptions, i } chooseCaptureAndEncodeParameters() { } maxBandwidthKbps() { return 1200 } setIdealMaxBandwidthKbps(e) { } setHasBandwidthPriority(e) { } getQualityMapString(e) { var t; let i = ""; const r = null === (t = this.videoIndex) || void 0 === t ? void 0 : t.localStreamDescriptions(); (null == r ? void 0 : r.length) > 0 && (e.forEach((e => { let t = !1; t = "low" === e.rid ? r[0].disabledByWebRTC : r[1].disabledByWebRTC, i += `{ rid: ${e.rid} active:${e.active} disabledByWebRTC: ${t} maxBitrate:${e.maxBitrate} scaleResolutionDownBy:${e.scaleResolutionDownBy} maxFrameRate:${e.maxFramerate}` })), this.logger.info(`simulcast: content policy:chooseEncodingParameters newQualityMap: ${i}`)) } addObserver(e) { } removeObserver(e) { } forEachObserver(e) { } } }, 6640: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(6085); class n { constructor(e, t = !0, i, r) { this.selfAttendeeId = e, this.scaleResolution = t, this.logger = i, this.browserBehavior = r, this.numberOfPublishedVideoSources = 0, this.idealMaxBandwidthKbps = 1400, this.hasBandwidthPriority = !1, this.encodingParamMap = new Map, this.reset() } reset() { this.numberOfPublishedVideoSources = 0, this.optimalParameters = new o.default(0, 0, 0, 0, !1), this.parametersInEffect = new o.default(0, 0, 0, 0, !1), this.encodingParamMap.set(n.encodingMapKey, { maxBitrate: 0 }) } updateConnectionMetric(e) { } chooseMediaTrackConstraints() { return {} } chooseEncodingParameters() { return new Map } updateIndex(e) { var t; let i = !0, r = 1; this.transceiverController && (i = this.transceiverController.hasVideoInput()); const n = e.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId) + (i ? 1 : 0); if (this.numberOfPublishedVideoSources !== n) { if (this.numberOfPublishedVideoSources = n, this.transceiverController) { const e = this.getStreamCaptureSetting(); e && (r = this.calculateEncodingParameters(e).scaleResolutionDownBy) } this.optimalParameters = new o.default(this.captureWidth(), this.captureHeight(), this.captureFrameRate(), this.maxBandwidthKbps(), !1, r) } else null === (t = this.logger) || void 0 === t || t.debug("Skipping update index; Number of participants has not changed") } wantsResubscribe() { return !this.parametersInEffect.equal(this.optimalParameters) } chooseCaptureAndEncodeParameters() { return this.parametersInEffect = this.optimalParameters.clone(), this.parametersInEffect.clone() } captureWidth() { let e = 640; return this.getNumberOfPublishedVideoSources() > 4 && (e = 320), e } captureHeight() { let e = 384; return this.getNumberOfPublishedVideoSources() > 4 && (e = 192), e } captureFrameRate() { return 15 } maxBandwidthKbps() { if (this.hasBandwidthPriority) return Math.trunc(this.idealMaxBandwidthKbps); let e = 0; return e = this.getNumberOfPublishedVideoSources() <= 2 ? this.idealMaxBandwidthKbps : this.getNumberOfPublishedVideoSources() <= 4 ? 2 * this.idealMaxBandwidthKbps / 3 : (544 / 11 + 14880 / (11 * this.getNumberOfPublishedVideoSources())) / 600 * this.idealMaxBandwidthKbps, Math.trunc(e) } setIdealMaxBandwidthKbps(e) { this.idealMaxBandwidthKbps = e } setHasBandwidthPriority(e) { this.hasBandwidthPriority = e } setTransceiverController(e) { this.transceiverController = e } updateTransceiverController() { return r(this, void 0, void 0, (function* () { const e = this.getStreamCaptureSetting(); if (!e) return; const t = this.calculateEncodingParameters(e); this.shouldUpdateEndcodingParameters(t) && (this.encodingParamMap.set(n.encodingMapKey, t), this.transceiverController.setEncodingParameters(this.encodingParamMap)) })) } shouldUpdateEndcodingParameters(e) { var t, i; const r = null === (i = null === (t = this.transceiverController.localVideoTransceiver().sender.getParameters()) || void 0 === t ? void 0 : t.encodings) || void 0 === i ? void 0 : i[0]; return e.maxBitrate !== (null == r ? void 0 : r.maxBitrate) || e.scaleResolutionDownBy !== (null == r ? void 0 : r.scaleResolutionDownBy) } calculateEncodingParameters(e) { var t, i; const r = 1e3 * this.maxBandwidthKbps(); let o = 1; if (void 0 !== e.height && void 0 !== e.width && this.scaleResolution && !this.hasBandwidthPriority && this.getNumberOfPublishedVideoSources() > 2) { let r = n.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(), n.targetHeightArray.length - 1)]; 480 === r && (null === (t = this.browserBehavior) || void 0 === t ? void 0 : t.disable480pResolutionScaleDown()) && (r = 360), o = Math.max(Math.min(e.height, e.width) / r, 1), null === (i = this.logger) || void 0 === i || i.info(`Resolution scale factor is ${o} for capture resolution ${e.width}x${e.height}. New dimension is ${e.width / o}x${e.height / o}`) } return { scaleResolutionDownBy: o, maxBitrate: r } } getStreamCaptureSetting() { var e, t, i, r; return null === (r = null === (i = null === (t = null === (e = this.transceiverController) || void 0 === e ? void 0 : e.localVideoTransceiver()) || void 0 === t ? void 0 : t.sender) || void 0 === i ? void 0 : i.track) || void 0 === r ? void 0 : r.getSettings() } getNumberOfPublishedVideoSources() { var e; return null !== (e = this.numberOfPublishedVideoSources) && void 0 !== e ? e : 0 } } t.default = n, n.encodingMapKey = "video", n.targetHeightArray = [0, 0, 0, 540, 540, 480, 480, 480, 480, 360, 360, 360, 360, 270, 270, 270, 270, 180, 180, 180, 180, 180, 180, 180, 180, 180] }, 1571: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(6085); t.default = class { constructor() { } updateConnectionMetric(e) { } chooseMediaTrackConstraints() { return {} } chooseEncodingParameters() { return new Map } updateIndex(e) { } wantsResubscribe() { return !1 } chooseCaptureAndEncodeParameters() { return new r.default(0, 0, 0, 0, !1) } maxBandwidthKbps() { return 0 } setIdealMaxBandwidthKbps(e) { } setHasBandwidthPriority(e) { } } }, 9734: (e, t) => { "use strict"; function i(e) { return e.map((e => "object" == typeof e ? JSON.stringify(e) : `${e}`)).join(" ") } Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e) { this.base = e } debug(...e) { this.base.debug(i(e)) } info(...e) { this.base.info(i(e)) } warn(...e) { this.base.warn(i(e)) } error(...e) { this.base.error(i(e)) } } }, 1619: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.VoiceFocusDeviceTransformer = void 0; const o = i(9800), n = i(7442), s = i(8495), a = i(9734), d = i(8063), l = i(3849); class c { constructor(e, { preload: t = !0, logger: i, fetchBehavior: r = c.defaultFetchBehavior() }, o) { this.spec = e, this.supported = !0, this.logger = i, this.vfLogger = i ? new a.default(i) : void 0, this.preload = t, this.fetchBehavior = r, this.spec = c.augmentSpec(this.spec), o && (this.configuration = Promise.resolve(o)) } static isSupported(e, t) { var i, r; const s = { fetchBehavior: c.defaultFetchBehavior(), logger: (null == t ? void 0 : t.logger) ? new a.default(t.logger) : void 0 }; if (n.isIFramed()) { if (!1 === (null == t ? void 0 : t.allowIFrame)) return null === (i = null == t ? void 0 : t.logger) || void 0 === i || i.error("Amazon Voice Focus support check inside iframe: not supported."), Promise.resolve(!1); null === (r = null == t ? void 0 : t.logger) || void 0 === r || r.warn("Amazon Voice Focus support check inside iframe: not recommended.") } return o.VoiceFocus.isSupported(c.augmentSpec(e), s) } static create(e = {}, t = {}, i, o, n) { var s, a, d; return r(this, void 0, void 0, (function* () { o && o.Meeting.Meeting && (o = o.Meeting); const r = "AVAILABLE" === (null === (d = null === (a = null === (s = null == o ? void 0 : o.Meeting) || void 0 === s ? void 0 : s.MeetingFeatures) || void 0 === a ? void 0 : a.Audio) || void 0 === d ? void 0 : d.EchoReduction), n = i && !0 === i.supported && "ns_es" === i.model.name && !r, l = "ns_es" === e.name && !r; if (n || l) throw new Error("Echo Reduction requested but not enabled."); const u = new c(e, t, i); return yield u.init(), u })) } static configure(e = {}, t = {}) { return r(this, void 0, void 0, (function* () { return new c(e, t, void 0).configure(!0) })) } getConfiguration() { return this.configuration } isSupported() { return this.supported } createTransformDevice(e, t) { return r(this, void 0, void 0, (function* () { if (this.supported) try { const i = !0, [r, o] = yield this.allocateVoiceFocus(i), n = Object.assign(Object.assign({}, t), { es: "ns_es" === this.spec.name }); return new d.default(e, r, o, n) } catch (e) { return } })) } static augmentSpec(e) { return e && (e.assetGroup || e.revisionID) ? e : Object.assign(Object.assign({}, e), { assetGroup: c.currentSDKAssetGroup() }) } configure(e = !1) { return r(this, void 0, void 0, (function* () { const t = { fetchBehavior: this.fetchBehavior, preResolve: e, logger: this.vfLogger }; return o.VoiceFocus.configure(this.spec, t) })) } init() { var e; return r(this, void 0, void 0, (function* () { this.configuration || (this.configuration = this.configure()); const t = yield this.configuration; if (t.supported) { this.pendingVoiceFocus = this.createVoiceFocus(t, this.preload); try { yield this.pendingVoiceFocus } catch (t) { null === (e = this.logger) || void 0 === e || e.error(`Unable to initialize Amazon Voice Focus: ${t}`), this.supported = !1 } } else this.supported = !1 })) } createVoiceFocus(e, t) { return r(this, void 0, void 0, (function* () { const i = new l.default; return [yield o.VoiceFocus.init(e, { delegate: i, preload: t, logger: this.vfLogger }), i] })) } allocateVoiceFocus(e) { return r(this, void 0, void 0, (function* () { if (!this.supported) throw new Error("Not supported."); if (this.pendingVoiceFocus) { const e = this.pendingVoiceFocus; return this.pendingVoiceFocus = void 0, e } return this.createVoiceFocus(yield this.configuration, e) })) } static majorVersion() { return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0] } static majorMinorVersion() { return s.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0] } static currentSDKAssetGroup() { const e = this.majorVersion(); return e ? `sdk-${e}` : "stable-v1" } static defaultFetchBehavior() { const e = c.majorMinorVersion() || "unknown", t = s.default.sdkUserAgentLowResolution; return { escapedQueryString: `sdk=${encodeURIComponent(e)}&ua=${encodeURIComponent(t)}` } } } t.VoiceFocusDeviceTransformer = c, t.default = c }, 8063: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(9297); class n { constructor(e, t, i, r, n = !1, s, a = new o.default, d = new Map, l, c) { this.device = e, this.voiceFocus = t, this.delegate = i, this.nodeOptions = r, this.failed = n, this.node = s, this.browserBehavior = a, this.farEndStreamToAudioSourceNode = d, this.mixDestNode = l, this.mixSourceNode = c } getInnerDevice() { return this.device } mute(e) { return r(this, void 0, void 0, (function* () { this.node && (e ? yield this.node.disable() : yield this.node.enable()) })) } stop() { return r(this, void 0, void 0, (function* () { this.node && (this.node.disconnect(), yield this.node.stop()) })) } chooseNewInnerDevice(e) { return r(this, void 0, void 0, (function* () { return this.device !== e || ("default" === (t = e) || t && "object" == typeof t && ("deviceId" in t && "default" === t.deviceId || "id" in t && "default" === t.id)) ? new n(e, this.voiceFocus, this.delegate, this.nodeOptions, this.failed, this.node, this.browserBehavior, this.farEndStreamToAudioSourceNode, this.mixDestNode, this.mixSourceNode) : this; var t })) } intrinsicDevice() { return r(this, void 0, void 0, (function* () { if (this.failed) return this.device; const e = this.nodeOptions.es, t = { echoCancellation: !e, googEchoCancellation: !e, googEchoCancellation2: !e, noiseSuppression: !1, googNoiseSuppression: !1, googHighpassFilter: !1, googNoiseSuppression2: !1 }; let i; return i = !this.nodeOptions || void 0 === this.nodeOptions.agc || this.nodeOptions.agc.useBuiltInAGC, t.autoGainControl = i, t.googAutoGainControl = i, t.googAutoGainControl2 = i, this.device ? "string" == typeof this.device ? (this.browserBehavior.requiresNoExactMediaStreamConstraints() ? t.deviceId = this.device : t.deviceId = { exact: this.device }, t) : this.device.id ? this.device : Object.assign(Object.assign({}, this.device), t) : t })) } createAudioNode(e) { var t, i; return r(this, void 0, void 0, (function* () { if ((null === (t = this.node) || void 0 === t ? void 0 : t.context) === e) return { start: this.node, end: this.node }; const r = Object.assign({ enabled: !0, agc: { useVoiceFocusAGC: !1 } }, this.nodeOptions); try { if (null === (i = this.node) || void 0 === i || i.disconnect(), this.node = yield this.voiceFocus.createNode(e, r), this.nodeOptions.es) { this.mixDestNode = new MediaStreamAudioDestinationNode(e, { channelCount: 1, channelCountMode: "explicit" }); for (const e of this.farEndStreamToAudioSourceNode.keys()) this.assignFarEndStreamToAudioSourceNode(e); this.createMixSourceNode() } return { start: this.node, end: this.node } } catch (e) { throw this.failed = !0, this.delegate.onFallback(this, e), e } })) } observeMeetingAudio(e) { return r(this, void 0, void 0, (function* () { if (!this.nodeOptions.es) return; e.addAudioMixObserver(this); const t = yield e.getCurrentMeetingAudioStream(); t && this.addFarEndStream(t) })) } unObserveMeetingAudio(e) { return r(this, void 0, void 0, (function* () { if (!this.nodeOptions.es) return; e.removeAudioMixObserver(this); const t = yield e.getCurrentMeetingAudioStream(); t && this.removeFarendStream(t) })) } addObserver(e) { this.delegate.addObserver(e) } removeObserver(e) { this.delegate.removeObserver(e) } addFarEndStream(e) { return r(this, void 0, void 0, (function* () { this.nodeOptions.es && e && !this.farEndStreamToAudioSourceNode.has(e) && (this.node ? this.assignFarEndStreamToAudioSourceNode(e) : this.farEndStreamToAudioSourceNode.set(e, null)) })) } removeFarendStream(e) { var t; return r(this, void 0, void 0, (function* () { null === (t = this.farEndStreamToAudioSourceNode.get(e)) || void 0 === t || t.disconnect(), this.farEndStreamToAudioSourceNode.delete(e) })) } meetingAudioStreamBecameActive(e) { return r(this, void 0, void 0, (function* () { this.addFarEndStream(e) })) } meetingAudioStreamBecameInactive(e) { return r(this, void 0, void 0, (function* () { this.removeFarendStream(e) })) } assignFarEndStreamToAudioSourceNode(e) { const t = this.node.context.createMediaStreamSource(e); t.channelCount = 1, t.channelCountMode = "explicit", this.farEndStreamToAudioSourceNode.set(e, t), t.connect(this.mixDestNode, 0) } createMixSourceNode() { this.mixSourceNode = this.node.context.createMediaStreamSource(this.mixDestNode.stream), this.mixSourceNode.channelCount = 1, this.mixSourceNode.channelCountMode = "explicit", this.mixSourceNode.connect(this.node, 0, 1) } } t.default = n }, 3849: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor() { this.observers = new Set } addObserver(e) { this.observers.add(e) } removeObserver(e) { this.observers.delete(e) } onFallback(e, t) { var i; for (const r of this.observers) null === (i = r.voiceFocusFellBackToInnerStream) || void 0 === i || i.call(r, e, t) } onCPUWarning() { var e; for (const t of this.observers) null === (e = t.voiceFocusInsufficientResources) || void 0 === e || e.call(t) } } }, 2187: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor(e, t, i, r, o) { this.logger = e, this.realtimeController = t, this.minVolumeDecibels = i, this.maxVolumeDecibels = r, this.selfAttendeeId = o, this.streamIdToAttendeeId = {}, this.streamIdToExternalUserId = {}, this.warnedAboutMissingStreamIdMapping = {}, this.attendeeIdToStreamId = {}, this.sessionReconnected = !1 } onReconnect() { this.sessionReconnected = !0 } sendRealtimeUpdatesForAudioStreamIdInfo(e) { let t = 0; for (const i of e.streams) { const r = !!i.attendeeId, o = !!i.externalUserId, n = i.hasOwnProperty("muted"), s = !!i.dropped; if (r) { this.attendeeIdToStreamId[i.attendeeId] && this.attendeeIdToStreamId[i.attendeeId] < i.audioStreamId && delete this.attendeeIdToStreamId[i.attendeeId], this.streamIdToAttendeeId[i.audioStreamId] = i.attendeeId; const r = o ? i.externalUserId : i.attendeeId; this.streamIdToExternalUserId[i.audioStreamId] = r, this.attendeeIdToStreamId[i.attendeeId] = i.audioStreamId, this.realtimeController.realtimeSetAttendeeIdPresence(i.attendeeId, !0, r, !1, { attendeeIndex: t++, attendeesInFrame: e.streams.length }) } if (n) { const e = this.streamIdToAttendeeId[i.audioStreamId], t = this.streamIdToExternalUserId[i.audioStreamId]; this.realtimeController.realtimeUpdateVolumeIndicator(e, null, i.muted, null, t) } if (!r && !n) { const r = this.streamIdToAttendeeId[i.audioStreamId]; if (r) { const o = this.streamIdToExternalUserId[i.audioStreamId]; delete this.streamIdToAttendeeId[i.audioStreamId], delete this.streamIdToExternalUserId[i.audioStreamId], delete this.warnedAboutMissingStreamIdMapping[i.audioStreamId], this.attendeeIdToStreamId[r] === i.audioStreamId && delete this.attendeeIdToStreamId[r]; let n = !1; for (const e of Object.keys(this.streamIdToAttendeeId)) { const t = parseInt(e); if (t > i.audioStreamId && this.streamIdToAttendeeId[t] === r) { n = !0; break } } n || this.realtimeController.realtimeSetAttendeeIdPresence(r, !1, o, s, { attendeeIndex: t++, attendeesInFrame: e.streams.length }) } } } this.sessionReconnected && (this.cleanUpState(e), this.sessionReconnected = !1) } cleanUpState(e) { const t = Object.values(this.streamIdToAttendeeId), i = e.streams.map((e => e.attendeeId)), r = t.filter((e => !i.includes(e))); for (const [e, t] of r.entries()) { const i = this.attendeeIdToStreamId[t], r = this.streamIdToExternalUserId[i]; delete this.streamIdToAttendeeId[i], delete this.streamIdToExternalUserId[i], delete this.warnedAboutMissingStreamIdMapping[i], delete this.attendeeIdToStreamId[t], t !== this.selfAttendeeId ? this.realtimeController.realtimeSetAttendeeIdPresence(t, !1, r, !1, { attendeeIndex: e, attendeesInFrame: t.length }) : this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection") } } sendRealtimeUpdatesForAudioMetadata(e) { let t = null, i = null; for (const r of e.attendeeStates) { const e = this.attendeeIdForStreamId(r.audioStreamId); r.hasOwnProperty("volume") && (null === t && (t = {}), null !== e && (t[e] = this.normalizedVolume(r))), r.hasOwnProperty("signalStrength") && (null === i && (i = {}), null !== e && (i[e] = this.normalizedSignalStrength(r))) } this.applyRealtimeUpdatesForAudioMetadata(t, i) } normalizedVolume(e) { const t = 1 - (-e.volume - this.maxVolumeDecibels) / (this.minVolumeDecibels - this.maxVolumeDecibels); return Math.min(Math.max(t, 0), 1) } normalizedSignalStrength(e) { const t = e.signalStrength / i.MAX_SIGNAL_STRENGTH_LEVELS; return Math.min(Math.max(t, 0), 1) } applyRealtimeUpdatesForAudioMetadata(e, t) { for (const r in this.streamIdToAttendeeId) { const o = this.streamIdToAttendeeId[r], n = this.streamIdToExternalUserId[r]; let s = null, a = null; null !== e && (s = e.hasOwnProperty(o) ? e[o] : i.IMPLICIT_VOLUME), null !== t && (a = t.hasOwnProperty(o) ? t[o] : i.IMPLICIT_SIGNAL_STRENGTH), null === s && null === a || this.realtimeController.realtimeUpdateVolumeIndicator(o, s, null, a, n) } } attendeeIdForStreamId(e) { if (0 === e) return null; return this.streamIdToAttendeeId[e] || (this.warnedAboutMissingStreamIdMapping[e] || (this.warnedAboutMissingStreamIdMapping[e] = !0, this.logger.warn(`volume indicator stream id ${e} seen before being defined`)), null) } } t.default = i, i.MAX_SIGNAL_STRENGTH_LEVELS = 2, i.IMPLICIT_VOLUME = 0, i.IMPLICIT_SIGNAL_STRENGTH = 1 }, 5786: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(8495), o = i(4643); t.default = class { constructor(e) { this.logger = e } create(e, t, i) { this.connection = new WebSocket(i ? e : r.default.urlWithVersion(e), t), this.connection.binaryType = "arraybuffer" } send(e) { if (!this.connection) return this.logger.error("WebSocket not yet created or already destroyed."), !1; try { return e instanceof Uint8Array ? this.connection.send(e.buffer) : this.connection.send(e), !0 } catch (e) { return this.logger.debug((() => `send error: ${e.message}, websocket state=${o.default[this.readyState()]}`)), !1 } } close(e, t) { var i; null === (i = this.connection) || void 0 === i || i.close(e, t) } destroy() { this.connection = void 0 } addEventListener(e, t) { this.connection ? this.connection.addEventListener(e, t) : this.logger.warn("Cannot add event listener with no WebSocket connection.") } removeEventListener(e, t) { var i; null === (i = this.connection) || void 0 === i || i.removeEventListener(e, t) } readyState() { if (!this.connection) return o.default.None; switch (this.connection.readyState) { case WebSocket.CONNECTING: return o.default.Connecting; case WebSocket.OPEN: return o.default.Open; case WebSocket.CLOSING: return o.default.Closing; case WebSocket.CLOSED: return o.default.Closed } } } }, 4643: (e, t) => { "use strict"; var i; Object.defineProperty(t, "__esModule", { value: !0 }), t.WebSocketReadyState = void 0, function (e) { e[e.None = 0] = "None", e[e.Connecting = 1] = "Connecting", e[e.Open = 2] = "Open", e[e.Closing = 3] = "Closing", e[e.Closed = 4] = "Closed" }(i = t.WebSocketReadyState || (t.WebSocketReadyState = {})), t.default = i }, 5169: (e, t, i) => { "use strict"; i.r(t), i.d(t, { Alert: () => xt, Button: () => _t, Carousel: () => Nt, Collapse: () => qt, Dropdown: () => ci, Modal: () => Di, Offcanvas: () => zi, Popover: () => ur, ScrollSpy: () => br, Tab: () => Tr, Toast: () => Dr, Tooltip: () => dr }); var r = {}; i.r(r), i.d(r, { afterMain: () => k, afterRead: () => w, afterWrite: () => I, applyStyles: () => D, arrow: () => Q, auto: () => d, basePlacements: () => l, beforeMain: () => S, beforeRead: () => v, beforeWrite: () => _, bottom: () => n, clippingParents: () => h, computeStyles: () => te, createPopper: () => Me, createPopperBase: () => Ae, createPopperLite: () => Oe, detectOverflow: () => ge, end: () => u, eventListeners: () => re, flip: () => be, hide: () => we, left: () => a, main: () => x, modifierPhases: () => T, offset: () => Se, placements: () => b, popper: () => m, popperGenerator: () => Ee, popperOffsets: () => xe, preventOverflow: () => ke, read: () => y, reference: () => f, right: () => s, start: () => c, top: () => o, variationPlacements: () => g, viewport: () => p, write: () => C }); var o = "top", n = "bottom", s = "right", a = "left", d = "auto", l = [o, n, s, a], c = "start", u = "end", h = "clippingParents", p = "viewport", m = "popper", f = "reference", g = l.reduce((function (e, t) { return e.concat([t + "-" + c, t + "-" + u]) }), []), b = [].concat(l, [d]).reduce((function (e, t) { return e.concat([t, t + "-" + c, t + "-" + u]) }), []), v = "beforeRead", y = "read", w = "afterRead", S = "beforeMain", x = "main", k = "afterMain", _ = "beforeWrite", C = "write", I = "afterWrite", T = [v, y, w, S, x, k, _, C, I]; function E(e) { return e ? (e.nodeName || "").toLowerCase() : null } function A(e) { if (null == e) return window; if ("[object Window]" !== e.toString()) { var t = e.ownerDocument; return t && t.defaultView || window } return e } function M(e) { return e instanceof A(e).Element || e instanceof Element } function O(e) { return e instanceof A(e).HTMLElement || e instanceof HTMLElement } function P(e) { return "undefined" != typeof ShadowRoot && (e instanceof A(e).ShadowRoot || e instanceof ShadowRoot) } const D = { name: "applyStyles", enabled: !0, phase: "write", fn: function (e) { var t = e.state; Object.keys(t.elements).forEach((function (e) { var i = t.styles[e] || {}, r = t.attributes[e] || {}, o = t.elements[e]; O(o) && E(o) && (Object.assign(o.style, i), Object.keys(r).forEach((function (e) { var t = r[e]; !1 === t ? o.removeAttribute(e) : o.setAttribute(e, !0 === t ? "" : t) }))) })) }, effect: function (e) { var t = e.state, i = { popper: { position: t.options.strategy, left: "0", top: "0", margin: "0" }, arrow: { position: "absolute" }, reference: {} }; return Object.assign(t.elements.popper.style, i.popper), t.styles = i, t.elements.arrow && Object.assign(t.elements.arrow.style, i.arrow), function () { Object.keys(t.elements).forEach((function (e) { var r = t.elements[e], o = t.attributes[e] || {}, n = Object.keys(t.styles.hasOwnProperty(e) ? t.styles[e] : i[e]).reduce((function (e, t) { return e[t] = "", e }), {}); O(r) && E(r) && (Object.assign(r.style, n), Object.keys(o).forEach((function (e) { r.removeAttribute(e) }))) })) } }, requires: ["computeStyles"] }; function R(e) { return e.split("-")[0] } var L = Math.max, B = Math.min, V = Math.round; function F(e, t) { void 0 === t && (t = !1); var i = e.getBoundingClientRect(), r = 1, o = 1; if (O(e) && t) { var n = e.offsetHeight, s = e.offsetWidth; s > 0 && (r = V(i.width) / s || 1), n > 0 && (o = V(i.height) / n || 1) } return { width: i.width / r, height: i.height / o, top: i.top / o, right: i.right / r, bottom: i.bottom / o, left: i.left / r, x: i.left / r, y: i.top / o } } function N(e) { var t = F(e), i = e.offsetWidth, r = e.offsetHeight; return Math.abs(t.width - i) <= 1 && (i = t.width), Math.abs(t.height - r) <= 1 && (r = t.height), { x: e.offsetLeft, y: e.offsetTop, width: i, height: r } } function j(e, t) { var i = t.getRootNode && t.getRootNode(); if (e.contains(t)) return !0; if (i && P(i)) { var r = t; do { if (r && e.isSameNode(r)) return !0; r = r.parentNode || r.host } while (r) } return !1 } function U(e) { return A(e).getComputedStyle(e) } function z(e) { return ["table", "td", "th"].indexOf(E(e)) >= 0 } function $(e) { return ((M(e) ? e.ownerDocument : e.document) || window.document).documentElement } function H(e) { return "html" === E(e) ? e : e.assignedSlot || e.parentNode || (P(e) ? e.host : null) || $(e) } function W(e) { return O(e) && "fixed" !== U(e).position ? e.offsetParent : null } function q(e) { for (var t = A(e), i = W(e); i && z(i) && "static" === U(i).position;)i = W(i); return i && ("html" === E(i) || "body" === E(i) && "static" === U(i).position) ? t : i || function (e) { var t = -1 !== navigator.userAgent.toLowerCase().indexOf("firefox"); if (-1 !== navigator.userAgent.indexOf("Trident") && O(e) && "fixed" === U(e).position) return null; var i = H(e); for (P(i) && (i = i.host); O(i) && ["html", "body"].indexOf(E(i)) < 0;) { var r = U(i); if ("none" !== r.transform || "none" !== r.perspective || "paint" === r.contain || -1 !== ["transform", "perspective"].indexOf(r.willChange) || t && "filter" === r.willChange || t && r.filter && "none" !== r.filter) return i; i = i.parentNode } return null }(e) || t } function K(e) { return ["top", "bottom"].indexOf(e) >= 0 ? "x" : "y" } function G(e, t, i) { return L(e, B(t, i)) } function J(e) { return Object.assign({}, { top: 0, right: 0, bottom: 0, left: 0 }, e) } function Z(e, t) { return t.reduce((function (t, i) { return t[i] = e, t }), {}) } const Q = { name: "arrow", enabled: !0, phase: "main", fn: function (e) { var t, i = e.state, r = e.name, d = e.options, c = i.elements.arrow, u = i.modifiersData.popperOffsets, h = R(i.placement), p = K(h), m = [a, s].indexOf(h) >= 0 ? "height" : "width"; if (c && u) { var f = function (e, t) { return J("number" != typeof (e = "function" == typeof e ? e(Object.assign({}, t.rects, { placement: t.placement })) : e) ? e : Z(e, l)) }(d.padding, i), g = N(c), b = "y" === p ? o : a, v = "y" === p ? n : s, y = i.rects.reference[m] + i.rects.reference[p] - u[p] - i.rects.popper[m], w = u[p] - i.rects.reference[p], S = q(c), x = S ? "y" === p ? S.clientHeight || 0 : S.clientWidth || 0 : 0, k = y / 2 - w / 2, _ = f[b], C = x - g[m] - f[v], I = x / 2 - g[m] / 2 + k, T = G(_, I, C), E = p; i.modifiersData[r] = ((t = {})[E] = T, t.centerOffset = T - I, t) } }, effect: function (e) { var t = e.state, i = e.options.element, r = void 0 === i ? "[data-popper-arrow]" : i; null != r && ("string" != typeof r || (r = t.elements.popper.querySelector(r))) && j(t.elements.popper, r) && (t.elements.arrow = r) }, requires: ["popperOffsets"], requiresIfExists: ["preventOverflow"] }; function X(e) { return e.split("-")[1] } var Y = { top: "auto", right: "auto", bottom: "auto", left: "auto" }; function ee(e) { var t, i = e.popper, r = e.popperRect, d = e.placement, l = e.variation, c = e.offsets, h = e.position, p = e.gpuAcceleration, m = e.adaptive, f = e.roundOffsets, g = e.isFixed, b = c.x, v = void 0 === b ? 0 : b, y = c.y, w = void 0 === y ? 0 : y, S = "function" == typeof f ? f({ x: v, y: w }) : { x: v, y: w }; v = S.x, w = S.y; var x = c.hasOwnProperty("x"), k = c.hasOwnProperty("y"), _ = a, C = o, I = window; if (m) { var T = q(i), E = "clientHeight", M = "clientWidth"; T === A(i) && "static" !== U(T = $(i)).position && "absolute" === h && (E = "scrollHeight", M = "scrollWidth"), (d === o || (d === a || d === s) && l === u) && (C = n, w -= (g && T === I && I.visualViewport ? I.visualViewport.height : T[E]) - r.height, w *= p ? 1 : -1), d !== a && (d !== o && d !== n || l !== u) || (_ = s, v -= (g && T === I && I.visualViewport ? I.visualViewport.width : T[M]) - r.width, v *= p ? 1 : -1) } var O, P = Object.assign({ position: h }, m && Y), D = !0 === f ? function (e) { var t = e.x, i = e.y, r = window.devicePixelRatio || 1; return { x: V(t * r) / r || 0, y: V(i * r) / r || 0 } }({ x: v, y: w }) : { x: v, y: w }; return v = D.x, w = D.y, p ? Object.assign({}, P, ((O = {})[C] = k ? "0" : "", O[_] = x ? "0" : "", O.transform = (I.devicePixelRatio || 1) <= 1 ? "translate(" + v + "px, " + w + "px)" : "translate3d(" + v + "px, " + w + "px, 0)", O)) : Object.assign({}, P, ((t = {})[C] = k ? w + "px" : "", t[_] = x ? v + "px" : "", t.transform = "", t)) } const te = { name: "computeStyles", enabled: !0, phase: "beforeWrite", fn: function (e) { var t = e.state, i = e.options, r = i.gpuAcceleration, o = void 0 === r || r, n = i.adaptive, s = void 0 === n || n, a = i.roundOffsets, d = void 0 === a || a, l = { placement: R(t.placement), variation: X(t.placement), popper: t.elements.popper, popperRect: t.rects.popper, gpuAcceleration: o, isFixed: "fixed" === t.options.strategy }; null != t.modifiersData.popperOffsets && (t.styles.popper = Object.assign({}, t.styles.popper, ee(Object.assign({}, l, { offsets: t.modifiersData.popperOffsets, position: t.options.strategy, adaptive: s, roundOffsets: d })))), null != t.modifiersData.arrow && (t.styles.arrow = Object.assign({}, t.styles.arrow, ee(Object.assign({}, l, { offsets: t.modifiersData.arrow, position: "absolute", adaptive: !1, roundOffsets: d })))), t.attributes.popper = Object.assign({}, t.attributes.popper, { "data-popper-placement": t.placement }) }, data: {} }; var ie = { passive: !0 }; const re = { name: "eventListeners", enabled: !0, phase: "write", fn: function () { }, effect: function (e) { var t = e.state, i = e.instance, r = e.options, o = r.scroll, n = void 0 === o || o, s = r.resize, a = void 0 === s || s, d = A(t.elements.popper), l = [].concat(t.scrollParents.reference, t.scrollParents.popper); return n && l.forEach((function (e) { e.addEventListener("scroll", i.update, ie) })), a && d.addEventListener("resize", i.update, ie), function () { n && l.forEach((function (e) { e.removeEventListener("scroll", i.update, ie) })), a && d.removeEventListener("resize", i.update, ie) } }, data: {} }; var oe = { left: "right", right: "left", bottom: "top", top: "bottom" }; function ne(e) { return e.replace(/left|right|bottom|top/g, (function (e) { return oe[e] })) } var se = { start: "end", end: "start" }; function ae(e) { return e.replace(/start|end/g, (function (e) { return se[e] })) } function de(e) { var t = A(e); return { scrollLeft: t.pageXOffset, scrollTop: t.pageYOffset } } function le(e) { return F($(e)).left + de(e).scrollLeft } function ce(e) { var t = U(e), i = t.overflow, r = t.overflowX, o = t.overflowY; return /auto|scroll|overlay|hidden/.test(i + o + r) } function ue(e) { return ["html", "body", "#document"].indexOf(E(e)) >= 0 ? e.ownerDocument.body : O(e) && ce(e) ? e : ue(H(e)) } function he(e, t) { var i; void 0 === t && (t = []); var r = ue(e), o = r === (null == (i = e.ownerDocument) ? void 0 : i.body), n = A(r), s = o ? [n].concat(n.visualViewport || [], ce(r) ? r : []) : r, a = t.concat(s); return o ? a : a.concat(he(H(s))) } function pe(e) { return Object.assign({}, e, { left: e.x, top: e.y, right: e.x + e.width, bottom: e.y + e.height }) } function me(e, t) { return t === p ? pe(function (e) { var t = A(e), i = $(e), r = t.visualViewport, o = i.clientWidth, n = i.clientHeight, s = 0, a = 0; return r && (o = r.width, n = r.height, /^((?!chrome|android).)*safari/i.test(navigator.userAgent) || (s = r.offsetLeft, a = r.offsetTop)), { width: o, height: n, x: s + le(e), y: a } }(e)) : M(t) ? function (e) { var t = F(e); return t.top = t.top + e.clientTop, t.left = t.left + e.clientLeft, t.bottom = t.top + e.clientHeight, t.right = t.left + e.clientWidth, t.width = e.clientWidth, t.height = e.clientHeight, t.x = t.left, t.y = t.top, t }(t) : pe(function (e) { var t, i = $(e), r = de(e), o = null == (t = e.ownerDocument) ? void 0 : t.body, n = L(i.scrollWidth, i.clientWidth, o ? o.scrollWidth : 0, o ? o.clientWidth : 0), s = L(i.scrollHeight, i.clientHeight, o ? o.scrollHeight : 0, o ? o.clientHeight : 0), a = -r.scrollLeft + le(e), d = -r.scrollTop; return "rtl" === U(o || i).direction && (a += L(i.clientWidth, o ? o.clientWidth : 0) - n), { width: n, height: s, x: a, y: d } }($(e))) } function fe(e) { var t, i = e.reference, r = e.element, d = e.placement, l = d ? R(d) : null, h = d ? X(d) : null, p = i.x + i.width / 2 - r.width / 2, m = i.y + i.height / 2 - r.height / 2; switch (l) { case o: t = { x: p, y: i.y - r.height }; break; case n: t = { x: p, y: i.y + i.height }; break; case s: t = { x: i.x + i.width, y: m }; break; case a: t = { x: i.x - r.width, y: m }; break; default: t = { x: i.x, y: i.y } }var f = l ? K(l) : null; if (null != f) { var g = "y" === f ? "height" : "width"; switch (h) { case c: t[f] = t[f] - (i[g] / 2 - r[g] / 2); break; case u: t[f] = t[f] + (i[g] / 2 - r[g] / 2) } } return t } function ge(e, t) { void 0 === t && (t = {}); var i = t, r = i.placement, a = void 0 === r ? e.placement : r, d = i.boundary, c = void 0 === d ? h : d, u = i.rootBoundary, g = void 0 === u ? p : u, b = i.elementContext, v = void 0 === b ? m : b, y = i.altBoundary, w = void 0 !== y && y, S = i.padding, x = void 0 === S ? 0 : S, k = J("number" != typeof x ? x : Z(x, l)), _ = v === m ? f : m, C = e.rects.popper, I = e.elements[w ? _ : v], T = function (e, t, i) { var r = "clippingParents" === t ? function (e) { var t = he(H(e)), i = ["absolute", "fixed"].indexOf(U(e).position) >= 0 && O(e) ? q(e) : e; return M(i) ? t.filter((function (e) { return M(e) && j(e, i) && "body" !== E(e) })) : [] }(e) : [].concat(t), o = [].concat(r, [i]), n = o[0], s = o.reduce((function (t, i) { var r = me(e, i); return t.top = L(r.top, t.top), t.right = B(r.right, t.right), t.bottom = B(r.bottom, t.bottom), t.left = L(r.left, t.left), t }), me(e, n)); return s.width = s.right - s.left, s.height = s.bottom - s.top, s.x = s.left, s.y = s.top, s }(M(I) ? I : I.contextElement || $(e.elements.popper), c, g), A = F(e.elements.reference), P = fe({ reference: A, element: C, strategy: "absolute", placement: a }), D = pe(Object.assign({}, C, P)), R = v === m ? D : A, V = { top: T.top - R.top + k.top, bottom: R.bottom - T.bottom + k.bottom, left: T.left - R.left + k.left, right: R.right - T.right + k.right }, N = e.modifiersData.offset; if (v === m && N) { var z = N[a]; Object.keys(V).forEach((function (e) { var t = [s, n].indexOf(e) >= 0 ? 1 : -1, i = [o, n].indexOf(e) >= 0 ? "y" : "x"; V[e] += z[i] * t })) } return V } const be = { name: "flip", enabled: !0, phase: "main", fn: function (e) { var t = e.state, i = e.options, r = e.name; if (!t.modifiersData[r]._skip) { for (var u = i.mainAxis, h = void 0 === u || u, p = i.altAxis, m = void 0 === p || p, f = i.fallbackPlacements, v = i.padding, y = i.boundary, w = i.rootBoundary, S = i.altBoundary, x = i.flipVariations, k = void 0 === x || x, _ = i.allowedAutoPlacements, C = t.options.placement, I = R(C), T = f || (I !== C && k ? function (e) { if (R(e) === d) return []; var t = ne(e); return [ae(e), t, ae(t)] }(C) : [ne(C)]), E = [C].concat(T).reduce((function (e, i) { return e.concat(R(i) === d ? function (e, t) { void 0 === t && (t = {}); var i = t, r = i.placement, o = i.boundary, n = i.rootBoundary, s = i.padding, a = i.flipVariations, d = i.allowedAutoPlacements, c = void 0 === d ? b : d, u = X(r), h = u ? a ? g : g.filter((function (e) { return X(e) === u })) : l, p = h.filter((function (e) { return c.indexOf(e) >= 0 })); 0 === p.length && (p = h); var m = p.reduce((function (t, i) { return t[i] = ge(e, { placement: i, boundary: o, rootBoundary: n, padding: s })[R(i)], t }), {}); return Object.keys(m).sort((function (e, t) { return m[e] - m[t] })) }(t, { placement: i, boundary: y, rootBoundary: w, padding: v, flipVariations: k, allowedAutoPlacements: _ }) : i) }), []), A = t.rects.reference, M = t.rects.popper, O = new Map, P = !0, D = E[0], L = 0; L < E.length; L++) { var B = E[L], V = R(B), F = X(B) === c, N = [o, n].indexOf(V) >= 0, j = N ? "width" : "height", U = ge(t, { placement: B, boundary: y, rootBoundary: w, altBoundary: S, padding: v }), z = N ? F ? s : a : F ? n : o; A[j] > M[j] && (z = ne(z)); var $ = ne(z), H = []; if (h && H.push(U[V] <= 0), m && H.push(U[z] <= 0, U[$] <= 0), H.every((function (e) { return e }))) { D = B, P = !1; break } O.set(B, H) } if (P) for (var W = function (e) { var t = E.find((function (t) { var i = O.get(t); if (i) return i.slice(0, e).every((function (e) { return e })) })); if (t) return D = t, "break" }, q = k ? 3 : 1; q > 0 && "break" !== W(q); q--); t.placement !== D && (t.modifiersData[r]._skip = !0, t.placement = D, t.reset = !0) } }, requiresIfExists: ["offset"], data: { _skip: !1 } }; function ve(e, t, i) { return void 0 === i && (i = { x: 0, y: 0 }), { top: e.top - t.height - i.y, right: e.right - t.width + i.x, bottom: e.bottom - t.height + i.y, left: e.left - t.width - i.x } } function ye(e) { return [o, s, n, a].some((function (t) { return e[t] >= 0 })) } const we = { name: "hide", enabled: !0, phase: "main", requiresIfExists: ["preventOverflow"], fn: function (e) { var t = e.state, i = e.name, r = t.rects.reference, o = t.rects.popper, n = t.modifiersData.preventOverflow, s = ge(t, { elementContext: "reference" }), a = ge(t, { altBoundary: !0 }), d = ve(s, r), l = ve(a, o, n), c = ye(d), u = ye(l); t.modifiersData[i] = { referenceClippingOffsets: d, popperEscapeOffsets: l, isReferenceHidden: c, hasPopperEscaped: u }, t.attributes.popper = Object.assign({}, t.attributes.popper, { "data-popper-reference-hidden": c, "data-popper-escaped": u }) } }, Se = { name: "offset", enabled: !0, phase: "main", requires: ["popperOffsets"], fn: function (e) { var t = e.state, i = e.options, r = e.name, n = i.offset, d = void 0 === n ? [0, 0] : n, l = b.reduce((function (e, i) { return e[i] = function (e, t, i) { var r = R(e), n = [a, o].indexOf(r) >= 0 ? -1 : 1, d = "function" == typeof i ? i(Object.assign({}, t, { placement: e })) : i, l = d[0], c = d[1]; return l = l || 0, c = (c || 0) * n, [a, s].indexOf(r) >= 0 ? { x: c, y: l } : { x: l, y: c } }(i, t.rects, d), e }), {}), c = l[t.placement], u = c.x, h = c.y; null != t.modifiersData.popperOffsets && (t.modifiersData.popperOffsets.x += u, t.modifiersData.popperOffsets.y += h), t.modifiersData[r] = l } }, xe = { name: "popperOffsets", enabled: !0, phase: "read", fn: function (e) { var t = e.state, i = e.name; t.modifiersData[i] = fe({ reference: t.rects.reference, element: t.rects.popper, strategy: "absolute", placement: t.placement }) }, data: {} }, ke = { name: "preventOverflow", enabled: !0, phase: "main", fn: function (e) { var t = e.state, i = e.options, r = e.name, d = i.mainAxis, l = void 0 === d || d, u = i.altAxis, h = void 0 !== u && u, p = i.boundary, m = i.rootBoundary, f = i.altBoundary, g = i.padding, b = i.tether, v = void 0 === b || b, y = i.tetherOffset, w = void 0 === y ? 0 : y, S = ge(t, { boundary: p, rootBoundary: m, padding: g, altBoundary: f }), x = R(t.placement), k = X(t.placement), _ = !k, C = K(x), I = "x" === C ? "y" : "x", T = t.modifiersData.popperOffsets, E = t.rects.reference, A = t.rects.popper, M = "function" == typeof w ? w(Object.assign({}, t.rects, { placement: t.placement })) : w, O = "number" == typeof M ? { mainAxis: M, altAxis: M } : Object.assign({ mainAxis: 0, altAxis: 0 }, M), P = t.modifiersData.offset ? t.modifiersData.offset[t.placement] : null, D = { x: 0, y: 0 }; if (T) { if (l) { var V, F = "y" === C ? o : a, j = "y" === C ? n : s, U = "y" === C ? "height" : "width", z = T[C], $ = z + S[F], H = z - S[j], W = v ? -A[U] / 2 : 0, J = k === c ? E[U] : A[U], Z = k === c ? -A[U] : -E[U], Q = t.elements.arrow, Y = v && Q ? N(Q) : { width: 0, height: 0 }, ee = t.modifiersData["arrow#persistent"] ? t.modifiersData["arrow#persistent"].padding : { top: 0, right: 0, bottom: 0, left: 0 }, te = ee[F], ie = ee[j], re = G(0, E[U], Y[U]), oe = _ ? E[U] / 2 - W - re - te - O.mainAxis : J - re - te - O.mainAxis, ne = _ ? -E[U] / 2 + W + re + ie + O.mainAxis : Z + re + ie + O.mainAxis, se = t.elements.arrow && q(t.elements.arrow), ae = se ? "y" === C ? se.clientTop || 0 : se.clientLeft || 0 : 0, de = null != (V = null == P ? void 0 : P[C]) ? V : 0, le = z + ne - de, ce = G(v ? B($, z + oe - de - ae) : $, z, v ? L(H, le) : H); T[C] = ce, D[C] = ce - z } if (h) { var ue, he = "x" === C ? o : a, pe = "x" === C ? n : s, me = T[I], fe = "y" === I ? "height" : "width", be = me + S[he], ve = me - S[pe], ye = -1 !== [o, a].indexOf(x), we = null != (ue = null == P ? void 0 : P[I]) ? ue : 0, Se = ye ? be : me - E[fe] - A[fe] - we + O.altAxis, xe = ye ? me + E[fe] + A[fe] - we - O.altAxis : ve, ke = v && ye ? function (e, t, i) { var r = G(e, t, i); return r > i ? i : r }(Se, me, xe) : G(v ? Se : be, me, v ? xe : ve); T[I] = ke, D[I] = ke - me } t.modifiersData[r] = D } }, requiresIfExists: ["offset"] }; function _e(e, t, i) { void 0 === i && (i = !1); var r, o, n = O(t), s = O(t) && function (e) { var t = e.getBoundingClientRect(), i = V(t.width) / e.offsetWidth || 1, r = V(t.height) / e.offsetHeight || 1; return 1 !== i || 1 !== r }(t), a = $(t), d = F(e, s), l = { scrollLeft: 0, scrollTop: 0 }, c = { x: 0, y: 0 }; return (n || !n && !i) && (("body" !== E(t) || ce(a)) && (l = (r = t) !== A(r) && O(r) ? { scrollLeft: (o = r).scrollLeft, scrollTop: o.scrollTop } : de(r)), O(t) ? ((c = F(t, !0)).x += t.clientLeft, c.y += t.clientTop) : a && (c.x = le(a))), { x: d.left + l.scrollLeft - c.x, y: d.top + l.scrollTop - c.y, width: d.width, height: d.height } } function Ce(e) { var t = new Map, i = new Set, r = []; function o(e) { i.add(e.name), [].concat(e.requires || [], e.requiresIfExists || []).forEach((function (e) { if (!i.has(e)) { var r = t.get(e); r && o(r) } })), r.push(e) } return e.forEach((function (e) { t.set(e.name, e) })), e.forEach((function (e) { i.has(e.name) || o(e) })), r } var Ie = { placement: "bottom", modifiers: [], strategy: "absolute" }; function Te() { for (var e = arguments.length, t = new Array(e), i = 0; i < e; i++)t[i] = arguments[i]; return !t.some((function (e) { return !(e && "function" == typeof e.getBoundingClientRect) })) } function Ee(e) { void 0 === e && (e = {}); var t = e, i = t.defaultModifiers, r = void 0 === i ? [] : i, o = t.defaultOptions, n = void 0 === o ? Ie : o; return function (e, t, i) { void 0 === i && (i = n); var o, s, a = { placement: "bottom", orderedModifiers: [], options: Object.assign({}, Ie, n), modifiersData: {}, elements: { reference: e, popper: t }, attributes: {}, styles: {} }, d = [], l = !1, c = { state: a, setOptions: function (i) { var o = "function" == typeof i ? i(a.options) : i; u(), a.options = Object.assign({}, n, a.options, o), a.scrollParents = { reference: M(e) ? he(e) : e.contextElement ? he(e.contextElement) : [], popper: he(t) }; var s, l, h = function (e) { var t = Ce(e); return T.reduce((function (e, i) { return e.concat(t.filter((function (e) { return e.phase === i }))) }), []) }((s = [].concat(r, a.options.modifiers), l = s.reduce((function (e, t) { var i = e[t.name]; return e[t.name] = i ? Object.assign({}, i, t, { options: Object.assign({}, i.options, t.options), data: Object.assign({}, i.data, t.data) }) : t, e }), {}), Object.keys(l).map((function (e) { return l[e] })))); return a.orderedModifiers = h.filter((function (e) { return e.enabled })), a.orderedModifiers.forEach((function (e) { var t = e.name, i = e.options, r = void 0 === i ? {} : i, o = e.effect; if ("function" == typeof o) { var n = o({ state: a, name: t, instance: c, options: r }); d.push(n || function () { }) } })), c.update() }, forceUpdate: function () { if (!l) { var e = a.elements, t = e.reference, i = e.popper; if (Te(t, i)) { a.rects = { reference: _e(t, q(i), "fixed" === a.options.strategy), popper: N(i) }, a.reset = !1, a.placement = a.options.placement, a.orderedModifiers.forEach((function (e) { return a.modifiersData[e.name] = Object.assign({}, e.data) })); for (var r = 0; r < a.orderedModifiers.length; r++)if (!0 !== a.reset) { var o = a.orderedModifiers[r], n = o.fn, s = o.options, d = void 0 === s ? {} : s, u = o.name; "function" == typeof n && (a = n({ state: a, options: d, name: u, instance: c }) || a) } else a.reset = !1, r = -1 } } }, update: (o = function () { return new Promise((function (e) { c.forceUpdate(), e(a) })) }, function () { return s || (s = new Promise((function (e) { Promise.resolve().then((function () { s = void 0, e(o()) })) }))), s }), destroy: function () { u(), l = !0 } }; if (!Te(e, t)) return c; function u() { d.forEach((function (e) { return e() })), d = [] } return c.setOptions(i).then((function (e) { !l && i.onFirstUpdate && i.onFirstUpdate(e) })), c } } var Ae = Ee(), Me = Ee({ defaultModifiers: [re, xe, te, D, Se, be, ke, Q, we] }), Oe = Ee({ defaultModifiers: [re, xe, te, D] }); const Pe = "transitionend", De = e => { let t = e.getAttribute("data-bs-target"); if (!t || "#" === t) { let i = e.getAttribute("href"); if (!i || !i.includes("#") && !i.startsWith(".")) return null; i.includes("#") && !i.startsWith("#") && (i = `#${i.split("#")[1]}`), t = i && "#" !== i ? i.trim() : null } return t }, Re = e => { const t = De(e); return t && document.querySelector(t) ? t : null }, Le = e => { const t = De(e); return t ? document.querySelector(t) : null }, Be = e => { e.dispatchEvent(new Event(Pe)) }, Ve = e => !(!e || "object" != typeof e) && (void 0 !== e.jquery && (e = e[0]), void 0 !== e.nodeType), Fe = e => Ve(e) ? e.jquery ? e[0] : e : "string" == typeof e && e.length > 0 ? document.querySelector(e) : null, Ne = e => { if (!Ve(e) || 0 === e.getClientRects().length) return !1; const t = "visible" === getComputedStyle(e).getPropertyValue("visibility"), i = e.closest("details:not([open])"); if (!i) return t; if (i !== e) { const t = e.closest("summary"); if (t && t.parentNode !== i) return !1; if (null === t) return !1 } return t }, je = e => !e || e.nodeType !== Node.ELEMENT_NODE || !!e.classList.contains("disabled") || (void 0 !== e.disabled ? e.disabled : e.hasAttribute("disabled") && "false" !== e.getAttribute("disabled")), Ue = e => { if (!document.documentElement.attachShadow) return null; if ("function" == typeof e.getRootNode) { const t = e.getRootNode(); return t instanceof ShadowRoot ? t : null } return e instanceof ShadowRoot ? e : e.parentNode ? Ue(e.parentNode) : null }, ze = () => { }, $e = e => { e.offsetHeight }, He = () => window.jQuery && !document.body.hasAttribute("data-bs-no-jquery") ? window.jQuery : null, We = [], qe = () => "rtl" === document.documentElement.dir, Ke = e => { var t; t = () => { const t = He(); if (t) { const i = e.NAME, r = t.fn[i]; t.fn[i] = e.jQueryInterface, t.fn[i].Constructor = e, t.fn[i].noConflict = () => (t.fn[i] = r, e.jQueryInterface) } }, "loading" === document.readyState ? (We.length || document.addEventListener("DOMContentLoaded", (() => { for (const e of We) e() })), We.push(t)) : t() }, Ge = e => { "function" == typeof e && e() }, Je = (e, t, i = !0) => { if (!i) return void Ge(e); const r = (e => { if (!e) return 0; let { transitionDuration: t, transitionDelay: i } = window.getComputedStyle(e); const r = Number.parseFloat(t), o = Number.parseFloat(i); return r || o ? (t = t.split(",")[0], i = i.split(",")[0], 1e3 * (Number.parseFloat(t) + Number.parseFloat(i))) : 0 })(t) + 5; let o = !1; const n = ({ target: i }) => { i === t && (o = !0, t.removeEventListener(Pe, n), Ge(e)) }; t.addEventListener(Pe, n), setTimeout((() => { o || Be(t) }), r) }, Ze = (e, t, i, r) => { const o = e.length; let n = e.indexOf(t); return -1 === n ? !i && r ? e[o - 1] : e[0] : (n += i ? 1 : -1, r && (n = (n + o) % o), e[Math.max(0, Math.min(n, o - 1))]) }, Qe = /[^.]*(?=\..*)\.|.*/, Xe = /\..*/, Ye = /::\d+$/, et = {}; let tt = 1; const it = { mouseenter: "mouseover", mouseleave: "mouseout" }, rt = new Set(["click", "dblclick", "mouseup", "mousedown", "contextmenu", "mousewheel", "DOMMouseScroll", "mouseover", "mouseout", "mousemove", "selectstart", "selectend", "keydown", "keypress", "keyup", "orientationchange", "touchstart", "touchmove", "touchend", "touchcancel", "pointerdown", "pointermove", "pointerup", "pointerleave", "pointercancel", "gesturestart", "gesturechange", "gestureend", "focus", "blur", "change", "reset", "select", "submit", "focusin", "focusout", "load", "unload", "beforeunload", "resize", "move", "DOMContentLoaded", "readystatechange", "error", "abort", "scroll"]); function ot(e, t) { return t && `${t}::${tt++}` || e.uidEvent || tt++ } function nt(e) { const t = ot(e); return e.uidEvent = t, et[t] = et[t] || {}, et[t] } function st(e, t, i = null) { return Object.values(e).find((e => e.callable === t && e.delegationSelector === i)) } function at(e, t, i) { const r = "string" == typeof t, o = r ? i : t || i; let n = ut(e); return rt.has(n) || (n = e), [r, o, n] } function dt(e, t, i, r, o) { if ("string" != typeof t || !e) return; let [n, s, a] = at(t, i, r); if (t in it) { const e = e => function (t) { if (!t.relatedTarget || t.relatedTarget !== t.delegateTarget && !t.delegateTarget.contains(t.relatedTarget)) return e.call(this, t) }; s = e(s) } const d = nt(e), l = d[a] || (d[a] = {}), c = st(l, s, n ? i : null); if (c) return void (c.oneOff = c.oneOff && o); const u = ot(s, t.replace(Qe, "")), h = n ? function (e, t, i) { return function r(o) { const n = e.querySelectorAll(t); for (let { target: s } = o; s && s !== this; s = s.parentNode)for (const a of n) if (a === s) return pt(o, { delegateTarget: s }), r.oneOff && ht.off(e, o.type, t, i), i.apply(s, [o]) } }(e, i, s) : function (e, t) { return function i(r) { return pt(r, { delegateTarget: e }), i.oneOff && ht.off(e, r.type, t), t.apply(e, [r]) } }(e, s); h.delegationSelector = n ? i : null, h.callable = s, h.oneOff = o, h.uidEvent = u, l[u] = h, e.addEventListener(a, h, n) } function lt(e, t, i, r, o) { const n = st(t[i], r, o); n && (e.removeEventListener(i, n, Boolean(o)), delete t[i][n.uidEvent]) } function ct(e, t, i, r) { const o = t[i] || {}; for (const n of Object.keys(o)) if (n.includes(r)) { const r = o[n]; lt(e, t, i, r.callable, r.delegationSelector) } } function ut(e) { return e = e.replace(Xe, ""), it[e] || e } const ht = { on(e, t, i, r) { dt(e, t, i, r, !1) }, one(e, t, i, r) { dt(e, t, i, r, !0) }, off(e, t, i, r) { if ("string" != typeof t || !e) return; const [o, n, s] = at(t, i, r), a = s !== t, d = nt(e), l = d[s] || {}, c = t.startsWith("."); if (void 0 === n) { if (c) for (const i of Object.keys(d)) ct(e, d, i, t.slice(1)); for (const i of Object.keys(l)) { const r = i.replace(Ye, ""); if (!a || t.includes(r)) { const t = l[i]; lt(e, d, s, t.callable, t.delegationSelector) } } } else { if (!Object.keys(l).length) return; lt(e, d, s, n, o ? i : null) } }, trigger(e, t, i) { if ("string" != typeof t || !e) return null; const r = He(); let o = null, n = !0, s = !0, a = !1; t !== ut(t) && r && (o = r.Event(t, i), r(e).trigger(o), n = !o.isPropagationStopped(), s = !o.isImmediatePropagationStopped(), a = o.isDefaultPrevented()); let d = new Event(t, { bubbles: n, cancelable: !0 }); return d = pt(d, i), a && d.preventDefault(), s && e.dispatchEvent(d), d.defaultPrevented && o && o.preventDefault(), d } }; function pt(e, t) { for (const [i, r] of Object.entries(t || {})) try { e[i] = r } catch (t) { Object.defineProperty(e, i, { configurable: !0, get: () => r }) } return e } const mt = new Map, ft = { set(e, t, i) { mt.has(e) || mt.set(e, new Map); const r = mt.get(e); r.has(t) || 0 === r.size ? r.set(t, i) : console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`) }, get: (e, t) => mt.has(e) && mt.get(e).get(t) || null, remove(e, t) { if (!mt.has(e)) return; const i = mt.get(e); i.delete(t), 0 === i.size && mt.delete(e) } }; function gt(e) { if ("true" === e) return !0; if ("false" === e) return !1; if (e === Number(e).toString()) return Number(e); if ("" === e || "null" === e) return null; if ("string" != typeof e) return e; try { return JSON.parse(decodeURIComponent(e)) } catch (t) { return e } } function bt(e) { return e.replace(/[A-Z]/g, (e => `-${e.toLowerCase()}`)) } const vt = { setDataAttribute(e, t, i) { e.setAttribute(`data-bs-${bt(t)}`, i) }, removeDataAttribute(e, t) { e.removeAttribute(`data-bs-${bt(t)}`) }, getDataAttributes(e) { if (!e) return {}; const t = {}, i = Object.keys(e.dataset).filter((e => e.startsWith("bs") && !e.startsWith("bsConfig"))); for (const r of i) { let i = r.replace(/^bs/, ""); i = i.charAt(0).toLowerCase() + i.slice(1, i.length), t[i] = gt(e.dataset[r]) } return t }, getDataAttribute: (e, t) => gt(e.getAttribute(`data-bs-${bt(t)}`)) }; class yt { static get Default() { return {} } static get DefaultType() { return {} } static get NAME() { throw new Error('You have to implement the static method "NAME", for each component!') } _getConfig(e) { return e = this._mergeConfigObj(e), e = this._configAfterMerge(e), this._typeCheckConfig(e), e } _configAfterMerge(e) { return e } _mergeConfigObj(e, t) { const i = Ve(t) ? vt.getDataAttribute(t, "config") : {}; return { ...this.constructor.Default, ..."object" == typeof i ? i : {}, ...Ve(t) ? vt.getDataAttributes(t) : {}, ..."object" == typeof e ? e : {} } } _typeCheckConfig(e, t = this.constructor.DefaultType) { for (const r of Object.keys(t)) { const o = t[r], n = e[r], s = Ve(n) ? "element" : null == (i = n) ? `${i}` : Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(); if (!new RegExp(o).test(s)) throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${s}" but expected type "${o}".`) } var i } } class wt extends yt { constructor(e, t) { super(), (e = Fe(e)) && (this._element = e, this._config = this._getConfig(t), ft.set(this._element, this.constructor.DATA_KEY, this)) } dispose() { ft.remove(this._element, this.constructor.DATA_KEY), ht.off(this._element, this.constructor.EVENT_KEY); for (const e of Object.getOwnPropertyNames(this)) this[e] = null } _queueCallback(e, t, i = !0) { Je(e, t, i) } _getConfig(e) { return e = this._mergeConfigObj(e, this._element), e = this._configAfterMerge(e), this._typeCheckConfig(e), e } static getInstance(e) { return ft.get(Fe(e), this.DATA_KEY) } static getOrCreateInstance(e, t = {}) { return this.getInstance(e) || new this(e, "object" == typeof t ? t : null) } static get VERSION() { return "5.2.0" } static get DATA_KEY() { return `bs.${this.NAME}` } static get EVENT_KEY() { return `.${this.DATA_KEY}` } static eventName(e) { return `${e}${this.EVENT_KEY}` } } const St = (e, t = "hide") => { const i = `click.dismiss${e.EVENT_KEY}`, r = e.NAME; ht.on(document, i, `[data-bs-dismiss="${r}"]`, (function (i) { if (["A", "AREA"].includes(this.tagName) && i.preventDefault(), je(this)) return; const o = Le(this) || this.closest(`.${r}`); e.getOrCreateInstance(o)[t]() })) }; class xt extends wt { static get NAME() { return "alert" } close() { if (ht.trigger(this._element, "close.bs.alert").defaultPrevented) return; this._element.classList.remove("show"); const e = this._element.classList.contains("fade"); this._queueCallback((() => this._destroyElement()), this._element, e) } _destroyElement() { this._element.remove(), ht.trigger(this._element, "closed.bs.alert"), this.dispose() } static jQueryInterface(e) { return this.each((function () { const t = xt.getOrCreateInstance(this); if ("string" == typeof e) { if (void 0 === t[e] || e.startsWith("_") || "constructor" === e) throw new TypeError(`No method named "${e}"`); t[e](this) } })) } } St(xt, "close"), Ke(xt); const kt = '[data-bs-toggle="button"]'; class _t extends wt { static get NAME() { return "button" } toggle() { this._element.setAttribute("aria-pressed", this._element.classList.toggle("active")) } static jQueryInterface(e) { return this.each((function () { const t = _t.getOrCreateInstance(this); "toggle" === e && t[e]() })) } } ht.on(document, "click.bs.button.data-api", kt, (e => { e.preventDefault(); const t = e.target.closest(kt); _t.getOrCreateInstance(t).toggle() })), Ke(_t); const Ct = { find: (e, t = document.documentElement) => [].concat(...Element.prototype.querySelectorAll.call(t, e)), findOne: (e, t = document.documentElement) => Element.prototype.querySelector.call(t, e), children: (e, t) => [].concat(...e.children).filter((e => e.matches(t))), parents(e, t) { const i = []; let r = e.parentNode.closest(t); for (; r;)i.push(r), r = r.parentNode.closest(t); return i }, prev(e, t) { let i = e.previousElementSibling; for (; i;) { if (i.matches(t)) return [i]; i = i.previousElementSibling } return [] }, next(e, t) { let i = e.nextElementSibling; for (; i;) { if (i.matches(t)) return [i]; i = i.nextElementSibling } return [] }, focusableChildren(e) { const t = ["a", "button", "input", "textarea", "select", "details", "[tabindex]", '[contenteditable="true"]'].map((e => `${e}:not([tabindex^="-"])`)).join(","); return this.find(t, e).filter((e => !je(e) && Ne(e))) } }, It = { endCallback: null, leftCallback: null, rightCallback: null }, Tt = { endCallback: "(function|null)", leftCallback: "(function|null)", rightCallback: "(function|null)" }; class Et extends yt { constructor(e, t) { super(), this._element = e, e && Et.isSupported() && (this._config = this._getConfig(t), this._deltaX = 0, this._supportPointerEvents = Boolean(window.PointerEvent), this._initEvents()) } static get Default() { return It } static get DefaultType() { return Tt } static get NAME() { return "swipe" } dispose() { ht.off(this._element, ".bs.swipe") } _start(e) { this._supportPointerEvents ? this._eventIsPointerPenTouch(e) && (this._deltaX = e.clientX) : this._deltaX = e.touches[0].clientX } _end(e) { this._eventIsPointerPenTouch(e) && (this._deltaX = e.clientX - this._deltaX), this._handleSwipe(), Ge(this._config.endCallback) } _move(e) { this._deltaX = e.touches && e.touches.length > 1 ? 0 : e.touches[0].clientX - this._deltaX } _handleSwipe() { const e = Math.abs(this._deltaX); if (e <= 40) return; const t = e / this._deltaX; this._deltaX = 0, t && Ge(t > 0 ? this._config.rightCallback : this._config.leftCallback) } _initEvents() { this._supportPointerEvents ? (ht.on(this._element, "pointerdown.bs.swipe", (e => this._start(e))), ht.on(this._element, "pointerup.bs.swipe", (e => this._end(e))), this._element.classList.add("pointer-event")) : (ht.on(this._element, "touchstart.bs.swipe", (e => this._start(e))), ht.on(this._element, "touchmove.bs.swipe", (e => this._move(e))), ht.on(this._element, "touchend.bs.swipe", (e => this._end(e)))) } _eventIsPointerPenTouch(e) { return this._supportPointerEvents && ("pen" === e.pointerType || "touch" === e.pointerType) } static isSupported() { return "ontouchstart" in document.documentElement || navigator.maxTouchPoints > 0 } } const At = "next", Mt = "prev", Ot = "left", Pt = "right", Dt = "slid.bs.carousel", Rt = "carousel", Lt = "active", Bt = { ArrowLeft: Pt, ArrowRight: Ot }, Vt = { interval: 5e3, keyboard: !0, pause: "hover", ride: !1, touch: !0, wrap: !0 }, Ft = { interval: "(number|boolean)", keyboard: "boolean", pause: "(string|boolean)", ride: "(boolean|string)", touch: "boolean", wrap: "boolean" }; class Nt extends wt { constructor(e, t) { super(e, t), this._interval = null, this._activeElement = null, this._isSliding = !1, this.touchTimeout = null, this._swipeHelper = null, this._indicatorsElement = Ct.findOne(".carousel-indicators", this._element), this._addEventListeners(), this._config.ride === Rt && this.cycle() } static get Default() { return Vt } static get DefaultType() { return Ft } static get NAME() { return "carousel" } next() { this._slide(At) } nextWhenVisible() { !document.hidden && Ne(this._element) && this.next() } prev() { this._slide(Mt) } pause() { this._isSliding && Be(this._element), this._clearInterval() } cycle() { this._clearInterval(), this._updateInterval(), this._interval = setInterval((() => this.nextWhenVisible()), this._config.interval) } _maybeEnableCycle() { this._config.ride && (this._isSliding ? ht.one(this._element, Dt, (() => this.cycle())) : this.cycle()) } to(e) { const t = this._getItems(); if (e > t.length - 1 || e < 0) return; if (this._isSliding) return void ht.one(this._element, Dt, (() => this.to(e))); const i = this._getItemIndex(this._getActive()); if (i === e) return; const r = e > i ? At : Mt; this._slide(r, t[e]) } dispose() { this._swipeHelper && this._swipeHelper.dispose(), super.dispose() } _configAfterMerge(e) { return e.defaultInterval = e.interval, e } _addEventListeners() { this._config.keyboard && ht.on(this._element, "keydown.bs.carousel", (e => this._keydown(e))), "hover" === this._config.pause && (ht.on(this._element, "mouseenter.bs.carousel", (() => this.pause())), ht.on(this._element, "mouseleave.bs.carousel", (() => this._maybeEnableCycle()))), this._config.touch && Et.isSupported() && this._addTouchEventListeners() } _addTouchEventListeners() { for (const e of Ct.find(".carousel-item img", this._element)) ht.on(e, "dragstart.bs.carousel", (e => e.preventDefault())); const e = { leftCallback: () => this._slide(this._directionToOrder(Ot)), rightCallback: () => this._slide(this._directionToOrder(Pt)), endCallback: () => { "hover" === this._config.pause && (this.pause(), this.touchTimeout && clearTimeout(this.touchTimeout), this.touchTimeout = setTimeout((() => this._maybeEnableCycle()), 500 + this._config.interval)) } }; this._swipeHelper = new Et(this._element, e) } _keydown(e) { if (/input|textarea/i.test(e.target.tagName)) return; const t = Bt[e.key]; t && (e.preventDefault(), this._slide(this._directionToOrder(t))) } _getItemIndex(e) { return this._getItems().indexOf(e) } _setActiveIndicatorElement(e) { if (!this._indicatorsElement) return; const t = Ct.findOne(".active", this._indicatorsElement); t.classList.remove(Lt), t.removeAttribute("aria-current"); const i = Ct.findOne(`[data-bs-slide-to="${e}"]`, this._indicatorsElement); i && (i.classList.add(Lt), i.setAttribute("aria-current", "true")) } _updateInterval() { const e = this._activeElement || this._getActive(); if (!e) return; const t = Number.parseInt(e.getAttribute("data-bs-interval"), 10); this._config.interval = t || this._config.defaultInterval } _slide(e, t = null) { if (this._isSliding) return; const i = this._getActive(), r = e === At, o = t || Ze(this._getItems(), i, r, this._config.wrap); if (o === i) return; const n = this._getItemIndex(o), s = t => ht.trigger(this._element, t, { relatedTarget: o, direction: this._orderToDirection(e), from: this._getItemIndex(i), to: n }); if (s("slide.bs.carousel").defaultPrevented) return; if (!i || !o) return; const a = Boolean(this._interval); this.pause(), this._isSliding = !0, this._setActiveIndicatorElement(n), this._activeElement = o; const d = r ? "carousel-item-start" : "carousel-item-end", l = r ? "carousel-item-next" : "carousel-item-prev"; o.classList.add(l), $e(o), i.classList.add(d), o.classList.add(d), this._queueCallback((() => { o.classList.remove(d, l), o.classList.add(Lt), i.classList.remove(Lt, l, d), this._isSliding = !1, s(Dt) }), i, this._isAnimated()), a && this.cycle() } _isAnimated() { return this._element.classList.contains("slide") } _getActive() { return Ct.findOne(".active.carousel-item", this._element) } _getItems() { return Ct.find(".carousel-item", this._element) } _clearInterval() { this._interval && (clearInterval(this._interval), this._interval = null) } _directionToOrder(e) { return qe() ? e === Ot ? Mt : At : e === Ot ? At : Mt } _orderToDirection(e) { return qe() ? e === Mt ? Ot : Pt : e === Mt ? Pt : Ot } static jQueryInterface(e) { return this.each((function () { const t = Nt.getOrCreateInstance(this, e); if ("number" != typeof e) { if ("string" == typeof e) { if (void 0 === t[e] || e.startsWith("_") || "constructor" === e) throw new TypeError(`No method named "${e}"`); t[e]() } } else t.to(e) })) } } ht.on(document, "click.bs.carousel.data-api", "[data-bs-slide], [data-bs-slide-to]", (function (e) { const t = Le(this); if (!t || !t.classList.contains(Rt)) return; e.preventDefault(); const i = Nt.getOrCreateInstance(t), r = this.getAttribute("data-bs-slide-to"); return r ? (i.to(r), void i._maybeEnableCycle()) : "next" === vt.getDataAttribute(this, "slide") ? (i.next(), void i._maybeEnableCycle()) : (i.prev(), void i._maybeEnableCycle()) })), ht.on(window, "load.bs.carousel.data-api", (() => { const e = Ct.find('[data-bs-ride="carousel"]'); for (const t of e) Nt.getOrCreateInstance(t) })), Ke(Nt); const jt = "show", Ut = "collapse", zt = "collapsing", $t = '[data-bs-toggle="collapse"]', Ht = { parent: null, toggle: !0 }, Wt = { parent: "(null|element)", toggle: "boolean" }; class qt extends wt { constructor(e, t) { super(e, t), this._isTransitioning = !1, this._triggerArray = []; const i = Ct.find($t); for (const e of i) { const t = Re(e), i = Ct.find(t).filter((e => e === this._element)); null !== t && i.length && this._triggerArray.push(e) } this._initializeChildren(), this._config.parent || this._addAriaAndCollapsedClass(this._triggerArray, this._isShown()), this._config.toggle && this.toggle() } static get Default() { return Ht } static get DefaultType() { return Wt } static get NAME() { return "collapse" } toggle() { this._isShown() ? this.hide() : this.show() } show() { if (this._isTransitioning || this._isShown()) return; let e = []; if (this._config.parent && (e = this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((e => e !== this._element)).map((e => qt.getOrCreateInstance(e, { toggle: !1 })))), e.length && e[0]._isTransitioning) return; if (ht.trigger(this._element, "show.bs.collapse").defaultPrevented) return; for (const t of e) t.hide(); const t = this._getDimension(); this._element.classList.remove(Ut), this._element.classList.add(zt), this._element.style[t] = 0, this._addAriaAndCollapsedClass(this._triggerArray, !0), this._isTransitioning = !0; const i = `scroll${t[0].toUpperCase() + t.slice(1)}`; this._queueCallback((() => { this._isTransitioning = !1, this._element.classList.remove(zt), this._element.classList.add(Ut, jt), this._element.style[t] = "", ht.trigger(this._element, "shown.bs.collapse") }), this._element, !0), this._element.style[t] = `${this._element[i]}px` } hide() { if (this._isTransitioning || !this._isShown()) return; if (ht.trigger(this._element, "hide.bs.collapse").defaultPrevented) return; const e = this._getDimension(); this._element.style[e] = `${this._element.getBoundingClientRect()[e]}px`, $e(this._element), this._element.classList.add(zt), this._element.classList.remove(Ut, jt); for (const e of this._triggerArray) { const t = Le(e); t && !this._isShown(t) && this._addAriaAndCollapsedClass([e], !1) } this._isTransitioning = !0, this._element.style[e] = "", this._queueCallback((() => { this._isTransitioning = !1, this._element.classList.remove(zt), this._element.classList.add(Ut), ht.trigger(this._element, "hidden.bs.collapse") }), this._element, !0) } _isShown(e = this._element) { return e.classList.contains(jt) } _configAfterMerge(e) { return e.toggle = Boolean(e.toggle), e.parent = Fe(e.parent), e } _getDimension() { return this._element.classList.contains("collapse-horizontal") ? "width" : "height" } _initializeChildren() { if (!this._config.parent) return; const e = this._getFirstLevelChildren($t); for (const t of e) { const e = Le(t); e && this._addAriaAndCollapsedClass([t], this._isShown(e)) } } _getFirstLevelChildren(e) { const t = Ct.find(":scope .collapse .collapse", this._config.parent); return Ct.find(e, this._config.parent).filter((e => !t.includes(e))) } _addAriaAndCollapsedClass(e, t) { if (e.length) for (const i of e) i.classList.toggle("collapsed", !t), i.setAttribute("aria-expanded", t) } static jQueryInterface(e) { const t = {}; return "string" == typeof e && /show|hide/.test(e) && (t.toggle = !1), this.each((function () { const i = qt.getOrCreateInstance(this, t); if ("string" == typeof e) { if (void 0 === i[e]) throw new TypeError(`No method named "${e}"`); i[e]() } })) } } ht.on(document, "click.bs.collapse.data-api", $t, (function (e) { ("A" === e.target.tagName || e.delegateTarget && "A" === e.delegateTarget.tagName) && e.preventDefault(); const t = Re(this), i = Ct.find(t); for (const e of i) qt.getOrCreateInstance(e, { toggle: !1 }).toggle() })), Ke(qt); const Kt = "dropdown", Gt = "ArrowUp", Jt = "ArrowDown", Zt = "click.bs.dropdown.data-api", Qt = "keydown.bs.dropdown.data-api", Xt = "show", Yt = '[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)', ei = `${Yt}.show`, ti = ".dropdown-menu", ii = qe() ? "top-end" : "top-start", ri = qe() ? "top-start" : "top-end", oi = qe() ? "bottom-end" : "bottom-start", ni = qe() ? "bottom-start" : "bottom-end", si = qe() ? "left-start" : "right-start", ai = qe() ? "right-start" : "left-start", di = { autoClose: !0, boundary: "clippingParents", display: "dynamic", offset: [0, 2], popperConfig: null, reference: "toggle" }, li = { autoClose: "(boolean|string)", boundary: "(string|element)", display: "string", offset: "(array|string|function)", popperConfig: "(null|object|function)", reference: "(string|element|object)" }; class ci extends wt { constructor(e, t) { super(e, t), this._popper = null, this._parent = this._element.parentNode, this._menu = Ct.findOne(ti, this._parent), this._inNavbar = this._detectNavbar() } static get Default() { return di } static get DefaultType() { return li } static get NAME() { return Kt } toggle() { return this._isShown() ? this.hide() : this.show() } show() { if (je(this._element) || this._isShown()) return; const e = { relatedTarget: this._element }; if (!ht.trigger(this._element, "show.bs.dropdown", e).defaultPrevented) { if (this._createPopper(), "ontouchstart" in document.documentElement && !this._parent.closest(".navbar-nav")) for (const e of [].concat(...document.body.children)) ht.on(e, "mouseover", ze); this._element.focus(), this._element.setAttribute("aria-expanded", !0), this._menu.classList.add(Xt), this._element.classList.add(Xt), ht.trigger(this._element, "shown.bs.dropdown", e) } } hide() { if (je(this._element) || !this._isShown()) return; const e = { relatedTarget: this._element }; this._completeHide(e) } dispose() { this._popper && this._popper.destroy(), super.dispose() } update() { this._inNavbar = this._detectNavbar(), this._popper && this._popper.update() } _completeHide(e) { if (!ht.trigger(this._element, "hide.bs.dropdown", e).defaultPrevented) { if ("ontouchstart" in document.documentElement) for (const e of [].concat(...document.body.children)) ht.off(e, "mouseover", ze); this._popper && this._popper.destroy(), this._menu.classList.remove(Xt), this._element.classList.remove(Xt), this._element.setAttribute("aria-expanded", "false"), vt.removeDataAttribute(this._menu, "popper"), ht.trigger(this._element, "hidden.bs.dropdown", e) } } _getConfig(e) { if ("object" == typeof (e = super._getConfig(e)).reference && !Ve(e.reference) && "function" != typeof e.reference.getBoundingClientRect) throw new TypeError(`${Kt.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`); return e } _createPopper() { if (void 0 === r) throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)"); let e = this._element; "parent" === this._config.reference ? e = this._parent : Ve(this._config.reference) ? e = Fe(this._config.reference) : "object" == typeof this._config.reference && (e = this._config.reference); const t = this._getPopperConfig(); this._popper = Me(e, this._menu, t) } _isShown() { return this._menu.classList.contains(Xt) } _getPlacement() { const e = this._parent; if (e.classList.contains("dropend")) return si; if (e.classList.contains("dropstart")) return ai; if (e.classList.contains("dropup-center")) return "top"; if (e.classList.contains("dropdown-center")) return "bottom"; const t = "end" === getComputedStyle(this._menu).getPropertyValue("--bs-position").trim(); return e.classList.contains("dropup") ? t ? ri : ii : t ? ni : oi } _detectNavbar() { return null !== this._element.closest(".navbar") } _getOffset() { const { offset: e } = this._config; return "string" == typeof e ? e.split(",").map((e => Number.parseInt(e, 10))) : "function" == typeof e ? t => e(t, this._element) : e } _getPopperConfig() { const e = { placement: this._getPlacement(), modifiers: [{ name: "preventOverflow", options: { boundary: this._config.boundary } }, { name: "offset", options: { offset: this._getOffset() } }] }; return (this._inNavbar || "static" === this._config.display) && (vt.setDataAttribute(this._menu, "popper", "static"), e.modifiers = [{ name: "applyStyles", enabled: !1 }]), { ...e, ..."function" == typeof this._config.popperConfig ? this._config.popperConfig(e) : this._config.popperConfig } } _selectMenuItem({ key: e, target: t }) { const i = Ct.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)", this._menu).filter((e => Ne(e))); i.length && Ze(i, t, e === Jt, !i.includes(t)).focus() } static jQueryInterface(e) { return this.each((function () { const t = ci.getOrCreateInstance(this, e); if ("string" == typeof e) { if (void 0 === t[e]) throw new TypeError(`No method named "${e}"`); t[e]() } })) } static clearMenus(e) { if (2 === e.button || "keyup" === e.type && "Tab" !== e.key) return; const t = Ct.find(ei); for (const i of t) { const t = ci.getInstance(i); if (!t || !1 === t._config.autoClose) continue; const r = e.composedPath(), o = r.includes(t._menu); if (r.includes(t._element) || "inside" === t._config.autoClose && !o || "outside" === t._config.autoClose && o) continue; if (t._menu.contains(e.target) && ("keyup" === e.type && "Tab" === e.key || /input|select|option|textarea|form/i.test(e.target.tagName))) continue; const n = { relatedTarget: t._element }; "click" === e.type && (n.clickEvent = e), t._completeHide(n) } } static dataApiKeydownHandler(e) { const t = /input|textarea/i.test(e.target.tagName), i = "Escape" === e.key, r = [Gt, Jt].includes(e.key); if (!r && !i) return; if (t && !i) return; e.preventDefault(); const o = Ct.findOne(Yt, e.delegateTarget.parentNode), n = ci.getOrCreateInstance(o); if (r) return e.stopPropagation(), n.show(), void n._selectMenuItem(e); n._isShown() && (e.stopPropagation(), n.hide(), o.focus()) } } ht.on(document, Qt, Yt, ci.dataApiKeydownHandler), ht.on(document, Qt, ti, ci.dataApiKeydownHandler), ht.on(document, Zt, ci.clearMenus), ht.on(document, "keyup.bs.dropdown.data-api", ci.clearMenus), ht.on(document, Zt, Yt, (function (e) { e.preventDefault(), ci.getOrCreateInstance(this).toggle() })), Ke(ci); const ui = ".fixed-top, .fixed-bottom, .is-fixed, .sticky-top", hi = ".sticky-top", pi = "padding-right", mi = "margin-right"; class fi { constructor() { this._element = document.body } getWidth() { const e = document.documentElement.clientWidth; return Math.abs(window.innerWidth - e) } hide() { const e = this.getWidth(); this._disableOverFlow(), this._setElementAttributes(this._element, pi, (t => t + e)), this._setElementAttributes(ui, pi, (t => t + e)), this._setElementAttributes(hi, mi, (t => t - e)) } reset() { this._resetElementAttributes(this._element, "overflow"), this._resetElementAttributes(this._element, pi), this._resetElementAttributes(ui, pi), this._resetElementAttributes(hi, mi) } isOverflowing() { return this.getWidth() > 0 } _disableOverFlow() { this._saveInitialAttribute(this._element, "overflow"), this._element.style.overflow = "hidden" } _setElementAttributes(e, t, i) { const r = this.getWidth(); this._applyManipulationCallback(e, (e => { if (e !== this._element && window.innerWidth > e.clientWidth + r) return; this._saveInitialAttribute(e, t); const o = window.getComputedStyle(e).getPropertyValue(t); e.style.setProperty(t, `${i(Number.parseFloat(o))}px`) })) } _saveInitialAttribute(e, t) { const i = e.style.getPropertyValue(t); i && vt.setDataAttribute(e, t, i) } _resetElementAttributes(e, t) { this._applyManipulationCallback(e, (e => { const i = vt.getDataAttribute(e, t); null !== i ? (vt.removeDataAttribute(e, t), e.style.setProperty(t, i)) : e.style.removeProperty(t) })) } _applyManipulationCallback(e, t) { if (Ve(e)) t(e); else for (const i of Ct.find(e, this._element)) t(i) } } const gi = "show", bi = "mousedown.bs.backdrop", vi = { className: "modal-backdrop", clickCallback: null, isAnimated: !1, isVisible: !0, rootElement: "body" }, yi = { className: "string", clickCallback: "(function|null)", isAnimated: "boolean", isVisible: "boolean", rootElement: "(element|string)" }; class wi extends yt { constructor(e) { super(), this._config = this._getConfig(e), this._isAppended = !1, this._element = null } static get Default() { return vi } static get DefaultType() { return yi } static get NAME() { return "backdrop" } show(e) { if (!this._config.isVisible) return void Ge(e); this._append(); const t = this._getElement(); this._config.isAnimated && $e(t), t.classList.add(gi), this._emulateAnimation((() => { Ge(e) })) } hide(e) { this._config.isVisible ? (this._getElement().classList.remove(gi), this._emulateAnimation((() => { this.dispose(), Ge(e) }))) : Ge(e) } dispose() { this._isAppended && (ht.off(this._element, bi), this._element.remove(), this._isAppended = !1) } _getElement() { if (!this._element) { const e = document.createElement("div"); e.className = this._config.className, this._config.isAnimated && e.classList.add("fade"), this._element = e } return this._element } _configAfterMerge(e) { return e.rootElement = Fe(e.rootElement), e } _append() { if (this._isAppended) return; const e = this._getElement(); this._config.rootElement.append(e), ht.on(e, bi, (() => { Ge(this._config.clickCallback) })), this._isAppended = !0 } _emulateAnimation(e) { Je(e, this._getElement(), this._config.isAnimated) } } const Si = ".bs.focustrap", xi = "backward", ki = { autofocus: !0, trapElement: null }, _i = { autofocus: "boolean", trapElement: "element" }; class Ci extends yt { constructor(e) { super(), this._config = this._getConfig(e), this._isActive = !1, this._lastTabNavDirection = null } static get Default() { return ki } static get DefaultType() { return _i } static get NAME() { return "focustrap" } activate() { this._isActive || (this._config.autofocus && this._config.trapElement.focus(), ht.off(document, Si), ht.on(document, "focusin.bs.focustrap", (e => this._handleFocusin(e))), ht.on(document, "keydown.tab.bs.focustrap", (e => this._handleKeydown(e))), this._isActive = !0) } deactivate() { this._isActive && (this._isActive = !1, ht.off(document, Si)) } _handleFocusin(e) { const { trapElement: t } = this._config; if (e.target === document || e.target === t || t.contains(e.target)) return; const i = Ct.focusableChildren(t); 0 === i.length ? t.focus() : this._lastTabNavDirection === xi ? i[i.length - 1].focus() : i[0].focus() } _handleKeydown(e) { "Tab" === e.key && (this._lastTabNavDirection = e.shiftKey ? xi : "forward") } } const Ii = "hidden.bs.modal", Ti = "show.bs.modal", Ei = "modal-open", Ai = "show", Mi = "modal-static", Oi = { backdrop: !0, focus: !0, keyboard: !0 }, Pi = { backdrop: "(boolean|string)", focus: "boolean", keyboard: "boolean" }; class Di extends wt { constructor(e, t) { super(e, t), this._dialog = Ct.findOne(".modal-dialog", this._element), this._backdrop = this._initializeBackDrop(), this._focustrap = this._initializeFocusTrap(), this._isShown = !1, this._isTransitioning = !1, this._scrollBar = new fi, this._addEventListeners() } static get Default() { return Oi } static get DefaultType() { return Pi } static get NAME() { return "modal" } toggle(e) { return this._isShown ? this.hide() : this.show(e) } show(e) { this._isShown || this._isTransitioning || ht.trigger(this._element, Ti, { relatedTarget: e }).defaultPrevented || (this._isShown = !0, this._isTransitioning = !0, this._scrollBar.hide(), document.body.classList.add(Ei), this._adjustDialog(), this._backdrop.show((() => this._showElement(e)))) } hide() { this._isShown && !this._isTransitioning && (ht.trigger(this._element, "hide.bs.modal").defaultPrevented || (this._isShown = !1, this._isTransitioning = !0, this._focustrap.deactivate(), this._element.classList.remove(Ai), this._queueCallback((() => this._hideModal()), this._element, this._isAnimated()))) } dispose() { for (const e of [window, this._dialog]) ht.off(e, ".bs.modal"); this._backdrop.dispose(), this._focustrap.deactivate(), super.dispose() } handleUpdate() { this._adjustDialog() } _initializeBackDrop() { return new wi({ isVisible: Boolean(this._config.backdrop), isAnimated: this._isAnimated() }) } _initializeFocusTrap() { return new Ci({ trapElement: this._element }) } _showElement(e) { document.body.contains(this._element) || document.body.append(this._element), this._element.style.display = "block", this._element.removeAttribute("aria-hidden"), this._element.setAttribute("aria-modal", !0), this._element.setAttribute("role", "dialog"), this._element.scrollTop = 0; const t = Ct.findOne(".modal-body", this._dialog); t && (t.scrollTop = 0), $e(this._element), this._element.classList.add(Ai), this._queueCallback((() => { this._config.focus && this._focustrap.activate(), this._isTransitioning = !1, ht.trigger(this._element, "shown.bs.modal", { relatedTarget: e }) }), this._dialog, this._isAnimated()) } _addEventListeners() { ht.on(this._element, "keydown.dismiss.bs.modal", (e => { if ("Escape" === e.key) return this._config.keyboard ? (e.preventDefault(), void this.hide()) : void this._triggerBackdropTransition() })), ht.on(window, "resize.bs.modal", (() => { this._isShown && !this._isTransitioning && this._adjustDialog() })), ht.on(this._element, "mousedown.dismiss.bs.modal", (e => { e.target === e.currentTarget && ("static" !== this._config.backdrop ? this._config.backdrop && this.hide() : this._triggerBackdropTransition()) })) } _hideModal() { this._element.style.display = "none", this._element.setAttribute("aria-hidden", !0), this._element.removeAttribute("aria-modal"), this._element.removeAttribute("role"), this._isTransitioning = !1, this._backdrop.hide((() => { document.body.classList.remove(Ei), this._resetAdjustments(), this._scrollBar.reset(), ht.trigger(this._element, Ii) })) } _isAnimated() { return this._element.classList.contains("fade") } _triggerBackdropTransition() { if (ht.trigger(this._element, "hidePrevented.bs.modal").defaultPrevented) return; const e = this._element.scrollHeight > document.documentElement.clientHeight, t = this._element.style.overflowY; "hidden" === t || this._element.classList.contains(Mi) || (e || (this._element.style.overflowY = "hidden"), this._element.classList.add(Mi), this._queueCallback((() => { this._element.classList.remove(Mi), this._queueCallback((() => { this._element.style.overflowY = t }), this._dialog) }), this._dialog), this._element.focus()) } _adjustDialog() { const e = this._element.scrollHeight > document.documentElement.clientHeight, t = this._scrollBar.getWidth(), i = t > 0; if (i && !e) { const e = qe() ? "paddingLeft" : "paddingRight"; this._element.style[e] = `${t}px` } if (!i && e) { const e = qe() ? "paddingRight" : "paddingLeft"; this._element.style[e] = `${t}px` } } _resetAdjustments() { this._element.style.paddingLeft = "", this._element.style.paddingRight = "" } static jQueryInterface(e, t) { return this.each((function () { const i = Di.getOrCreateInstance(this, e); if ("string" == typeof e) { if (void 0 === i[e]) throw new TypeError(`No method named "${e}"`); i[e](t) } })) } } ht.on(document, "click.bs.modal.data-api", '[data-bs-toggle="modal"]', (function (e) { const t = Le(this);["A", "AREA"].includes(this.tagName) && e.preventDefault(), ht.one(t, Ti, (e => { e.defaultPrevented || ht.one(t, Ii, (() => { Ne(this) && this.focus() })) })); const i = Ct.findOne(".modal.show"); i && Di.getInstance(i).hide(), Di.getOrCreateInstance(t).toggle(this) })), St(Di), Ke(Di); const Ri = "show", Li = "showing", Bi = "hiding", Vi = ".offcanvas.show", Fi = "hidePrevented.bs.offcanvas", Ni = "hidden.bs.offcanvas", ji = { backdrop: !0, keyboard: !0, scroll: !1 }, Ui = { backdrop: "(boolean|string)", keyboard: "boolean", scroll: "boolean" }; class zi extends wt { constructor(e, t) { super(e, t), this._isShown = !1, this._backdrop = this._initializeBackDrop(), this._focustrap = this._initializeFocusTrap(), this._addEventListeners() } static get Default() { return ji } static get DefaultType() { return Ui } static get NAME() { return "offcanvas" } toggle(e) { return this._isShown ? this.hide() : this.show(e) } show(e) { this._isShown || ht.trigger(this._element, "show.bs.offcanvas", { relatedTarget: e }).defaultPrevented || (this._isShown = !0, this._backdrop.show(), this._config.scroll || (new fi).hide(), this._element.setAttribute("aria-modal", !0), this._element.setAttribute("role", "dialog"), this._element.classList.add(Li), this._queueCallback((() => { this._config.scroll && !this._config.backdrop || this._focustrap.activate(), this._element.classList.add(Ri), this._element.classList.remove(Li), ht.trigger(this._element, "shown.bs.offcanvas", { relatedTarget: e }) }), this._element, !0)) } hide() { this._isShown && (ht.trigger(this._element, "hide.bs.offcanvas").defaultPrevented || (this._focustrap.deactivate(), this._element.blur(), this._isShown = !1, this._element.classList.add(Bi), this._backdrop.hide(), this._queueCallback((() => { this._element.classList.remove(Ri, Bi), this._element.removeAttribute("aria-modal"), this._element.removeAttribute("role"), this._config.scroll || (new fi).reset(), ht.trigger(this._element, Ni) }), this._element, !0))) } dispose() { this._backdrop.dispose(), this._focustrap.deactivate(), super.dispose() } _initializeBackDrop() { const e = Boolean(this._config.backdrop); return new wi({ className: "offcanvas-backdrop", isVisible: e, isAnimated: !0, rootElement: this._element.parentNode, clickCallback: e ? () => { "static" !== this._config.backdrop ? this.hide() : ht.trigger(this._element, Fi) } : null }) } _initializeFocusTrap() { return new Ci({ trapElement: this._element }) } _addEventListeners() { ht.on(this._element, "keydown.dismiss.bs.offcanvas", (e => { "Escape" === e.key && (this._config.keyboard ? this.hide() : ht.trigger(this._element, Fi)) })) } static jQueryInterface(e) { return this.each((function () { const t = zi.getOrCreateInstance(this, e); if ("string" == typeof e) { if (void 0 === t[e] || e.startsWith("_") || "constructor" === e) throw new TypeError(`No method named "${e}"`); t[e](this) } })) } } ht.on(document, "click.bs.offcanvas.data-api", '[data-bs-toggle="offcanvas"]', (function (e) { const t = Le(this); if (["A", "AREA"].includes(this.tagName) && e.preventDefault(), je(this)) return; ht.one(t, Ni, (() => { Ne(this) && this.focus() })); const i = Ct.findOne(Vi); i && i !== t && zi.getInstance(i).hide(), zi.getOrCreateInstance(t).toggle(this) })), ht.on(window, "load.bs.offcanvas.data-api", (() => { for (const e of Ct.find(Vi)) zi.getOrCreateInstance(e).show() })), ht.on(window, "resize.bs.offcanvas", (() => { for (const e of Ct.find("[aria-modal][class*=show][class*=offcanvas-]")) "fixed" !== getComputedStyle(e).position && zi.getOrCreateInstance(e).hide() })), St(zi), Ke(zi); const $i = new Set(["background", "cite", "href", "itemtype", "longdesc", "poster", "src", "xlink:href"]), Hi = /^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i, Wi = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i, qi = (e, t) => { const i = e.nodeName.toLowerCase(); return t.includes(i) ? !$i.has(i) || Boolean(Hi.test(e.nodeValue) || Wi.test(e.nodeValue)) : t.filter((e => e instanceof RegExp)).some((e => e.test(i))) }, Ki = { "*": ["class", "dir", "id", "lang", "role", /^aria-[\w-]*$/i], a: ["target", "href", "title", "rel"], area: [], b: [], br: [], col: [], code: [], div: [], em: [], hr: [], h1: [], h2: [], h3: [], h4: [], h5: [], h6: [], i: [], img: ["src", "srcset", "alt", "title", "width", "height"], li: [], ol: [], p: [], pre: [], s: [], small: [], span: [], sub: [], sup: [], strong: [], u: [], ul: [] }, Gi = { allowList: Ki, content: {}, extraClass: "", html: !1, sanitize: !0, sanitizeFn: null, template: "<div></div>" }, Ji = { allowList: "object", content: "object", extraClass: "(string|function)", html: "boolean", sanitize: "boolean", sanitizeFn: "(null|function)", template: "string" }, Zi = { entry: "(string|element|function|null)", selector: "(string|element)" }; class Qi extends yt { constructor(e) { super(), this._config = this._getConfig(e) } static get Default() { return Gi } static get DefaultType() { return Ji } static get NAME() { return "TemplateFactory" } getContent() { return Object.values(this._config.content).map((e => this._resolvePossibleFunction(e))).filter(Boolean) } hasContent() { return this.getContent().length > 0 } changeContent(e) { return this._checkContent(e), this._config.content = { ...this._config.content, ...e }, this } toHtml() { const e = document.createElement("div"); e.innerHTML = this._maybeSanitize(this._config.template); for (const [t, i] of Object.entries(this._config.content)) this._setContent(e, i, t); const t = e.children[0], i = this._resolvePossibleFunction(this._config.extraClass); return i && t.classList.add(...i.split(" ")), t } _typeCheckConfig(e) { super._typeCheckConfig(e), this._checkContent(e.content) } _checkContent(e) { for (const [t, i] of Object.entries(e)) super._typeCheckConfig({ selector: t, entry: i }, Zi) } _setContent(e, t, i) { const r = Ct.findOne(i, e); r && ((t = this._resolvePossibleFunction(t)) ? Ve(t) ? this._putElementInTemplate(Fe(t), r) : this._config.html ? r.innerHTML = this._maybeSanitize(t) : r.textContent = t : r.remove()) } _maybeSanitize(e) { return this._config.sanitize ? function (e, t, i) { if (!e.length) return e; if (i && "function" == typeof i) return i(e); const r = (new window.DOMParser).parseFromString(e, "text/html"), o = [].concat(...r.body.querySelectorAll("*")); for (const e of o) { const i = e.nodeName.toLowerCase(); if (!Object.keys(t).includes(i)) { e.remove(); continue } const r = [].concat(...e.attributes), o = [].concat(t["*"] || [], t[i] || []); for (const t of r) qi(t, o) || e.removeAttribute(t.nodeName) } return r.body.innerHTML }(e, this._config.allowList, this._config.sanitizeFn) : e } _resolvePossibleFunction(e) { return "function" == typeof e ? e(this) : e } _putElementInTemplate(e, t) { if (this._config.html) return t.innerHTML = "", void t.append(e); t.textContent = e.textContent } } const Xi = new Set(["sanitize", "allowList", "sanitizeFn"]), Yi = "fade", er = "show", tr = ".modal", ir = "hide.bs.modal", rr = "hover", or = "focus", nr = { AUTO: "auto", TOP: "top", RIGHT: qe() ? "left" : "right", BOTTOM: "bottom", LEFT: qe() ? "right" : "left" }, sr = { allowList: Ki, animation: !0, boundary: "clippingParents", container: !1, customClass: "", delay: 0, fallbackPlacements: ["top", "right", "bottom", "left"], html: !1, offset: [0, 0], placement: "top", popperConfig: null, sanitize: !0, sanitizeFn: null, selector: !1, template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>', title: "", trigger: "hover focus" }, ar = { allowList: "object", animation: "boolean", boundary: "(string|element)", container: "(string|element|boolean)", customClass: "(string|function)", delay: "(number|object)", fallbackPlacements: "array", html: "boolean", offset: "(array|string|function)", placement: "(string|function)", popperConfig: "(null|object|function)", sanitize: "boolean", sanitizeFn: "(null|function)", selector: "(string|boolean)", template: "string", title: "(string|element|function)", trigger: "string" }; class dr extends wt { constructor(e, t) { if (void 0 === r) throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)"); super(e, t), this._isEnabled = !0, this._timeout = 0, this._isHovered = !1, this._activeTrigger = {}, this._popper = null, this._templateFactory = null, this._newContent = null, this.tip = null, this._setListeners() } static get Default() { return sr } static get DefaultType() { return ar } static get NAME() { return "tooltip" } enable() { this._isEnabled = !0 } disable() { this._isEnabled = !1 } toggleEnabled() { this._isEnabled = !this._isEnabled } toggle(e) { if (this._isEnabled) { if (e) { const t = this._initializeOnDelegatedTarget(e); return t._activeTrigger.click = !t._activeTrigger.click, void (t._isWithActiveTrigger() ? t._enter() : t._leave()) } this._isShown() ? this._leave() : this._enter() } } dispose() { clearTimeout(this._timeout), ht.off(this._element.closest(tr), ir, this._hideModalHandler), this.tip && this.tip.remove(), this._disposePopper(), super.dispose() } show() { if ("none" === this._element.style.display) throw new Error("Please use show on visible elements"); if (!this._isWithContent() || !this._isEnabled) return; const e = ht.trigger(this._element, this.constructor.eventName("show")), t = (Ue(this._element) || this._element.ownerDocument.documentElement).contains(this._element); if (e.defaultPrevented || !t) return; this.tip && (this.tip.remove(), this.tip = null); const i = this._getTipElement(); this._element.setAttribute("aria-describedby", i.getAttribute("id")); const { container: r } = this._config; if (this._element.ownerDocument.documentElement.contains(this.tip) || (r.append(i), ht.trigger(this._element, this.constructor.eventName("inserted"))), this._popper ? this._popper.update() : this._popper = this._createPopper(i), i.classList.add(er), "ontouchstart" in document.documentElement) for (const e of [].concat(...document.body.children)) ht.on(e, "mouseover", ze); this._queueCallback((() => { const e = this._isHovered; this._isHovered = !1, ht.trigger(this._element, this.constructor.eventName("shown")), e && this._leave() }), this.tip, this._isAnimated()) } hide() { if (!this._isShown()) return; if (ht.trigger(this._element, this.constructor.eventName("hide")).defaultPrevented) return; const e = this._getTipElement(); if (e.classList.remove(er), "ontouchstart" in document.documentElement) for (const e of [].concat(...document.body.children)) ht.off(e, "mouseover", ze); this._activeTrigger.click = !1, this._activeTrigger.focus = !1, this._activeTrigger.hover = !1, this._isHovered = !1, this._queueCallback((() => { this._isWithActiveTrigger() || (this._isHovered || e.remove(), this._element.removeAttribute("aria-describedby"), ht.trigger(this._element, this.constructor.eventName("hidden")), this._disposePopper()) }), this.tip, this._isAnimated()) } update() { this._popper && this._popper.update() } _isWithContent() { return Boolean(this._getTitle()) } _getTipElement() { return this.tip || (this.tip = this._createTipElement(this._newContent || this._getContentForTemplate())), this.tip } _createTipElement(e) { const t = this._getTemplateFactory(e).toHtml(); if (!t) return null; t.classList.remove(Yi, er), t.classList.add(`bs-${this.constructor.NAME}-auto`); const i = (e => { do { e += Math.floor(1e6 * Math.random()) } while (document.getElementById(e)); return e })(this.constructor.NAME).toString(); return t.setAttribute("id", i), this._isAnimated() && t.classList.add(Yi), t } setContent(e) { this._newContent = e, this._isShown() && (this._disposePopper(), this.show()) } _getTemplateFactory(e) { return this._templateFactory ? this._templateFactory.changeContent(e) : this._templateFactory = new Qi({ ...this._config, content: e, extraClass: this._resolvePossibleFunction(this._config.customClass) }), this._templateFactory } _getContentForTemplate() { return { ".tooltip-inner": this._getTitle() } } _getTitle() { return this._resolvePossibleFunction(this._config.title) || this._config.originalTitle } _initializeOnDelegatedTarget(e) { return this.constructor.getOrCreateInstance(e.delegateTarget, this._getDelegateConfig()) } _isAnimated() { return this._config.animation || this.tip && this.tip.classList.contains(Yi) } _isShown() { return this.tip && this.tip.classList.contains(er) } _createPopper(e) { const t = "function" == typeof this._config.placement ? this._config.placement.call(this, e, this._element) : this._config.placement, i = nr[t.toUpperCase()]; return Me(this._element, e, this._getPopperConfig(i)) } _getOffset() { const { offset: e } = this._config; return "string" == typeof e ? e.split(",").map((e => Number.parseInt(e, 10))) : "function" == typeof e ? t => e(t, this._element) : e } _resolvePossibleFunction(e) { return "function" == typeof e ? e.call(this._element) : e } _getPopperConfig(e) { const t = { placement: e, modifiers: [{ name: "flip", options: { fallbackPlacements: this._config.fallbackPlacements } }, { name: "offset", options: { offset: this._getOffset() } }, { name: "preventOverflow", options: { boundary: this._config.boundary } }, { name: "arrow", options: { element: `.${this.constructor.NAME}-arrow` } }, { name: "preSetPlacement", enabled: !0, phase: "beforeMain", fn: e => { this._getTipElement().setAttribute("data-popper-placement", e.state.placement) } }] }; return { ...t, ..."function" == typeof this._config.popperConfig ? this._config.popperConfig(t) : this._config.popperConfig } } _setListeners() { const e = this._config.trigger.split(" "); for (const t of e) if ("click" === t) ht.on(this._element, this.constructor.eventName("click"), this._config.selector, (e => this.toggle(e))); else if ("manual" !== t) { const e = t === rr ? this.constructor.eventName("mouseenter") : this.constructor.eventName("focusin"), i = t === rr ? this.constructor.eventName("mouseleave") : this.constructor.eventName("focusout"); ht.on(this._element, e, this._config.selector, (e => { const t = this._initializeOnDelegatedTarget(e); t._activeTrigger["focusin" === e.type ? or : rr] = !0, t._enter() })), ht.on(this._element, i, this._config.selector, (e => { const t = this._initializeOnDelegatedTarget(e); t._activeTrigger["focusout" === e.type ? or : rr] = t._element.contains(e.relatedTarget), t._leave() })) } this._hideModalHandler = () => { this._element && this.hide() }, ht.on(this._element.closest(tr), ir, this._hideModalHandler), this._config.selector ? this._config = { ...this._config, trigger: "manual", selector: "" } : this._fixTitle() } _fixTitle() { const e = this._config.originalTitle; e && (this._element.getAttribute("aria-label") || this._element.textContent.trim() || this._element.setAttribute("aria-label", e), this._element.removeAttribute("title")) } _enter() { this._isShown() || this._isHovered ? this._isHovered = !0 : (this._isHovered = !0, this._setTimeout((() => { this._isHovered && this.show() }), this._config.delay.show)) } _leave() { this._isWithActiveTrigger() || (this._isHovered = !1, this._setTimeout((() => { this._isHovered || this.hide() }), this._config.delay.hide)) } _setTimeout(e, t) { clearTimeout(this._timeout), this._timeout = setTimeout(e, t) } _isWithActiveTrigger() { return Object.values(this._activeTrigger).includes(!0) } _getConfig(e) { const t = vt.getDataAttributes(this._element); for (const e of Object.keys(t)) Xi.has(e) && delete t[e]; return e = { ...t, ..."object" == typeof e && e ? e : {} }, e = this._mergeConfigObj(e), e = this._configAfterMerge(e), this._typeCheckConfig(e), e } _configAfterMerge(e) { return e.container = !1 === e.container ? document.body : Fe(e.container), "number" == typeof e.delay && (e.delay = { show: e.delay, hide: e.delay }), e.originalTitle = this._element.getAttribute("title") || "", "number" == typeof e.title && (e.title = e.title.toString()), "number" == typeof e.content && (e.content = e.content.toString()), e } _getDelegateConfig() { const e = {}; for (const t in this._config) this.constructor.Default[t] !== this._config[t] && (e[t] = this._config[t]); return e } _disposePopper() { this._popper && (this._popper.destroy(), this._popper = null) } static jQueryInterface(e) { return this.each((function () { const t = dr.getOrCreateInstance(this, e); if ("string" == typeof e) { if (void 0 === t[e]) throw new TypeError(`No method named "${e}"`); t[e]() } })) } } Ke(dr); const lr = { ...dr.Default, content: "", offset: [0, 8], placement: "right", template: '<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>', trigger: "click" }, cr = { ...dr.DefaultType, content: "(null|string|element|function)" }; class ur extends dr { static get Default() { return lr } static get DefaultType() { return cr } static get NAME() { return "popover" } _isWithContent() { return this._getTitle() || this._getContent() } _getContentForTemplate() { return { ".popover-header": this._getTitle(), ".popover-body": this._getContent() } } _getContent() { return this._resolvePossibleFunction(this._config.content) } static jQueryInterface(e) { return this.each((function () { const t = ur.getOrCreateInstance(this, e); if ("string" == typeof e) { if (void 0 === t[e]) throw new TypeError(`No method named "${e}"`); t[e]() } })) } } Ke(ur); const hr = "click.bs.scrollspy", pr = "active", mr = "[href]", fr = { offset: null, rootMargin: "0px 0px -25%", smoothScroll: !1, target: null }, gr = { offset: "(number|null)", rootMargin: "string", smoothScroll: "boolean", target: "element" }; class br extends wt { constructor(e, t) { super(e, t), this._targetLinks = new Map, this._observableSections = new Map, this._rootElement = "visible" === getComputedStyle(this._element).overflowY ? null : this._element, this._activeTarget = null, this._observer = null, this._previousScrollData = { visibleEntryTop: 0, parentScrollTop: 0 }, this.refresh() } static get Default() { return fr } static get DefaultType() { return gr } static get NAME() { return "scrollspy" } refresh() { this._initializeTargetsAndObservables(), this._maybeEnableSmoothScroll(), this._observer ? this._observer.disconnect() : this._observer = this._getNewObserver(); for (const e of this._observableSections.values()) this._observer.observe(e) } dispose() { this._observer.disconnect(), super.dispose() } _configAfterMerge(e) { return e.target = Fe(e.target) || document.body, e } _maybeEnableSmoothScroll() { this._config.smoothScroll && (ht.off(this._config.target, hr), ht.on(this._config.target, hr, mr, (e => { const t = this._observableSections.get(e.target.hash); if (t) { e.preventDefault(); const i = this._rootElement || window, r = t.offsetTop - this._element.offsetTop; if (i.scrollTo) return void i.scrollTo({ top: r, behavior: "smooth" }); i.scrollTop = r } }))) } _getNewObserver() { const e = { root: this._rootElement, threshold: [.1, .5, 1], rootMargin: this._getRootMargin() }; return new IntersectionObserver((e => this._observerCallback(e)), e) } _observerCallback(e) { const t = e => this._targetLinks.get(`#${e.target.id}`), i = e => { this._previousScrollData.visibleEntryTop = e.target.offsetTop, this._process(t(e)) }, r = (this._rootElement || document.documentElement).scrollTop, o = r >= this._previousScrollData.parentScrollTop; this._previousScrollData.parentScrollTop = r; for (const n of e) { if (!n.isIntersecting) { this._activeTarget = null, this._clearActiveClass(t(n)); continue } const e = n.target.offsetTop >= this._previousScrollData.visibleEntryTop; if (o && e) { if (i(n), !r) return } else o || e || i(n) } } _getRootMargin() { return this._config.offset ? `${this._config.offset}px 0px -30%` : this._config.rootMargin } _initializeTargetsAndObservables() { this._targetLinks = new Map, this._observableSections = new Map; const e = Ct.find(mr, this._config.target); for (const t of e) { if (!t.hash || je(t)) continue; const e = Ct.findOne(t.hash, this._element); Ne(e) && (this._targetLinks.set(t.hash, t), this._observableSections.set(t.hash, e)) } } _process(e) { this._activeTarget !== e && (this._clearActiveClass(this._config.target), this._activeTarget = e, e.classList.add(pr), this._activateParents(e), ht.trigger(this._element, "activate.bs.scrollspy", { relatedTarget: e })) } _activateParents(e) { if (e.classList.contains("dropdown-item")) Ct.findOne(".dropdown-toggle", e.closest(".dropdown")).classList.add(pr); else for (const t of Ct.parents(e, ".nav, .list-group")) for (const e of Ct.prev(t, ".nav-link, .nav-item > .nav-link, .list-group-item")) e.classList.add(pr) } _clearActiveClass(e) { e.classList.remove(pr); const t = Ct.find("[href].active", e); for (const e of t) e.classList.remove(pr) } static jQueryInterface(e) { return this.each((function () { const t = br.getOrCreateInstance(this, e); if ("string" == typeof e) { if (void 0 === t[e] || e.startsWith("_") || "constructor" === e) throw new TypeError(`No method named "${e}"`); t[e]() } })) } } ht.on(window, "load.bs.scrollspy.data-api", (() => { for (const e of Ct.find('[data-bs-spy="scroll"]')) br.getOrCreateInstance(e) })), Ke(br); const vr = "ArrowLeft", yr = "ArrowRight", wr = "ArrowUp", Sr = "ArrowDown", xr = "active", kr = "fade", _r = "show", Cr = '[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]', Ir = `.nav-link:not(.dropdown-toggle), .list-group-item:not(.dropdown-toggle), [role="tab"]:not(.dropdown-toggle), ${Cr}`; class Tr extends wt { constructor(e) { super(e), this._parent = this._element.closest('.list-group, .nav, [role="tablist"]'), this._parent && (this._setInitialAttributes(this._parent, this._getChildren()), ht.on(this._element, "keydown.bs.tab", (e => this._keydown(e)))) } static get NAME() { return "tab" } show() { const e = this._element; if (this._elemIsActive(e)) return; const t = this._getActiveElem(), i = t ? ht.trigger(t, "hide.bs.tab", { relatedTarget: e }) : null; ht.trigger(e, "show.bs.tab", { relatedTarget: t }).defaultPrevented || i && i.defaultPrevented || (this._deactivate(t, e), this._activate(e, t)) } _activate(e, t) { e && (e.classList.add(xr), this._activate(Le(e)), this._queueCallback((() => { "tab" === e.getAttribute("role") ? (e.focus(), e.removeAttribute("tabindex"), e.setAttribute("aria-selected", !0), this._toggleDropDown(e, !0), ht.trigger(e, "shown.bs.tab", { relatedTarget: t })) : e.classList.add(_r) }), e, e.classList.contains(kr))) } _deactivate(e, t) { e && (e.classList.remove(xr), e.blur(), this._deactivate(Le(e)), this._queueCallback((() => { "tab" === e.getAttribute("role") ? (e.setAttribute("aria-selected", !1), e.setAttribute("tabindex", "-1"), this._toggleDropDown(e, !1), ht.trigger(e, "hidden.bs.tab", { relatedTarget: t })) : e.classList.remove(_r) }), e, e.classList.contains(kr))) } _keydown(e) { if (![vr, yr, wr, Sr].includes(e.key)) return; e.stopPropagation(), e.preventDefault(); const t = [yr, Sr].includes(e.key), i = Ze(this._getChildren().filter((e => !je(e))), e.target, t, !0); i && Tr.getOrCreateInstance(i).show() } _getChildren() { return Ct.find(Ir, this._parent) } _getActiveElem() { return this._getChildren().find((e => this._elemIsActive(e))) || null } _setInitialAttributes(e, t) { this._setAttributeIfNotExists(e, "role", "tablist"); for (const e of t) this._setInitialAttributesOnChild(e) } _setInitialAttributesOnChild(e) { e = this._getInnerElement(e); const t = this._elemIsActive(e), i = this._getOuterElement(e); e.setAttribute("aria-selected", t), i !== e && this._setAttributeIfNotExists(i, "role", "presentation"), t || e.setAttribute("tabindex", "-1"), this._setAttributeIfNotExists(e, "role", "tab"), this._setInitialAttributesOnTargetPanel(e) } _setInitialAttributesOnTargetPanel(e) { const t = Le(e); t && (this._setAttributeIfNotExists(t, "role", "tabpanel"), e.id && this._setAttributeIfNotExists(t, "aria-labelledby", `#${e.id}`)) } _toggleDropDown(e, t) { const i = this._getOuterElement(e); if (!i.classList.contains("dropdown")) return; const r = (e, r) => { const o = Ct.findOne(e, i); o && o.classList.toggle(r, t) }; r(".dropdown-toggle", xr), r(".dropdown-menu", _r), r(".dropdown-item", xr), i.setAttribute("aria-expanded", t) } _setAttributeIfNotExists(e, t, i) { e.hasAttribute(t) || e.setAttribute(t, i) } _elemIsActive(e) { return e.classList.contains(xr) } _getInnerElement(e) { return e.matches(Ir) ? e : Ct.findOne(Ir, e) } _getOuterElement(e) { return e.closest(".nav-item, .list-group-item") || e } static jQueryInterface(e) { return this.each((function () { const t = Tr.getOrCreateInstance(this); if ("string" == typeof e) { if (void 0 === t[e] || e.startsWith("_") || "constructor" === e) throw new TypeError(`No method named "${e}"`); t[e]() } })) } } ht.on(document, "click.bs.tab", Cr, (function (e) { ["A", "AREA"].includes(this.tagName) && e.preventDefault(), je(this) || Tr.getOrCreateInstance(this).show() })), ht.on(window, "load.bs.tab", (() => { for (const e of Ct.find('.active[data-bs-toggle="tab"], .active[data-bs-toggle="pill"], .active[data-bs-toggle="list"]')) Tr.getOrCreateInstance(e) })), Ke(Tr); const Er = "hide", Ar = "show", Mr = "showing", Or = { animation: "boolean", autohide: "boolean", delay: "number" }, Pr = { animation: !0, autohide: !0, delay: 5e3 }; class Dr extends wt { constructor(e, t) { super(e, t), this._timeout = null, this._hasMouseInteraction = !1, this._hasKeyboardInteraction = !1, this._setListeners() } static get Default() { return Pr } static get DefaultType() { return Or } static get NAME() { return "toast" } show() { ht.trigger(this._element, "show.bs.toast").defaultPrevented || (this._clearTimeout(), this._config.animation && this._element.classList.add("fade"), this._element.classList.remove(Er), $e(this._element), this._element.classList.add(Ar, Mr), this._queueCallback((() => { this._element.classList.remove(Mr), ht.trigger(this._element, "shown.bs.toast"), this._maybeScheduleHide() }), this._element, this._config.animation)) } hide() { this.isShown() && (ht.trigger(this._element, "hide.bs.toast").defaultPrevented || (this._element.classList.add(Mr), this._queueCallback((() => { this._element.classList.add(Er), this._element.classList.remove(Mr, Ar), ht.trigger(this._element, "hidden.bs.toast") }), this._element, this._config.animation))) } dispose() { this._clearTimeout(), this.isShown() && this._element.classList.remove(Ar), super.dispose() } isShown() { return this._element.classList.contains(Ar) } _maybeScheduleHide() { this._config.autohide && (this._hasMouseInteraction || this._hasKeyboardInteraction || (this._timeout = setTimeout((() => { this.hide() }), this._config.delay))) } _onInteraction(e, t) { switch (e.type) { case "mouseover": case "mouseout": this._hasMouseInteraction = t; break; case "focusin": case "focusout": this._hasKeyboardInteraction = t }if (t) return void this._clearTimeout(); const i = e.relatedTarget; this._element === i || this._element.contains(i) || this._maybeScheduleHide() } _setListeners() { ht.on(this._element, "mouseover.bs.toast", (e => this._onInteraction(e, !0))), ht.on(this._element, "mouseout.bs.toast", (e => this._onInteraction(e, !1))), ht.on(this._element, "focusin.bs.toast", (e => this._onInteraction(e, !0))), ht.on(this._element, "focusout.bs.toast", (e => this._onInteraction(e, !1))) } _clearTimeout() { clearTimeout(this._timeout), this._timeout = null } static jQueryInterface(e) { return this.each((function () { const t = Dr.getOrCreateInstance(this, e); if ("string" == typeof e) { if (void 0 === t[e]) throw new TypeError(`No method named "${e}"`); t[e](this) } })) } } St(Dr), Ke(Dr) }, 2411: (e, t, i) => { "use strict"; i.d(t, { Z: () => z }); var r = i(8081), o = i.n(r), n = i(3645), s = i.n(n), a = i(1667), d = i.n(a), l = new URL(i(6770), i.b), c = new URL(i(6199), i.b), u = new URL(i(2204), i.b), h = new URL(i(8931), i.b), p = new URL(i(7486), i.b), m = new URL(i(1763), i.b), f = new URL(i(2469), i.b), g = new URL(i(9134), i.b), b = new URL(i(15), i.b), v = new URL(i(1217), i.b), y = new URL(i(1116), i.b), w = new URL(i(6529), i.b), S = new URL(i(8179), i.b), x = new URL(i(6254), i.b), k = new URL(i(5647), i.b), _ = new URL(i(1692), i.b), C = s()(o()), I = d()(l), T = d()(c), E = d()(u), A = d()(h), M = d()(p), O = d()(m), P = d()(f), D = d()(g), R = d()(b), L = d()(v), B = d()(y), V = d()(w), F = d()(S), N = d()(x), j = d()(k), U = d()(_); C.push([e.id, '/*!\n * Bootstrap  v5.2.0 (https://getbootstrap.com/)\n * Copyright 2011-2022 The Bootstrap Authors\n * Copyright 2011-2022 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n */:root{--bs-blue: #2c3e50;--bs-indigo: #6610f2;--bs-purple: #6f42c1;--bs-pink: #e83e8c;--bs-red: #e74c3c;--bs-orange: #fd7e14;--bs-yellow: #f39c12;--bs-green: #18bc9c;--bs-teal: #20c997;--bs-cyan: #3498db;--bs-black: #000;--bs-white: #fff;--bs-gray: #95a5a6;--bs-gray-dark: #343a40;--bs-gray-100: #f8f9fa;--bs-gray-200: #ecf0f1;--bs-gray-300: #dee2e6;--bs-gray-400: #ced4da;--bs-gray-500: #b4bcc2;--bs-gray-600: #95a5a6;--bs-gray-700: #7b8a8b;--bs-gray-800: #343a40;--bs-gray-900: #212529;--bs-primary: #2c3e50;--bs-secondary: #95a5a6;--bs-success: #18bc9c;--bs-info: #3498db;--bs-warning: #f39c12;--bs-danger: #e74c3c;--bs-light: #ecf0f1;--bs-dark: #7b8a8b;--bs-primary-rgb: 44, 62, 80;--bs-secondary-rgb: 149, 165, 166;--bs-success-rgb: 24, 188, 156;--bs-info-rgb: 52, 152, 219;--bs-warning-rgb: 243, 156, 18;--bs-danger-rgb: 231, 76, 60;--bs-light-rgb: 236, 240, 241;--bs-dark-rgb: 123, 138, 139;--bs-white-rgb: 255, 255, 255;--bs-black-rgb: 0, 0, 0;--bs-body-color-rgb: 33, 37, 41;--bs-body-bg-rgb: 255, 255, 255;--bs-font-sans-serif: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--bs-font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;--bs-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family: Lato, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;--bs-body-font-size:0.9375rem;--bs-body-font-weight: 400;--bs-body-line-height: 1.5;--bs-body-color: #212529;--bs-body-bg: #fff;--bs-border-width: 1px;--bs-border-style: solid;--bs-border-color: #dee2e6;--bs-border-color-translucent: rgba(0, 0, 0, 0.175);--bs-border-radius: 0.375rem;--bs-border-radius-sm: 0.25rem;--bs-border-radius-lg: 0.5rem;--bs-border-radius-xl: 1rem;--bs-border-radius-2xl: 2rem;--bs-border-radius-pill: 50rem;--bs-link-color: #18bc9c;--bs-link-hover-color: #13967d;--bs-code-color: #e83e8c;--bs-highlight-bg: #fdebd0}*,*::before,*::after{box-sizing:border-box}@media(prefers-reduced-motion: no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}hr{margin:1rem 0;color:inherit;border:0;border-top:1px solid;opacity:.25}h6,.h6,h5,.h5,h4,.h4,h3,.h3,h2,.h2,h1,.h1{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1,.h1{font-size:calc(1.425rem + 2.1vw)}@media(min-width: 1200px){h1,.h1{font-size:3rem}}h2,.h2{font-size:calc(1.375rem + 1.5vw)}@media(min-width: 1200px){h2,.h2{font-size:2.5rem}}h3,.h3{font-size:calc(1.325rem + 0.9vw)}@media(min-width: 1200px){h3,.h3{font-size:2rem}}h4,.h4{font-size:calc(1.265625rem + 0.1875vw)}@media(min-width: 1200px){h4,.h4{font-size:1.40625rem}}h5,.h5{font-size:1.171875rem}h6,.h6{font-size:0.9375rem}p{margin-top:0;margin-bottom:1rem}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}ol,ul,dl{margin-top:0;margin-bottom:1rem}ol ol,ul ul,ol ul,ul ol{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small,.small{font-size:0.875em}mark,.mark{padding:.1875em;background-color:var(--bs-highlight-bg)}sub,sup{position:relative;font-size:0.75em;line-height:0;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}a{color:var(--bs-link-color);text-decoration:underline}a:hover{color:var(--bs-link-hover-color)}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}pre,code,kbd,samp{font-family:var(--bs-font-monospace);font-size:1em}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:0.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:0.875em;color:var(--bs-code-color);word-wrap:break-word}a>code{color:inherit}kbd{padding:.1875rem .375rem;font-size:0.875em;color:var(--bs-body-bg);background-color:var(--bs-body-color);border-radius:.25rem}kbd kbd{padding:0;font-size:1em}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#95a5a6;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}thead,tbody,tfoot,tr,td,th{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}input,button,select,optgroup,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]:not([type=date]):not([type=datetime-local]):not([type=month]):not([type=week]):not([type=time])::-webkit-calendar-picker-indicator{display:none !important}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button:not(:disabled),[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + 0.3vw);line-height:inherit}@media(min-width: 1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-text,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}::file-selector-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none !important}.lead{font-size:1.171875rem;font-weight:300}.display-1{font-size:calc(1.625rem + 4.5vw);font-weight:300;line-height:1.2}@media(min-width: 1200px){.display-1{font-size:5rem}}.display-2{font-size:calc(1.575rem + 3.9vw);font-weight:300;line-height:1.2}@media(min-width: 1200px){.display-2{font-size:4.5rem}}.display-3{font-size:calc(1.525rem + 3.3vw);font-weight:300;line-height:1.2}@media(min-width: 1200px){.display-3{font-size:4rem}}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media(min-width: 1200px){.display-4{font-size:3.5rem}}.display-5{font-size:calc(1.425rem + 2.1vw);font-weight:300;line-height:1.2}@media(min-width: 1200px){.display-5{font-size:3rem}}.display-6{font-size:calc(1.375rem + 1.5vw);font-weight:300;line-height:1.2}@media(min-width: 1200px){.display-6{font-size:2.5rem}}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:0.875em;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.171875rem}.blockquote>:last-child{margin-bottom:0}.blockquote-footer{margin-top:-1rem;margin-bottom:1rem;font-size:0.875em;color:#95a5a6}.blockquote-footer::before{content:"— "}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:#fff;border:1px solid var(--bs-border-color);border-radius:.375rem;max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:0.875em;color:#95a5a6}.container,.container-fluid,.container-xxl,.container-xl,.container-lg,.container-md,.container-sm{--bs-gutter-x: 1.5rem;--bs-gutter-y: 0;width:100%;padding-right:calc(var(--bs-gutter-x)*.5);padding-left:calc(var(--bs-gutter-x)*.5);margin-right:auto;margin-left:auto}@media(min-width: 576px){.container-sm,.container{max-width:540px}}@media(min-width: 768px){.container-md,.container-sm,.container{max-width:720px}}@media(min-width: 992px){.container-lg,.container-md,.container-sm,.container{max-width:960px}}@media(min-width: 1200px){.container-xl,.container-lg,.container-md,.container-sm,.container{max-width:1140px}}@media(min-width: 1400px){.container-xxl,.container-xl,.container-lg,.container-md,.container-sm,.container{max-width:1320px}}.row{--bs-gutter-x: 1.5rem;--bs-gutter-y: 0;display:flex;flex-wrap:wrap;margin-top:calc(-1*var(--bs-gutter-y));margin-right:calc(-0.5*var(--bs-gutter-x));margin-left:calc(-0.5*var(--bs-gutter-x))}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x)*.5);padding-left:calc(var(--bs-gutter-x)*.5);margin-top:var(--bs-gutter-y)}.col{flex:1 0 0%}.row-cols-auto>*{flex:0 0 auto;width:auto}.row-cols-1>*{flex:0 0 auto;width:100%}.row-cols-2>*{flex:0 0 auto;width:50%}.row-cols-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-4>*{flex:0 0 auto;width:25%}.row-cols-5>*{flex:0 0 auto;width:20%}.row-cols-6>*{flex:0 0 auto;width:16.6666666667%}.col-auto{flex:0 0 auto;width:auto}.col-1{flex:0 0 auto;width:8.33333333%}.col-2{flex:0 0 auto;width:16.66666667%}.col-3{flex:0 0 auto;width:25%}.col-4{flex:0 0 auto;width:33.33333333%}.col-5{flex:0 0 auto;width:41.66666667%}.col-6{flex:0 0 auto;width:50%}.col-7{flex:0 0 auto;width:58.33333333%}.col-8{flex:0 0 auto;width:66.66666667%}.col-9{flex:0 0 auto;width:75%}.col-10{flex:0 0 auto;width:83.33333333%}.col-11{flex:0 0 auto;width:91.66666667%}.col-12{flex:0 0 auto;width:100%}.offset-1{margin-left:8.33333333%}.offset-2{margin-left:16.66666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.33333333%}.offset-5{margin-left:41.66666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.33333333%}.offset-8{margin-left:66.66666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.33333333%}.offset-11{margin-left:91.66666667%}.g-0,.gx-0{--bs-gutter-x: 0}.g-0,.gy-0{--bs-gutter-y: 0}.g-1,.gx-1{--bs-gutter-x: 0.25rem}.g-1,.gy-1{--bs-gutter-y: 0.25rem}.g-2,.gx-2{--bs-gutter-x: 0.5rem}.g-2,.gy-2{--bs-gutter-y: 0.5rem}.g-3,.gx-3{--bs-gutter-x: 1rem}.g-3,.gy-3{--bs-gutter-y: 1rem}.g-4,.gx-4{--bs-gutter-x: 1.5rem}.g-4,.gy-4{--bs-gutter-y: 1.5rem}.g-5,.gx-5{--bs-gutter-x: 3rem}.g-5,.gy-5{--bs-gutter-y: 3rem}@media(min-width: 576px){.col-sm{flex:1 0 0%}.row-cols-sm-auto>*{flex:0 0 auto;width:auto}.row-cols-sm-1>*{flex:0 0 auto;width:100%}.row-cols-sm-2>*{flex:0 0 auto;width:50%}.row-cols-sm-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-sm-4>*{flex:0 0 auto;width:25%}.row-cols-sm-5>*{flex:0 0 auto;width:20%}.row-cols-sm-6>*{flex:0 0 auto;width:16.6666666667%}.col-sm-auto{flex:0 0 auto;width:auto}.col-sm-1{flex:0 0 auto;width:8.33333333%}.col-sm-2{flex:0 0 auto;width:16.66666667%}.col-sm-3{flex:0 0 auto;width:25%}.col-sm-4{flex:0 0 auto;width:33.33333333%}.col-sm-5{flex:0 0 auto;width:41.66666667%}.col-sm-6{flex:0 0 auto;width:50%}.col-sm-7{flex:0 0 auto;width:58.33333333%}.col-sm-8{flex:0 0 auto;width:66.66666667%}.col-sm-9{flex:0 0 auto;width:75%}.col-sm-10{flex:0 0 auto;width:83.33333333%}.col-sm-11{flex:0 0 auto;width:91.66666667%}.col-sm-12{flex:0 0 auto;width:100%}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.33333333%}.offset-sm-2{margin-left:16.66666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.33333333%}.offset-sm-5{margin-left:41.66666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.33333333%}.offset-sm-8{margin-left:66.66666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.33333333%}.offset-sm-11{margin-left:91.66666667%}.g-sm-0,.gx-sm-0{--bs-gutter-x: 0}.g-sm-0,.gy-sm-0{--bs-gutter-y: 0}.g-sm-1,.gx-sm-1{--bs-gutter-x: 0.25rem}.g-sm-1,.gy-sm-1{--bs-gutter-y: 0.25rem}.g-sm-2,.gx-sm-2{--bs-gutter-x: 0.5rem}.g-sm-2,.gy-sm-2{--bs-gutter-y: 0.5rem}.g-sm-3,.gx-sm-3{--bs-gutter-x: 1rem}.g-sm-3,.gy-sm-3{--bs-gutter-y: 1rem}.g-sm-4,.gx-sm-4{--bs-gutter-x: 1.5rem}.g-sm-4,.gy-sm-4{--bs-gutter-y: 1.5rem}.g-sm-5,.gx-sm-5{--bs-gutter-x: 3rem}.g-sm-5,.gy-sm-5{--bs-gutter-y: 3rem}}@media(min-width: 768px){.col-md{flex:1 0 0%}.row-cols-md-auto>*{flex:0 0 auto;width:auto}.row-cols-md-1>*{flex:0 0 auto;width:100%}.row-cols-md-2>*{flex:0 0 auto;width:50%}.row-cols-md-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-md-4>*{flex:0 0 auto;width:25%}.row-cols-md-5>*{flex:0 0 auto;width:20%}.row-cols-md-6>*{flex:0 0 auto;width:16.6666666667%}.col-md-auto{flex:0 0 auto;width:auto}.col-md-1{flex:0 0 auto;width:8.33333333%}.col-md-2{flex:0 0 auto;width:16.66666667%}.col-md-3{flex:0 0 auto;width:25%}.col-md-4{flex:0 0 auto;width:33.33333333%}.col-md-5{flex:0 0 auto;width:41.66666667%}.col-md-6{flex:0 0 auto;width:50%}.col-md-7{flex:0 0 auto;width:58.33333333%}.col-md-8{flex:0 0 auto;width:66.66666667%}.col-md-9{flex:0 0 auto;width:75%}.col-md-10{flex:0 0 auto;width:83.33333333%}.col-md-11{flex:0 0 auto;width:91.66666667%}.col-md-12{flex:0 0 auto;width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.33333333%}.offset-md-2{margin-left:16.66666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.33333333%}.offset-md-5{margin-left:41.66666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.33333333%}.offset-md-8{margin-left:66.66666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.33333333%}.offset-md-11{margin-left:91.66666667%}.g-md-0,.gx-md-0{--bs-gutter-x: 0}.g-md-0,.gy-md-0{--bs-gutter-y: 0}.g-md-1,.gx-md-1{--bs-gutter-x: 0.25rem}.g-md-1,.gy-md-1{--bs-gutter-y: 0.25rem}.g-md-2,.gx-md-2{--bs-gutter-x: 0.5rem}.g-md-2,.gy-md-2{--bs-gutter-y: 0.5rem}.g-md-3,.gx-md-3{--bs-gutter-x: 1rem}.g-md-3,.gy-md-3{--bs-gutter-y: 1rem}.g-md-4,.gx-md-4{--bs-gutter-x: 1.5rem}.g-md-4,.gy-md-4{--bs-gutter-y: 1.5rem}.g-md-5,.gx-md-5{--bs-gutter-x: 3rem}.g-md-5,.gy-md-5{--bs-gutter-y: 3rem}}@media(min-width: 992px){.col-lg{flex:1 0 0%}.row-cols-lg-auto>*{flex:0 0 auto;width:auto}.row-cols-lg-1>*{flex:0 0 auto;width:100%}.row-cols-lg-2>*{flex:0 0 auto;width:50%}.row-cols-lg-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-lg-4>*{flex:0 0 auto;width:25%}.row-cols-lg-5>*{flex:0 0 auto;width:20%}.row-cols-lg-6>*{flex:0 0 auto;width:16.6666666667%}.col-lg-auto{flex:0 0 auto;width:auto}.col-lg-1{flex:0 0 auto;width:8.33333333%}.col-lg-2{flex:0 0 auto;width:16.66666667%}.col-lg-3{flex:0 0 auto;width:25%}.col-lg-4{flex:0 0 auto;width:33.33333333%}.col-lg-5{flex:0 0 auto;width:41.66666667%}.col-lg-6{flex:0 0 auto;width:50%}.col-lg-7{flex:0 0 auto;width:58.33333333%}.col-lg-8{flex:0 0 auto;width:66.66666667%}.col-lg-9{flex:0 0 auto;width:75%}.col-lg-10{flex:0 0 auto;width:83.33333333%}.col-lg-11{flex:0 0 auto;width:91.66666667%}.col-lg-12{flex:0 0 auto;width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.33333333%}.offset-lg-2{margin-left:16.66666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.33333333%}.offset-lg-5{margin-left:41.66666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.33333333%}.offset-lg-8{margin-left:66.66666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.33333333%}.offset-lg-11{margin-left:91.66666667%}.g-lg-0,.gx-lg-0{--bs-gutter-x: 0}.g-lg-0,.gy-lg-0{--bs-gutter-y: 0}.g-lg-1,.gx-lg-1{--bs-gutter-x: 0.25rem}.g-lg-1,.gy-lg-1{--bs-gutter-y: 0.25rem}.g-lg-2,.gx-lg-2{--bs-gutter-x: 0.5rem}.g-lg-2,.gy-lg-2{--bs-gutter-y: 0.5rem}.g-lg-3,.gx-lg-3{--bs-gutter-x: 1rem}.g-lg-3,.gy-lg-3{--bs-gutter-y: 1rem}.g-lg-4,.gx-lg-4{--bs-gutter-x: 1.5rem}.g-lg-4,.gy-lg-4{--bs-gutter-y: 1.5rem}.g-lg-5,.gx-lg-5{--bs-gutter-x: 3rem}.g-lg-5,.gy-lg-5{--bs-gutter-y: 3rem}}@media(min-width: 1200px){.col-xl{flex:1 0 0%}.row-cols-xl-auto>*{flex:0 0 auto;width:auto}.row-cols-xl-1>*{flex:0 0 auto;width:100%}.row-cols-xl-2>*{flex:0 0 auto;width:50%}.row-cols-xl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xl-4>*{flex:0 0 auto;width:25%}.row-cols-xl-5>*{flex:0 0 auto;width:20%}.row-cols-xl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xl-auto{flex:0 0 auto;width:auto}.col-xl-1{flex:0 0 auto;width:8.33333333%}.col-xl-2{flex:0 0 auto;width:16.66666667%}.col-xl-3{flex:0 0 auto;width:25%}.col-xl-4{flex:0 0 auto;width:33.33333333%}.col-xl-5{flex:0 0 auto;width:41.66666667%}.col-xl-6{flex:0 0 auto;width:50%}.col-xl-7{flex:0 0 auto;width:58.33333333%}.col-xl-8{flex:0 0 auto;width:66.66666667%}.col-xl-9{flex:0 0 auto;width:75%}.col-xl-10{flex:0 0 auto;width:83.33333333%}.col-xl-11{flex:0 0 auto;width:91.66666667%}.col-xl-12{flex:0 0 auto;width:100%}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.33333333%}.offset-xl-2{margin-left:16.66666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.33333333%}.offset-xl-5{margin-left:41.66666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.33333333%}.offset-xl-8{margin-left:66.66666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.33333333%}.offset-xl-11{margin-left:91.66666667%}.g-xl-0,.gx-xl-0{--bs-gutter-x: 0}.g-xl-0,.gy-xl-0{--bs-gutter-y: 0}.g-xl-1,.gx-xl-1{--bs-gutter-x: 0.25rem}.g-xl-1,.gy-xl-1{--bs-gutter-y: 0.25rem}.g-xl-2,.gx-xl-2{--bs-gutter-x: 0.5rem}.g-xl-2,.gy-xl-2{--bs-gutter-y: 0.5rem}.g-xl-3,.gx-xl-3{--bs-gutter-x: 1rem}.g-xl-3,.gy-xl-3{--bs-gutter-y: 1rem}.g-xl-4,.gx-xl-4{--bs-gutter-x: 1.5rem}.g-xl-4,.gy-xl-4{--bs-gutter-y: 1.5rem}.g-xl-5,.gx-xl-5{--bs-gutter-x: 3rem}.g-xl-5,.gy-xl-5{--bs-gutter-y: 3rem}}@media(min-width: 1400px){.col-xxl{flex:1 0 0%}.row-cols-xxl-auto>*{flex:0 0 auto;width:auto}.row-cols-xxl-1>*{flex:0 0 auto;width:100%}.row-cols-xxl-2>*{flex:0 0 auto;width:50%}.row-cols-xxl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xxl-4>*{flex:0 0 auto;width:25%}.row-cols-xxl-5>*{flex:0 0 auto;width:20%}.row-cols-xxl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xxl-auto{flex:0 0 auto;width:auto}.col-xxl-1{flex:0 0 auto;width:8.33333333%}.col-xxl-2{flex:0 0 auto;width:16.66666667%}.col-xxl-3{flex:0 0 auto;width:25%}.col-xxl-4{flex:0 0 auto;width:33.33333333%}.col-xxl-5{flex:0 0 auto;width:41.66666667%}.col-xxl-6{flex:0 0 auto;width:50%}.col-xxl-7{flex:0 0 auto;width:58.33333333%}.col-xxl-8{flex:0 0 auto;width:66.66666667%}.col-xxl-9{flex:0 0 auto;width:75%}.col-xxl-10{flex:0 0 auto;width:83.33333333%}.col-xxl-11{flex:0 0 auto;width:91.66666667%}.col-xxl-12{flex:0 0 auto;width:100%}.offset-xxl-0{margin-left:0}.offset-xxl-1{margin-left:8.33333333%}.offset-xxl-2{margin-left:16.66666667%}.offset-xxl-3{margin-left:25%}.offset-xxl-4{margin-left:33.33333333%}.offset-xxl-5{margin-left:41.66666667%}.offset-xxl-6{margin-left:50%}.offset-xxl-7{margin-left:58.33333333%}.offset-xxl-8{margin-left:66.66666667%}.offset-xxl-9{margin-left:75%}.offset-xxl-10{margin-left:83.33333333%}.offset-xxl-11{margin-left:91.66666667%}.g-xxl-0,.gx-xxl-0{--bs-gutter-x: 0}.g-xxl-0,.gy-xxl-0{--bs-gutter-y: 0}.g-xxl-1,.gx-xxl-1{--bs-gutter-x: 0.25rem}.g-xxl-1,.gy-xxl-1{--bs-gutter-y: 0.25rem}.g-xxl-2,.gx-xxl-2{--bs-gutter-x: 0.5rem}.g-xxl-2,.gy-xxl-2{--bs-gutter-y: 0.5rem}.g-xxl-3,.gx-xxl-3{--bs-gutter-x: 1rem}.g-xxl-3,.gy-xxl-3{--bs-gutter-y: 1rem}.g-xxl-4,.gx-xxl-4{--bs-gutter-x: 1.5rem}.g-xxl-4,.gy-xxl-4{--bs-gutter-y: 1.5rem}.g-xxl-5,.gx-xxl-5{--bs-gutter-x: 3rem}.g-xxl-5,.gy-xxl-5{--bs-gutter-y: 3rem}}.table{--bs-table-color: var(--bs-body-color);--bs-table-bg: transparent;--bs-table-border-color: var(--bs-border-color);--bs-table-accent-bg: #ecf0f1;--bs-table-striped-color: var(--bs-body-color);--bs-table-striped-bg: rgba(0, 0, 0, 0.05);--bs-table-active-color: var(--bs-body-color);--bs-table-active-bg: rgba(0, 0, 0, 0.1);--bs-table-hover-color: var(--bs-body-color);--bs-table-hover-bg: rgba(0, 0, 0, 0.075);width:100%;margin-bottom:1rem;color:var(--bs-table-color);vertical-align:top;border-color:var(--bs-table-border-color)}.table>:not(caption)>*>*{padding:.5rem .5rem;background-color:var(--bs-table-bg);border-bottom-width:1px;box-shadow:inset 0 0 0 9999px var(--bs-table-accent-bg)}.table>tbody{vertical-align:inherit}.table>thead{vertical-align:bottom}.table-group-divider{border-top:2px solid currentcolor}.caption-top{caption-side:top}.table-sm>:not(caption)>*>*{padding:.25rem .25rem}.table-bordered>:not(caption)>*{border-width:1px 0}.table-bordered>:not(caption)>*>*{border-width:0 1px}.table-borderless>:not(caption)>*>*{border-bottom-width:0}.table-borderless>:not(:first-child){border-top-width:0}.table-striped>tbody>tr:nth-of-type(odd)>*{--bs-table-accent-bg: var(--bs-table-striped-bg);color:var(--bs-table-striped-color)}.table-striped-columns>:not(caption)>tr>:nth-child(even){--bs-table-accent-bg: var(--bs-table-striped-bg);color:var(--bs-table-striped-color)}.table-active{--bs-table-accent-bg: var(--bs-table-active-bg);color:var(--bs-table-active-color)}.table-hover>tbody>tr:hover>*{--bs-table-accent-bg: var(--bs-table-hover-bg);color:var(--bs-table-hover-color)}.table-primary{--bs-table-color: #000;--bs-table-bg: #d5d8dc;--bs-table-border-color: #c0c2c6;--bs-table-striped-bg: #cacdd1;--bs-table-striped-color: #000;--bs-table-active-bg: #c0c2c6;--bs-table-active-color: #000;--bs-table-hover-bg: #c5c8cc;--bs-table-hover-color: #000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-secondary{--bs-table-color: #000;--bs-table-bg: #eaeded;--bs-table-border-color: #d3d5d5;--bs-table-striped-bg: #dee1e1;--bs-table-striped-color: #000;--bs-table-active-bg: #d3d5d5;--bs-table-active-color: #000;--bs-table-hover-bg: #d8dbdb;--bs-table-hover-color: #000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-success{--bs-table-color: #000;--bs-table-bg: #d1f2eb;--bs-table-border-color: #bcdad4;--bs-table-striped-bg: #c7e6df;--bs-table-striped-color: #000;--bs-table-active-bg: #bcdad4;--bs-table-active-color: #000;--bs-table-hover-bg: #c1e0d9;--bs-table-hover-color: #000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-info{--bs-table-color: #000;--bs-table-bg: #d6eaf8;--bs-table-border-color: #c1d3df;--bs-table-striped-bg: #cbdeec;--bs-table-striped-color: #000;--bs-table-active-bg: #c1d3df;--bs-table-active-color: #000;--bs-table-hover-bg: #c6d8e5;--bs-table-hover-color: #000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-warning{--bs-table-color: #000;--bs-table-bg: #fdebd0;--bs-table-border-color: #e4d4bb;--bs-table-striped-bg: #f0dfc6;--bs-table-striped-color: #000;--bs-table-active-bg: #e4d4bb;--bs-table-active-color: #000;--bs-table-hover-bg: #ead9c0;--bs-table-hover-color: #000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-danger{--bs-table-color: #000;--bs-table-bg: #fadbd8;--bs-table-border-color: #e1c5c2;--bs-table-striped-bg: #eed0cd;--bs-table-striped-color: #000;--bs-table-active-bg: #e1c5c2;--bs-table-active-color: #000;--bs-table-hover-bg: #e7cbc8;--bs-table-hover-color: #000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-light{--bs-table-color: #000;--bs-table-bg: #ecf0f1;--bs-table-border-color: #d4d8d9;--bs-table-striped-bg: #e0e4e5;--bs-table-striped-color: #000;--bs-table-active-bg: #d4d8d9;--bs-table-active-color: #000;--bs-table-hover-bg: #dadedf;--bs-table-hover-color: #000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-dark{--bs-table-color: #000;--bs-table-bg: #7b8a8b;--bs-table-border-color: #6f7c7d;--bs-table-striped-bg: #758384;--bs-table-striped-color: #000;--bs-table-active-bg: #6f7c7d;--bs-table-active-color: #000;--bs-table-hover-bg: #728081;--bs-table-hover-color: #000;color:var(--bs-table-color);border-color:var(--bs-table-border-color)}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}@media(max-width: 575.98px){.table-responsive-sm{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media(max-width: 767.98px){.table-responsive-md{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media(max-width: 991.98px){.table-responsive-lg{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media(max-width: 1199.98px){.table-responsive-xl{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media(max-width: 1399.98px){.table-responsive-xxl{overflow-x:auto;-webkit-overflow-scrolling:touch}}.form-label{margin-bottom:.5rem}.col-form-label{padding-top:calc(0.375rem + 1px);padding-bottom:calc(0.375rem + 1px);margin-bottom:0;font-size:inherit;line-height:1.5}.col-form-label-lg{padding-top:calc(0.5rem + 1px);padding-bottom:calc(0.5rem + 1px);font-size:1.171875rem}.col-form-label-sm{padding-top:calc(0.25rem + 1px);padding-bottom:calc(0.25rem + 1px);font-size:0.8203125rem}.form-text{margin-top:.25rem;font-size:0.875em;color:#95a5a6}.form-control{display:block;width:100%;padding:.375rem .75rem;font-size:0.9375rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:.375rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){.form-control{transition:none}}.form-control[type=file]{overflow:hidden}.form-control[type=file]:not(:disabled):not([readonly]){cursor:pointer}.form-control:focus{color:#212529;background-color:#fff;border-color:#969fa8;outline:0;box-shadow:0 0 0 .25rem rgba(44,62,80,.25)}.form-control::-webkit-date-and-time-value{height:1.5em}.form-control::-moz-placeholder{color:#95a5a6;opacity:1}.form-control::placeholder{color:#95a5a6;opacity:1}.form-control:disabled{background-color:#ecf0f1;opacity:1}.form-control::-webkit-file-upload-button{padding:.375rem .75rem;margin:-0.375rem -0.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:#212529;background-color:#ecf0f1;pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:1px;border-radius:0;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control::file-selector-button{padding:.375rem .75rem;margin:-0.375rem -0.75rem;-webkit-margin-end:.75rem;margin-inline-end:.75rem;color:#212529;background-color:#ecf0f1;pointer-events:none;border-color:inherit;border-style:solid;border-width:0;border-inline-end-width:1px;border-radius:0;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){.form-control::-webkit-file-upload-button{-webkit-transition:none;transition:none}.form-control::file-selector-button{transition:none}}.form-control:hover:not(:disabled):not([readonly])::-webkit-file-upload-button{background-color:#e0e4e5}.form-control:hover:not(:disabled):not([readonly])::file-selector-button{background-color:#e0e4e5}.form-control-plaintext{display:block;width:100%;padding:.375rem 0;margin-bottom:0;line-height:1.5;color:#212529;background-color:rgba(0,0,0,0);border:solid rgba(0,0,0,0);border-width:1px 0}.form-control-plaintext:focus{outline:0}.form-control-plaintext.form-control-sm,.form-control-plaintext.form-control-lg{padding-right:0;padding-left:0}.form-control-sm{min-height:calc(1.5em + 0.5rem + 2px);padding:.25rem .5rem;font-size:0.8203125rem;border-radius:.25rem}.form-control-sm::-webkit-file-upload-button{padding:.25rem .5rem;margin:-0.25rem -0.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-sm::file-selector-button{padding:.25rem .5rem;margin:-0.25rem -0.5rem;-webkit-margin-end:.5rem;margin-inline-end:.5rem}.form-control-lg{min-height:calc(1.5em + 1rem + 2px);padding:.5rem 1rem;font-size:1.171875rem;border-radius:.5rem}.form-control-lg::-webkit-file-upload-button{padding:.5rem 1rem;margin:-0.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}.form-control-lg::file-selector-button{padding:.5rem 1rem;margin:-0.5rem -1rem;-webkit-margin-end:1rem;margin-inline-end:1rem}textarea.form-control{min-height:calc(1.5em + 0.75rem + 2px)}textarea.form-control-sm{min-height:calc(1.5em + 0.5rem + 2px)}textarea.form-control-lg{min-height:calc(1.5em + 1rem + 2px)}.form-control-color{width:3rem;height:calc(1.5em + 0.75rem + 2px);padding:.375rem}.form-control-color:not(:disabled):not([readonly]){cursor:pointer}.form-control-color::-moz-color-swatch{border:0 !important;border-radius:.375rem}.form-control-color::-webkit-color-swatch{border-radius:.375rem}.form-control-color.form-control-sm{height:calc(1.5em + 0.5rem + 2px)}.form-control-color.form-control-lg{height:calc(1.5em + 1rem + 2px)}.form-select{display:block;width:100%;padding:.375rem 2.25rem .375rem .75rem;-moz-padding-start:calc(0.75rem - 3px);font-size:0.9375rem;font-weight:400;line-height:1.5;color:#7b8a8b;background-color:#fff;background-image:url(' + I + ');background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;border:1px solid #ced4da;border-radius:.375rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion: reduce){.form-select{transition:none}}.form-select:focus{border-color:#969fa8;outline:0;box-shadow:0 0 0 .25rem rgba(44,62,80,.25)}.form-select[multiple],.form-select[size]:not([size="1"]){padding-right:.75rem;background-image:none}.form-select:disabled{background-color:#ecf0f1}.form-select:-moz-focusring{color:rgba(0,0,0,0);text-shadow:0 0 0 #7b8a8b}.form-select-sm{padding-top:.25rem;padding-bottom:.25rem;padding-left:.5rem;font-size:0.8203125rem;border-radius:.25rem}.form-select-lg{padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.171875rem;border-radius:.5rem}.form-check{display:block;min-height:1.40625rem;padding-left:1.5em;margin-bottom:.125rem}.form-check .form-check-input{float:left;margin-left:-1.5em}.form-check-reverse{padding-right:1.5em;padding-left:0;text-align:right}.form-check-reverse .form-check-input{float:right;margin-right:-1.5em;margin-left:0}.form-check-input{width:1em;height:1em;margin-top:.25em;vertical-align:top;background-color:#fff;background-repeat:no-repeat;background-position:center;background-size:contain;border:1px solid rgba(0,0,0,.25);-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact}.form-check-input[type=checkbox]{border-radius:.25em}.form-check-input[type=radio]{border-radius:50%}.form-check-input:active{filter:brightness(90%)}.form-check-input:focus{border-color:#969fa8;outline:0;box-shadow:0 0 0 .25rem rgba(44,62,80,.25)}.form-check-input:checked{background-color:#2c3e50;border-color:#2c3e50}.form-check-input:checked[type=checkbox]{background-image:url(' + T + ")}.form-check-input:checked[type=radio]{background-image:url(" + E + ")}.form-check-input[type=checkbox]:indeterminate{background-color:#2c3e50;border-color:#2c3e50;background-image:url(" + A + ")}.form-check-input:disabled{pointer-events:none;filter:none;opacity:.5}.form-check-input[disabled]~.form-check-label,.form-check-input:disabled~.form-check-label{cursor:default;opacity:.5}.form-switch{padding-left:2.5em}.form-switch .form-check-input{width:2em;margin-left:-2.5em;background-image:url(" + M + ");background-position:left center;border-radius:2em;transition:background-position .15s ease-in-out}@media(prefers-reduced-motion: reduce){.form-switch .form-check-input{transition:none}}.form-switch .form-check-input:focus{background-image:url(" + O + ")}.form-switch .form-check-input:checked{background-position:right center;background-image:url(" + P + ")}.form-switch.form-check-reverse{padding-right:2.5em;padding-left:0}.form-switch.form-check-reverse .form-check-input{margin-right:-2.5em;margin-left:0}.form-check-inline{display:inline-block;margin-right:1rem}.btn-check{position:absolute;clip:rect(0, 0, 0, 0);pointer-events:none}.btn-check[disabled]+.btn,.btn-check:disabled+.btn{pointer-events:none;filter:none;opacity:.65}.form-range{width:100%;height:1.5rem;padding:0;background-color:rgba(0,0,0,0);-webkit-appearance:none;-moz-appearance:none;appearance:none}.form-range:focus{outline:0}.form-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(44,62,80,.25)}.form-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .25rem rgba(44,62,80,.25)}.form-range::-moz-focus-outer{border:0}.form-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-0.25rem;background-color:#2c3e50;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion: reduce){.form-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.form-range::-webkit-slider-thumb:active{background-color:#c0c5cb}.form-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:rgba(0,0,0,0);cursor:pointer;background-color:#dee2e6;border-color:rgba(0,0,0,0);border-radius:1rem}.form-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#2c3e50;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion: reduce){.form-range::-moz-range-thumb{-moz-transition:none;transition:none}}.form-range::-moz-range-thumb:active{background-color:#c0c5cb}.form-range::-moz-range-track{width:100%;height:.5rem;color:rgba(0,0,0,0);cursor:pointer;background-color:#dee2e6;border-color:rgba(0,0,0,0);border-radius:1rem}.form-range:disabled{pointer-events:none}.form-range:disabled::-webkit-slider-thumb{background-color:#b4bcc2}.form-range:disabled::-moz-range-thumb{background-color:#b4bcc2}.form-floating{position:relative}.form-floating>.form-control,.form-floating>.form-control-plaintext,.form-floating>.form-select{height:calc(3.5rem + 2px);line-height:1.25}.form-floating>label{position:absolute;top:0;left:0;width:100%;height:100%;padding:1rem .75rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:none;border:1px solid rgba(0,0,0,0);transform-origin:0 0;transition:opacity .1s ease-in-out,transform .1s ease-in-out}@media(prefers-reduced-motion: reduce){.form-floating>label{transition:none}}.form-floating>.form-control,.form-floating>.form-control-plaintext{padding:1rem .75rem}.form-floating>.form-control::-moz-placeholder, .form-floating>.form-control-plaintext::-moz-placeholder{color:rgba(0,0,0,0)}.form-floating>.form-control::placeholder,.form-floating>.form-control-plaintext::placeholder{color:rgba(0,0,0,0)}.form-floating>.form-control:not(:-moz-placeholder-shown), .form-floating>.form-control-plaintext:not(:-moz-placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:focus,.form-floating>.form-control:not(:placeholder-shown),.form-floating>.form-control-plaintext:focus,.form-floating>.form-control-plaintext:not(:placeholder-shown){padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:-webkit-autofill,.form-floating>.form-control-plaintext:-webkit-autofill{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-select{padding-top:1.625rem;padding-bottom:.625rem}.form-floating>.form-control:not(:-moz-placeholder-shown)~label{opacity:.65;transform:scale(0.85) translateY(-0.5rem) translateX(0.15rem)}.form-floating>.form-control:focus~label,.form-floating>.form-control:not(:placeholder-shown)~label,.form-floating>.form-control-plaintext~label,.form-floating>.form-select~label{opacity:.65;transform:scale(0.85) translateY(-0.5rem) translateX(0.15rem)}.form-floating>.form-control:-webkit-autofill~label{opacity:.65;transform:scale(0.85) translateY(-0.5rem) translateX(0.15rem)}.form-floating>.form-control-plaintext~label{border-width:1px 0}.input-group{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group>.form-control,.input-group>.form-select,.input-group>.form-floating{position:relative;flex:1 1 auto;width:1%;min-width:0}.input-group>.form-control:focus,.input-group>.form-select:focus,.input-group>.form-floating:focus-within{z-index:3}.input-group .btn{position:relative;z-index:2}.input-group .btn:focus{z-index:3}.input-group-text{display:flex;align-items:center;padding:.375rem .75rem;font-size:0.9375rem;font-weight:400;line-height:1.5;color:#212529;text-align:center;white-space:nowrap;background-color:#ecf0f1;border:1px solid #ced4da;border-radius:.375rem}.input-group-lg>.form-control,.input-group-lg>.form-select,.input-group-lg>.input-group-text,.input-group-lg>.btn{padding:.5rem 1rem;font-size:1.171875rem;border-radius:.5rem}.input-group-sm>.form-control,.input-group-sm>.form-select,.input-group-sm>.input-group-text,.input-group-sm>.btn{padding:.25rem .5rem;font-size:0.8203125rem;border-radius:.25rem}.input-group-lg>.form-select,.input-group-sm>.form-select{padding-right:3rem}.input-group:not(.has-validation)>:not(:last-child):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating),.input-group:not(.has-validation)>.dropdown-toggle:nth-last-child(n+3),.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-control,.input-group:not(.has-validation)>.form-floating:not(:last-child)>.form-select{border-top-right-radius:0;border-bottom-right-radius:0}.input-group.has-validation>:nth-last-child(n+3):not(.dropdown-toggle):not(.dropdown-menu):not(.form-floating),.input-group.has-validation>.dropdown-toggle:nth-last-child(n+4),.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-control,.input-group.has-validation>.form-floating:nth-last-child(n+3)>.form-select{border-top-right-radius:0;border-bottom-right-radius:0}.input-group>:not(:first-child):not(.dropdown-menu):not(.form-floating):not(.valid-tooltip):not(.valid-feedback):not(.invalid-tooltip):not(.invalid-feedback),.input-group>.form-floating:not(:first-child)>.form-control,.input-group>.form-floating:not(:first-child)>.form-select{margin-left:-1px;border-top-left-radius:0;border-bottom-left-radius:0}.valid-feedback{display:none;width:100%;margin-top:.25rem;font-size:0.875em;color:#18bc9c}.valid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:0.8203125rem;color:#000;background-color:rgba(24,188,156,.9);border-radius:.375rem}.was-validated :valid~.valid-feedback,.was-validated :valid~.valid-tooltip,.is-valid~.valid-feedback,.is-valid~.valid-tooltip{display:block}.was-validated .form-control:valid,.form-control.is-valid{border-color:#18bc9c;padding-right:calc(1.5em + 0.75rem);background-image:url(" + D + ');background-repeat:no-repeat;background-position:right calc(0.375em + 0.1875rem) center;background-size:calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)}.was-validated .form-control:valid:focus,.form-control.is-valid:focus{border-color:#18bc9c;box-shadow:0 0 0 .25rem rgba(24,188,156,.25)}.was-validated textarea.form-control:valid,textarea.form-control.is-valid{padding-right:calc(1.5em + 0.75rem);background-position:top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem)}.was-validated .form-select:valid,.form-select.is-valid{border-color:#18bc9c}.was-validated .form-select:valid:not([multiple]):not([size]),.was-validated .form-select:valid:not([multiple])[size="1"],.form-select.is-valid:not([multiple]):not([size]),.form-select.is-valid:not([multiple])[size="1"]{padding-right:4.125rem;background-image:url(' + I + "),url(" + D + ");background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)}.was-validated .form-select:valid:focus,.form-select.is-valid:focus{border-color:#18bc9c;box-shadow:0 0 0 .25rem rgba(24,188,156,.25)}.was-validated .form-control-color:valid,.form-control-color.is-valid{width:calc(3rem + calc(1.5em + 0.75rem))}.was-validated .form-check-input:valid,.form-check-input.is-valid{border-color:#18bc9c}.was-validated .form-check-input:valid:checked,.form-check-input.is-valid:checked{background-color:#18bc9c}.was-validated .form-check-input:valid:focus,.form-check-input.is-valid:focus{box-shadow:0 0 0 .25rem rgba(24,188,156,.25)}.was-validated .form-check-input:valid~.form-check-label,.form-check-input.is-valid~.form-check-label{color:#18bc9c}.form-check-inline .form-check-input~.valid-feedback{margin-left:.5em}.was-validated .input-group .form-control:valid,.input-group .form-control.is-valid,.was-validated .input-group .form-select:valid,.input-group .form-select.is-valid{z-index:1}.was-validated .input-group .form-control:valid:focus,.input-group .form-control.is-valid:focus,.was-validated .input-group .form-select:valid:focus,.input-group .form-select.is-valid:focus{z-index:3}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:0.875em;color:#e74c3c}.invalid-tooltip{position:absolute;top:100%;z-index:5;display:none;max-width:100%;padding:.25rem .5rem;margin-top:.1rem;font-size:0.8203125rem;color:#000;background-color:rgba(231,76,60,.9);border-radius:.375rem}.was-validated :invalid~.invalid-feedback,.was-validated :invalid~.invalid-tooltip,.is-invalid~.invalid-feedback,.is-invalid~.invalid-tooltip{display:block}.was-validated .form-control:invalid,.form-control.is-invalid{border-color:#e74c3c;padding-right:calc(1.5em + 0.75rem);background-image:url(" + R + ');background-repeat:no-repeat;background-position:right calc(0.375em + 0.1875rem) center;background-size:calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)}.was-validated .form-control:invalid:focus,.form-control.is-invalid:focus{border-color:#e74c3c;box-shadow:0 0 0 .25rem rgba(231,76,60,.25)}.was-validated textarea.form-control:invalid,textarea.form-control.is-invalid{padding-right:calc(1.5em + 0.75rem);background-position:top calc(0.375em + 0.1875rem) right calc(0.375em + 0.1875rem)}.was-validated .form-select:invalid,.form-select.is-invalid{border-color:#e74c3c}.was-validated .form-select:invalid:not([multiple]):not([size]),.was-validated .form-select:invalid:not([multiple])[size="1"],.form-select.is-invalid:not([multiple]):not([size]),.form-select.is-invalid:not([multiple])[size="1"]{padding-right:4.125rem;background-image:url(' + I + "),url(" + R + ');background-position:right .75rem center,center right 2.25rem;background-size:16px 12px,calc(0.75em + 0.375rem) calc(0.75em + 0.375rem)}.was-validated .form-select:invalid:focus,.form-select.is-invalid:focus{border-color:#e74c3c;box-shadow:0 0 0 .25rem rgba(231,76,60,.25)}.was-validated .form-control-color:invalid,.form-control-color.is-invalid{width:calc(3rem + calc(1.5em + 0.75rem))}.was-validated .form-check-input:invalid,.form-check-input.is-invalid{border-color:#e74c3c}.was-validated .form-check-input:invalid:checked,.form-check-input.is-invalid:checked{background-color:#e74c3c}.was-validated .form-check-input:invalid:focus,.form-check-input.is-invalid:focus{box-shadow:0 0 0 .25rem rgba(231,76,60,.25)}.was-validated .form-check-input:invalid~.form-check-label,.form-check-input.is-invalid~.form-check-label{color:#e74c3c}.form-check-inline .form-check-input~.invalid-feedback{margin-left:.5em}.was-validated .input-group .form-control:invalid,.input-group .form-control.is-invalid,.was-validated .input-group .form-select:invalid,.input-group .form-select.is-invalid{z-index:2}.was-validated .input-group .form-control:invalid:focus,.input-group .form-control.is-invalid:focus,.was-validated .input-group .form-select:invalid:focus,.input-group .form-select.is-invalid:focus{z-index:3}.btn{--bs-btn-padding-x: 0.75rem;--bs-btn-padding-y: 0.375rem;--bs-btn-font-family: ;--bs-btn-font-size:0.9375rem;--bs-btn-font-weight: 400;--bs-btn-line-height: 1.5;--bs-btn-color: #212529;--bs-btn-bg: transparent;--bs-btn-border-width: 1px;--bs-btn-border-color: transparent;--bs-btn-border-radius: 0.375rem;--bs-btn-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.15), 0 1px 1px rgba(0, 0, 0, 0.075);--bs-btn-disabled-opacity: 0.65;--bs-btn-focus-box-shadow: 0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), .5);display:inline-block;padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);color:var(--bs-btn-color);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);background-color:var(--bs-btn-bg);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){.btn{transition:none}}.btn:hover{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}.btn-check:focus+.btn,.btn:focus{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked+.btn,.btn-check:active+.btn,.btn:active,.btn.active,.btn.show{color:var(--bs-btn-active-color);background-color:var(--bs-btn-active-bg);border-color:var(--bs-btn-active-border-color)}.btn-check:checked+.btn:focus,.btn-check:active+.btn:focus,.btn:active:focus,.btn.active:focus,.btn.show:focus{box-shadow:var(--bs-btn-focus-box-shadow)}.btn:disabled,.btn.disabled,fieldset:disabled .btn{color:var(--bs-btn-disabled-color);pointer-events:none;background-color:var(--bs-btn-disabled-bg);border-color:var(--bs-btn-disabled-border-color);opacity:var(--bs-btn-disabled-opacity)}.btn-primary{--bs-btn-color: #fff;--bs-btn-bg: #2c3e50;--bs-btn-border-color: #2c3e50;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #253544;--bs-btn-hover-border-color: #233240;--bs-btn-focus-shadow-rgb: 76, 91, 106;--bs-btn-active-color: #fff;--bs-btn-active-bg: #233240;--bs-btn-active-border-color: #212f3c;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #fff;--bs-btn-disabled-bg: #2c3e50;--bs-btn-disabled-border-color: #2c3e50}.btn-secondary{--bs-btn-color: #000;--bs-btn-bg: #95a5a6;--bs-btn-border-color: #95a5a6;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #a5b3b3;--bs-btn-hover-border-color: #a0aeaf;--bs-btn-focus-shadow-rgb: 127, 140, 141;--bs-btn-active-color: #000;--bs-btn-active-bg: #aab7b8;--bs-btn-active-border-color: #a0aeaf;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #95a5a6;--bs-btn-disabled-border-color: #95a5a6}.btn-success{--bs-btn-color: #000;--bs-btn-bg: #18bc9c;--bs-btn-border-color: #18bc9c;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #3bc6ab;--bs-btn-hover-border-color: #2fc3a6;--bs-btn-focus-shadow-rgb: 20, 160, 133;--bs-btn-active-color: #000;--bs-btn-active-bg: #46c9b0;--bs-btn-active-border-color: #2fc3a6;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #18bc9c;--bs-btn-disabled-border-color: #18bc9c}.btn-info{--bs-btn-color: #000;--bs-btn-bg: #3498db;--bs-btn-border-color: #3498db;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #52a7e0;--bs-btn-hover-border-color: #48a2df;--bs-btn-focus-shadow-rgb: 44, 129, 186;--bs-btn-active-color: #000;--bs-btn-active-bg: #5dade2;--bs-btn-active-border-color: #48a2df;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #3498db;--bs-btn-disabled-border-color: #3498db}.btn-warning{--bs-btn-color: #000;--bs-btn-bg: #f39c12;--bs-btn-border-color: #f39c12;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #f5ab36;--bs-btn-hover-border-color: #f4a62a;--bs-btn-focus-shadow-rgb: 207, 133, 15;--bs-btn-active-color: #000;--bs-btn-active-bg: #f5b041;--bs-btn-active-border-color: #f4a62a;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #f39c12;--bs-btn-disabled-border-color: #f39c12}.btn-danger{--bs-btn-color: #000;--bs-btn-bg: #e74c3c;--bs-btn-border-color: #e74c3c;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #eb6759;--bs-btn-hover-border-color: #e95e50;--bs-btn-focus-shadow-rgb: 196, 65, 51;--bs-btn-active-color: #000;--bs-btn-active-bg: #ec7063;--bs-btn-active-border-color: #e95e50;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #e74c3c;--bs-btn-disabled-border-color: #e74c3c}.btn-light{--bs-btn-color: #000;--bs-btn-bg: #ecf0f1;--bs-btn-border-color: #ecf0f1;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #c9cccd;--bs-btn-hover-border-color: #bdc0c1;--bs-btn-focus-shadow-rgb: 201, 204, 205;--bs-btn-active-color: #000;--bs-btn-active-bg: #bdc0c1;--bs-btn-active-border-color: #b1b4b5;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #ecf0f1;--bs-btn-disabled-border-color: #ecf0f1}.btn-dark{--bs-btn-color: #000;--bs-btn-bg: #7b8a8b;--bs-btn-border-color: #7b8a8b;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #8f9c9c;--bs-btn-hover-border-color: #889697;--bs-btn-focus-shadow-rgb: 105, 117, 118;--bs-btn-active-color: #000;--bs-btn-active-bg: #95a1a2;--bs-btn-active-border-color: #889697;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #7b8a8b;--bs-btn-disabled-border-color: #7b8a8b}.btn-outline-primary{--bs-btn-color: #2c3e50;--bs-btn-border-color: #2c3e50;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #2c3e50;--bs-btn-hover-border-color: #2c3e50;--bs-btn-focus-shadow-rgb: 44, 62, 80;--bs-btn-active-color: #fff;--bs-btn-active-bg: #2c3e50;--bs-btn-active-border-color: #2c3e50;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #2c3e50;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #2c3e50;--bs-gradient: none}.btn-outline-secondary{--bs-btn-color: #95a5a6;--bs-btn-border-color: #95a5a6;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #95a5a6;--bs-btn-hover-border-color: #95a5a6;--bs-btn-focus-shadow-rgb: 149, 165, 166;--bs-btn-active-color: #000;--bs-btn-active-bg: #95a5a6;--bs-btn-active-border-color: #95a5a6;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #95a5a6;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #95a5a6;--bs-gradient: none}.btn-outline-success{--bs-btn-color: #18bc9c;--bs-btn-border-color: #18bc9c;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #18bc9c;--bs-btn-hover-border-color: #18bc9c;--bs-btn-focus-shadow-rgb: 24, 188, 156;--bs-btn-active-color: #000;--bs-btn-active-bg: #18bc9c;--bs-btn-active-border-color: #18bc9c;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #18bc9c;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #18bc9c;--bs-gradient: none}.btn-outline-info{--bs-btn-color: #3498db;--bs-btn-border-color: #3498db;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #3498db;--bs-btn-hover-border-color: #3498db;--bs-btn-focus-shadow-rgb: 52, 152, 219;--bs-btn-active-color: #000;--bs-btn-active-bg: #3498db;--bs-btn-active-border-color: #3498db;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #3498db;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #3498db;--bs-gradient: none}.btn-outline-warning{--bs-btn-color: #f39c12;--bs-btn-border-color: #f39c12;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #f39c12;--bs-btn-hover-border-color: #f39c12;--bs-btn-focus-shadow-rgb: 243, 156, 18;--bs-btn-active-color: #000;--bs-btn-active-bg: #f39c12;--bs-btn-active-border-color: #f39c12;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #f39c12;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #f39c12;--bs-gradient: none}.btn-outline-danger{--bs-btn-color: #e74c3c;--bs-btn-border-color: #e74c3c;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #e74c3c;--bs-btn-hover-border-color: #e74c3c;--bs-btn-focus-shadow-rgb: 231, 76, 60;--bs-btn-active-color: #000;--bs-btn-active-bg: #e74c3c;--bs-btn-active-border-color: #e74c3c;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #e74c3c;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #e74c3c;--bs-gradient: none}.btn-outline-light{--bs-btn-color: #ecf0f1;--bs-btn-border-color: #ecf0f1;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #ecf0f1;--bs-btn-hover-border-color: #ecf0f1;--bs-btn-focus-shadow-rgb: 236, 240, 241;--bs-btn-active-color: #000;--bs-btn-active-bg: #ecf0f1;--bs-btn-active-border-color: #ecf0f1;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #ecf0f1;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #ecf0f1;--bs-gradient: none}.btn-outline-dark{--bs-btn-color: #7b8a8b;--bs-btn-border-color: #7b8a8b;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #7b8a8b;--bs-btn-hover-border-color: #7b8a8b;--bs-btn-focus-shadow-rgb: 123, 138, 139;--bs-btn-active-color: #000;--bs-btn-active-bg: #7b8a8b;--bs-btn-active-border-color: #7b8a8b;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #7b8a8b;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #7b8a8b;--bs-gradient: none}.btn-link{--bs-btn-font-weight: 400;--bs-btn-color: var(--bs-link-color);--bs-btn-bg: transparent;--bs-btn-border-color: transparent;--bs-btn-hover-color: var(--bs-link-hover-color);--bs-btn-hover-border-color: transparent;--bs-btn-active-color: var(--bs-link-hover-color);--bs-btn-active-border-color: transparent;--bs-btn-disabled-color: #95a5a6;--bs-btn-disabled-border-color: transparent;--bs-btn-box-shadow: none;--bs-btn-focus-shadow-rgb: 76, 91, 106;text-decoration:underline}.btn-link:focus{color:var(--bs-btn-color)}.btn-link:hover{color:var(--bs-btn-hover-color)}.btn-lg,.btn-group-lg>.btn{--bs-btn-padding-y: 0.5rem;--bs-btn-padding-x: 1rem;--bs-btn-font-size:1.171875rem;--bs-btn-border-radius: 0.5rem}.btn-sm,.btn-group-sm>.btn{--bs-btn-padding-y: 0.25rem;--bs-btn-padding-x: 0.5rem;--bs-btn-font-size:0.8203125rem;--bs-btn-border-radius: 0.25rem}.fade{transition:opacity .15s linear}@media(prefers-reduced-motion: reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{height:0;overflow:hidden;transition:height .35s ease}@media(prefers-reduced-motion: reduce){.collapsing{transition:none}}.collapsing.collapse-horizontal{width:0;height:auto;transition:width .35s ease}@media(prefers-reduced-motion: reduce){.collapsing.collapse-horizontal{transition:none}}.dropup,.dropend,.dropdown,.dropstart,.dropup-center,.dropdown-center{position:relative}.dropdown-toggle{white-space:nowrap}.dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid;border-right:.3em solid rgba(0,0,0,0);border-bottom:0;border-left:.3em solid rgba(0,0,0,0)}.dropdown-toggle:empty::after{margin-left:0}.dropdown-menu{--bs-dropdown-min-width: 10rem;--bs-dropdown-padding-x: 0;--bs-dropdown-padding-y: 0.5rem;--bs-dropdown-spacer: 0.125rem;--bs-dropdown-font-size:0.9375rem;--bs-dropdown-color: #212529;--bs-dropdown-bg: #fff;--bs-dropdown-border-color: var(--bs-border-color-translucent);--bs-dropdown-border-radius: 0.375rem;--bs-dropdown-border-width: 1px;--bs-dropdown-inner-border-radius: calc(0.375rem - 1px);--bs-dropdown-divider-bg: var(--bs-border-color-translucent);--bs-dropdown-divider-margin-y: 0.5rem;--bs-dropdown-box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-dropdown-link-color: #7b8a8b;--bs-dropdown-link-hover-color: #fff;--bs-dropdown-link-hover-bg: #2c3e50;--bs-dropdown-link-active-color: #fff;--bs-dropdown-link-active-bg: #2c3e50;--bs-dropdown-link-disabled-color: #b4bcc2;--bs-dropdown-item-padding-x: 1rem;--bs-dropdown-item-padding-y: 0.25rem;--bs-dropdown-header-color: #95a5a6;--bs-dropdown-header-padding-x: 1rem;--bs-dropdown-header-padding-y: 0.5rem;position:absolute;z-index:1000;display:none;min-width:var(--bs-dropdown-min-width);padding:var(--bs-dropdown-padding-y) var(--bs-dropdown-padding-x);margin:0;font-size:var(--bs-dropdown-font-size);color:var(--bs-dropdown-color);text-align:left;list-style:none;background-color:var(--bs-dropdown-bg);background-clip:padding-box;border:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color);border-radius:var(--bs-dropdown-border-radius)}.dropdown-menu[data-bs-popper]{top:100%;left:0;margin-top:var(--bs-dropdown-spacer)}.dropdown-menu-start{--bs-position: start}.dropdown-menu-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-end{--bs-position: end}.dropdown-menu-end[data-bs-popper]{right:0;left:auto}@media(min-width: 576px){.dropdown-menu-sm-start{--bs-position: start}.dropdown-menu-sm-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-sm-end{--bs-position: end}.dropdown-menu-sm-end[data-bs-popper]{right:0;left:auto}}@media(min-width: 768px){.dropdown-menu-md-start{--bs-position: start}.dropdown-menu-md-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-md-end{--bs-position: end}.dropdown-menu-md-end[data-bs-popper]{right:0;left:auto}}@media(min-width: 992px){.dropdown-menu-lg-start{--bs-position: start}.dropdown-menu-lg-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-lg-end{--bs-position: end}.dropdown-menu-lg-end[data-bs-popper]{right:0;left:auto}}@media(min-width: 1200px){.dropdown-menu-xl-start{--bs-position: start}.dropdown-menu-xl-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-xl-end{--bs-position: end}.dropdown-menu-xl-end[data-bs-popper]{right:0;left:auto}}@media(min-width: 1400px){.dropdown-menu-xxl-start{--bs-position: start}.dropdown-menu-xxl-start[data-bs-popper]{right:auto;left:0}.dropdown-menu-xxl-end{--bs-position: end}.dropdown-menu-xxl-end[data-bs-popper]{right:0;left:auto}}.dropup .dropdown-menu[data-bs-popper]{top:auto;bottom:100%;margin-top:0;margin-bottom:var(--bs-dropdown-spacer)}.dropup .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:0;border-right:.3em solid rgba(0,0,0,0);border-bottom:.3em solid;border-left:.3em solid rgba(0,0,0,0)}.dropup .dropdown-toggle:empty::after{margin-left:0}.dropend .dropdown-menu[data-bs-popper]{top:0;right:auto;left:100%;margin-top:0;margin-left:var(--bs-dropdown-spacer)}.dropend .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:"";border-top:.3em solid rgba(0,0,0,0);border-right:0;border-bottom:.3em solid rgba(0,0,0,0);border-left:.3em solid}.dropend .dropdown-toggle:empty::after{margin-left:0}.dropend .dropdown-toggle::after{vertical-align:0}.dropstart .dropdown-menu[data-bs-popper]{top:0;right:100%;left:auto;margin-top:0;margin-right:var(--bs-dropdown-spacer)}.dropstart .dropdown-toggle::after{display:inline-block;margin-left:.255em;vertical-align:.255em;content:""}.dropstart .dropdown-toggle::after{display:none}.dropstart .dropdown-toggle::before{display:inline-block;margin-right:.255em;vertical-align:.255em;content:"";border-top:.3em solid rgba(0,0,0,0);border-right:.3em solid;border-bottom:.3em solid rgba(0,0,0,0)}.dropstart .dropdown-toggle:empty::after{margin-left:0}.dropstart .dropdown-toggle::before{vertical-align:0}.dropdown-divider{height:0;margin:var(--bs-dropdown-divider-margin-y) 0;overflow:hidden;border-top:1px solid var(--bs-dropdown-divider-bg);opacity:1}.dropdown-item{display:block;width:100%;padding:var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x);clear:both;font-weight:400;color:var(--bs-dropdown-link-color);text-align:inherit;text-decoration:none;white-space:nowrap;background-color:rgba(0,0,0,0);border:0}.dropdown-item:hover,.dropdown-item:focus{color:var(--bs-dropdown-link-hover-color);background-color:var(--bs-dropdown-link-hover-bg)}.dropdown-item.active,.dropdown-item:active{color:var(--bs-dropdown-link-active-color);text-decoration:none;background-color:var(--bs-dropdown-link-active-bg)}.dropdown-item.disabled,.dropdown-item:disabled{color:var(--bs-dropdown-link-disabled-color);pointer-events:none;background-color:rgba(0,0,0,0)}.dropdown-menu.show{display:block}.dropdown-header{display:block;padding:var(--bs-dropdown-header-padding-y) var(--bs-dropdown-header-padding-x);margin-bottom:0;font-size:0.8203125rem;color:var(--bs-dropdown-header-color);white-space:nowrap}.dropdown-item-text{display:block;padding:var(--bs-dropdown-item-padding-y) var(--bs-dropdown-item-padding-x);color:var(--bs-dropdown-link-color)}.dropdown-menu-dark{--bs-dropdown-color: #dee2e6;--bs-dropdown-bg: #343a40;--bs-dropdown-border-color: var(--bs-border-color-translucent);--bs-dropdown-box-shadow: ;--bs-dropdown-link-color: #dee2e6;--bs-dropdown-link-hover-color: #fff;--bs-dropdown-divider-bg: var(--bs-border-color-translucent);--bs-dropdown-link-hover-bg: rgba(255, 255, 255, 0.15);--bs-dropdown-link-active-color: #fff;--bs-dropdown-link-active-bg: #2c3e50;--bs-dropdown-link-disabled-color: #b4bcc2;--bs-dropdown-header-color: #b4bcc2}.btn-group,.btn-group-vertical{position:relative;display:inline-flex;vertical-align:middle}.btn-group>.btn,.btn-group-vertical>.btn{position:relative;flex:1 1 auto}.btn-group>.btn-check:checked+.btn,.btn-group>.btn-check:focus+.btn,.btn-group>.btn:hover,.btn-group>.btn:focus,.btn-group>.btn:active,.btn-group>.btn.active,.btn-group-vertical>.btn-check:checked+.btn,.btn-group-vertical>.btn-check:focus+.btn,.btn-group-vertical>.btn:hover,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn.active{z-index:1}.btn-toolbar{display:flex;flex-wrap:wrap;justify-content:flex-start}.btn-toolbar .input-group{width:auto}.btn-group{border-radius:.375rem}.btn-group>.btn:not(:first-child),.btn-group>.btn-group:not(:first-child){margin-left:-1px}.btn-group>.btn:not(:last-child):not(.dropdown-toggle),.btn-group>.btn.dropdown-toggle-split:first-child,.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn:nth-child(n+3),.btn-group>:not(.btn-check)+.btn,.btn-group>.btn-group:not(:first-child)>.btn{border-top-left-radius:0;border-bottom-left-radius:0}.dropdown-toggle-split{padding-right:.5625rem;padding-left:.5625rem}.dropdown-toggle-split::after,.dropup .dropdown-toggle-split::after,.dropend .dropdown-toggle-split::after{margin-left:0}.dropstart .dropdown-toggle-split::before{margin-right:0}.btn-sm+.dropdown-toggle-split,.btn-group-sm>.btn+.dropdown-toggle-split{padding-right:.375rem;padding-left:.375rem}.btn-lg+.dropdown-toggle-split,.btn-group-lg>.btn+.dropdown-toggle-split{padding-right:.75rem;padding-left:.75rem}.btn-group-vertical{flex-direction:column;align-items:flex-start;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn:not(:first-child),.btn-group-vertical>.btn-group:not(:first-child){margin-top:-1px}.btn-group-vertical>.btn:not(:last-child):not(.dropdown-toggle),.btn-group-vertical>.btn-group:not(:last-child)>.btn{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn~.btn,.btn-group-vertical>.btn-group:not(:first-child)>.btn{border-top-left-radius:0;border-top-right-radius:0}.nav{--bs-nav-link-padding-x: 2rem;--bs-nav-link-padding-y: 0.5rem;--bs-nav-link-font-weight: ;--bs-nav-link-color: var(--bs-link-color);--bs-nav-link-hover-color: var(--bs-link-hover-color);--bs-nav-link-disabled-color: #95a5a6;display:flex;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-link{display:block;padding:var(--bs-nav-link-padding-y) var(--bs-nav-link-padding-x);font-size:var(--bs-nav-link-font-size);font-weight:var(--bs-nav-link-font-weight);color:var(--bs-nav-link-color);text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}@media(prefers-reduced-motion: reduce){.nav-link{transition:none}}.nav-link:hover,.nav-link:focus{color:var(--bs-nav-link-hover-color)}.nav-link.disabled{color:var(--bs-nav-link-disabled-color);pointer-events:none;cursor:default}.nav-tabs{--bs-nav-tabs-border-width: 1px;--bs-nav-tabs-border-color: #ecf0f1;--bs-nav-tabs-border-radius: 0.375rem;--bs-nav-tabs-link-hover-border-color: #ecf0f1 #ecf0f1 #ecf0f1;--bs-nav-tabs-link-active-color: #7b8a8b;--bs-nav-tabs-link-active-bg: #fff;--bs-nav-tabs-link-active-border-color: #dee2e6 #dee2e6 #fff;border-bottom:var(--bs-nav-tabs-border-width) solid var(--bs-nav-tabs-border-color)}.nav-tabs .nav-link{margin-bottom:calc(var(--bs-nav-tabs-border-width)*-1);background:none;border:var(--bs-nav-tabs-border-width) solid rgba(0,0,0,0);border-top-left-radius:var(--bs-nav-tabs-border-radius);border-top-right-radius:var(--bs-nav-tabs-border-radius)}.nav-tabs .nav-link:hover,.nav-tabs .nav-link:focus{isolation:isolate;border-color:var(--bs-nav-tabs-link-hover-border-color)}.nav-tabs .nav-link.disabled,.nav-tabs .nav-link:disabled{color:var(--bs-nav-link-disabled-color);background-color:rgba(0,0,0,0);border-color:rgba(0,0,0,0)}.nav-tabs .nav-link.active,.nav-tabs .nav-item.show .nav-link{color:var(--bs-nav-tabs-link-active-color);background-color:var(--bs-nav-tabs-link-active-bg);border-color:var(--bs-nav-tabs-link-active-border-color)}.nav-tabs .dropdown-menu{margin-top:calc(var(--bs-nav-tabs-border-width)*-1);border-top-left-radius:0;border-top-right-radius:0}.nav-pills{--bs-nav-pills-border-radius: 0.375rem;--bs-nav-pills-link-active-color: #fff;--bs-nav-pills-link-active-bg: #2c3e50}.nav-pills .nav-link{background:none;border:0;border-radius:var(--bs-nav-pills-border-radius)}.nav-pills .nav-link:disabled{color:var(--bs-nav-link-disabled-color);background-color:rgba(0,0,0,0);border-color:rgba(0,0,0,0)}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{color:var(--bs-nav-pills-link-active-color);background-color:var(--bs-nav-pills-link-active-bg)}.nav-fill>.nav-link,.nav-fill .nav-item{flex:1 1 auto;text-align:center}.nav-justified>.nav-link,.nav-justified .nav-item{flex-basis:0;flex-grow:1;text-align:center}.nav-fill .nav-item .nav-link,.nav-justified .nav-item .nav-link{width:100%}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.navbar{--bs-navbar-padding-x: 0;--bs-navbar-padding-y: 1rem;--bs-navbar-color: rgba(0, 0, 0, 0.55);--bs-navbar-hover-color: rgba(0, 0, 0, 0.7);--bs-navbar-disabled-color: rgba(0, 0, 0, 0.3);--bs-navbar-active-color: rgba(0, 0, 0, 0.9);--bs-navbar-brand-padding-y: 0.32421875rem;--bs-navbar-brand-margin-end: 1rem;--bs-navbar-brand-font-size: 1.171875rem;--bs-navbar-brand-color: rgba(0, 0, 0, 0.9);--bs-navbar-brand-hover-color: rgba(0, 0, 0, 0.9);--bs-navbar-nav-link-padding-x: 0.5rem;--bs-navbar-toggler-padding-y: 0.25rem;--bs-navbar-toggler-padding-x: 0.75rem;--bs-navbar-toggler-font-size: 1.171875rem;--bs-navbar-toggler-icon-bg: url(' + L + ");--bs-navbar-toggler-border-color: rgba(0, 0, 0, 0.1);--bs-navbar-toggler-border-radius: 0.375rem;--bs-navbar-toggler-focus-width: 0.25rem;--bs-navbar-toggler-transition: box-shadow 0.15s ease-in-out;position:relative;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:var(--bs-navbar-padding-y) var(--bs-navbar-padding-x)}.navbar>.container,.navbar>.container-fluid,.navbar>.container-sm,.navbar>.container-md,.navbar>.container-lg,.navbar>.container-xl,.navbar>.container-xxl{display:flex;flex-wrap:inherit;align-items:center;justify-content:space-between}.navbar-brand{padding-top:var(--bs-navbar-brand-padding-y);padding-bottom:var(--bs-navbar-brand-padding-y);margin-right:var(--bs-navbar-brand-margin-end);font-size:var(--bs-navbar-brand-font-size);color:var(--bs-navbar-brand-color);text-decoration:none;white-space:nowrap}.navbar-brand:hover,.navbar-brand:focus{color:var(--bs-navbar-brand-hover-color)}.navbar-nav{--bs-nav-link-padding-x: 0;--bs-nav-link-padding-y: 0.5rem;--bs-nav-link-font-weight: ;--bs-nav-link-color: var(--bs-navbar-color);--bs-nav-link-hover-color: var(--bs-navbar-hover-color);--bs-nav-link-disabled-color: var(--bs-navbar-disabled-color);display:flex;flex-direction:column;padding-left:0;margin-bottom:0;list-style:none}.navbar-nav .show>.nav-link,.navbar-nav .nav-link.active{color:var(--bs-navbar-active-color)}.navbar-nav .dropdown-menu{position:static}.navbar-text{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-navbar-color)}.navbar-text a,.navbar-text a:hover,.navbar-text a:focus{color:var(--bs-navbar-active-color)}.navbar-collapse{flex-basis:100%;flex-grow:1;align-items:center}.navbar-toggler{padding:var(--bs-navbar-toggler-padding-y) var(--bs-navbar-toggler-padding-x);font-size:var(--bs-navbar-toggler-font-size);line-height:1;color:var(--bs-navbar-color);background-color:rgba(0,0,0,0);border:var(--bs-border-width) solid var(--bs-navbar-toggler-border-color);border-radius:var(--bs-navbar-toggler-border-radius);transition:var(--bs-navbar-toggler-transition)}@media(prefers-reduced-motion: reduce){.navbar-toggler{transition:none}}.navbar-toggler:hover{text-decoration:none}.navbar-toggler:focus{text-decoration:none;outline:0;box-shadow:0 0 0 var(--bs-navbar-toggler-focus-width)}.navbar-toggler-icon{display:inline-block;width:1.5em;height:1.5em;vertical-align:middle;background-image:var(--bs-navbar-toggler-icon-bg);background-repeat:no-repeat;background-position:center;background-size:100%}.navbar-nav-scroll{max-height:var(--bs-scroll-height, 75vh);overflow-y:auto}@media(min-width: 576px){.navbar-expand-sm{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-sm .navbar-nav{flex-direction:row}.navbar-expand-sm .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-sm .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-sm .navbar-nav-scroll{overflow:visible}.navbar-expand-sm .navbar-collapse{display:flex !important;flex-basis:auto}.navbar-expand-sm .navbar-toggler{display:none}.navbar-expand-sm .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto !important;height:auto !important;visibility:visible !important;background-color:rgba(0,0,0,0) !important;border:0 !important;transform:none !important;transition:none}.navbar-expand-sm .offcanvas .offcanvas-header{display:none}.navbar-expand-sm .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media(min-width: 768px){.navbar-expand-md{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-md .navbar-nav{flex-direction:row}.navbar-expand-md .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-md .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-md .navbar-nav-scroll{overflow:visible}.navbar-expand-md .navbar-collapse{display:flex !important;flex-basis:auto}.navbar-expand-md .navbar-toggler{display:none}.navbar-expand-md .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto !important;height:auto !important;visibility:visible !important;background-color:rgba(0,0,0,0) !important;border:0 !important;transform:none !important;transition:none}.navbar-expand-md .offcanvas .offcanvas-header{display:none}.navbar-expand-md .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media(min-width: 992px){.navbar-expand-lg{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-lg .navbar-nav{flex-direction:row}.navbar-expand-lg .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-lg .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-lg .navbar-nav-scroll{overflow:visible}.navbar-expand-lg .navbar-collapse{display:flex !important;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}.navbar-expand-lg .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto !important;height:auto !important;visibility:visible !important;background-color:rgba(0,0,0,0) !important;border:0 !important;transform:none !important;transition:none}.navbar-expand-lg .offcanvas .offcanvas-header{display:none}.navbar-expand-lg .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media(min-width: 1200px){.navbar-expand-xl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xl .navbar-nav{flex-direction:row}.navbar-expand-xl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xl .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-xl .navbar-nav-scroll{overflow:visible}.navbar-expand-xl .navbar-collapse{display:flex !important;flex-basis:auto}.navbar-expand-xl .navbar-toggler{display:none}.navbar-expand-xl .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto !important;height:auto !important;visibility:visible !important;background-color:rgba(0,0,0,0) !important;border:0 !important;transform:none !important;transition:none}.navbar-expand-xl .offcanvas .offcanvas-header{display:none}.navbar-expand-xl .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}@media(min-width: 1400px){.navbar-expand-xxl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xxl .navbar-nav{flex-direction:row}.navbar-expand-xxl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xxl .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand-xxl .navbar-nav-scroll{overflow:visible}.navbar-expand-xxl .navbar-collapse{display:flex !important;flex-basis:auto}.navbar-expand-xxl .navbar-toggler{display:none}.navbar-expand-xxl .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto !important;height:auto !important;visibility:visible !important;background-color:rgba(0,0,0,0) !important;border:0 !important;transform:none !important;transition:none}.navbar-expand-xxl .offcanvas .offcanvas-header{display:none}.navbar-expand-xxl .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}}.navbar-expand{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand .navbar-nav{flex-direction:row}.navbar-expand .navbar-nav .dropdown-menu{position:absolute}.navbar-expand .navbar-nav .nav-link{padding-right:var(--bs-navbar-nav-link-padding-x);padding-left:var(--bs-navbar-nav-link-padding-x)}.navbar-expand .navbar-nav-scroll{overflow:visible}.navbar-expand .navbar-collapse{display:flex !important;flex-basis:auto}.navbar-expand .navbar-toggler{display:none}.navbar-expand .offcanvas{position:static;z-index:auto;flex-grow:1;width:auto !important;height:auto !important;visibility:visible !important;background-color:rgba(0,0,0,0) !important;border:0 !important;transform:none !important;transition:none}.navbar-expand .offcanvas .offcanvas-header{display:none}.navbar-expand .offcanvas .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible}.navbar-dark{--bs-navbar-color: #fff;--bs-navbar-hover-color: #18bc9c;--bs-navbar-disabled-color: rgba(255, 255, 255, 0.25);--bs-navbar-active-color: #fff;--bs-navbar-brand-color: #fff;--bs-navbar-brand-hover-color: #fff;--bs-navbar-toggler-border-color: rgba(255, 255, 255, 0.1);--bs-navbar-toggler-icon-bg: url(" + B + ")}.card{--bs-card-spacer-y: 1rem;--bs-card-spacer-x: 1rem;--bs-card-title-spacer-y: 0.5rem;--bs-card-border-width: 1px;--bs-card-border-color: var(--bs-border-color-translucent);--bs-card-border-radius: 0.375rem;--bs-card-box-shadow: ;--bs-card-inner-border-radius: calc(0.375rem - 1px);--bs-card-cap-padding-y: 0.5rem;--bs-card-cap-padding-x: 1rem;--bs-card-cap-bg: rgba(0, 0, 0, 0.03);--bs-card-cap-color: ;--bs-card-height: ;--bs-card-color: ;--bs-card-bg: #fff;--bs-card-img-overlay-padding: 1rem;--bs-card-group-margin: 0.75rem;position:relative;display:flex;flex-direction:column;min-width:0;height:var(--bs-card-height);word-wrap:break-word;background-color:var(--bs-card-bg);background-clip:border-box;border:var(--bs-card-border-width) solid var(--bs-card-border-color);border-radius:var(--bs-card-border-radius)}.card>hr{margin-right:0;margin-left:0}.card>.list-group{border-top:inherit;border-bottom:inherit}.card>.list-group:first-child{border-top-width:0;border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card>.list-group:last-child{border-bottom-width:0;border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card>.card-header+.list-group,.card>.list-group+.card-footer{border-top:0}.card-body{flex:1 1 auto;padding:var(--bs-card-spacer-y) var(--bs-card-spacer-x);color:var(--bs-card-color)}.card-title{margin-bottom:var(--bs-card-title-spacer-y)}.card-subtitle{margin-top:calc(-0.5*var(--bs-card-title-spacer-y));margin-bottom:0}.card-text:last-child{margin-bottom:0}.card-link+.card-link{margin-left:var(--bs-card-spacer-x)}.card-header{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);margin-bottom:0;color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-header:first-child{border-radius:var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius) 0 0}.card-footer{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-top:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-footer:last-child{border-radius:0 0 var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius)}.card-header-tabs{margin-right:calc(-0.5*var(--bs-card-cap-padding-x));margin-bottom:calc(-1*var(--bs-card-cap-padding-y));margin-left:calc(-0.5*var(--bs-card-cap-padding-x));border-bottom:0}.card-header-tabs .nav-link.active{background-color:var(--bs-card-bg);border-bottom-color:var(--bs-card-bg)}.card-header-pills{margin-right:calc(-0.5*var(--bs-card-cap-padding-x));margin-left:calc(-0.5*var(--bs-card-cap-padding-x))}.card-img-overlay{position:absolute;top:0;right:0;bottom:0;left:0;padding:var(--bs-card-img-overlay-padding);border-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-top,.card-img-bottom{width:100%}.card-img,.card-img-top{border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-bottom{border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card-group>.card{margin-bottom:var(--bs-card-group-margin)}@media(min-width: 576px){.card-group{display:flex;flex-flow:row wrap}.card-group>.card{flex:1 0 0%;margin-bottom:0}.card-group>.card+.card{margin-left:0;border-left:0}.card-group>.card:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.card-group>.card:not(:last-child) .card-img-top,.card-group>.card:not(:last-child) .card-header{border-top-right-radius:0}.card-group>.card:not(:last-child) .card-img-bottom,.card-group>.card:not(:last-child) .card-footer{border-bottom-right-radius:0}.card-group>.card:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.card-group>.card:not(:first-child) .card-img-top,.card-group>.card:not(:first-child) .card-header{border-top-left-radius:0}.card-group>.card:not(:first-child) .card-img-bottom,.card-group>.card:not(:first-child) .card-footer{border-bottom-left-radius:0}}.accordion{--bs-accordion-color: #000;--bs-accordion-bg: #fff;--bs-accordion-transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, border-radius 0.15s ease;--bs-accordion-border-color: var(--bs-border-color);--bs-accordion-border-width: 1px;--bs-accordion-border-radius: 0.375rem;--bs-accordion-inner-border-radius: calc(0.375rem - 1px);--bs-accordion-btn-padding-x: 1.25rem;--bs-accordion-btn-padding-y: 1rem;--bs-accordion-btn-color: var(--bs-body-color);--bs-accordion-btn-bg: var(--bs-accordion-bg);--bs-accordion-btn-icon: url(" + V + ");--bs-accordion-btn-icon-width: 1.25rem;--bs-accordion-btn-icon-transform: rotate(-180deg);--bs-accordion-btn-icon-transition: transform 0.2s ease-in-out;--bs-accordion-btn-active-icon: url(" + F + ');--bs-accordion-btn-focus-border-color: #969fa8;--bs-accordion-btn-focus-box-shadow: 0 0 0 0.25rem rgba(44, 62, 80, 0.25);--bs-accordion-body-padding-x: 1.25rem;--bs-accordion-body-padding-y: 1rem;--bs-accordion-active-color: #283848;--bs-accordion-active-bg: #eaecee}.accordion-button{position:relative;display:flex;align-items:center;width:100%;padding:var(--bs-accordion-btn-padding-y) var(--bs-accordion-btn-padding-x);font-size:0.9375rem;color:var(--bs-accordion-btn-color);text-align:left;background-color:var(--bs-accordion-btn-bg);border:0;border-radius:0;overflow-anchor:none;transition:var(--bs-accordion-transition)}@media(prefers-reduced-motion: reduce){.accordion-button{transition:none}}.accordion-button:not(.collapsed){color:var(--bs-accordion-active-color);background-color:var(--bs-accordion-active-bg);box-shadow:inset 0 calc(var(--bs-accordion-border-width)*-1) 0 var(--bs-accordion-border-color)}.accordion-button:not(.collapsed)::after{background-image:var(--bs-accordion-btn-active-icon);transform:var(--bs-accordion-btn-icon-transform)}.accordion-button::after{flex-shrink:0;width:var(--bs-accordion-btn-icon-width);height:var(--bs-accordion-btn-icon-width);margin-left:auto;content:"";background-image:var(--bs-accordion-btn-icon);background-repeat:no-repeat;background-size:var(--bs-accordion-btn-icon-width);transition:var(--bs-accordion-btn-icon-transition)}@media(prefers-reduced-motion: reduce){.accordion-button::after{transition:none}}.accordion-button:hover{z-index:2}.accordion-button:focus{z-index:3;border-color:var(--bs-accordion-btn-focus-border-color);outline:0;box-shadow:var(--bs-accordion-btn-focus-box-shadow)}.accordion-header{margin-bottom:0}.accordion-item{color:var(--bs-accordion-color);background-color:var(--bs-accordion-bg);border:var(--bs-accordion-border-width) solid var(--bs-accordion-border-color)}.accordion-item:first-of-type{border-top-left-radius:var(--bs-accordion-border-radius);border-top-right-radius:var(--bs-accordion-border-radius)}.accordion-item:first-of-type .accordion-button{border-top-left-radius:var(--bs-accordion-inner-border-radius);border-top-right-radius:var(--bs-accordion-inner-border-radius)}.accordion-item:not(:first-of-type){border-top:0}.accordion-item:last-of-type{border-bottom-right-radius:var(--bs-accordion-border-radius);border-bottom-left-radius:var(--bs-accordion-border-radius)}.accordion-item:last-of-type .accordion-button.collapsed{border-bottom-right-radius:var(--bs-accordion-inner-border-radius);border-bottom-left-radius:var(--bs-accordion-inner-border-radius)}.accordion-item:last-of-type .accordion-collapse{border-bottom-right-radius:var(--bs-accordion-border-radius);border-bottom-left-radius:var(--bs-accordion-border-radius)}.accordion-body{padding:var(--bs-accordion-body-padding-y) var(--bs-accordion-body-padding-x)}.accordion-flush .accordion-collapse{border-width:0}.accordion-flush .accordion-item{border-right:0;border-left:0;border-radius:0}.accordion-flush .accordion-item:first-child{border-top:0}.accordion-flush .accordion-item:last-child{border-bottom:0}.accordion-flush .accordion-item .accordion-button{border-radius:0}.breadcrumb{--bs-breadcrumb-padding-x: 0;--bs-breadcrumb-padding-y: 0;--bs-breadcrumb-margin-bottom: 1rem;--bs-breadcrumb-bg: ;--bs-breadcrumb-border-radius: ;--bs-breadcrumb-divider-color: #95a5a6;--bs-breadcrumb-item-padding-x: 0.5rem;--bs-breadcrumb-item-active-color: #95a5a6;display:flex;flex-wrap:wrap;padding:var(--bs-breadcrumb-padding-y) var(--bs-breadcrumb-padding-x);margin-bottom:var(--bs-breadcrumb-margin-bottom);font-size:var(--bs-breadcrumb-font-size);list-style:none;background-color:var(--bs-breadcrumb-bg);border-radius:var(--bs-breadcrumb-border-radius)}.breadcrumb-item+.breadcrumb-item{padding-left:var(--bs-breadcrumb-item-padding-x)}.breadcrumb-item+.breadcrumb-item::before{float:left;padding-right:var(--bs-breadcrumb-item-padding-x);color:var(--bs-breadcrumb-divider-color);content:var(--bs-breadcrumb-divider, "/") /* rtl: var(--bs-breadcrumb-divider, "/") */}.breadcrumb-item.active{color:var(--bs-breadcrumb-item-active-color)}.pagination{--bs-pagination-padding-x: 0.75rem;--bs-pagination-padding-y: 0.375rem;--bs-pagination-font-size:0.9375rem;--bs-pagination-color: #fff;--bs-pagination-bg: #18bc9c;--bs-pagination-border-width: 0;--bs-pagination-border-color: transparent;--bs-pagination-border-radius: 0.375rem;--bs-pagination-hover-color: #fff;--bs-pagination-hover-bg: #0f7864;--bs-pagination-hover-border-color: transparent;--bs-pagination-focus-color: var(--bs-link-hover-color);--bs-pagination-focus-bg: #ecf0f1;--bs-pagination-focus-box-shadow: 0 0 0 0.25rem rgba(44, 62, 80, 0.25);--bs-pagination-active-color: #fff;--bs-pagination-active-bg: #0f7864;--bs-pagination-active-border-color: transparent;--bs-pagination-disabled-color: #ecf0f1;--bs-pagination-disabled-bg: #3be6c4;--bs-pagination-disabled-border-color: transparent;display:flex;padding-left:0;list-style:none}.page-link{position:relative;display:block;padding:var(--bs-pagination-padding-y) var(--bs-pagination-padding-x);font-size:var(--bs-pagination-font-size);color:var(--bs-pagination-color);text-decoration:none;background-color:var(--bs-pagination-bg);border:var(--bs-pagination-border-width) solid var(--bs-pagination-border-color);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){.page-link{transition:none}}.page-link:hover{z-index:2;color:var(--bs-pagination-hover-color);background-color:var(--bs-pagination-hover-bg);border-color:var(--bs-pagination-hover-border-color)}.page-link:focus{z-index:3;color:var(--bs-pagination-focus-color);background-color:var(--bs-pagination-focus-bg);outline:0;box-shadow:var(--bs-pagination-focus-box-shadow)}.page-link.active,.active>.page-link{z-index:3;color:var(--bs-pagination-active-color);background-color:var(--bs-pagination-active-bg);border-color:var(--bs-pagination-active-border-color)}.page-link.disabled,.disabled>.page-link{color:var(--bs-pagination-disabled-color);pointer-events:none;background-color:var(--bs-pagination-disabled-bg);border-color:var(--bs-pagination-disabled-border-color)}.page-item:not(:first-child) .page-link{margin-left:0}.page-item:first-child .page-link{border-top-left-radius:var(--bs-pagination-border-radius);border-bottom-left-radius:var(--bs-pagination-border-radius)}.page-item:last-child .page-link{border-top-right-radius:var(--bs-pagination-border-radius);border-bottom-right-radius:var(--bs-pagination-border-radius)}.pagination-lg{--bs-pagination-padding-x: 1.5rem;--bs-pagination-padding-y: 0.75rem;--bs-pagination-font-size:1.171875rem;--bs-pagination-border-radius: 0.5rem}.pagination-sm{--bs-pagination-padding-x: 0.5rem;--bs-pagination-padding-y: 0.25rem;--bs-pagination-font-size:0.8203125rem;--bs-pagination-border-radius: 0.25rem}.badge{--bs-badge-padding-x: 0.65em;--bs-badge-padding-y: 0.35em;--bs-badge-font-size:0.75em;--bs-badge-font-weight: 700;--bs-badge-color: #fff;--bs-badge-border-radius: 0.375rem;display:inline-block;padding:var(--bs-badge-padding-y) var(--bs-badge-padding-x);font-size:var(--bs-badge-font-size);font-weight:var(--bs-badge-font-weight);line-height:1;color:var(--bs-badge-color);text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:var(--bs-badge-border-radius)}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.alert{--bs-alert-bg: transparent;--bs-alert-padding-x: 1rem;--bs-alert-padding-y: 1rem;--bs-alert-margin-bottom: 1rem;--bs-alert-color: inherit;--bs-alert-border-color: transparent;--bs-alert-border: 1px solid var(--bs-alert-border-color);--bs-alert-border-radius: 0.375rem;position:relative;padding:var(--bs-alert-padding-y) var(--bs-alert-padding-x);margin-bottom:var(--bs-alert-margin-bottom);color:var(--bs-alert-color);background-color:var(--bs-alert-bg);border:var(--bs-alert-border);border-radius:var(--bs-alert-border-radius)}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-dismissible{padding-right:3rem}.alert-dismissible .btn-close{position:absolute;top:0;right:0;z-index:2;padding:1.25rem 1rem}.alert-primary{--bs-alert-color: #1a2530;--bs-alert-bg: #d5d8dc;--bs-alert-border-color: #c0c5cb}.alert-primary .alert-link{color:#151e26}.alert-secondary{--bs-alert-color: #596364;--bs-alert-bg: #eaeded;--bs-alert-border-color: #dfe4e4}.alert-secondary .alert-link{color:#474f50}.alert-success{--bs-alert-color: #0e715e;--bs-alert-bg: #d1f2eb;--bs-alert-border-color: #baebe1}.alert-success .alert-link{color:#0b5a4b}.alert-info{--bs-alert-color: #1f5b83;--bs-alert-bg: #d6eaf8;--bs-alert-border-color: #c2e0f4}.alert-info .alert-link{color:#194969}.alert-warning{--bs-alert-color: #925e0b;--bs-alert-bg: #fdebd0;--bs-alert-border-color: #fbe1b8}.alert-warning .alert-link{color:#754b09}.alert-danger{--bs-alert-color: #8b2e24;--bs-alert-bg: #fadbd8;--bs-alert-border-color: #f8c9c5}.alert-danger .alert-link{color:#6f251d}.alert-light{--bs-alert-color: #5e6060;--bs-alert-bg: #fbfcfc;--bs-alert-border-color: #f9fbfb}.alert-light .alert-link{color:#4b4d4d}.alert-dark{--bs-alert-color: #4a5353;--bs-alert-bg: #e5e8e8;--bs-alert-border-color: #d7dcdc}.alert-dark .alert-link{color:#3b4242}@-webkit-keyframes progress-bar-stripes{0%{background-position-x:.625rem}}@keyframes progress-bar-stripes{0%{background-position-x:.625rem}}.progress{--bs-progress-height: 0.625rem;--bs-progress-font-size:0.625rem;--bs-progress-bg: #ecf0f1;--bs-progress-border-radius: 0.375rem;--bs-progress-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.075);--bs-progress-bar-color: #fff;--bs-progress-bar-bg: #2c3e50;--bs-progress-bar-transition: width 0.6s ease;display:flex;height:var(--bs-progress-height);overflow:hidden;font-size:var(--bs-progress-font-size);background-color:var(--bs-progress-bg);border-radius:var(--bs-progress-border-radius)}.progress-bar{display:flex;flex-direction:column;justify-content:center;overflow:hidden;color:var(--bs-progress-bar-color);text-align:center;white-space:nowrap;background-color:var(--bs-progress-bar-bg);transition:var(--bs-progress-bar-transition)}@media(prefers-reduced-motion: reduce){.progress-bar{transition:none}}.progress-bar-striped{background-image:linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);background-size:var(--bs-progress-height) var(--bs-progress-height)}.progress-bar-animated{-webkit-animation:1s linear infinite progress-bar-stripes;animation:1s linear infinite progress-bar-stripes}@media(prefers-reduced-motion: reduce){.progress-bar-animated{-webkit-animation:none;animation:none}}.list-group{--bs-list-group-color: #212529;--bs-list-group-bg: #fff;--bs-list-group-border-color: rgba(0, 0, 0, 0.125);--bs-list-group-border-width: 1px;--bs-list-group-border-radius: 0.375rem;--bs-list-group-item-padding-x: 1rem;--bs-list-group-item-padding-y: 0.5rem;--bs-list-group-action-color: #7b8a8b;--bs-list-group-action-hover-color: #7b8a8b;--bs-list-group-action-hover-bg: #ecf0f1;--bs-list-group-action-active-color: #212529;--bs-list-group-action-active-bg: #ecf0f1;--bs-list-group-disabled-color: #95a5a6;--bs-list-group-disabled-bg: #ecf0f1;--bs-list-group-active-color: #fff;--bs-list-group-active-bg: #2c3e50;--bs-list-group-active-border-color: #2c3e50;display:flex;flex-direction:column;padding-left:0;margin-bottom:0;border-radius:var(--bs-list-group-border-radius)}.list-group-numbered{list-style-type:none;counter-reset:section}.list-group-numbered>.list-group-item::before{content:counters(section, ".") ". ";counter-increment:section}.list-group-item-action{width:100%;color:var(--bs-list-group-action-color);text-align:inherit}.list-group-item-action:hover,.list-group-item-action:focus{z-index:1;color:var(--bs-list-group-action-hover-color);text-decoration:none;background-color:var(--bs-list-group-action-hover-bg)}.list-group-item-action:active{color:var(--bs-list-group-action-active-color);background-color:var(--bs-list-group-action-active-bg)}.list-group-item{position:relative;display:block;padding:var(--bs-list-group-item-padding-y) var(--bs-list-group-item-padding-x);color:var(--bs-list-group-color);text-decoration:none;background-color:var(--bs-list-group-bg);border:var(--bs-list-group-border-width) solid var(--bs-list-group-border-color)}.list-group-item:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.list-group-item:last-child{border-bottom-right-radius:inherit;border-bottom-left-radius:inherit}.list-group-item.disabled,.list-group-item:disabled{color:var(--bs-list-group-disabled-color);pointer-events:none;background-color:var(--bs-list-group-disabled-bg)}.list-group-item.active{z-index:2;color:var(--bs-list-group-active-color);background-color:var(--bs-list-group-active-bg);border-color:var(--bs-list-group-active-border-color)}.list-group-item+.list-group-item{border-top-width:0}.list-group-item+.list-group-item.active{margin-top:calc(var(--bs-list-group-border-width)*-1);border-top-width:var(--bs-list-group-border-width)}.list-group-horizontal{flex-direction:row}.list-group-horizontal>.list-group-item:first-child{border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal>.list-group-item:last-child{border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal>.list-group-item.active{margin-top:0}.list-group-horizontal>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal>.list-group-item+.list-group-item.active{margin-left:calc(var(--bs-list-group-border-width)*-1);border-left-width:var(--bs-list-group-border-width)}@media(min-width: 576px){.list-group-horizontal-sm{flex-direction:row}.list-group-horizontal-sm>.list-group-item:first-child{border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-sm>.list-group-item:last-child{border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-sm>.list-group-item.active{margin-top:0}.list-group-horizontal-sm>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-sm>.list-group-item+.list-group-item.active{margin-left:calc(var(--bs-list-group-border-width)*-1);border-left-width:var(--bs-list-group-border-width)}}@media(min-width: 768px){.list-group-horizontal-md{flex-direction:row}.list-group-horizontal-md>.list-group-item:first-child{border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-md>.list-group-item:last-child{border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-md>.list-group-item.active{margin-top:0}.list-group-horizontal-md>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-md>.list-group-item+.list-group-item.active{margin-left:calc(var(--bs-list-group-border-width)*-1);border-left-width:var(--bs-list-group-border-width)}}@media(min-width: 992px){.list-group-horizontal-lg{flex-direction:row}.list-group-horizontal-lg>.list-group-item:first-child{border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-lg>.list-group-item:last-child{border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-lg>.list-group-item.active{margin-top:0}.list-group-horizontal-lg>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-lg>.list-group-item+.list-group-item.active{margin-left:calc(var(--bs-list-group-border-width)*-1);border-left-width:var(--bs-list-group-border-width)}}@media(min-width: 1200px){.list-group-horizontal-xl{flex-direction:row}.list-group-horizontal-xl>.list-group-item:first-child{border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-xl>.list-group-item:last-child{border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-xl>.list-group-item.active{margin-top:0}.list-group-horizontal-xl>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-xl>.list-group-item+.list-group-item.active{margin-left:calc(var(--bs-list-group-border-width)*-1);border-left-width:var(--bs-list-group-border-width)}}@media(min-width: 1400px){.list-group-horizontal-xxl{flex-direction:row}.list-group-horizontal-xxl>.list-group-item:first-child{border-bottom-left-radius:var(--bs-list-group-border-radius);border-top-right-radius:0}.list-group-horizontal-xxl>.list-group-item:last-child{border-top-right-radius:var(--bs-list-group-border-radius);border-bottom-left-radius:0}.list-group-horizontal-xxl>.list-group-item.active{margin-top:0}.list-group-horizontal-xxl>.list-group-item+.list-group-item{border-top-width:var(--bs-list-group-border-width);border-left-width:0}.list-group-horizontal-xxl>.list-group-item+.list-group-item.active{margin-left:calc(var(--bs-list-group-border-width)*-1);border-left-width:var(--bs-list-group-border-width)}}.list-group-flush{border-radius:0}.list-group-flush>.list-group-item{border-width:0 0 var(--bs-list-group-border-width)}.list-group-flush>.list-group-item:last-child{border-bottom-width:0}.list-group-item-primary{color:#1a2530;background-color:#d5d8dc}.list-group-item-primary.list-group-item-action:hover,.list-group-item-primary.list-group-item-action:focus{color:#1a2530;background-color:#c0c2c6}.list-group-item-primary.list-group-item-action.active{color:#fff;background-color:#1a2530;border-color:#1a2530}.list-group-item-secondary{color:#596364;background-color:#eaeded}.list-group-item-secondary.list-group-item-action:hover,.list-group-item-secondary.list-group-item-action:focus{color:#596364;background-color:#d3d5d5}.list-group-item-secondary.list-group-item-action.active{color:#fff;background-color:#596364;border-color:#596364}.list-group-item-success{color:#0e715e;background-color:#d1f2eb}.list-group-item-success.list-group-item-action:hover,.list-group-item-success.list-group-item-action:focus{color:#0e715e;background-color:#bcdad4}.list-group-item-success.list-group-item-action.active{color:#fff;background-color:#0e715e;border-color:#0e715e}.list-group-item-info{color:#1f5b83;background-color:#d6eaf8}.list-group-item-info.list-group-item-action:hover,.list-group-item-info.list-group-item-action:focus{color:#1f5b83;background-color:#c1d3df}.list-group-item-info.list-group-item-action.active{color:#fff;background-color:#1f5b83;border-color:#1f5b83}.list-group-item-warning{color:#925e0b;background-color:#fdebd0}.list-group-item-warning.list-group-item-action:hover,.list-group-item-warning.list-group-item-action:focus{color:#925e0b;background-color:#e4d4bb}.list-group-item-warning.list-group-item-action.active{color:#fff;background-color:#925e0b;border-color:#925e0b}.list-group-item-danger{color:#8b2e24;background-color:#fadbd8}.list-group-item-danger.list-group-item-action:hover,.list-group-item-danger.list-group-item-action:focus{color:#8b2e24;background-color:#e1c5c2}.list-group-item-danger.list-group-item-action.active{color:#fff;background-color:#8b2e24;border-color:#8b2e24}.list-group-item-light{color:#5e6060;background-color:#fbfcfc}.list-group-item-light.list-group-item-action:hover,.list-group-item-light.list-group-item-action:focus{color:#5e6060;background-color:#e2e3e3}.list-group-item-light.list-group-item-action.active{color:#fff;background-color:#5e6060;border-color:#5e6060}.list-group-item-dark{color:#4a5353;background-color:#e5e8e8}.list-group-item-dark.list-group-item-action:hover,.list-group-item-dark.list-group-item-action:focus{color:#4a5353;background-color:#ced1d1}.list-group-item-dark.list-group-item-action.active{color:#fff;background-color:#4a5353;border-color:#4a5353}.btn-close{box-sizing:content-box;width:1em;height:1em;padding:.25em .25em;color:#000;background:rgba(0,0,0,0) url(' + N + ') center/1em auto no-repeat;border:0;border-radius:.375rem;opacity:.5}.btn-close:hover{color:#000;text-decoration:none;opacity:.75}.btn-close:focus{outline:0;box-shadow:0 0 0 .25rem rgba(44,62,80,.25);opacity:1}.btn-close:disabled,.btn-close.disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.25}.btn-close-white{filter:invert(1) grayscale(100%) brightness(200%)}.toast{--bs-toast-padding-x: 0.75rem;--bs-toast-padding-y: 0.5rem;--bs-toast-spacing: 1.5rem;--bs-toast-max-width: 350px;--bs-toast-font-size:0.875rem;--bs-toast-color: ;--bs-toast-bg: rgba(255, 255, 255, 0.85);--bs-toast-border-width: 1px;--bs-toast-border-color: var(--bs-border-color-translucent);--bs-toast-border-radius: 0.375rem;--bs-toast-box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-toast-header-color: #95a5a6;--bs-toast-header-bg: rgba(255, 255, 255, 0.85);--bs-toast-header-border-color: rgba(0, 0, 0, 0.05);width:var(--bs-toast-max-width);max-width:100%;font-size:var(--bs-toast-font-size);color:var(--bs-toast-color);pointer-events:auto;background-color:var(--bs-toast-bg);background-clip:padding-box;border:var(--bs-toast-border-width) solid var(--bs-toast-border-color);box-shadow:var(--bs-toast-box-shadow);border-radius:var(--bs-toast-border-radius)}.toast.showing{opacity:0}.toast:not(.show){display:none}.toast-container{position:absolute;z-index:1090;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;pointer-events:none}.toast-container>:not(:last-child){margin-bottom:var(--bs-toast-spacing)}.toast-header{display:flex;align-items:center;padding:var(--bs-toast-padding-y) var(--bs-toast-padding-x);color:var(--bs-toast-header-color);background-color:var(--bs-toast-header-bg);background-clip:padding-box;border-bottom:var(--bs-toast-border-width) solid var(--bs-toast-header-border-color);border-top-left-radius:calc(var(--bs-toast-border-radius) - var(--bs-toast-border-width));border-top-right-radius:calc(var(--bs-toast-border-radius) - var(--bs-toast-border-width))}.toast-header .btn-close{margin-right:calc(var(--bs-toast-padding-x)*-0.5);margin-left:var(--bs-toast-padding-x)}.toast-body{padding:var(--bs-toast-padding-x);word-wrap:break-word}.modal{--bs-modal-zindex: 1055;--bs-modal-width: 500px;--bs-modal-padding: 1rem;--bs-modal-margin: 0.5rem;--bs-modal-color: ;--bs-modal-bg: #fff;--bs-modal-border-color: var(--bs-border-color-translucent);--bs-modal-border-width: 1px;--bs-modal-border-radius: 0.5rem;--bs-modal-box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-modal-inner-border-radius: calc(0.5rem - 1px);--bs-modal-header-padding-x: 1rem;--bs-modal-header-padding-y: 1rem;--bs-modal-header-padding: 1rem 1rem;--bs-modal-header-border-color: var(--bs-border-color);--bs-modal-header-border-width: 1px;--bs-modal-title-line-height: 1.5;--bs-modal-footer-gap: 0.5rem;--bs-modal-footer-bg: ;--bs-modal-footer-border-color: var(--bs-border-color);--bs-modal-footer-border-width: 1px;position:fixed;top:0;left:0;z-index:var(--bs-modal-zindex);display:none;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;outline:0}.modal-dialog{position:relative;width:auto;margin:var(--bs-modal-margin);pointer-events:none}.modal.fade .modal-dialog{transition:transform .3s ease-out;transform:translate(0, -50px)}@media(prefers-reduced-motion: reduce){.modal.fade .modal-dialog{transition:none}}.modal.show .modal-dialog{transform:none}.modal.modal-static .modal-dialog{transform:scale(1.02)}.modal-dialog-scrollable{height:calc(100% - var(--bs-modal-margin)*2)}.modal-dialog-scrollable .modal-content{max-height:100%;overflow:hidden}.modal-dialog-scrollable .modal-body{overflow-y:auto}.modal-dialog-centered{display:flex;align-items:center;min-height:calc(100% - var(--bs-modal-margin)*2)}.modal-content{position:relative;display:flex;flex-direction:column;width:100%;color:var(--bs-modal-color);pointer-events:auto;background-color:var(--bs-modal-bg);background-clip:padding-box;border:var(--bs-modal-border-width) solid var(--bs-modal-border-color);border-radius:var(--bs-modal-border-radius);outline:0}.modal-backdrop{--bs-backdrop-zindex: 1050;--bs-backdrop-bg: #000;--bs-backdrop-opacity: 0.5;position:fixed;top:0;left:0;z-index:var(--bs-backdrop-zindex);width:100vw;height:100vh;background-color:var(--bs-backdrop-bg)}.modal-backdrop.fade{opacity:0}.modal-backdrop.show{opacity:var(--bs-backdrop-opacity)}.modal-header{display:flex;flex-shrink:0;align-items:center;justify-content:space-between;padding:var(--bs-modal-header-padding);border-bottom:var(--bs-modal-header-border-width) solid var(--bs-modal-header-border-color);border-top-left-radius:var(--bs-modal-inner-border-radius);border-top-right-radius:var(--bs-modal-inner-border-radius)}.modal-header .btn-close{padding:calc(var(--bs-modal-header-padding-y)*.5) calc(var(--bs-modal-header-padding-x)*.5);margin:calc(var(--bs-modal-header-padding-y)*-0.5) calc(var(--bs-modal-header-padding-x)*-0.5) calc(var(--bs-modal-header-padding-y)*-0.5) auto}.modal-title{margin-bottom:0;line-height:var(--bs-modal-title-line-height)}.modal-body{position:relative;flex:1 1 auto;padding:var(--bs-modal-padding)}.modal-footer{display:flex;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;padding:calc(var(--bs-modal-padding) - var(--bs-modal-footer-gap)*.5);background-color:var(--bs-modal-footer-bg);border-top:var(--bs-modal-footer-border-width) solid var(--bs-modal-footer-border-color);border-bottom-right-radius:var(--bs-modal-inner-border-radius);border-bottom-left-radius:var(--bs-modal-inner-border-radius)}.modal-footer>*{margin:calc(var(--bs-modal-footer-gap)*.5)}@media(min-width: 576px){.modal{--bs-modal-margin: 1.75rem;--bs-modal-box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15)}.modal-dialog{max-width:var(--bs-modal-width);margin-right:auto;margin-left:auto}.modal-sm{--bs-modal-width: 300px}}@media(min-width: 992px){.modal-lg,.modal-xl{--bs-modal-width: 800px}}@media(min-width: 1200px){.modal-xl{--bs-modal-width: 1140px}}.modal-fullscreen{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen .modal-header,.modal-fullscreen .modal-footer{border-radius:0}.modal-fullscreen .modal-body{overflow-y:auto}@media(max-width: 575.98px){.modal-fullscreen-sm-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-sm-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-sm-down .modal-header,.modal-fullscreen-sm-down .modal-footer{border-radius:0}.modal-fullscreen-sm-down .modal-body{overflow-y:auto}}@media(max-width: 767.98px){.modal-fullscreen-md-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-md-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-md-down .modal-header,.modal-fullscreen-md-down .modal-footer{border-radius:0}.modal-fullscreen-md-down .modal-body{overflow-y:auto}}@media(max-width: 991.98px){.modal-fullscreen-lg-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-lg-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-lg-down .modal-header,.modal-fullscreen-lg-down .modal-footer{border-radius:0}.modal-fullscreen-lg-down .modal-body{overflow-y:auto}}@media(max-width: 1199.98px){.modal-fullscreen-xl-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-xl-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-xl-down .modal-header,.modal-fullscreen-xl-down .modal-footer{border-radius:0}.modal-fullscreen-xl-down .modal-body{overflow-y:auto}}@media(max-width: 1399.98px){.modal-fullscreen-xxl-down{width:100vw;max-width:none;height:100%;margin:0}.modal-fullscreen-xxl-down .modal-content{height:100%;border:0;border-radius:0}.modal-fullscreen-xxl-down .modal-header,.modal-fullscreen-xxl-down .modal-footer{border-radius:0}.modal-fullscreen-xxl-down .modal-body{overflow-y:auto}}.tooltip{--bs-tooltip-zindex: 1080;--bs-tooltip-max-width: 200px;--bs-tooltip-padding-x: 0.5rem;--bs-tooltip-padding-y: 0.25rem;--bs-tooltip-margin: ;--bs-tooltip-font-size:0.8203125rem;--bs-tooltip-color: #fff;--bs-tooltip-bg: #000;--bs-tooltip-border-radius: 0.375rem;--bs-tooltip-opacity: 0.9;--bs-tooltip-arrow-width: 0.8rem;--bs-tooltip-arrow-height: 0.4rem;z-index:var(--bs-tooltip-zindex);display:block;padding:var(--bs-tooltip-arrow-height);margin:var(--bs-tooltip-margin);font-family:"Lato",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;white-space:normal;word-spacing:normal;line-break:auto;font-size:var(--bs-tooltip-font-size);word-wrap:break-word;opacity:0}.tooltip.show{opacity:var(--bs-tooltip-opacity)}.tooltip .tooltip-arrow{display:block;width:var(--bs-tooltip-arrow-width);height:var(--bs-tooltip-arrow-height)}.tooltip .tooltip-arrow::before{position:absolute;content:"";border-color:rgba(0,0,0,0);border-style:solid}.bs-tooltip-top .tooltip-arrow,.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow{bottom:0}.bs-tooltip-top .tooltip-arrow::before,.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before{top:-1px;border-width:var(--bs-tooltip-arrow-height) calc(var(--bs-tooltip-arrow-width)*.5) 0;border-top-color:var(--bs-tooltip-bg)}.bs-tooltip-end .tooltip-arrow,.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow{left:0;width:var(--bs-tooltip-arrow-height);height:var(--bs-tooltip-arrow-width)}.bs-tooltip-end .tooltip-arrow::before,.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow::before{right:-1px;border-width:calc(var(--bs-tooltip-arrow-width)*.5) var(--bs-tooltip-arrow-height) calc(var(--bs-tooltip-arrow-width)*.5) 0;border-right-color:var(--bs-tooltip-bg)}.bs-tooltip-bottom .tooltip-arrow,.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow{top:0}.bs-tooltip-bottom .tooltip-arrow::before,.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow::before{bottom:-1px;border-width:0 calc(var(--bs-tooltip-arrow-width)*.5) var(--bs-tooltip-arrow-height);border-bottom-color:var(--bs-tooltip-bg)}.bs-tooltip-start .tooltip-arrow,.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow{right:0;width:var(--bs-tooltip-arrow-height);height:var(--bs-tooltip-arrow-width)}.bs-tooltip-start .tooltip-arrow::before,.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow::before{left:-1px;border-width:calc(var(--bs-tooltip-arrow-width)*.5) 0 calc(var(--bs-tooltip-arrow-width)*.5) var(--bs-tooltip-arrow-height);border-left-color:var(--bs-tooltip-bg)}.tooltip-inner{max-width:var(--bs-tooltip-max-width);padding:var(--bs-tooltip-padding-y) var(--bs-tooltip-padding-x);color:var(--bs-tooltip-color);text-align:center;background-color:var(--bs-tooltip-bg);border-radius:var(--bs-tooltip-border-radius)}.popover{--bs-popover-zindex: 1070;--bs-popover-max-width: 276px;--bs-popover-font-size:0.8203125rem;--bs-popover-bg: #fff;--bs-popover-border-width: 1px;--bs-popover-border-color: var(--bs-border-color-translucent);--bs-popover-border-radius: 0.5rem;--bs-popover-inner-border-radius: calc(0.5rem - 1px);--bs-popover-box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-popover-header-padding-x: 1rem;--bs-popover-header-padding-y: 0.5rem;--bs-popover-header-font-size:0.9375rem;--bs-popover-header-color: var(--bs-heading-color);--bs-popover-header-bg: #f0f0f0;--bs-popover-body-padding-x: 1rem;--bs-popover-body-padding-y: 1rem;--bs-popover-body-color: #212529;--bs-popover-arrow-width: 1rem;--bs-popover-arrow-height: 0.5rem;--bs-popover-arrow-border: var(--bs-popover-border-color);z-index:var(--bs-popover-zindex);display:block;max-width:var(--bs-popover-max-width);font-family:"Lato",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;white-space:normal;word-spacing:normal;line-break:auto;font-size:var(--bs-popover-font-size);word-wrap:break-word;background-color:var(--bs-popover-bg);background-clip:padding-box;border:var(--bs-popover-border-width) solid var(--bs-popover-border-color);border-radius:var(--bs-popover-border-radius)}.popover .popover-arrow{display:block;width:var(--bs-popover-arrow-width);height:var(--bs-popover-arrow-height)}.popover .popover-arrow::before,.popover .popover-arrow::after{position:absolute;display:block;content:"";border-color:rgba(0,0,0,0);border-style:solid;border-width:0}.bs-popover-top>.popover-arrow,.bs-popover-auto[data-popper-placement^=top]>.popover-arrow{bottom:calc(var(--bs-popover-arrow-height)*-1 - var(--bs-popover-border-width))}.bs-popover-top>.popover-arrow::before,.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::before,.bs-popover-top>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::after{border-width:var(--bs-popover-arrow-height) calc(var(--bs-popover-arrow-width)*.5) 0}.bs-popover-top>.popover-arrow::before,.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::before{bottom:0;border-top-color:var(--bs-popover-arrow-border)}.bs-popover-top>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=top]>.popover-arrow::after{bottom:var(--bs-popover-border-width);border-top-color:var(--bs-popover-bg)}.bs-popover-end>.popover-arrow,.bs-popover-auto[data-popper-placement^=right]>.popover-arrow{left:calc(var(--bs-popover-arrow-height)*-1 - var(--bs-popover-border-width));width:var(--bs-popover-arrow-height);height:var(--bs-popover-arrow-width)}.bs-popover-end>.popover-arrow::before,.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::before,.bs-popover-end>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::after{border-width:calc(var(--bs-popover-arrow-width)*.5) var(--bs-popover-arrow-height) calc(var(--bs-popover-arrow-width)*.5) 0}.bs-popover-end>.popover-arrow::before,.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::before{left:0;border-right-color:var(--bs-popover-arrow-border)}.bs-popover-end>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=right]>.popover-arrow::after{left:var(--bs-popover-border-width);border-right-color:var(--bs-popover-bg)}.bs-popover-bottom>.popover-arrow,.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow{top:calc(var(--bs-popover-arrow-height)*-1 - var(--bs-popover-border-width))}.bs-popover-bottom>.popover-arrow::before,.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::before,.bs-popover-bottom>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::after{border-width:0 calc(var(--bs-popover-arrow-width)*.5) var(--bs-popover-arrow-height)}.bs-popover-bottom>.popover-arrow::before,.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::before{top:0;border-bottom-color:var(--bs-popover-arrow-border)}.bs-popover-bottom>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=bottom]>.popover-arrow::after{top:var(--bs-popover-border-width);border-bottom-color:var(--bs-popover-bg)}.bs-popover-bottom .popover-header::before,.bs-popover-auto[data-popper-placement^=bottom] .popover-header::before{position:absolute;top:0;left:50%;display:block;width:var(--bs-popover-arrow-width);margin-left:calc(var(--bs-popover-arrow-width)*-0.5);content:"";border-bottom:var(--bs-popover-border-width) solid var(--bs-popover-header-bg)}.bs-popover-start>.popover-arrow,.bs-popover-auto[data-popper-placement^=left]>.popover-arrow{right:calc(var(--bs-popover-arrow-height)*-1 - var(--bs-popover-border-width));width:var(--bs-popover-arrow-height);height:var(--bs-popover-arrow-width)}.bs-popover-start>.popover-arrow::before,.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::before,.bs-popover-start>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::after{border-width:calc(var(--bs-popover-arrow-width)*.5) 0 calc(var(--bs-popover-arrow-width)*.5) var(--bs-popover-arrow-height)}.bs-popover-start>.popover-arrow::before,.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::before{right:0;border-left-color:var(--bs-popover-arrow-border)}.bs-popover-start>.popover-arrow::after,.bs-popover-auto[data-popper-placement^=left]>.popover-arrow::after{right:var(--bs-popover-border-width);border-left-color:var(--bs-popover-bg)}.popover-header{padding:var(--bs-popover-header-padding-y) var(--bs-popover-header-padding-x);margin-bottom:0;font-size:var(--bs-popover-header-font-size);color:var(--bs-popover-header-color);background-color:var(--bs-popover-header-bg);border-bottom:var(--bs-popover-border-width) solid var(--bs-popover-border-color);border-top-left-radius:var(--bs-popover-inner-border-radius);border-top-right-radius:var(--bs-popover-inner-border-radius)}.popover-header:empty{display:none}.popover-body{padding:var(--bs-popover-body-padding-y) var(--bs-popover-body-padding-x);color:var(--bs-popover-body-color)}.carousel{position:relative}.carousel.pointer-event{touch-action:pan-y}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner::after{display:block;clear:both;content:""}.carousel-item{position:relative;display:none;float:left;width:100%;margin-right:-100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:transform .6s ease-in-out}@media(prefers-reduced-motion: reduce){.carousel-item{transition:none}}.carousel-item.active,.carousel-item-next,.carousel-item-prev{display:block}.carousel-item-next:not(.carousel-item-start),.active.carousel-item-end{transform:translateX(100%)}.carousel-item-prev:not(.carousel-item-end),.active.carousel-item-start{transform:translateX(-100%)}.carousel-fade .carousel-item{opacity:0;transition-property:opacity;transform:none}.carousel-fade .carousel-item.active,.carousel-fade .carousel-item-next.carousel-item-start,.carousel-fade .carousel-item-prev.carousel-item-end{z-index:1;opacity:1}.carousel-fade .active.carousel-item-start,.carousel-fade .active.carousel-item-end{z-index:0;opacity:0;transition:opacity 0s .6s}@media(prefers-reduced-motion: reduce){.carousel-fade .active.carousel-item-start,.carousel-fade .active.carousel-item-end{transition:none}}.carousel-control-prev,.carousel-control-next{position:absolute;top:0;bottom:0;z-index:1;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;text-align:center;background:none;border:0;opacity:.5;transition:opacity .15s ease}@media(prefers-reduced-motion: reduce){.carousel-control-prev,.carousel-control-next{transition:none}}.carousel-control-prev:hover,.carousel-control-prev:focus,.carousel-control-next:hover,.carousel-control-next:focus{color:#fff;text-decoration:none;outline:0;opacity:.9}.carousel-control-prev{left:0}.carousel-control-next{right:0}.carousel-control-prev-icon,.carousel-control-next-icon{display:inline-block;width:2rem;height:2rem;background-repeat:no-repeat;background-position:50%;background-size:100% 100%}.carousel-control-prev-icon{background-image:url(' + j + ")}.carousel-control-next-icon{background-image:url(" + U + ')}.carousel-indicators{position:absolute;right:0;bottom:0;left:0;z-index:2;display:flex;justify-content:center;padding:0;margin-right:15%;margin-bottom:1rem;margin-left:15%;list-style:none}.carousel-indicators [data-bs-target]{box-sizing:content-box;flex:0 1 auto;width:30px;height:3px;padding:0;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#fff;background-clip:padding-box;border:0;border-top:10px solid rgba(0,0,0,0);border-bottom:10px solid rgba(0,0,0,0);opacity:.5;transition:opacity .6s ease}@media(prefers-reduced-motion: reduce){.carousel-indicators [data-bs-target]{transition:none}}.carousel-indicators .active{opacity:1}.carousel-caption{position:absolute;right:15%;bottom:1.25rem;left:15%;padding-top:1.25rem;padding-bottom:1.25rem;color:#fff;text-align:center}.carousel-dark .carousel-control-prev-icon,.carousel-dark .carousel-control-next-icon{filter:invert(1) grayscale(100)}.carousel-dark .carousel-indicators [data-bs-target]{background-color:#000}.carousel-dark .carousel-caption{color:#000}.spinner-grow,.spinner-border{display:inline-block;width:var(--bs-spinner-width);height:var(--bs-spinner-height);vertical-align:var(--bs-spinner-vertical-align);border-radius:50%;-webkit-animation:var(--bs-spinner-animation-speed) linear infinite var(--bs-spinner-animation-name);animation:var(--bs-spinner-animation-speed) linear infinite var(--bs-spinner-animation-name)}@-webkit-keyframes spinner-border{to{transform:rotate(360deg) /* rtl:ignore */}}@keyframes spinner-border{to{transform:rotate(360deg) /* rtl:ignore */}}.spinner-border{--bs-spinner-width: 2rem;--bs-spinner-height: 2rem;--bs-spinner-vertical-align: -0.125em;--bs-spinner-border-width: 0.25em;--bs-spinner-animation-speed: 0.75s;--bs-spinner-animation-name: spinner-border;border:var(--bs-spinner-border-width) solid currentcolor;border-right-color:rgba(0,0,0,0)}.spinner-border-sm{--bs-spinner-width: 1rem;--bs-spinner-height: 1rem;--bs-spinner-border-width: 0.2em}@-webkit-keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1;transform:none}}@keyframes spinner-grow{0%{transform:scale(0)}50%{opacity:1;transform:none}}.spinner-grow{--bs-spinner-width: 2rem;--bs-spinner-height: 2rem;--bs-spinner-vertical-align: -0.125em;--bs-spinner-animation-speed: 0.75s;--bs-spinner-animation-name: spinner-grow;background-color:currentcolor;opacity:0}.spinner-grow-sm{--bs-spinner-width: 1rem;--bs-spinner-height: 1rem}@media(prefers-reduced-motion: reduce){.spinner-border,.spinner-grow{--bs-spinner-animation-speed: 1.5s}}.offcanvas,.offcanvas-xxl,.offcanvas-xl,.offcanvas-lg,.offcanvas-md,.offcanvas-sm{--bs-offcanvas-width: 400px;--bs-offcanvas-height: 30vh;--bs-offcanvas-padding-x: 1rem;--bs-offcanvas-padding-y: 1rem;--bs-offcanvas-color: ;--bs-offcanvas-bg: #fff;--bs-offcanvas-border-width: 1px;--bs-offcanvas-border-color: var(--bs-border-color-translucent);--bs-offcanvas-box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075)}@media(max-width: 575.98px){.offcanvas-sm{position:fixed;bottom:0;z-index:1045;display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:transform .3s ease-in-out}}@media(max-width: 575.98px)and (prefers-reduced-motion: reduce){.offcanvas-sm{transition:none}}@media(max-width: 575.98px){.offcanvas-sm.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}}@media(max-width: 575.98px){.offcanvas-sm.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}}@media(max-width: 575.98px){.offcanvas-sm.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}}@media(max-width: 575.98px){.offcanvas-sm.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}}@media(max-width: 575.98px){.offcanvas-sm.showing,.offcanvas-sm.show:not(.hiding){transform:none}}@media(max-width: 575.98px){.offcanvas-sm.showing,.offcanvas-sm.hiding,.offcanvas-sm.show{visibility:visible}}@media(min-width: 576px){.offcanvas-sm{--bs-offcanvas-height: auto;--bs-offcanvas-border-width: 0;background-color:rgba(0,0,0,0) !important}.offcanvas-sm .offcanvas-header{display:none}.offcanvas-sm .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:rgba(0,0,0,0) !important}}@media(max-width: 767.98px){.offcanvas-md{position:fixed;bottom:0;z-index:1045;display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:transform .3s ease-in-out}}@media(max-width: 767.98px)and (prefers-reduced-motion: reduce){.offcanvas-md{transition:none}}@media(max-width: 767.98px){.offcanvas-md.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}}@media(max-width: 767.98px){.offcanvas-md.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}}@media(max-width: 767.98px){.offcanvas-md.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}}@media(max-width: 767.98px){.offcanvas-md.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}}@media(max-width: 767.98px){.offcanvas-md.showing,.offcanvas-md.show:not(.hiding){transform:none}}@media(max-width: 767.98px){.offcanvas-md.showing,.offcanvas-md.hiding,.offcanvas-md.show{visibility:visible}}@media(min-width: 768px){.offcanvas-md{--bs-offcanvas-height: auto;--bs-offcanvas-border-width: 0;background-color:rgba(0,0,0,0) !important}.offcanvas-md .offcanvas-header{display:none}.offcanvas-md .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:rgba(0,0,0,0) !important}}@media(max-width: 991.98px){.offcanvas-lg{position:fixed;bottom:0;z-index:1045;display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:transform .3s ease-in-out}}@media(max-width: 991.98px)and (prefers-reduced-motion: reduce){.offcanvas-lg{transition:none}}@media(max-width: 991.98px){.offcanvas-lg.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}}@media(max-width: 991.98px){.offcanvas-lg.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}}@media(max-width: 991.98px){.offcanvas-lg.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}}@media(max-width: 991.98px){.offcanvas-lg.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}}@media(max-width: 991.98px){.offcanvas-lg.showing,.offcanvas-lg.show:not(.hiding){transform:none}}@media(max-width: 991.98px){.offcanvas-lg.showing,.offcanvas-lg.hiding,.offcanvas-lg.show{visibility:visible}}@media(min-width: 992px){.offcanvas-lg{--bs-offcanvas-height: auto;--bs-offcanvas-border-width: 0;background-color:rgba(0,0,0,0) !important}.offcanvas-lg .offcanvas-header{display:none}.offcanvas-lg .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:rgba(0,0,0,0) !important}}@media(max-width: 1199.98px){.offcanvas-xl{position:fixed;bottom:0;z-index:1045;display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:transform .3s ease-in-out}}@media(max-width: 1199.98px)and (prefers-reduced-motion: reduce){.offcanvas-xl{transition:none}}@media(max-width: 1199.98px){.offcanvas-xl.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}}@media(max-width: 1199.98px){.offcanvas-xl.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}}@media(max-width: 1199.98px){.offcanvas-xl.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}}@media(max-width: 1199.98px){.offcanvas-xl.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}}@media(max-width: 1199.98px){.offcanvas-xl.showing,.offcanvas-xl.show:not(.hiding){transform:none}}@media(max-width: 1199.98px){.offcanvas-xl.showing,.offcanvas-xl.hiding,.offcanvas-xl.show{visibility:visible}}@media(min-width: 1200px){.offcanvas-xl{--bs-offcanvas-height: auto;--bs-offcanvas-border-width: 0;background-color:rgba(0,0,0,0) !important}.offcanvas-xl .offcanvas-header{display:none}.offcanvas-xl .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:rgba(0,0,0,0) !important}}@media(max-width: 1399.98px){.offcanvas-xxl{position:fixed;bottom:0;z-index:1045;display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:transform .3s ease-in-out}}@media(max-width: 1399.98px)and (prefers-reduced-motion: reduce){.offcanvas-xxl{transition:none}}@media(max-width: 1399.98px){.offcanvas-xxl.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}}@media(max-width: 1399.98px){.offcanvas-xxl.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}}@media(max-width: 1399.98px){.offcanvas-xxl.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}}@media(max-width: 1399.98px){.offcanvas-xxl.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}}@media(max-width: 1399.98px){.offcanvas-xxl.showing,.offcanvas-xxl.show:not(.hiding){transform:none}}@media(max-width: 1399.98px){.offcanvas-xxl.showing,.offcanvas-xxl.hiding,.offcanvas-xxl.show{visibility:visible}}@media(min-width: 1400px){.offcanvas-xxl{--bs-offcanvas-height: auto;--bs-offcanvas-border-width: 0;background-color:rgba(0,0,0,0) !important}.offcanvas-xxl .offcanvas-header{display:none}.offcanvas-xxl .offcanvas-body{display:flex;flex-grow:0;padding:0;overflow-y:visible;background-color:rgba(0,0,0,0) !important}}.offcanvas{position:fixed;bottom:0;z-index:1045;display:flex;flex-direction:column;max-width:100%;color:var(--bs-offcanvas-color);visibility:hidden;background-color:var(--bs-offcanvas-bg);background-clip:padding-box;outline:0;transition:transform .3s ease-in-out}@media(prefers-reduced-motion: reduce){.offcanvas{transition:none}}.offcanvas.offcanvas-start{top:0;left:0;width:var(--bs-offcanvas-width);border-right:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(-100%)}.offcanvas.offcanvas-end{top:0;right:0;width:var(--bs-offcanvas-width);border-left:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateX(100%)}.offcanvas.offcanvas-top{top:0;right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-bottom:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(-100%)}.offcanvas.offcanvas-bottom{right:0;left:0;height:var(--bs-offcanvas-height);max-height:100%;border-top:var(--bs-offcanvas-border-width) solid var(--bs-offcanvas-border-color);transform:translateY(100%)}.offcanvas.showing,.offcanvas.show:not(.hiding){transform:none}.offcanvas.showing,.offcanvas.hiding,.offcanvas.show{visibility:visible}.offcanvas-backdrop{position:fixed;top:0;left:0;z-index:1040;width:100vw;height:100vh;background-color:#000}.offcanvas-backdrop.fade{opacity:0}.offcanvas-backdrop.show{opacity:.5}.offcanvas-header{display:flex;align-items:center;justify-content:space-between;padding:var(--bs-offcanvas-padding-y) var(--bs-offcanvas-padding-x)}.offcanvas-header .btn-close{padding:calc(var(--bs-offcanvas-padding-y)*.5) calc(var(--bs-offcanvas-padding-x)*.5);margin-top:calc(var(--bs-offcanvas-padding-y)*-0.5);margin-right:calc(var(--bs-offcanvas-padding-x)*-0.5);margin-bottom:calc(var(--bs-offcanvas-padding-y)*-0.5)}.offcanvas-title{margin-bottom:0;line-height:1.5}.offcanvas-body{flex-grow:1;padding:var(--bs-offcanvas-padding-y) var(--bs-offcanvas-padding-x);overflow-y:auto}.placeholder{display:inline-block;min-height:1em;vertical-align:middle;cursor:wait;background-color:currentcolor;opacity:.5}.placeholder.btn::before{display:inline-block;content:""}.placeholder-xs{min-height:.6em}.placeholder-sm{min-height:.8em}.placeholder-lg{min-height:1.2em}.placeholder-glow .placeholder{-webkit-animation:placeholder-glow 2s ease-in-out infinite;animation:placeholder-glow 2s ease-in-out infinite}@-webkit-keyframes placeholder-glow{50%{opacity:.2}}@keyframes placeholder-glow{50%{opacity:.2}}.placeholder-wave{-webkit-mask-image:linear-gradient(130deg, #000 55%, rgba(0, 0, 0, 0.8) 75%, #000 95%);mask-image:linear-gradient(130deg, #000 55%, rgba(0, 0, 0, 0.8) 75%, #000 95%);-webkit-mask-size:200% 100%;mask-size:200% 100%;-webkit-animation:placeholder-wave 2s linear infinite;animation:placeholder-wave 2s linear infinite}@-webkit-keyframes placeholder-wave{100%{-webkit-mask-position:-200% 0%;mask-position:-200% 0%}}@keyframes placeholder-wave{100%{-webkit-mask-position:-200% 0%;mask-position:-200% 0%}}.clearfix::after{display:block;clear:both;content:""}.text-bg-primary{color:#fff !important;background-color:RGBA(44, 62, 80, var(--bs-bg-opacity, 1)) !important}.text-bg-secondary{color:#000 !important;background-color:RGBA(149, 165, 166, var(--bs-bg-opacity, 1)) !important}.text-bg-success{color:#000 !important;background-color:RGBA(24, 188, 156, var(--bs-bg-opacity, 1)) !important}.text-bg-info{color:#000 !important;background-color:RGBA(52, 152, 219, var(--bs-bg-opacity, 1)) !important}.text-bg-warning{color:#000 !important;background-color:RGBA(243, 156, 18, var(--bs-bg-opacity, 1)) !important}.text-bg-danger{color:#000 !important;background-color:RGBA(231, 76, 60, var(--bs-bg-opacity, 1)) !important}.text-bg-light{color:#000 !important;background-color:RGBA(236, 240, 241, var(--bs-bg-opacity, 1)) !important}.text-bg-dark{color:#000 !important;background-color:RGBA(123, 138, 139, var(--bs-bg-opacity, 1)) !important}.link-primary{color:#2c3e50 !important}.link-primary:hover,.link-primary:focus{color:#233240 !important}.link-secondary{color:#95a5a6 !important}.link-secondary:hover,.link-secondary:focus{color:#aab7b8 !important}.link-success{color:#18bc9c !important}.link-success:hover,.link-success:focus{color:#46c9b0 !important}.link-info{color:#3498db !important}.link-info:hover,.link-info:focus{color:#5dade2 !important}.link-warning{color:#f39c12 !important}.link-warning:hover,.link-warning:focus{color:#f5b041 !important}.link-danger{color:#e74c3c !important}.link-danger:hover,.link-danger:focus{color:#ec7063 !important}.link-light{color:#ecf0f1 !important}.link-light:hover,.link-light:focus{color:#f0f3f4 !important}.link-dark{color:#7b8a8b !important}.link-dark:hover,.link-dark:focus{color:#95a1a2 !important}.ratio{position:relative;width:100%}.ratio::before{display:block;padding-top:var(--bs-aspect-ratio);content:""}.ratio>*{position:absolute;top:0;left:0;width:100%;height:100%}.ratio-1x1{--bs-aspect-ratio: 100%}.ratio-4x3{--bs-aspect-ratio: 75%}.ratio-16x9{--bs-aspect-ratio: 56.25%}.ratio-21x9{--bs-aspect-ratio: 42.8571428571%}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.sticky-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}@media(min-width: 576px){.sticky-sm-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-sm-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media(min-width: 768px){.sticky-md-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-md-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media(min-width: 992px){.sticky-lg-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-lg-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media(min-width: 1200px){.sticky-xl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-xl-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}@media(min-width: 1400px){.sticky-xxl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.sticky-xxl-bottom{position:-webkit-sticky;position:sticky;bottom:0;z-index:1020}}.hstack{display:flex;flex-direction:row;align-items:center;align-self:stretch}.vstack{display:flex;flex:1 1 auto;flex-direction:column;align-self:stretch}.visually-hidden,.visually-hidden-focusable:not(:focus):not(:focus-within){position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;content:""}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vr{display:inline-block;align-self:stretch;width:1px;min-height:1em;background-color:currentcolor;opacity:.25}.align-baseline{vertical-align:baseline !important}.align-top{vertical-align:top !important}.align-middle{vertical-align:middle !important}.align-bottom{vertical-align:bottom !important}.align-text-bottom{vertical-align:text-bottom !important}.align-text-top{vertical-align:text-top !important}.float-start{float:left !important}.float-end{float:right !important}.float-none{float:none !important}.opacity-0{opacity:0 !important}.opacity-25{opacity:.25 !important}.opacity-50{opacity:.5 !important}.opacity-75{opacity:.75 !important}.opacity-100{opacity:1 !important}.overflow-auto{overflow:auto !important}.overflow-hidden{overflow:hidden !important}.overflow-visible{overflow:visible !important}.overflow-scroll{overflow:scroll !important}.d-inline{display:inline !important}.d-inline-block{display:inline-block !important}.d-block{display:block !important}.d-grid{display:grid !important}.d-table{display:table !important}.d-table-row{display:table-row !important}.d-table-cell{display:table-cell !important}.d-flex{display:flex !important}.d-inline-flex{display:inline-flex !important}.d-none{display:none !important}.shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15) !important}.shadow-sm{box-shadow:0 .125rem .25rem rgba(0,0,0,.075) !important}.shadow-lg{box-shadow:0 1rem 3rem rgba(0,0,0,.175) !important}.shadow-none{box-shadow:none !important}.position-static{position:static !important}.position-relative{position:relative !important}.position-absolute{position:absolute !important}.position-fixed{position:fixed !important}.position-sticky{position:-webkit-sticky !important;position:sticky !important}.top-0{top:0 !important}.top-50{top:50% !important}.top-100{top:100% !important}.bottom-0{bottom:0 !important}.bottom-50{bottom:50% !important}.bottom-100{bottom:100% !important}.start-0{left:0 !important}.start-50{left:50% !important}.start-100{left:100% !important}.end-0{right:0 !important}.end-50{right:50% !important}.end-100{right:100% !important}.translate-middle{transform:translate(-50%, -50%) !important}.translate-middle-x{transform:translateX(-50%) !important}.translate-middle-y{transform:translateY(-50%) !important}.border{border:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-0{border:0 !important}.border-top{border-top:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-top-0{border-top:0 !important}.border-end{border-right:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-end-0{border-right:0 !important}.border-bottom{border-bottom:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-bottom-0{border-bottom:0 !important}.border-start{border-left:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-start-0{border-left:0 !important}.border-primary{--bs-border-opacity: 1;border-color:rgba(var(--bs-primary-rgb), var(--bs-border-opacity)) !important}.border-secondary{--bs-border-opacity: 1;border-color:rgba(var(--bs-secondary-rgb), var(--bs-border-opacity)) !important}.border-success{--bs-border-opacity: 1;border-color:rgba(var(--bs-success-rgb), var(--bs-border-opacity)) !important}.border-info{--bs-border-opacity: 1;border-color:rgba(var(--bs-info-rgb), var(--bs-border-opacity)) !important}.border-warning{--bs-border-opacity: 1;border-color:rgba(var(--bs-warning-rgb), var(--bs-border-opacity)) !important}.border-danger{--bs-border-opacity: 1;border-color:rgba(var(--bs-danger-rgb), var(--bs-border-opacity)) !important}.border-light{--bs-border-opacity: 1;border-color:rgba(var(--bs-light-rgb), var(--bs-border-opacity)) !important}.border-dark{--bs-border-opacity: 1;border-color:rgba(var(--bs-dark-rgb), var(--bs-border-opacity)) !important}.border-white{--bs-border-opacity: 1;border-color:rgba(var(--bs-white-rgb), var(--bs-border-opacity)) !important}.border-1{--bs-border-width: 1px}.border-2{--bs-border-width: 2px}.border-3{--bs-border-width: 3px}.border-4{--bs-border-width: 4px}.border-5{--bs-border-width: 5px}.border-opacity-10{--bs-border-opacity: 0.1}.border-opacity-25{--bs-border-opacity: 0.25}.border-opacity-50{--bs-border-opacity: 0.5}.border-opacity-75{--bs-border-opacity: 0.75}.border-opacity-100{--bs-border-opacity: 1}.w-25{width:25% !important}.w-50{width:50% !important}.w-75{width:75% !important}.w-100{width:100% !important}.w-auto{width:auto !important}.mw-100{max-width:100% !important}.vw-100{width:100vw !important}.min-vw-100{min-width:100vw !important}.h-25{height:25% !important}.h-50{height:50% !important}.h-75{height:75% !important}.h-100{height:100% !important}.h-auto{height:auto !important}.mh-100{max-height:100% !important}.vh-100{height:100vh !important}.min-vh-100{min-height:100vh !important}.flex-fill{flex:1 1 auto !important}.flex-row{flex-direction:row !important}.flex-column{flex-direction:column !important}.flex-row-reverse{flex-direction:row-reverse !important}.flex-column-reverse{flex-direction:column-reverse !important}.flex-grow-0{flex-grow:0 !important}.flex-grow-1{flex-grow:1 !important}.flex-shrink-0{flex-shrink:0 !important}.flex-shrink-1{flex-shrink:1 !important}.flex-wrap{flex-wrap:wrap !important}.flex-nowrap{flex-wrap:nowrap !important}.flex-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-start{justify-content:flex-start !important}.justify-content-end{justify-content:flex-end !important}.justify-content-center{justify-content:center !important}.justify-content-between{justify-content:space-between !important}.justify-content-around{justify-content:space-around !important}.justify-content-evenly{justify-content:space-evenly !important}.align-items-start{align-items:flex-start !important}.align-items-end{align-items:flex-end !important}.align-items-center{align-items:center !important}.align-items-baseline{align-items:baseline !important}.align-items-stretch{align-items:stretch !important}.align-content-start{align-content:flex-start !important}.align-content-end{align-content:flex-end !important}.align-content-center{align-content:center !important}.align-content-between{align-content:space-between !important}.align-content-around{align-content:space-around !important}.align-content-stretch{align-content:stretch !important}.align-self-auto{align-self:auto !important}.align-self-start{align-self:flex-start !important}.align-self-end{align-self:flex-end !important}.align-self-center{align-self:center !important}.align-self-baseline{align-self:baseline !important}.align-self-stretch{align-self:stretch !important}.order-first{order:-1 !important}.order-0{order:0 !important}.order-1{order:1 !important}.order-2{order:2 !important}.order-3{order:3 !important}.order-4{order:4 !important}.order-5{order:5 !important}.order-last{order:6 !important}.m-0{margin:0 !important}.m-1{margin:.25rem !important}.m-2{margin:.5rem !important}.m-3{margin:1rem !important}.m-4{margin:1.5rem !important}.m-5{margin:3rem !important}.m-auto{margin:auto !important}.mx-0{margin-right:0 !important;margin-left:0 !important}.mx-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-3{margin-right:1rem !important;margin-left:1rem !important}.mx-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-5{margin-right:3rem !important;margin-left:3rem !important}.mx-auto{margin-right:auto !important;margin-left:auto !important}.my-0{margin-top:0 !important;margin-bottom:0 !important}.my-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-0{margin-top:0 !important}.mt-1{margin-top:.25rem !important}.mt-2{margin-top:.5rem !important}.mt-3{margin-top:1rem !important}.mt-4{margin-top:1.5rem !important}.mt-5{margin-top:3rem !important}.mt-auto{margin-top:auto !important}.me-0{margin-right:0 !important}.me-1{margin-right:.25rem !important}.me-2{margin-right:.5rem !important}.me-3{margin-right:1rem !important}.me-4{margin-right:1.5rem !important}.me-5{margin-right:3rem !important}.me-auto{margin-right:auto !important}.mb-0{margin-bottom:0 !important}.mb-1{margin-bottom:.25rem !important}.mb-2{margin-bottom:.5rem !important}.mb-3{margin-bottom:1rem !important}.mb-4{margin-bottom:1.5rem !important}.mb-5{margin-bottom:3rem !important}.mb-auto{margin-bottom:auto !important}.ms-0{margin-left:0 !important}.ms-1{margin-left:.25rem !important}.ms-2{margin-left:.5rem !important}.ms-3{margin-left:1rem !important}.ms-4{margin-left:1.5rem !important}.ms-5{margin-left:3rem !important}.ms-auto{margin-left:auto !important}.p-0{padding:0 !important}.p-1{padding:.25rem !important}.p-2{padding:.5rem !important}.p-3{padding:1rem !important}.p-4{padding:1.5rem !important}.p-5{padding:3rem !important}.px-0{padding-right:0 !important;padding-left:0 !important}.px-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-3{padding-right:1rem !important;padding-left:1rem !important}.px-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-5{padding-right:3rem !important;padding-left:3rem !important}.py-0{padding-top:0 !important;padding-bottom:0 !important}.py-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-0{padding-top:0 !important}.pt-1{padding-top:.25rem !important}.pt-2{padding-top:.5rem !important}.pt-3{padding-top:1rem !important}.pt-4{padding-top:1.5rem !important}.pt-5{padding-top:3rem !important}.pe-0{padding-right:0 !important}.pe-1{padding-right:.25rem !important}.pe-2{padding-right:.5rem !important}.pe-3{padding-right:1rem !important}.pe-4{padding-right:1.5rem !important}.pe-5{padding-right:3rem !important}.pb-0{padding-bottom:0 !important}.pb-1{padding-bottom:.25rem !important}.pb-2{padding-bottom:.5rem !important}.pb-3{padding-bottom:1rem !important}.pb-4{padding-bottom:1.5rem !important}.pb-5{padding-bottom:3rem !important}.ps-0{padding-left:0 !important}.ps-1{padding-left:.25rem !important}.ps-2{padding-left:.5rem !important}.ps-3{padding-left:1rem !important}.ps-4{padding-left:1.5rem !important}.ps-5{padding-left:3rem !important}.gap-0{gap:0 !important}.gap-1{gap:.25rem !important}.gap-2{gap:.5rem !important}.gap-3{gap:1rem !important}.gap-4{gap:1.5rem !important}.gap-5{gap:3rem !important}.font-monospace{font-family:var(--bs-font-monospace) !important}.fs-1{font-size:calc(1.425rem + 2.1vw) !important}.fs-2{font-size:calc(1.375rem + 1.5vw) !important}.fs-3{font-size:calc(1.325rem + 0.9vw) !important}.fs-4{font-size:calc(1.265625rem + 0.1875vw) !important}.fs-5{font-size:1.171875rem !important}.fs-6{font-size:0.9375rem !important}.fst-italic{font-style:italic !important}.fst-normal{font-style:normal !important}.fw-light{font-weight:300 !important}.fw-lighter{font-weight:lighter !important}.fw-normal{font-weight:400 !important}.fw-bold{font-weight:700 !important}.fw-semibold{font-weight:600 !important}.fw-bolder{font-weight:bolder !important}.lh-1{line-height:1 !important}.lh-sm{line-height:1.25 !important}.lh-base{line-height:1.5 !important}.lh-lg{line-height:2 !important}.text-start{text-align:left !important}.text-end{text-align:right !important}.text-center{text-align:center !important}.text-decoration-none{text-decoration:none !important}.text-decoration-underline{text-decoration:underline !important}.text-decoration-line-through{text-decoration:line-through !important}.text-lowercase{text-transform:lowercase !important}.text-uppercase{text-transform:uppercase !important}.text-capitalize{text-transform:capitalize !important}.text-wrap{white-space:normal !important}.text-nowrap{white-space:nowrap !important}.text-break{word-wrap:break-word !important;word-break:break-word !important}.text-primary{--bs-text-opacity: 1;color:rgba(var(--bs-primary-rgb), var(--bs-text-opacity)) !important}.text-secondary{--bs-text-opacity: 1;color:rgba(var(--bs-secondary-rgb), var(--bs-text-opacity)) !important}.text-success{--bs-text-opacity: 1;color:rgba(var(--bs-success-rgb), var(--bs-text-opacity)) !important}.text-info{--bs-text-opacity: 1;color:rgba(var(--bs-info-rgb), var(--bs-text-opacity)) !important}.text-warning{--bs-text-opacity: 1;color:rgba(var(--bs-warning-rgb), var(--bs-text-opacity)) !important}.text-danger{--bs-text-opacity: 1;color:rgba(var(--bs-danger-rgb), var(--bs-text-opacity)) !important}.text-light{--bs-text-opacity: 1;color:rgba(var(--bs-light-rgb), var(--bs-text-opacity)) !important}.text-dark{--bs-text-opacity: 1;color:rgba(var(--bs-dark-rgb), var(--bs-text-opacity)) !important}.text-black{--bs-text-opacity: 1;color:rgba(var(--bs-black-rgb), var(--bs-text-opacity)) !important}.text-white{--bs-text-opacity: 1;color:rgba(var(--bs-white-rgb), var(--bs-text-opacity)) !important}.text-body{--bs-text-opacity: 1;color:rgba(var(--bs-body-color-rgb), var(--bs-text-opacity)) !important}.text-muted{--bs-text-opacity: 1;color:#95a5a6 !important}.text-black-50{--bs-text-opacity: 1;color:rgba(0,0,0,.5) !important}.text-white-50{--bs-text-opacity: 1;color:rgba(255,255,255,.5) !important}.text-reset{--bs-text-opacity: 1;color:inherit !important}.text-opacity-25{--bs-text-opacity: 0.25}.text-opacity-50{--bs-text-opacity: 0.5}.text-opacity-75{--bs-text-opacity: 0.75}.text-opacity-100{--bs-text-opacity: 1}.bg-primary{--bs-bg-opacity: 1;background-color:rgba(var(--bs-primary-rgb), var(--bs-bg-opacity)) !important}.bg-secondary{--bs-bg-opacity: 1;background-color:rgba(var(--bs-secondary-rgb), var(--bs-bg-opacity)) !important}.bg-success{--bs-bg-opacity: 1;background-color:rgba(var(--bs-success-rgb), var(--bs-bg-opacity)) !important}.bg-info{--bs-bg-opacity: 1;background-color:rgba(var(--bs-info-rgb), var(--bs-bg-opacity)) !important}.bg-warning{--bs-bg-opacity: 1;background-color:rgba(var(--bs-warning-rgb), var(--bs-bg-opacity)) !important}.bg-danger{--bs-bg-opacity: 1;background-color:rgba(var(--bs-danger-rgb), var(--bs-bg-opacity)) !important}.bg-light{--bs-bg-opacity: 1;background-color:rgba(var(--bs-light-rgb), var(--bs-bg-opacity)) !important}.bg-dark{--bs-bg-opacity: 1;background-color:rgba(var(--bs-dark-rgb), var(--bs-bg-opacity)) !important}.bg-black{--bs-bg-opacity: 1;background-color:rgba(var(--bs-black-rgb), var(--bs-bg-opacity)) !important}.bg-white{--bs-bg-opacity: 1;background-color:rgba(var(--bs-white-rgb), var(--bs-bg-opacity)) !important}.bg-body{--bs-bg-opacity: 1;background-color:rgba(var(--bs-body-bg-rgb), var(--bs-bg-opacity)) !important}.bg-transparent{--bs-bg-opacity: 1;background-color:rgba(0,0,0,0) !important}.bg-opacity-10{--bs-bg-opacity: 0.1}.bg-opacity-25{--bs-bg-opacity: 0.25}.bg-opacity-50{--bs-bg-opacity: 0.5}.bg-opacity-75{--bs-bg-opacity: 0.75}.bg-opacity-100{--bs-bg-opacity: 1}.bg-gradient{background-image:var(--bs-gradient) !important}.user-select-all{-webkit-user-select:all !important;-moz-user-select:all !important;user-select:all !important}.user-select-auto{-webkit-user-select:auto !important;-moz-user-select:auto !important;user-select:auto !important}.user-select-none{-webkit-user-select:none !important;-moz-user-select:none !important;user-select:none !important}.pe-none{pointer-events:none !important}.pe-auto{pointer-events:auto !important}.rounded{border-radius:var(--bs-border-radius) !important}.rounded-0{border-radius:0 !important}.rounded-1{border-radius:var(--bs-border-radius-sm) !important}.rounded-2{border-radius:var(--bs-border-radius) !important}.rounded-3{border-radius:var(--bs-border-radius-lg) !important}.rounded-4{border-radius:var(--bs-border-radius-xl) !important}.rounded-5{border-radius:var(--bs-border-radius-2xl) !important}.rounded-circle{border-radius:50% !important}.rounded-pill{border-radius:var(--bs-border-radius-pill) !important}.rounded-top{border-top-left-radius:var(--bs-border-radius) !important;border-top-right-radius:var(--bs-border-radius) !important}.rounded-end{border-top-right-radius:var(--bs-border-radius) !important;border-bottom-right-radius:var(--bs-border-radius) !important}.rounded-bottom{border-bottom-right-radius:var(--bs-border-radius) !important;border-bottom-left-radius:var(--bs-border-radius) !important}.rounded-start{border-bottom-left-radius:var(--bs-border-radius) !important;border-top-left-radius:var(--bs-border-radius) !important}.visible{visibility:visible !important}.invisible{visibility:hidden !important}@media(min-width: 576px){.float-sm-start{float:left !important}.float-sm-end{float:right !important}.float-sm-none{float:none !important}.d-sm-inline{display:inline !important}.d-sm-inline-block{display:inline-block !important}.d-sm-block{display:block !important}.d-sm-grid{display:grid !important}.d-sm-table{display:table !important}.d-sm-table-row{display:table-row !important}.d-sm-table-cell{display:table-cell !important}.d-sm-flex{display:flex !important}.d-sm-inline-flex{display:inline-flex !important}.d-sm-none{display:none !important}.flex-sm-fill{flex:1 1 auto !important}.flex-sm-row{flex-direction:row !important}.flex-sm-column{flex-direction:column !important}.flex-sm-row-reverse{flex-direction:row-reverse !important}.flex-sm-column-reverse{flex-direction:column-reverse !important}.flex-sm-grow-0{flex-grow:0 !important}.flex-sm-grow-1{flex-grow:1 !important}.flex-sm-shrink-0{flex-shrink:0 !important}.flex-sm-shrink-1{flex-shrink:1 !important}.flex-sm-wrap{flex-wrap:wrap !important}.flex-sm-nowrap{flex-wrap:nowrap !important}.flex-sm-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-sm-start{justify-content:flex-start !important}.justify-content-sm-end{justify-content:flex-end !important}.justify-content-sm-center{justify-content:center !important}.justify-content-sm-between{justify-content:space-between !important}.justify-content-sm-around{justify-content:space-around !important}.justify-content-sm-evenly{justify-content:space-evenly !important}.align-items-sm-start{align-items:flex-start !important}.align-items-sm-end{align-items:flex-end !important}.align-items-sm-center{align-items:center !important}.align-items-sm-baseline{align-items:baseline !important}.align-items-sm-stretch{align-items:stretch !important}.align-content-sm-start{align-content:flex-start !important}.align-content-sm-end{align-content:flex-end !important}.align-content-sm-center{align-content:center !important}.align-content-sm-between{align-content:space-between !important}.align-content-sm-around{align-content:space-around !important}.align-content-sm-stretch{align-content:stretch !important}.align-self-sm-auto{align-self:auto !important}.align-self-sm-start{align-self:flex-start !important}.align-self-sm-end{align-self:flex-end !important}.align-self-sm-center{align-self:center !important}.align-self-sm-baseline{align-self:baseline !important}.align-self-sm-stretch{align-self:stretch !important}.order-sm-first{order:-1 !important}.order-sm-0{order:0 !important}.order-sm-1{order:1 !important}.order-sm-2{order:2 !important}.order-sm-3{order:3 !important}.order-sm-4{order:4 !important}.order-sm-5{order:5 !important}.order-sm-last{order:6 !important}.m-sm-0{margin:0 !important}.m-sm-1{margin:.25rem !important}.m-sm-2{margin:.5rem !important}.m-sm-3{margin:1rem !important}.m-sm-4{margin:1.5rem !important}.m-sm-5{margin:3rem !important}.m-sm-auto{margin:auto !important}.mx-sm-0{margin-right:0 !important;margin-left:0 !important}.mx-sm-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-sm-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-sm-3{margin-right:1rem !important;margin-left:1rem !important}.mx-sm-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-sm-5{margin-right:3rem !important;margin-left:3rem !important}.mx-sm-auto{margin-right:auto !important;margin-left:auto !important}.my-sm-0{margin-top:0 !important;margin-bottom:0 !important}.my-sm-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-sm-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-sm-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-sm-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-sm-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-sm-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-sm-0{margin-top:0 !important}.mt-sm-1{margin-top:.25rem !important}.mt-sm-2{margin-top:.5rem !important}.mt-sm-3{margin-top:1rem !important}.mt-sm-4{margin-top:1.5rem !important}.mt-sm-5{margin-top:3rem !important}.mt-sm-auto{margin-top:auto !important}.me-sm-0{margin-right:0 !important}.me-sm-1{margin-right:.25rem !important}.me-sm-2{margin-right:.5rem !important}.me-sm-3{margin-right:1rem !important}.me-sm-4{margin-right:1.5rem !important}.me-sm-5{margin-right:3rem !important}.me-sm-auto{margin-right:auto !important}.mb-sm-0{margin-bottom:0 !important}.mb-sm-1{margin-bottom:.25rem !important}.mb-sm-2{margin-bottom:.5rem !important}.mb-sm-3{margin-bottom:1rem !important}.mb-sm-4{margin-bottom:1.5rem !important}.mb-sm-5{margin-bottom:3rem !important}.mb-sm-auto{margin-bottom:auto !important}.ms-sm-0{margin-left:0 !important}.ms-sm-1{margin-left:.25rem !important}.ms-sm-2{margin-left:.5rem !important}.ms-sm-3{margin-left:1rem !important}.ms-sm-4{margin-left:1.5rem !important}.ms-sm-5{margin-left:3rem !important}.ms-sm-auto{margin-left:auto !important}.p-sm-0{padding:0 !important}.p-sm-1{padding:.25rem !important}.p-sm-2{padding:.5rem !important}.p-sm-3{padding:1rem !important}.p-sm-4{padding:1.5rem !important}.p-sm-5{padding:3rem !important}.px-sm-0{padding-right:0 !important;padding-left:0 !important}.px-sm-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-sm-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-sm-3{padding-right:1rem !important;padding-left:1rem !important}.px-sm-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-sm-5{padding-right:3rem !important;padding-left:3rem !important}.py-sm-0{padding-top:0 !important;padding-bottom:0 !important}.py-sm-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-sm-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-sm-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-sm-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-sm-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-sm-0{padding-top:0 !important}.pt-sm-1{padding-top:.25rem !important}.pt-sm-2{padding-top:.5rem !important}.pt-sm-3{padding-top:1rem !important}.pt-sm-4{padding-top:1.5rem !important}.pt-sm-5{padding-top:3rem !important}.pe-sm-0{padding-right:0 !important}.pe-sm-1{padding-right:.25rem !important}.pe-sm-2{padding-right:.5rem !important}.pe-sm-3{padding-right:1rem !important}.pe-sm-4{padding-right:1.5rem !important}.pe-sm-5{padding-right:3rem !important}.pb-sm-0{padding-bottom:0 !important}.pb-sm-1{padding-bottom:.25rem !important}.pb-sm-2{padding-bottom:.5rem !important}.pb-sm-3{padding-bottom:1rem !important}.pb-sm-4{padding-bottom:1.5rem !important}.pb-sm-5{padding-bottom:3rem !important}.ps-sm-0{padding-left:0 !important}.ps-sm-1{padding-left:.25rem !important}.ps-sm-2{padding-left:.5rem !important}.ps-sm-3{padding-left:1rem !important}.ps-sm-4{padding-left:1.5rem !important}.ps-sm-5{padding-left:3rem !important}.gap-sm-0{gap:0 !important}.gap-sm-1{gap:.25rem !important}.gap-sm-2{gap:.5rem !important}.gap-sm-3{gap:1rem !important}.gap-sm-4{gap:1.5rem !important}.gap-sm-5{gap:3rem !important}.text-sm-start{text-align:left !important}.text-sm-end{text-align:right !important}.text-sm-center{text-align:center !important}}@media(min-width: 768px){.float-md-start{float:left !important}.float-md-end{float:right !important}.float-md-none{float:none !important}.d-md-inline{display:inline !important}.d-md-inline-block{display:inline-block !important}.d-md-block{display:block !important}.d-md-grid{display:grid !important}.d-md-table{display:table !important}.d-md-table-row{display:table-row !important}.d-md-table-cell{display:table-cell !important}.d-md-flex{display:flex !important}.d-md-inline-flex{display:inline-flex !important}.d-md-none{display:none !important}.flex-md-fill{flex:1 1 auto !important}.flex-md-row{flex-direction:row !important}.flex-md-column{flex-direction:column !important}.flex-md-row-reverse{flex-direction:row-reverse !important}.flex-md-column-reverse{flex-direction:column-reverse !important}.flex-md-grow-0{flex-grow:0 !important}.flex-md-grow-1{flex-grow:1 !important}.flex-md-shrink-0{flex-shrink:0 !important}.flex-md-shrink-1{flex-shrink:1 !important}.flex-md-wrap{flex-wrap:wrap !important}.flex-md-nowrap{flex-wrap:nowrap !important}.flex-md-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-md-start{justify-content:flex-start !important}.justify-content-md-end{justify-content:flex-end !important}.justify-content-md-center{justify-content:center !important}.justify-content-md-between{justify-content:space-between !important}.justify-content-md-around{justify-content:space-around !important}.justify-content-md-evenly{justify-content:space-evenly !important}.align-items-md-start{align-items:flex-start !important}.align-items-md-end{align-items:flex-end !important}.align-items-md-center{align-items:center !important}.align-items-md-baseline{align-items:baseline !important}.align-items-md-stretch{align-items:stretch !important}.align-content-md-start{align-content:flex-start !important}.align-content-md-end{align-content:flex-end !important}.align-content-md-center{align-content:center !important}.align-content-md-between{align-content:space-between !important}.align-content-md-around{align-content:space-around !important}.align-content-md-stretch{align-content:stretch !important}.align-self-md-auto{align-self:auto !important}.align-self-md-start{align-self:flex-start !important}.align-self-md-end{align-self:flex-end !important}.align-self-md-center{align-self:center !important}.align-self-md-baseline{align-self:baseline !important}.align-self-md-stretch{align-self:stretch !important}.order-md-first{order:-1 !important}.order-md-0{order:0 !important}.order-md-1{order:1 !important}.order-md-2{order:2 !important}.order-md-3{order:3 !important}.order-md-4{order:4 !important}.order-md-5{order:5 !important}.order-md-last{order:6 !important}.m-md-0{margin:0 !important}.m-md-1{margin:.25rem !important}.m-md-2{margin:.5rem !important}.m-md-3{margin:1rem !important}.m-md-4{margin:1.5rem !important}.m-md-5{margin:3rem !important}.m-md-auto{margin:auto !important}.mx-md-0{margin-right:0 !important;margin-left:0 !important}.mx-md-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-md-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-md-3{margin-right:1rem !important;margin-left:1rem !important}.mx-md-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-md-5{margin-right:3rem !important;margin-left:3rem !important}.mx-md-auto{margin-right:auto !important;margin-left:auto !important}.my-md-0{margin-top:0 !important;margin-bottom:0 !important}.my-md-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-md-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-md-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-md-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-md-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-md-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-md-0{margin-top:0 !important}.mt-md-1{margin-top:.25rem !important}.mt-md-2{margin-top:.5rem !important}.mt-md-3{margin-top:1rem !important}.mt-md-4{margin-top:1.5rem !important}.mt-md-5{margin-top:3rem !important}.mt-md-auto{margin-top:auto !important}.me-md-0{margin-right:0 !important}.me-md-1{margin-right:.25rem !important}.me-md-2{margin-right:.5rem !important}.me-md-3{margin-right:1rem !important}.me-md-4{margin-right:1.5rem !important}.me-md-5{margin-right:3rem !important}.me-md-auto{margin-right:auto !important}.mb-md-0{margin-bottom:0 !important}.mb-md-1{margin-bottom:.25rem !important}.mb-md-2{margin-bottom:.5rem !important}.mb-md-3{margin-bottom:1rem !important}.mb-md-4{margin-bottom:1.5rem !important}.mb-md-5{margin-bottom:3rem !important}.mb-md-auto{margin-bottom:auto !important}.ms-md-0{margin-left:0 !important}.ms-md-1{margin-left:.25rem !important}.ms-md-2{margin-left:.5rem !important}.ms-md-3{margin-left:1rem !important}.ms-md-4{margin-left:1.5rem !important}.ms-md-5{margin-left:3rem !important}.ms-md-auto{margin-left:auto !important}.p-md-0{padding:0 !important}.p-md-1{padding:.25rem !important}.p-md-2{padding:.5rem !important}.p-md-3{padding:1rem !important}.p-md-4{padding:1.5rem !important}.p-md-5{padding:3rem !important}.px-md-0{padding-right:0 !important;padding-left:0 !important}.px-md-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-md-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-md-3{padding-right:1rem !important;padding-left:1rem !important}.px-md-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-md-5{padding-right:3rem !important;padding-left:3rem !important}.py-md-0{padding-top:0 !important;padding-bottom:0 !important}.py-md-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-md-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-md-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-md-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-md-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-md-0{padding-top:0 !important}.pt-md-1{padding-top:.25rem !important}.pt-md-2{padding-top:.5rem !important}.pt-md-3{padding-top:1rem !important}.pt-md-4{padding-top:1.5rem !important}.pt-md-5{padding-top:3rem !important}.pe-md-0{padding-right:0 !important}.pe-md-1{padding-right:.25rem !important}.pe-md-2{padding-right:.5rem !important}.pe-md-3{padding-right:1rem !important}.pe-md-4{padding-right:1.5rem !important}.pe-md-5{padding-right:3rem !important}.pb-md-0{padding-bottom:0 !important}.pb-md-1{padding-bottom:.25rem !important}.pb-md-2{padding-bottom:.5rem !important}.pb-md-3{padding-bottom:1rem !important}.pb-md-4{padding-bottom:1.5rem !important}.pb-md-5{padding-bottom:3rem !important}.ps-md-0{padding-left:0 !important}.ps-md-1{padding-left:.25rem !important}.ps-md-2{padding-left:.5rem !important}.ps-md-3{padding-left:1rem !important}.ps-md-4{padding-left:1.5rem !important}.ps-md-5{padding-left:3rem !important}.gap-md-0{gap:0 !important}.gap-md-1{gap:.25rem !important}.gap-md-2{gap:.5rem !important}.gap-md-3{gap:1rem !important}.gap-md-4{gap:1.5rem !important}.gap-md-5{gap:3rem !important}.text-md-start{text-align:left !important}.text-md-end{text-align:right !important}.text-md-center{text-align:center !important}}@media(min-width: 992px){.float-lg-start{float:left !important}.float-lg-end{float:right !important}.float-lg-none{float:none !important}.d-lg-inline{display:inline !important}.d-lg-inline-block{display:inline-block !important}.d-lg-block{display:block !important}.d-lg-grid{display:grid !important}.d-lg-table{display:table !important}.d-lg-table-row{display:table-row !important}.d-lg-table-cell{display:table-cell !important}.d-lg-flex{display:flex !important}.d-lg-inline-flex{display:inline-flex !important}.d-lg-none{display:none !important}.flex-lg-fill{flex:1 1 auto !important}.flex-lg-row{flex-direction:row !important}.flex-lg-column{flex-direction:column !important}.flex-lg-row-reverse{flex-direction:row-reverse !important}.flex-lg-column-reverse{flex-direction:column-reverse !important}.flex-lg-grow-0{flex-grow:0 !important}.flex-lg-grow-1{flex-grow:1 !important}.flex-lg-shrink-0{flex-shrink:0 !important}.flex-lg-shrink-1{flex-shrink:1 !important}.flex-lg-wrap{flex-wrap:wrap !important}.flex-lg-nowrap{flex-wrap:nowrap !important}.flex-lg-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-lg-start{justify-content:flex-start !important}.justify-content-lg-end{justify-content:flex-end !important}.justify-content-lg-center{justify-content:center !important}.justify-content-lg-between{justify-content:space-between !important}.justify-content-lg-around{justify-content:space-around !important}.justify-content-lg-evenly{justify-content:space-evenly !important}.align-items-lg-start{align-items:flex-start !important}.align-items-lg-end{align-items:flex-end !important}.align-items-lg-center{align-items:center !important}.align-items-lg-baseline{align-items:baseline !important}.align-items-lg-stretch{align-items:stretch !important}.align-content-lg-start{align-content:flex-start !important}.align-content-lg-end{align-content:flex-end !important}.align-content-lg-center{align-content:center !important}.align-content-lg-between{align-content:space-between !important}.align-content-lg-around{align-content:space-around !important}.align-content-lg-stretch{align-content:stretch !important}.align-self-lg-auto{align-self:auto !important}.align-self-lg-start{align-self:flex-start !important}.align-self-lg-end{align-self:flex-end !important}.align-self-lg-center{align-self:center !important}.align-self-lg-baseline{align-self:baseline !important}.align-self-lg-stretch{align-self:stretch !important}.order-lg-first{order:-1 !important}.order-lg-0{order:0 !important}.order-lg-1{order:1 !important}.order-lg-2{order:2 !important}.order-lg-3{order:3 !important}.order-lg-4{order:4 !important}.order-lg-5{order:5 !important}.order-lg-last{order:6 !important}.m-lg-0{margin:0 !important}.m-lg-1{margin:.25rem !important}.m-lg-2{margin:.5rem !important}.m-lg-3{margin:1rem !important}.m-lg-4{margin:1.5rem !important}.m-lg-5{margin:3rem !important}.m-lg-auto{margin:auto !important}.mx-lg-0{margin-right:0 !important;margin-left:0 !important}.mx-lg-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-lg-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-lg-3{margin-right:1rem !important;margin-left:1rem !important}.mx-lg-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-lg-5{margin-right:3rem !important;margin-left:3rem !important}.mx-lg-auto{margin-right:auto !important;margin-left:auto !important}.my-lg-0{margin-top:0 !important;margin-bottom:0 !important}.my-lg-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-lg-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-lg-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-lg-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-lg-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-lg-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-lg-0{margin-top:0 !important}.mt-lg-1{margin-top:.25rem !important}.mt-lg-2{margin-top:.5rem !important}.mt-lg-3{margin-top:1rem !important}.mt-lg-4{margin-top:1.5rem !important}.mt-lg-5{margin-top:3rem !important}.mt-lg-auto{margin-top:auto !important}.me-lg-0{margin-right:0 !important}.me-lg-1{margin-right:.25rem !important}.me-lg-2{margin-right:.5rem !important}.me-lg-3{margin-right:1rem !important}.me-lg-4{margin-right:1.5rem !important}.me-lg-5{margin-right:3rem !important}.me-lg-auto{margin-right:auto !important}.mb-lg-0{margin-bottom:0 !important}.mb-lg-1{margin-bottom:.25rem !important}.mb-lg-2{margin-bottom:.5rem !important}.mb-lg-3{margin-bottom:1rem !important}.mb-lg-4{margin-bottom:1.5rem !important}.mb-lg-5{margin-bottom:3rem !important}.mb-lg-auto{margin-bottom:auto !important}.ms-lg-0{margin-left:0 !important}.ms-lg-1{margin-left:.25rem !important}.ms-lg-2{margin-left:.5rem !important}.ms-lg-3{margin-left:1rem !important}.ms-lg-4{margin-left:1.5rem !important}.ms-lg-5{margin-left:3rem !important}.ms-lg-auto{margin-left:auto !important}.p-lg-0{padding:0 !important}.p-lg-1{padding:.25rem !important}.p-lg-2{padding:.5rem !important}.p-lg-3{padding:1rem !important}.p-lg-4{padding:1.5rem !important}.p-lg-5{padding:3rem !important}.px-lg-0{padding-right:0 !important;padding-left:0 !important}.px-lg-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-lg-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-lg-3{padding-right:1rem !important;padding-left:1rem !important}.px-lg-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-lg-5{padding-right:3rem !important;padding-left:3rem !important}.py-lg-0{padding-top:0 !important;padding-bottom:0 !important}.py-lg-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-lg-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-lg-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-lg-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-lg-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-lg-0{padding-top:0 !important}.pt-lg-1{padding-top:.25rem !important}.pt-lg-2{padding-top:.5rem !important}.pt-lg-3{padding-top:1rem !important}.pt-lg-4{padding-top:1.5rem !important}.pt-lg-5{padding-top:3rem !important}.pe-lg-0{padding-right:0 !important}.pe-lg-1{padding-right:.25rem !important}.pe-lg-2{padding-right:.5rem !important}.pe-lg-3{padding-right:1rem !important}.pe-lg-4{padding-right:1.5rem !important}.pe-lg-5{padding-right:3rem !important}.pb-lg-0{padding-bottom:0 !important}.pb-lg-1{padding-bottom:.25rem !important}.pb-lg-2{padding-bottom:.5rem !important}.pb-lg-3{padding-bottom:1rem !important}.pb-lg-4{padding-bottom:1.5rem !important}.pb-lg-5{padding-bottom:3rem !important}.ps-lg-0{padding-left:0 !important}.ps-lg-1{padding-left:.25rem !important}.ps-lg-2{padding-left:.5rem !important}.ps-lg-3{padding-left:1rem !important}.ps-lg-4{padding-left:1.5rem !important}.ps-lg-5{padding-left:3rem !important}.gap-lg-0{gap:0 !important}.gap-lg-1{gap:.25rem !important}.gap-lg-2{gap:.5rem !important}.gap-lg-3{gap:1rem !important}.gap-lg-4{gap:1.5rem !important}.gap-lg-5{gap:3rem !important}.text-lg-start{text-align:left !important}.text-lg-end{text-align:right !important}.text-lg-center{text-align:center !important}}@media(min-width: 1200px){.float-xl-start{float:left !important}.float-xl-end{float:right !important}.float-xl-none{float:none !important}.d-xl-inline{display:inline !important}.d-xl-inline-block{display:inline-block !important}.d-xl-block{display:block !important}.d-xl-grid{display:grid !important}.d-xl-table{display:table !important}.d-xl-table-row{display:table-row !important}.d-xl-table-cell{display:table-cell !important}.d-xl-flex{display:flex !important}.d-xl-inline-flex{display:inline-flex !important}.d-xl-none{display:none !important}.flex-xl-fill{flex:1 1 auto !important}.flex-xl-row{flex-direction:row !important}.flex-xl-column{flex-direction:column !important}.flex-xl-row-reverse{flex-direction:row-reverse !important}.flex-xl-column-reverse{flex-direction:column-reverse !important}.flex-xl-grow-0{flex-grow:0 !important}.flex-xl-grow-1{flex-grow:1 !important}.flex-xl-shrink-0{flex-shrink:0 !important}.flex-xl-shrink-1{flex-shrink:1 !important}.flex-xl-wrap{flex-wrap:wrap !important}.flex-xl-nowrap{flex-wrap:nowrap !important}.flex-xl-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-xl-start{justify-content:flex-start !important}.justify-content-xl-end{justify-content:flex-end !important}.justify-content-xl-center{justify-content:center !important}.justify-content-xl-between{justify-content:space-between !important}.justify-content-xl-around{justify-content:space-around !important}.justify-content-xl-evenly{justify-content:space-evenly !important}.align-items-xl-start{align-items:flex-start !important}.align-items-xl-end{align-items:flex-end !important}.align-items-xl-center{align-items:center !important}.align-items-xl-baseline{align-items:baseline !important}.align-items-xl-stretch{align-items:stretch !important}.align-content-xl-start{align-content:flex-start !important}.align-content-xl-end{align-content:flex-end !important}.align-content-xl-center{align-content:center !important}.align-content-xl-between{align-content:space-between !important}.align-content-xl-around{align-content:space-around !important}.align-content-xl-stretch{align-content:stretch !important}.align-self-xl-auto{align-self:auto !important}.align-self-xl-start{align-self:flex-start !important}.align-self-xl-end{align-self:flex-end !important}.align-self-xl-center{align-self:center !important}.align-self-xl-baseline{align-self:baseline !important}.align-self-xl-stretch{align-self:stretch !important}.order-xl-first{order:-1 !important}.order-xl-0{order:0 !important}.order-xl-1{order:1 !important}.order-xl-2{order:2 !important}.order-xl-3{order:3 !important}.order-xl-4{order:4 !important}.order-xl-5{order:5 !important}.order-xl-last{order:6 !important}.m-xl-0{margin:0 !important}.m-xl-1{margin:.25rem !important}.m-xl-2{margin:.5rem !important}.m-xl-3{margin:1rem !important}.m-xl-4{margin:1.5rem !important}.m-xl-5{margin:3rem !important}.m-xl-auto{margin:auto !important}.mx-xl-0{margin-right:0 !important;margin-left:0 !important}.mx-xl-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-xl-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-xl-3{margin-right:1rem !important;margin-left:1rem !important}.mx-xl-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-xl-5{margin-right:3rem !important;margin-left:3rem !important}.mx-xl-auto{margin-right:auto !important;margin-left:auto !important}.my-xl-0{margin-top:0 !important;margin-bottom:0 !important}.my-xl-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-xl-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-xl-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-xl-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-xl-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-xl-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-xl-0{margin-top:0 !important}.mt-xl-1{margin-top:.25rem !important}.mt-xl-2{margin-top:.5rem !important}.mt-xl-3{margin-top:1rem !important}.mt-xl-4{margin-top:1.5rem !important}.mt-xl-5{margin-top:3rem !important}.mt-xl-auto{margin-top:auto !important}.me-xl-0{margin-right:0 !important}.me-xl-1{margin-right:.25rem !important}.me-xl-2{margin-right:.5rem !important}.me-xl-3{margin-right:1rem !important}.me-xl-4{margin-right:1.5rem !important}.me-xl-5{margin-right:3rem !important}.me-xl-auto{margin-right:auto !important}.mb-xl-0{margin-bottom:0 !important}.mb-xl-1{margin-bottom:.25rem !important}.mb-xl-2{margin-bottom:.5rem !important}.mb-xl-3{margin-bottom:1rem !important}.mb-xl-4{margin-bottom:1.5rem !important}.mb-xl-5{margin-bottom:3rem !important}.mb-xl-auto{margin-bottom:auto !important}.ms-xl-0{margin-left:0 !important}.ms-xl-1{margin-left:.25rem !important}.ms-xl-2{margin-left:.5rem !important}.ms-xl-3{margin-left:1rem !important}.ms-xl-4{margin-left:1.5rem !important}.ms-xl-5{margin-left:3rem !important}.ms-xl-auto{margin-left:auto !important}.p-xl-0{padding:0 !important}.p-xl-1{padding:.25rem !important}.p-xl-2{padding:.5rem !important}.p-xl-3{padding:1rem !important}.p-xl-4{padding:1.5rem !important}.p-xl-5{padding:3rem !important}.px-xl-0{padding-right:0 !important;padding-left:0 !important}.px-xl-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-xl-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-xl-3{padding-right:1rem !important;padding-left:1rem !important}.px-xl-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-xl-5{padding-right:3rem !important;padding-left:3rem !important}.py-xl-0{padding-top:0 !important;padding-bottom:0 !important}.py-xl-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-xl-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-xl-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-xl-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-xl-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-xl-0{padding-top:0 !important}.pt-xl-1{padding-top:.25rem !important}.pt-xl-2{padding-top:.5rem !important}.pt-xl-3{padding-top:1rem !important}.pt-xl-4{padding-top:1.5rem !important}.pt-xl-5{padding-top:3rem !important}.pe-xl-0{padding-right:0 !important}.pe-xl-1{padding-right:.25rem !important}.pe-xl-2{padding-right:.5rem !important}.pe-xl-3{padding-right:1rem !important}.pe-xl-4{padding-right:1.5rem !important}.pe-xl-5{padding-right:3rem !important}.pb-xl-0{padding-bottom:0 !important}.pb-xl-1{padding-bottom:.25rem !important}.pb-xl-2{padding-bottom:.5rem !important}.pb-xl-3{padding-bottom:1rem !important}.pb-xl-4{padding-bottom:1.5rem !important}.pb-xl-5{padding-bottom:3rem !important}.ps-xl-0{padding-left:0 !important}.ps-xl-1{padding-left:.25rem !important}.ps-xl-2{padding-left:.5rem !important}.ps-xl-3{padding-left:1rem !important}.ps-xl-4{padding-left:1.5rem !important}.ps-xl-5{padding-left:3rem !important}.gap-xl-0{gap:0 !important}.gap-xl-1{gap:.25rem !important}.gap-xl-2{gap:.5rem !important}.gap-xl-3{gap:1rem !important}.gap-xl-4{gap:1.5rem !important}.gap-xl-5{gap:3rem !important}.text-xl-start{text-align:left !important}.text-xl-end{text-align:right !important}.text-xl-center{text-align:center !important}}@media(min-width: 1400px){.float-xxl-start{float:left !important}.float-xxl-end{float:right !important}.float-xxl-none{float:none !important}.d-xxl-inline{display:inline !important}.d-xxl-inline-block{display:inline-block !important}.d-xxl-block{display:block !important}.d-xxl-grid{display:grid !important}.d-xxl-table{display:table !important}.d-xxl-table-row{display:table-row !important}.d-xxl-table-cell{display:table-cell !important}.d-xxl-flex{display:flex !important}.d-xxl-inline-flex{display:inline-flex !important}.d-xxl-none{display:none !important}.flex-xxl-fill{flex:1 1 auto !important}.flex-xxl-row{flex-direction:row !important}.flex-xxl-column{flex-direction:column !important}.flex-xxl-row-reverse{flex-direction:row-reverse !important}.flex-xxl-column-reverse{flex-direction:column-reverse !important}.flex-xxl-grow-0{flex-grow:0 !important}.flex-xxl-grow-1{flex-grow:1 !important}.flex-xxl-shrink-0{flex-shrink:0 !important}.flex-xxl-shrink-1{flex-shrink:1 !important}.flex-xxl-wrap{flex-wrap:wrap !important}.flex-xxl-nowrap{flex-wrap:nowrap !important}.flex-xxl-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-xxl-start{justify-content:flex-start !important}.justify-content-xxl-end{justify-content:flex-end !important}.justify-content-xxl-center{justify-content:center !important}.justify-content-xxl-between{justify-content:space-between !important}.justify-content-xxl-around{justify-content:space-around !important}.justify-content-xxl-evenly{justify-content:space-evenly !important}.align-items-xxl-start{align-items:flex-start !important}.align-items-xxl-end{align-items:flex-end !important}.align-items-xxl-center{align-items:center !important}.align-items-xxl-baseline{align-items:baseline !important}.align-items-xxl-stretch{align-items:stretch !important}.align-content-xxl-start{align-content:flex-start !important}.align-content-xxl-end{align-content:flex-end !important}.align-content-xxl-center{align-content:center !important}.align-content-xxl-between{align-content:space-between !important}.align-content-xxl-around{align-content:space-around !important}.align-content-xxl-stretch{align-content:stretch !important}.align-self-xxl-auto{align-self:auto !important}.align-self-xxl-start{align-self:flex-start !important}.align-self-xxl-end{align-self:flex-end !important}.align-self-xxl-center{align-self:center !important}.align-self-xxl-baseline{align-self:baseline !important}.align-self-xxl-stretch{align-self:stretch !important}.order-xxl-first{order:-1 !important}.order-xxl-0{order:0 !important}.order-xxl-1{order:1 !important}.order-xxl-2{order:2 !important}.order-xxl-3{order:3 !important}.order-xxl-4{order:4 !important}.order-xxl-5{order:5 !important}.order-xxl-last{order:6 !important}.m-xxl-0{margin:0 !important}.m-xxl-1{margin:.25rem !important}.m-xxl-2{margin:.5rem !important}.m-xxl-3{margin:1rem !important}.m-xxl-4{margin:1.5rem !important}.m-xxl-5{margin:3rem !important}.m-xxl-auto{margin:auto !important}.mx-xxl-0{margin-right:0 !important;margin-left:0 !important}.mx-xxl-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-xxl-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-xxl-3{margin-right:1rem !important;margin-left:1rem !important}.mx-xxl-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-xxl-5{margin-right:3rem !important;margin-left:3rem !important}.mx-xxl-auto{margin-right:auto !important;margin-left:auto !important}.my-xxl-0{margin-top:0 !important;margin-bottom:0 !important}.my-xxl-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-xxl-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-xxl-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-xxl-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-xxl-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-xxl-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-xxl-0{margin-top:0 !important}.mt-xxl-1{margin-top:.25rem !important}.mt-xxl-2{margin-top:.5rem !important}.mt-xxl-3{margin-top:1rem !important}.mt-xxl-4{margin-top:1.5rem !important}.mt-xxl-5{margin-top:3rem !important}.mt-xxl-auto{margin-top:auto !important}.me-xxl-0{margin-right:0 !important}.me-xxl-1{margin-right:.25rem !important}.me-xxl-2{margin-right:.5rem !important}.me-xxl-3{margin-right:1rem !important}.me-xxl-4{margin-right:1.5rem !important}.me-xxl-5{margin-right:3rem !important}.me-xxl-auto{margin-right:auto !important}.mb-xxl-0{margin-bottom:0 !important}.mb-xxl-1{margin-bottom:.25rem !important}.mb-xxl-2{margin-bottom:.5rem !important}.mb-xxl-3{margin-bottom:1rem !important}.mb-xxl-4{margin-bottom:1.5rem !important}.mb-xxl-5{margin-bottom:3rem !important}.mb-xxl-auto{margin-bottom:auto !important}.ms-xxl-0{margin-left:0 !important}.ms-xxl-1{margin-left:.25rem !important}.ms-xxl-2{margin-left:.5rem !important}.ms-xxl-3{margin-left:1rem !important}.ms-xxl-4{margin-left:1.5rem !important}.ms-xxl-5{margin-left:3rem !important}.ms-xxl-auto{margin-left:auto !important}.p-xxl-0{padding:0 !important}.p-xxl-1{padding:.25rem !important}.p-xxl-2{padding:.5rem !important}.p-xxl-3{padding:1rem !important}.p-xxl-4{padding:1.5rem !important}.p-xxl-5{padding:3rem !important}.px-xxl-0{padding-right:0 !important;padding-left:0 !important}.px-xxl-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-xxl-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-xxl-3{padding-right:1rem !important;padding-left:1rem !important}.px-xxl-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-xxl-5{padding-right:3rem !important;padding-left:3rem !important}.py-xxl-0{padding-top:0 !important;padding-bottom:0 !important}.py-xxl-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-xxl-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-xxl-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-xxl-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-xxl-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-xxl-0{padding-top:0 !important}.pt-xxl-1{padding-top:.25rem !important}.pt-xxl-2{padding-top:.5rem !important}.pt-xxl-3{padding-top:1rem !important}.pt-xxl-4{padding-top:1.5rem !important}.pt-xxl-5{padding-top:3rem !important}.pe-xxl-0{padding-right:0 !important}.pe-xxl-1{padding-right:.25rem !important}.pe-xxl-2{padding-right:.5rem !important}.pe-xxl-3{padding-right:1rem !important}.pe-xxl-4{padding-right:1.5rem !important}.pe-xxl-5{padding-right:3rem !important}.pb-xxl-0{padding-bottom:0 !important}.pb-xxl-1{padding-bottom:.25rem !important}.pb-xxl-2{padding-bottom:.5rem !important}.pb-xxl-3{padding-bottom:1rem !important}.pb-xxl-4{padding-bottom:1.5rem !important}.pb-xxl-5{padding-bottom:3rem !important}.ps-xxl-0{padding-left:0 !important}.ps-xxl-1{padding-left:.25rem !important}.ps-xxl-2{padding-left:.5rem !important}.ps-xxl-3{padding-left:1rem !important}.ps-xxl-4{padding-left:1.5rem !important}.ps-xxl-5{padding-left:3rem !important}.gap-xxl-0{gap:0 !important}.gap-xxl-1{gap:.25rem !important}.gap-xxl-2{gap:.5rem !important}.gap-xxl-3{gap:1rem !important}.gap-xxl-4{gap:1.5rem !important}.gap-xxl-5{gap:3rem !important}.text-xxl-start{text-align:left !important}.text-xxl-end{text-align:right !important}.text-xxl-center{text-align:center !important}}@media(min-width: 1200px){.fs-1{font-size:3rem !important}.fs-2{font-size:2.5rem !important}.fs-3{font-size:2rem !important}.fs-4{font-size:1.40625rem !important}}@media print{.d-print-inline{display:inline !important}.d-print-inline-block{display:inline-block !important}.d-print-block{display:block !important}.d-print-grid{display:grid !important}.d-print-table{display:table !important}.d-print-table-row{display:table-row !important}.d-print-table-cell{display:table-cell !important}.d-print-flex{display:flex !important}.d-print-inline-flex{display:inline-flex !important}.d-print-none{display:none !important}}.bg-primary .navbar-nav .active>.nav-link{color:#18bc9c !important}.bg-dark{background-color:#18bc9c !important}.bg-dark.navbar-dark .navbar-nav .nav-link:focus,.bg-dark.navbar-dark .navbar-nav .nav-link:hover,.bg-dark.navbar-dark .navbar-nav .active>.nav-link{color:#2c3e50 !important}.btn-success,.btn-success:hover,.btn-success:focus,.btn-secondary,.btn-secondary:hover,.btn-secondary:focus,.btn-warning,.btn-warning:hover,.btn-warning:focus{color:#fff}.btn-check:checked+.btn-success,.btn-check:checked+.btn-success:hover,.btn-check:checked+.btn-success:checked,.btn-check:checked+.btn-secondary,.btn-check:checked+.btn-secondary:hover,.btn-check:checked+.btn-secondary:checked,.btn-check:checked+.btn-warning,.btn-check:checked+.btn-warning:hover,.btn-check:checked+.btn-warning:checked{color:#fff}.table-primary,.table-secondary,.table-success,.table-info,.table-warning,.table-danger{color:#fff}.table-primary,.table-primary>th,.table-primary>td{background-color:#2c3e50}.table-secondary,.table-secondary>th,.table-secondary>td{background-color:#95a5a6}.table-light,.table-light>th,.table-light>td{background-color:#ecf0f1}.table-dark,.table-dark>th,.table-dark>td{background-color:#7b8a8b}.table-success,.table-success>th,.table-success>td{background-color:#18bc9c}.table-info,.table-info>th,.table-info>td{background-color:#3498db}.table-danger,.table-danger>th,.table-danger>td{background-color:#e74c3c}.table-warning,.table-warning>th,.table-warning>td{background-color:#f39c12}.table-active,.table-active>th,.table-active>td{background-color:rgba(0,0,0,.1)}.table-hover .table-primary:hover,.table-hover .table-primary:hover>th,.table-hover .table-primary:hover>td{background-color:#233140}.table-hover .table-secondary:hover,.table-hover .table-secondary:hover>th,.table-hover .table-secondary:hover>td{background-color:#87999a}.table-hover .table-light:hover,.table-hover .table-light:hover>th,.table-hover .table-light:hover>td{background-color:#dde4e6}.table-hover .table-dark:hover,.table-hover .table-dark:hover>th,.table-hover .table-dark:hover>td{background-color:#6f7d7e}.table-hover .table-success:hover,.table-hover .table-success:hover>th,.table-hover .table-success:hover>td{background-color:#15a589}.table-hover .table-info:hover,.table-hover .table-info:hover>th,.table-hover .table-info:hover>td{background-color:#258cd1}.table-hover .table-danger:hover,.table-hover .table-danger:hover>th,.table-hover .table-danger:hover>td{background-color:#e43725}.table-hover .table-warning:hover,.table-hover .table-warning:hover>th,.table-hover .table-warning:hover>td{background-color:#e08e0b}.table-hover .table-active:hover,.table-hover .table-active:hover>th,.table-hover .table-active:hover>td{background-color:rgba(0,0,0,.1)}#primary-meeting-external-id{display:none}#replica-meeting-input:checked~#primary-meeting-external-id{display:block}.nav-tabs .nav-link.active,.nav-tabs .nav-link.active:focus,.nav-tabs .nav-link.active:hover,.nav-tabs .nav-item.open .nav-link,.nav-tabs .nav-item.open .nav-link:focus,.nav-tabs .nav-item.open .nav-link:hover{color:#2c3e50}.pagination a:hover{text-decoration:none}.close{text-decoration:none;opacity:.4}.close:hover,.close:focus{opacity:1}.badge-secondary,.badge-warning{color:#fff}.alert{border:none;color:#fff}.alert a,.alert .alert-link{color:#fff;text-decoration:underline}.alert-primary{background-color:#2c3e50}.alert-secondary{background-color:#95a5a6}.alert-success{background-color:#18bc9c}.alert-info{background-color:#3498db}.alert-warning{background-color:#f39c12}.alert-danger{background-color:#e74c3c}.alert-light{background-color:#ecf0f1}.alert-dark{background-color:#7b8a8b}.alert-light,.alert-light a,.alert-light .alert-link{color:#212529}.modal .close{color:#000}.modal .close:not(:disabled):not(.disabled):hover,.modal .close:not(:disabled):not(.disabled):focus{color:#000}.modal-backdrop{z-index:-1}html{height:100%}body{min-width:320px;height:100%;display:flex;-ms-flex-align:center;-ms-flex-pack:center;align-items:center;justify-content:center;background-color:#f5f5f5}svg{width:20px;height:20px;fill:#bfc8c9}#form-authenticate svg{fill:#fff !important}.svg-active{fill:#fff}.svg-inactive{fill:#bfc8c9}.flow{display:none}.hidden{display:none}.progress-hidden{visibility:hidden}#flow-fatal{width:100%;height:100%;vertical-align:middle;background-color:darkred}#flow-fatal h1,#flow-fatal .h1{color:#f8f8ff;-webkit-text-stroke:#fff 1px;text-shadow:0 0 1px #212529}#flow-fatal p{color:#f8f8ff}#flow-meeting{min-width:320px}@media(max-width: 575px){#tile-area{display:flex;flex-wrap:wrap}#tile-area>div{position:relative !important;top:auto !important;right:auto !important;bottom:auto !important;left:auto !important;height:auto !important}#tile-area>video-tile{width:50% !important;padding-bottom:33% !important}#tile-area>video-tile>video{-o-object-fit:cover;object-fit:cover}#tile-area>video-tile>div,#tile-area>video-tile>button{display:none !important}#content-share-video{display:none !important}#meeting-container{height:auto !important}#roster-tile-container{height:auto !important}#roster-message-container{height:auto !important}#tile-transcript-container{height:auto !important}.bs-component{max-height:210px;height:auto !important}.message{max-height:210px;height:210px !important}.video-preview{max-width:100%;max-height:180px;margin-top:7px}#video-preview{max-height:180px}}#form-devices{height:100vh;padding-top:10px}@media(min-width: 576px){.video-preview{width:100%;max-height:300px;margin-left:0;margin-top:0}#video-preview{max-height:300px}}.markdown{margin-top:0;margin-bottom:0}a.markdown:link{color:#278990}a.markdown:visited{color:#278990}a.markdown:hover{color:#278990}a.markdown:active{color:#278990}.message-bubble-self{border-radius:5px;background-color:#eef8f8;border-width:1px;border-style:solid;border-color:#86d1d7;padding:.3rem;margin-left:1rem;margin-right:1rem;margin-top:0rem;margin-bottom:.5rem}.message-bubble-other{border-radius:5px;background-color:#f1f1f1;border-style:none;padding:.3rem;margin-left:1rem;margin-right:1rem;margin-top:0rem;margin-bottom:.5rem}.message-bubble-sender{font-weight:bold;margin-left:1.3rem;margin-right:1rem;margin-top:.25rem;margin-bottom:.25rem}.v-grid{display:grid;height:100%;width:100%}.v-grid.size-1{grid-template:1fr/1fr}.v-grid.size-1 .video-tile{height:0;padding-bottom:56.25%}.v-grid.size-2{grid-template:repeat(2, 1fr)/repeat(2, 1fr)}.v-grid.size-3,.v-grid.size-4{grid-template:repeat(2, 1fr)/repeat(2, 1fr)}.v-grid.size-5,.v-grid.size-6{grid-template:repeat(3, 1fr)/repeat(2, 1fr)}.v-grid.size-7,.v-grid.size-8{grid-template:repeat(4, 1fr)/repeat(2, 1fr)}.v-grid.size-9,.v-grid.size-10{grid-template:repeat(4, 1fr)/repeat(3, 1fr)}.v-grid.size-11,.v-grid.size-12{grid-template:repeat(4, 1fr)/repeat(3, 1fr)}.v-grid.size-13,.v-grid.size-14,.v-grid.size-15,.v-grid.size-16{grid-template:repeat(4, 1fr)/repeat(4, 1fr)}.v-grid.size-17,.v-grid.size-18,.v-grid.size-19,.v-grid.size-20,.v-grid.size-21,.v-grid.size-22,.v-grid.size-23,.v-grid.size-24,.v-grid.size-25{grid-template:repeat(5, 1fr)/repeat(5, 1fr)}.v-grid.featured{grid-template:1fr/1fr;grid-template-areas:"ft"}.v-grid.featured.size-2,.v-grid.featured.size-3{grid-template:repeat(4, 1fr)/repeat(2, 1fr);grid-template-areas:"ft ft" "ft ft" "ft ft"}.v-grid.featured.size-4{grid-template:repeat(4, 1fr)/repeat(3, 1fr);grid-template-areas:"ft ft ft" "ft ft ft" "ft ft ft"}.v-grid.featured.size-5,.v-grid.featured.size-6,.v-grid.featured.size-7{grid-template:repeat(6, 1fr)/repeat(3, 1fr);grid-template-areas:"ft ft ft" "ft ft ft" "ft ft ft" "ft ft ft"}.v-grid.featured.size-8,.v-grid.featured.size-9{grid-template:repeat(6, 1fr)/repeat(4, 1fr);grid-template-areas:"ft ft ft ft" "ft ft ft ft" "ft ft ft ft" "ft ft ft ft"}.v-grid.featured.size-10,.v-grid.featured.size-11,.v-grid.featured.size-12,.v-grid.featured.size-13{grid-template:repeat(7, 1fr)/repeat(6, 1fr);grid-template-areas:"ft ft ft ft ft ft" "ft ft ft ft ft ft" "ft ft ft ft ft ft" "ft ft ft ft ft ft" "ft ft ft ft ft ft"}.v-grid.featured.size-14,.v-grid.featured.size-15,.v-grid.featured.size-16,.v-grid.featured.size-17{grid-template:repeat(7, 1fr)/repeat(8, 1fr);grid-template-areas:"ft ft ft ft ft ft ft ft" "ft ft ft ft ft ft ft ft" "ft ft ft ft ft ft ft ft" "ft ft ft ft ft ft ft ft" "ft ft ft ft ft ft ft ft"}.v-grid.featured.size-18,.v-grid.featured.size-19,.v-grid.featured.size-20,.v-grid.featured.size-21,.v-grid.featured.size-22,.v-grid.featured.size-23,.v-grid.featured.size-24,.v-grid.featured.size-25,.v-grid.featured.size-26,.v-grid.featured.size-27{grid-template:repeat(9, 1fr)/repeat(8, 1fr);grid-template-areas:"ft ft ft ft ft ft ft ft" "ft ft ft ft ft ft ft ft" "ft ft ft ft ft ft ft ft" "ft ft ft ft ft ft ft ft" "ft ft ft ft ft ft ft ft"}@media screen and (max-width: 1200px){.v-grid.size-2{grid-template:repeat(2, 1fr)/1fr}.v-grid.size-3{grid-template:repeat(3, 1fr)/1fr}.v-grid.size-4{grid-template:repeat(4, 1fr)/1fr}.v-grid.size-5,.v-grid.size-6,.v-grid.size-7,.v-grid.size-8{grid-template:repeat(4, 1fr)/repeat(2, 1fr)}.v-grid.size-9,.v-grid.size-10,.v-grid.size-11,.v-grid.size-12{grid-template:repeat(6, 1fr)/repeat(2, 1fr)}.v-grid.size-13,.v-grid.size-14,.v-grid.size-15,.v-grid.size-16{grid-template:repeat(8, 1fr)/repeat(2, 1fr)}.v-grid.size-17,.v-grid.size-18,.v-grid.size-19,.v-grid.size-20,.v-grid.size-21,.v-grid.size-22,.v-grid.size-23,.v-grid.size-24,.v-grid.size-25{grid-template:repeat(13, 1fr)/repeat(2, 1fr)}.v-grid.featured.size-1{grid-template:1fr/1fr;grid-template-areas:"ft"}.v-grid.featured.size-2,.v-grid.featured.size-3,.v-grid.featured.size-4,.v-grid.featured.size-5{grid-template:repeat(4, 1fr)/repeat(2, 1fr);grid-template-areas:"ft ft" "ft ft"}.v-grid.featured.size-6,.v-grid.featured.size-7{grid-template:repeat(4, 1fr)/repeat(3, 1fr);grid-template-areas:"ft ft ft" "ft ft ft"}.v-grid.featured.size-8,.v-grid.featured.size-9{grid-template:repeat(6, 1fr)/repeat(4, 1fr);grid-template-areas:"ft ft ft ft" "ft ft ft ft" "ft ft ft ft" "ft ft ft ft"}.v-grid.featured.size-10,.v-grid.featured.size-11,.v-grid.featured.size-12,.v-grid.featured.size-13{grid-template:repeat(8, 1fr)/repeat(4, 1fr);grid-template-areas:"ft ft ft ft" "ft ft ft ft" "ft ft ft ft" "ft ft ft ft" "ft ft ft ft"}.v-grid.featured.size-14,.v-grid.featured.size-15,.v-grid.featured.size-16,.v-grid.featured.size-17,.v-grid.featured.size-18,.v-grid.featured.size-19,.v-grid.featured.size-20,.v-grid.featured.size-21{grid-template:repeat(10, 1fr)/repeat(4, 1fr);grid-template-areas:"ft ft ft ft" "ft ft ft ft" "ft ft ft ft" "ft ft ft ft" "ft ft ft ft"}.v-grid.featured.size-22,.v-grid.featured.size-23,.v-grid.featured.size-24,.v-grid.featured.size-25,.v-grid.featured.size-26,.v-grid.featured.size-27{grid-template:repeat(9, 1fr)/repeat(6, 1fr);grid-template-areas:"ft ft ft ft ft ft" "ft ft ft ft ft ft" "ft ft ft ft ft ft" "ft ft ft ft ft ft"}}.video-tile{position:relative;display:none;font-size:18px;overflow:hidden}.video-tile.active{display:block}.video-tile.featured{grid-area:ft}.video-tile.content{grid-area:ft}.video-tile.content .video-tile-video{-o-object-fit:contain !important;object-fit:contain !important;background-color:#313030}.video-tile.primary{border:5px solid pink}.video-tile-video{position:absolute;top:0;left:0;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.video-tile-nameplate{position:absolute;bottom:10px;left:10px;color:#fff;text-shadow:0px 0px 5px #000;letter-spacing:.1em}.button-video-tile-config{position:absolute;display:inline-block;top:10px;right:10px}.video-tile-config-toggle{padding:.5rem}.stats-info{position:absolute;background-color:rgba(0,0,0,.5);color:#fff;font-size:10px;bottom:3rem;left:0;z-index:10;padding:.5rem;transition:display .5s;display:none}.stats-info .stats-table{width:15rem}.stats-info .stats-table tr:first-child{border-bottom:1px dotted #fff}#tile-area .video-tile.active:hover>.stats-info{display:block}.video-tile-attendee-id{display:none;position:absolute;color:#fff;padding:1rem}.video-tile.active:hover>.video-tile-attendee-id{display:block}.video-tile-pause-state{position:absolute}.vf-active::before{content:"✓ "}.live-transcription-active::before{content:"✓ "}.transcript-container{max-height:210px;border-radius:10px;background-color:#bbb;overflow-y:scroll;margin-top:10px;padding:.2rem 1rem}.transcript{white-space:nowrap;word-wrap:break-word}.transcript-speaker{color:#555;font-weight:500}.transcript-content{white-space:normal}.modal{display:none;position:fixed;z-index:1;padding-top:100px;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.4)}.modal-content{background-color:#fff;margin:auto;padding-left:20px;padding-right:20px;padding-bottom:20px;max-width:480px}.modal-content-header{display:flex;flex-direction:row;justify-content:space-between}.modal-content-header>span:first-child{margin-right:auto;visibility:hidden}.modal-title{font-size:24px}.close{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;font-size:32px;font-weight:bold;margin-left:auto}.close:hover,.close:focus{color:#000;cursor:pointer}.confidence-style{text-decoration:underline;-webkit-text-decoration-color:red;text-decoration-color:red}.entity-color{color:green;font-weight:bold}.error-message-color{color:red}#live-transcription-modal-content>*{margin:8px 0}#toast-container{bottom:20px;right:20px;position:absolute}', ""]); const z = C }, 3645: e => { "use strict"; e.exports = function (e) { var t = []; return t.toString = function () { return this.map((function (t) { var i = "", r = void 0 !== t[5]; return t[4] && (i += "@supports (".concat(t[4], ") {")), t[2] && (i += "@media ".concat(t[2], " {")), r && (i += "@layer".concat(t[5].length > 0 ? " ".concat(t[5]) : "", " {")), i += e(t), r && (i += "}"), t[2] && (i += "}"), t[4] && (i += "}"), i })).join("") }, t.i = function (e, i, r, o, n) { "string" == typeof e && (e = [[null, e, void 0]]); var s = {}; if (r) for (var a = 0; a < this.length; a++) { var d = this[a][0]; null != d && (s[d] = !0) } for (var l = 0; l < e.length; l++) { var c = [].concat(e[l]); r && s[c[0]] || (void 0 !== n && (void 0 === c[5] || (c[1] = "@layer".concat(c[5].length > 0 ? " ".concat(c[5]) : "", " {").concat(c[1], "}")), c[5] = n), i && (c[2] ? (c[1] = "@media ".concat(c[2], " {").concat(c[1], "}"), c[2] = i) : c[2] = i), o && (c[4] ? (c[1] = "@supports (".concat(c[4], ") {").concat(c[1], "}"), c[4] = o) : c[4] = "".concat(o)), t.push(c)) } }, t } }, 1667: e => { "use strict"; e.exports = function (e, t) { return t || (t = {}), e ? (e = String(e.__esModule ? e.default : e), /^['"].*['"]$/.test(e) && (e = e.slice(1, -1)), t.hash && (e += t.hash), /["'() \t\n]|(%20)/.test(e) || t.needQuotes ? '"'.concat(e.replace(/"/g, '\\"').replace(/\n/g, "\\n"), '"') : e) : e } }, 8081: e => { "use strict"; e.exports = function (e) { return e[1] } }, 8337: (e, t, i) => { "use strict"; function r(e) { var t = Array.prototype.slice.call(arguments, 1); return t.forEach((function (t) { t && Object.keys(t).forEach((function (i) { e[i] = t[i] })) })), e } function o(e) { return Object.prototype.toString.call(e) } function n(e) { return "[object Function]" === o(e) } function s(e) { return e.replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&") } var a = { fuzzyLink: !0, fuzzyEmail: !0, fuzzyIP: !1 }, d = { "http:": { validate: function (e, t, i) { var r = e.slice(t); return i.re.http || (i.re.http = new RegExp("^\\/\\/" + i.re.src_auth + i.re.src_host_port_strict + i.re.src_path, "i")), i.re.http.test(r) ? r.match(i.re.http)[0].length : 0 } }, "https:": "http:", "ftp:": "http:", "//": { validate: function (e, t, i) { var r = e.slice(t); return i.re.no_http || (i.re.no_http = new RegExp("^" + i.re.src_auth + "(?:localhost|(?:(?:" + i.re.src_domain + ")\\.)+" + i.re.src_domain_root + ")" + i.re.src_port + i.re.src_host_terminator + i.re.src_path, "i")), i.re.no_http.test(r) ? t >= 3 && ":" === e[t - 3] || t >= 3 && "/" === e[t - 3] ? 0 : r.match(i.re.no_http)[0].length : 0 } }, "mailto:": { validate: function (e, t, i) { var r = e.slice(t); return i.re.mailto || (i.re.mailto = new RegExp("^" + i.re.src_email_name + "@" + i.re.src_host_strict, "i")), i.re.mailto.test(r) ? r.match(i.re.mailto)[0].length : 0 } } }, l = "biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|"); function c(e) { var t = e.re = i(6066)(e.__opts__), r = e.__tlds__.slice(); function a(e) { return e.replace("%TLDS%", t.src_tlds) } e.onCompile(), e.__tlds_replaced__ || r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"), r.push(t.src_xn), t.src_tlds = r.join("|"), t.email_fuzzy = RegExp(a(t.tpl_email_fuzzy), "i"), t.link_fuzzy = RegExp(a(t.tpl_link_fuzzy), "i"), t.link_no_ip_fuzzy = RegExp(a(t.tpl_link_no_ip_fuzzy), "i"), t.host_fuzzy_test = RegExp(a(t.tpl_host_fuzzy_test), "i"); var d = []; function l(e, t) { throw new Error('(LinkifyIt) Invalid schema "' + e + '": ' + t) } e.__compiled__ = {}, Object.keys(e.__schemas__).forEach((function (t) { var i = e.__schemas__[t]; if (null !== i) { var r = { validate: null, link: null }; if (e.__compiled__[t] = r, "[object Object]" === o(i)) return "[object RegExp]" !== o(i.validate) ? n(i.validate) ? r.validate = i.validate : l(t, i) : r.validate = function (e) { return function (t, i) { var r = t.slice(i); return e.test(r) ? r.match(e)[0].length : 0 } }(i.validate), void (n(i.normalize) ? r.normalize = i.normalize : i.normalize ? l(t, i) : r.normalize = function (e, t) { t.normalize(e) }); !function (e) { return "[object String]" === o(e) }(i) ? l(t, i) : d.push(t) } })), d.forEach((function (t) { e.__compiled__[e.__schemas__[t]] && (e.__compiled__[t].validate = e.__compiled__[e.__schemas__[t]].validate, e.__compiled__[t].normalize = e.__compiled__[e.__schemas__[t]].normalize) })), e.__compiled__[""] = { validate: null, normalize: function (e, t) { t.normalize(e) } }; var c = Object.keys(e.__compiled__).filter((function (t) { return t.length > 0 && e.__compiled__[t] })).map(s).join("|"); e.re.schema_test = RegExp("(^|(?!_)(?:[><｜]|" + t.src_ZPCc + "))(" + c + ")", "i"), e.re.schema_search = RegExp("(^|(?!_)(?:[><｜]|" + t.src_ZPCc + "))(" + c + ")", "ig"), e.re.schema_at_start = RegExp("^" + e.re.schema_search.source, "i"), e.re.pretest = RegExp("(" + e.re.schema_test.source + ")|(" + e.re.host_fuzzy_test.source + ")|@", "i"), function (e) { e.__index__ = -1, e.__text_cache__ = "" }(e) } function u(e, t) { var i = e.__index__, r = e.__last_index__, o = e.__text_cache__.slice(i, r); this.schema = e.__schema__.toLowerCase(), this.index = i + t, this.lastIndex = r + t, this.raw = o, this.text = o, this.url = o } function h(e, t) { var i = new u(e, t); return e.__compiled__[i.schema].normalize(i, e), i } function p(e, t) { if (!(this instanceof p)) return new p(e, t); var i; t || (i = e, Object.keys(i || {}).reduce((function (e, t) { return e || a.hasOwnProperty(t) }), !1) && (t = e, e = {})), this.__opts__ = r({}, a, t), this.__index__ = -1, this.__last_index__ = -1, this.__schema__ = "", this.__text_cache__ = "", this.__schemas__ = r({}, d, e), this.__compiled__ = {}, this.__tlds__ = l, this.__tlds_replaced__ = !1, this.re = {}, c(this) } p.prototype.add = function (e, t) { return this.__schemas__[e] = t, c(this), this }, p.prototype.set = function (e) { return this.__opts__ = r(this.__opts__, e), this }, p.prototype.test = function (e) { if (this.__text_cache__ = e, this.__index__ = -1, !e.length) return !1; var t, i, r, o, n, s, a, d; if (this.re.schema_test.test(e)) for ((a = this.re.schema_search).lastIndex = 0; null !== (t = a.exec(e));)if (o = this.testSchemaAt(e, t[2], a.lastIndex)) { this.__schema__ = t[2], this.__index__ = t.index + t[1].length, this.__last_index__ = t.index + t[0].length + o; break } return this.__opts__.fuzzyLink && this.__compiled__["http:"] && (d = e.search(this.re.host_fuzzy_test)) >= 0 && (this.__index__ < 0 || d < this.__index__) && null !== (i = e.match(this.__opts__.fuzzyIP ? this.re.link_fuzzy : this.re.link_no_ip_fuzzy)) && (n = i.index + i[1].length, (this.__index__ < 0 || n < this.__index__) && (this.__schema__ = "", this.__index__ = n, this.__last_index__ = i.index + i[0].length)), this.__opts__.fuzzyEmail && this.__compiled__["mailto:"] && e.indexOf("@") >= 0 && null !== (r = e.match(this.re.email_fuzzy)) && (n = r.index + r[1].length, s = r.index + r[0].length, (this.__index__ < 0 || n < this.__index__ || n === this.__index__ && s > this.__last_index__) && (this.__schema__ = "mailto:", this.__index__ = n, this.__last_index__ = s)), this.__index__ >= 0 }, p.prototype.pretest = function (e) { return this.re.pretest.test(e) }, p.prototype.testSchemaAt = function (e, t, i) { return this.__compiled__[t.toLowerCase()] ? this.__compiled__[t.toLowerCase()].validate(e, i, this) : 0 }, p.prototype.match = function (e) { var t = 0, i = []; this.__index__ >= 0 && this.__text_cache__ === e && (i.push(h(this, t)), t = this.__last_index__); for (var r = t ? e.slice(t) : e; this.test(r);)i.push(h(this, t)), r = r.slice(this.__last_index__), t += this.__last_index__; return i.length ? i : null }, p.prototype.matchAtStart = function (e) { if (this.__text_cache__ = e, this.__index__ = -1, !e.length) return null; var t = this.re.schema_at_start.exec(e); if (!t) return null; var i = this.testSchemaAt(e, t[2], t[0].length); return i ? (this.__schema__ = t[2], this.__index__ = t.index + t[1].length, this.__last_index__ = t.index + t[0].length + i, h(this, 0)) : null }, p.prototype.tlds = function (e, t) { return e = Array.isArray(e) ? e : [e], t ? (this.__tlds__ = this.__tlds__.concat(e).sort().filter((function (e, t, i) { return e !== i[t - 1] })).reverse(), c(this), this) : (this.__tlds__ = e.slice(), this.__tlds_replaced__ = !0, c(this), this) }, p.prototype.normalize = function (e) { e.schema || (e.url = "http://" + e.url), "mailto:" !== e.schema || /^mailto:/i.test(e.url) || (e.url = "mailto:" + e.url) }, p.prototype.onCompile = function () { }, e.exports = p }, 6066: (e, t, i) => { "use strict"; e.exports = function (e) { var t = {}; return e = e || {}, t.src_Any = i(9369).source, t.src_Cc = i(9413).source, t.src_Z = i(5045).source, t.src_P = i(3189).source, t.src_ZPCc = [t.src_Z, t.src_P, t.src_Cc].join("|"), t.src_ZCc = [t.src_Z, t.src_Cc].join("|"), t.src_pseudo_letter = "(?:(?![><｜]|" + t.src_ZPCc + ")" + t.src_Any + ")", t.src_ip4 = "(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)", t.src_auth = "(?:(?:(?!" + t.src_ZCc + "|[@/\\[\\]()]).)+@)?", t.src_port = "(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?", t.src_host_terminator = "(?=$|[><｜]|" + t.src_ZPCc + ")(?!" + (e["---"] ? "-(?!--)|" : "-|") + "_|:\\d|\\.-|\\.(?!$|" + t.src_ZPCc + "))", t.src_path = "(?:[/?#](?:(?!" + t.src_ZCc + "|[><｜]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!" + t.src_ZCc + "|\\]).)*\\]|\\((?:(?!" + t.src_ZCc + "|[)]).)*\\)|\\{(?:(?!" + t.src_ZCc + '|[}]).)*\\}|\\"(?:(?!' + t.src_ZCc + '|["]).)+\\"|\\\'(?:(?!' + t.src_ZCc + "|[']).)+\\'|\\'(?=" + t.src_pseudo_letter + "|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!" + t.src_ZCc + "|[.]|$)|" + (e["---"] ? "\\-(?!--(?:[^-]|$))(?:-*)|" : "\\-+|") + ",(?!" + t.src_ZCc + "|$)|;(?!" + t.src_ZCc + "|$)|\\!+(?!" + t.src_ZCc + "|[!]|$)|\\?(?!" + t.src_ZCc + "|[?]|$))+|\\/)?", t.src_email_name = '[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*', t.src_xn = "xn--[a-z0-9\\-]{1,59}", t.src_domain_root = "(?:" + t.src_xn + "|" + t.src_pseudo_letter + "{1,63})", t.src_domain = "(?:" + t.src_xn + "|(?:" + t.src_pseudo_letter + ")|(?:" + t.src_pseudo_letter + "(?:-|" + t.src_pseudo_letter + "){0,61}" + t.src_pseudo_letter + "))", t.src_host = "(?:(?:(?:(?:" + t.src_domain + ")\\.)*" + t.src_domain + "))", t.tpl_host_fuzzy = "(?:" + t.src_ip4 + "|(?:(?:(?:" + t.src_domain + ")\\.)+(?:%TLDS%)))", t.tpl_host_no_ip_fuzzy = "(?:(?:(?:" + t.src_domain + ")\\.)+(?:%TLDS%))", t.src_host_strict = t.src_host + t.src_host_terminator, t.tpl_host_fuzzy_strict = t.tpl_host_fuzzy + t.src_host_terminator, t.src_host_port_strict = t.src_host + t.src_port + t.src_host_terminator, t.tpl_host_port_fuzzy_strict = t.tpl_host_fuzzy + t.src_port + t.src_host_terminator, t.tpl_host_port_no_ip_fuzzy_strict = t.tpl_host_no_ip_fuzzy + t.src_port + t.src_host_terminator, t.tpl_host_fuzzy_test = "localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:" + t.src_ZPCc + "|>|$))", t.tpl_email_fuzzy = '(^|[><｜]|"|\\(|' + t.src_ZCc + ")(" + t.src_email_name + "@" + t.tpl_host_fuzzy_strict + ")", t.tpl_link_fuzzy = "(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|" + t.src_ZPCc + "))((?![$+<=>^`|｜])" + t.tpl_host_port_fuzzy_strict + t.src_path + ")", t.tpl_link_no_ip_fuzzy = "(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|" + t.src_ZPCc + "))((?![$+<=>^`|｜])" + t.tpl_host_port_no_ip_fuzzy_strict + t.src_path + ")", t } }, 9980: (e, t, i) => { "use strict"; e.exports = i(7024) }, 6233: (e, t, i) => { "use strict"; e.exports = i(5485) }, 813: e => { "use strict"; e.exports = ["address", "article", "aside", "base", "basefont", "blockquote", "body", "caption", "center", "col", "colgroup", "dd", "details", "dialog", "dir", "div", "dl", "dt", "fieldset", "figcaption", "figure", "footer", "form", "frame", "frameset", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hr", "html", "iframe", "legend", "li", "link", "main", "menu", "menuitem", "nav", "noframes", "ol", "optgroup", "option", "p", "param", "section", "source", "summary", "table", "tbody", "td", "tfoot", "th", "thead", "title", "tr", "track", "ul"] }, 1947: e => { "use strict"; var t = "<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>", i = "<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>", r = new RegExp("^(?:" + t + "|" + i + "|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"), o = new RegExp("^(?:" + t + "|" + i + ")"); e.exports.n = r, e.exports.q = o }, 7022: (e, t, i) => { "use strict"; var r = Object.prototype.hasOwnProperty; function o(e, t) { return r.call(e, t) } function n(e) { return !(e >= 55296 && e <= 57343 || e >= 64976 && e <= 65007 || 65535 == (65535 & e) || 65534 == (65535 & e) || e >= 0 && e <= 8 || 11 === e || e >= 14 && e <= 31 || e >= 127 && e <= 159 || e > 1114111) } function s(e) { if (e > 65535) { var t = 55296 + ((e -= 65536) >> 10), i = 56320 + (1023 & e); return String.fromCharCode(t, i) } return String.fromCharCode(e) } var a = /\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g, d = new RegExp(a.source + "|" + /&([a-z#][a-z0-9]{1,31});/gi.source, "gi"), l = /^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i, c = i(6233), u = /[&<>"]/, h = /[&<>"]/g, p = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;" }; function m(e) { return p[e] } var f = /[.?*+^$[\]\\(){}|-]/g, g = i(3189); t.lib = {}, t.lib.mdurl = i(8765), t.lib.ucmicro = i(4205), t.assign = function (e) { var t = Array.prototype.slice.call(arguments, 1); return t.forEach((function (t) { if (t) { if ("object" != typeof t) throw new TypeError(t + "must be object"); Object.keys(t).forEach((function (i) { e[i] = t[i] })) } })), e }, t.isString = function (e) { return "[object String]" === function (e) { return Object.prototype.toString.call(e) }(e) }, t.has = o, t.unescapeMd = function (e) { return e.indexOf("\\") < 0 ? e : e.replace(a, "$1") }, t.unescapeAll = function (e) { return e.indexOf("\\") < 0 && e.indexOf("&") < 0 ? e : e.replace(d, (function (e, t, i) { return t || function (e, t) { var i = 0; return o(c, t) ? c[t] : 35 === t.charCodeAt(0) && l.test(t) && n(i = "x" === t[1].toLowerCase() ? parseInt(t.slice(2), 16) : parseInt(t.slice(1), 10)) ? s(i) : e }(e, i) })) }, t.isValidEntityCode = n, t.fromCodePoint = s, t.escapeHtml = function (e) { return u.test(e) ? e.replace(h, m) : e }, t.arrayReplaceAt = function (e, t, i) { return [].concat(e.slice(0, t), i, e.slice(t + 1)) }, t.isSpace = function (e) { switch (e) { case 9: case 32: return !0 }return !1 }, t.isWhiteSpace = function (e) { if (e >= 8192 && e <= 8202) return !0; switch (e) { case 9: case 10: case 11: case 12: case 13: case 32: case 160: case 5760: case 8239: case 8287: case 12288: return !0 }return !1 }, t.isMdAsciiPunct = function (e) { switch (e) { case 33: case 34: case 35: case 36: case 37: case 38: case 39: case 40: case 41: case 42: case 43: case 44: case 45: case 46: case 47: case 58: case 59: case 60: case 61: case 62: case 63: case 64: case 91: case 92: case 93: case 94: case 95: case 96: case 123: case 124: case 125: case 126: return !0; default: return !1 } }, t.isPunctChar = function (e) { return g.test(e) }, t.escapeRE = function (e) { return e.replace(f, "\\$&") }, t.normalizeReference = function (e) { return e = e.trim().replace(/\s+/g, " "), "Ṿ" === "ẞ".toLowerCase() && (e = e.replace(/ẞ/g, "ß")), e.toLowerCase().toUpperCase() } }, 1685: (e, t, i) => { "use strict"; t.parseLinkLabel = i(3595), t.parseLinkDestination = i(2548), t.parseLinkTitle = i(8040) }, 2548: (e, t, i) => { "use strict"; var r = i(7022).unescapeAll; e.exports = function (e, t, i) { var o, n, s = t, a = { ok: !1, pos: 0, lines: 0, str: "" }; if (60 === e.charCodeAt(t)) { for (t++; t < i;) { if (10 === (o = e.charCodeAt(t))) return a; if (60 === o) return a; if (62 === o) return a.pos = t + 1, a.str = r(e.slice(s + 1, t)), a.ok = !0, a; 92 === o && t + 1 < i ? t += 2 : t++ } return a } for (n = 0; t < i && 32 !== (o = e.charCodeAt(t)) && !(o < 32 || 127 === o);)if (92 === o && t + 1 < i) { if (32 === e.charCodeAt(t + 1)) break; t += 2 } else { if (40 === o && ++n > 32) return a; if (41 === o) { if (0 === n) break; n-- } t++ } return s === t || 0 !== n || (a.str = r(e.slice(s, t)), a.lines = 0, a.pos = t, a.ok = !0), a } }, 3595: e => { "use strict"; e.exports = function (e, t, i) { var r, o, n, s, a = -1, d = e.posMax, l = e.pos; for (e.pos = t + 1, r = 1; e.pos < d;) { if (93 === (n = e.src.charCodeAt(e.pos)) && 0 == --r) { o = !0; break } if (s = e.pos, e.md.inline.skipToken(e), 91 === n) if (s === e.pos - 1) r++; else if (i) return e.pos = l, -1 } return o && (a = e.pos), e.pos = l, a } }, 8040: (e, t, i) => { "use strict"; var r = i(7022).unescapeAll; e.exports = function (e, t, i) { var o, n, s = 0, a = t, d = { ok: !1, pos: 0, lines: 0, str: "" }; if (t >= i) return d; if (34 !== (n = e.charCodeAt(t)) && 39 !== n && 40 !== n) return d; for (t++, 40 === n && (n = 41); t < i;) { if ((o = e.charCodeAt(t)) === n) return d.pos = t + 1, d.lines = s, d.str = r(e.slice(a + 1, t)), d.ok = !0, d; if (40 === o && 41 === n) return d; 10 === o ? s++ : 92 === o && t + 1 < i && (t++, 10 === e.charCodeAt(t) && s++), t++ } return d } }, 7024: (e, t, i) => { "use strict"; var r = i(7022), o = i(1685), n = i(7529), s = i(7346), a = i(2471), d = i(4485), l = i(8337), c = i(8765), u = i(3689), h = { default: i(4218), zero: i(873), commonmark: i(6895) }, p = /^(vbscript|javascript|file|data):/, m = /^data:image\/(gif|png|jpeg|webp);/; function f(e) { var t = e.trim().toLowerCase(); return !p.test(t) || !!m.test(t) } var g = ["http:", "https:", "mailto:"]; function b(e) { var t = c.parse(e, !0); if (t.hostname && (!t.protocol || g.indexOf(t.protocol) >= 0)) try { t.hostname = u.toASCII(t.hostname) } catch (e) { } return c.encode(c.format(t)) } function v(e) { var t = c.parse(e, !0); if (t.hostname && (!t.protocol || g.indexOf(t.protocol) >= 0)) try { t.hostname = u.toUnicode(t.hostname) } catch (e) { } return c.decode(c.format(t), c.decode.defaultChars + "%") } function y(e, t) { if (!(this instanceof y)) return new y(e, t); t || r.isString(e) || (t = e || {}, e = "default"), this.inline = new d, this.block = new a, this.core = new s, this.renderer = new n, this.linkify = new l, this.validateLink = f, this.normalizeLink = b, this.normalizeLinkText = v, this.utils = r, this.helpers = r.assign({}, o), this.options = {}, this.configure(e), t && this.set(t) } y.prototype.set = function (e) { return r.assign(this.options, e), this }, y.prototype.configure = function (e) { var t, i = this; if (r.isString(e) && !(e = h[t = e])) throw new Error('Wrong `markdown-it` preset "' + t + '", check name'); if (!e) throw new Error("Wrong `markdown-it` preset, can't be empty"); return e.options && i.set(e.options), e.components && Object.keys(e.components).forEach((function (t) { e.components[t].rules && i[t].ruler.enableOnly(e.components[t].rules), e.components[t].rules2 && i[t].ruler2.enableOnly(e.components[t].rules2) })), this }, y.prototype.enable = function (e, t) { var i = []; Array.isArray(e) || (e = [e]), ["core", "block", "inline"].forEach((function (t) { i = i.concat(this[t].ruler.enable(e, !0)) }), this), i = i.concat(this.inline.ruler2.enable(e, !0)); var r = e.filter((function (e) { return i.indexOf(e) < 0 })); if (r.length && !t) throw new Error("MarkdownIt. Failed to enable unknown rule(s): " + r); return this }, y.prototype.disable = function (e, t) { var i = []; Array.isArray(e) || (e = [e]), ["core", "block", "inline"].forEach((function (t) { i = i.concat(this[t].ruler.disable(e, !0)) }), this), i = i.concat(this.inline.ruler2.disable(e, !0)); var r = e.filter((function (e) { return i.indexOf(e) < 0 })); if (r.length && !t) throw new Error("MarkdownIt. Failed to disable unknown rule(s): " + r); return this }, y.prototype.use = function (e) { var t = [this].concat(Array.prototype.slice.call(arguments, 1)); return e.apply(e, t), this }, y.prototype.parse = function (e, t) { if ("string" != typeof e) throw new Error("Input data should be a String"); var i = new this.core.State(e, this, t); return this.core.process(i), i.tokens }, y.prototype.render = function (e, t) { return t = t || {}, this.renderer.render(this.parse(e, t), this.options, t) }, y.prototype.parseInline = function (e, t) { var i = new this.core.State(e, this, t); return i.inlineMode = !0, this.core.process(i), i.tokens }, y.prototype.renderInline = function (e, t) { return t = t || {}, this.renderer.render(this.parseInline(e, t), this.options, t) }, e.exports = y }, 2471: (e, t, i) => { "use strict"; var r = i(9580), o = [["table", i(1785), ["paragraph", "reference"]], ["code", i(8768)], ["fence", i(3542), ["paragraph", "reference", "blockquote", "list"]], ["blockquote", i(5258), ["paragraph", "reference", "blockquote", "list"]], ["hr", i(5634), ["paragraph", "reference", "blockquote", "list"]], ["list", i(8532), ["paragraph", "reference", "blockquote"]], ["reference", i(3804)], ["html_block", i(6329), ["paragraph", "reference", "blockquote"]], ["heading", i(1630), ["paragraph", "reference", "blockquote"]], ["lheading", i(6850)], ["paragraph", i(6864)]]; function n() { this.ruler = new r; for (var e = 0; e < o.length; e++)this.ruler.push(o[e][0], o[e][1], { alt: (o[e][2] || []).slice() }) } n.prototype.tokenize = function (e, t, i) { for (var r, o = this.ruler.getRules(""), n = o.length, s = t, a = !1, d = e.md.options.maxNesting; s < i && (e.line = s = e.skipEmptyLines(s), !(s >= i)) && !(e.sCount[s] < e.blkIndent);) { if (e.level >= d) { e.line = i; break } for (r = 0; r < n && !o[r](e, s, i, !1); r++); e.tight = !a, e.isEmpty(e.line - 1) && (a = !0), (s = e.line) < i && e.isEmpty(s) && (a = !0, s++, e.line = s) } }, n.prototype.parse = function (e, t, i, r) { var o; e && (o = new this.State(e, t, i, r), this.tokenize(o, o.line, o.lineMax)) }, n.prototype.State = i(2948), e.exports = n }, 7346: (e, t, i) => { "use strict"; var r = i(9580), o = [["normalize", i(4129)], ["block", i(898)], ["inline", i(9827)], ["linkify", i(7830)], ["replacements", i(2834)], ["smartquotes", i(8450)], ["text_join", i(6633)]]; function n() { this.ruler = new r; for (var e = 0; e < o.length; e++)this.ruler.push(o[e][0], o[e][1]) } n.prototype.process = function (e) { var t, i, r; for (t = 0, i = (r = this.ruler.getRules("")).length; t < i; t++)r[t](e) }, n.prototype.State = i(6480), e.exports = n }, 4485: (e, t, i) => { "use strict"; var r = i(9580), o = [["text", i(9941)], ["linkify", i(2906)], ["newline", i(3905)], ["escape", i(1917)], ["backticks", i(9755)], ["strikethrough", i(4814).w], ["emphasis", i(7894).w], ["link", i(1727)], ["image", i(3006)], ["autolink", i(3420)], ["html_inline", i(1779)], ["entity", i(9391)]], n = [["balance_pairs", i(9354)], ["strikethrough", i(4814).g], ["emphasis", i(7894).g], ["fragments_join", i(9969)]]; function s() { var e; for (this.ruler = new r, e = 0; e < o.length; e++)this.ruler.push(o[e][0], o[e][1]); for (this.ruler2 = new r, e = 0; e < n.length; e++)this.ruler2.push(n[e][0], n[e][1]) } s.prototype.skipToken = function (e) { var t, i, r = e.pos, o = this.ruler.getRules(""), n = o.length, s = e.md.options.maxNesting, a = e.cache; if (void 0 === a[r]) { if (e.level < s) for (i = 0; i < n && (e.level++, t = o[i](e, !0), e.level--, !t); i++); else e.pos = e.posMax; t || e.pos++, a[r] = e.pos } else e.pos = a[r] }, s.prototype.tokenize = function (e) { for (var t, i, r = this.ruler.getRules(""), o = r.length, n = e.posMax, s = e.md.options.maxNesting; e.pos < n;) { if (e.level < s) for (i = 0; i < o && !(t = r[i](e, !1)); i++); if (t) { if (e.pos >= n) break } else e.pending += e.src[e.pos++] } e.pending && e.pushPending() }, s.prototype.parse = function (e, t, i, r) { var o, n, s, a = new this.State(e, t, i, r); for (this.tokenize(a), s = (n = this.ruler2.getRules("")).length, o = 0; o < s; o++)n[o](a) }, s.prototype.State = i(670), e.exports = s }, 6895: e => { "use strict"; e.exports = { options: { html: !0, xhtmlOut: !0, breaks: !1, langPrefix: "language-", linkify: !1, typographer: !1, quotes: "“”‘’", highlight: null, maxNesting: 20 }, components: { core: { rules: ["normalize", "block", "inline", "text_join"] }, block: { rules: ["blockquote", "code", "fence", "heading", "hr", "html_block", "lheading", "list", "reference", "paragraph"] }, inline: { rules: ["autolink", "backticks", "emphasis", "entity", "escape", "html_inline", "image", "link", "newline", "text"], rules2: ["balance_pairs", "emphasis", "fragments_join"] } } } }, 4218: e => { "use strict"; e.exports = { options: { html: !1, xhtmlOut: !1, breaks: !1, langPrefix: "language-", linkify: !1, typographer: !1, quotes: "“”‘’", highlight: null, maxNesting: 100 }, components: { core: {}, block: {}, inline: {} } } }, 873: e => { "use strict"; e.exports = { options: { html: !1, xhtmlOut: !1, breaks: !1, langPrefix: "language-", linkify: !1, typographer: !1, quotes: "“”‘’", highlight: null, maxNesting: 20 }, components: { core: { rules: ["normalize", "block", "inline", "text_join"] }, block: { rules: ["paragraph"] }, inline: { rules: ["text"], rules2: ["balance_pairs", "fragments_join"] } } } }, 7529: (e, t, i) => { "use strict"; var r = i(7022).assign, o = i(7022).unescapeAll, n = i(7022).escapeHtml, s = {}; function a() { this.rules = r({}, s) } s.code_inline = function (e, t, i, r, o) { var s = e[t]; return "<code" + o.renderAttrs(s) + ">" + n(e[t].content) + "</code>" }, s.code_block = function (e, t, i, r, o) { var s = e[t]; return "<pre" + o.renderAttrs(s) + "><code>" + n(e[t].content) + "</code></pre>\n" }, s.fence = function (e, t, i, r, s) { var a, d, l, c, u, h = e[t], p = h.info ? o(h.info).trim() : "", m = "", f = ""; return p && (m = (l = p.split(/(\s+)/g))[0], f = l.slice(2).join("")), 0 === (a = i.highlight && i.highlight(h.content, m, f) || n(h.content)).indexOf("<pre") ? a + "\n" : p ? (d = h.attrIndex("class"), c = h.attrs ? h.attrs.slice() : [], d < 0 ? c.push(["class", i.langPrefix + m]) : (c[d] = c[d].slice(), c[d][1] += " " + i.langPrefix + m), u = { attrs: c }, "<pre><code" + s.renderAttrs(u) + ">" + a + "</code></pre>\n") : "<pre><code" + s.renderAttrs(h) + ">" + a + "</code></pre>\n" }, s.image = function (e, t, i, r, o) { var n = e[t]; return n.attrs[n.attrIndex("alt")][1] = o.renderInlineAsText(n.children, i, r), o.renderToken(e, t, i) }, s.hardbreak = function (e, t, i) { return i.xhtmlOut ? "<br />\n" : "<br>\n" }, s.softbreak = function (e, t, i) { return i.breaks ? i.xhtmlOut ? "<br />\n" : "<br>\n" : "\n" }, s.text = function (e, t) { return n(e[t].content) }, s.html_block = function (e, t) { return e[t].content }, s.html_inline = function (e, t) { return e[t].content }, a.prototype.renderAttrs = function (e) { var t, i, r; if (!e.attrs) return ""; for (r = "", t = 0, i = e.attrs.length; t < i; t++)r += " " + n(e.attrs[t][0]) + '="' + n(e.attrs[t][1]) + '"'; return r }, a.prototype.renderToken = function (e, t, i) { var r, o = "", n = !1, s = e[t]; return s.hidden ? "" : (s.block && -1 !== s.nesting && t && e[t - 1].hidden && (o += "\n"), o += (-1 === s.nesting ? "</" : "<") + s.tag, o += this.renderAttrs(s), 0 === s.nesting && i.xhtmlOut && (o += " /"), s.block && (n = !0, 1 === s.nesting && t + 1 < e.length && ("inline" === (r = e[t + 1]).type || r.hidden || -1 === r.nesting && r.tag === s.tag) && (n = !1)), o += n ? ">\n" : ">") }, a.prototype.renderInline = function (e, t, i) { for (var r, o = "", n = this.rules, s = 0, a = e.length; s < a; s++)void 0 !== n[r = e[s].type] ? o += n[r](e, s, t, i, this) : o += this.renderToken(e, s, t); return o }, a.prototype.renderInlineAsText = function (e, t, i) { for (var r = "", o = 0, n = e.length; o < n; o++)"text" === e[o].type ? r += e[o].content : "image" === e[o].type ? r += this.renderInlineAsText(e[o].children, t, i) : "softbreak" === e[o].type && (r += "\n"); return r }, a.prototype.render = function (e, t, i) { var r, o, n, s = "", a = this.rules; for (r = 0, o = e.length; r < o; r++)"inline" === (n = e[r].type) ? s += this.renderInline(e[r].children, t, i) : void 0 !== a[n] ? s += a[e[r].type](e, r, t, i, this) : s += this.renderToken(e, r, t, i); return s }, e.exports = a }, 9580: e => { "use strict"; function t() { this.__rules__ = [], this.__cache__ = null } t.prototype.__find__ = function (e) { for (var t = 0; t < this.__rules__.length; t++)if (this.__rules__[t].name === e) return t; return -1 }, t.prototype.__compile__ = function () { var e = this, t = [""]; e.__rules__.forEach((function (e) { e.enabled && e.alt.forEach((function (e) { t.indexOf(e) < 0 && t.push(e) })) })), e.__cache__ = {}, t.forEach((function (t) { e.__cache__[t] = [], e.__rules__.forEach((function (i) { i.enabled && (t && i.alt.indexOf(t) < 0 || e.__cache__[t].push(i.fn)) })) })) }, t.prototype.at = function (e, t, i) { var r = this.__find__(e), o = i || {}; if (-1 === r) throw new Error("Parser rule not found: " + e); this.__rules__[r].fn = t, this.__rules__[r].alt = o.alt || [], this.__cache__ = null }, t.prototype.before = function (e, t, i, r) { var o = this.__find__(e), n = r || {}; if (-1 === o) throw new Error("Parser rule not found: " + e); this.__rules__.splice(o, 0, { name: t, enabled: !0, fn: i, alt: n.alt || [] }), this.__cache__ = null }, t.prototype.after = function (e, t, i, r) { var o = this.__find__(e), n = r || {}; if (-1 === o) throw new Error("Parser rule not found: " + e); this.__rules__.splice(o + 1, 0, { name: t, enabled: !0, fn: i, alt: n.alt || [] }), this.__cache__ = null }, t.prototype.push = function (e, t, i) { var r = i || {}; this.__rules__.push({ name: e, enabled: !0, fn: t, alt: r.alt || [] }), this.__cache__ = null }, t.prototype.enable = function (e, t) { Array.isArray(e) || (e = [e]); var i = []; return e.forEach((function (e) { var r = this.__find__(e); if (r < 0) { if (t) return; throw new Error("Rules manager: invalid rule name " + e) } this.__rules__[r].enabled = !0, i.push(e) }), this), this.__cache__ = null, i }, t.prototype.enableOnly = function (e, t) { Array.isArray(e) || (e = [e]), this.__rules__.forEach((function (e) { e.enabled = !1 })), this.enable(e, t) }, t.prototype.disable = function (e, t) { Array.isArray(e) || (e = [e]); var i = []; return e.forEach((function (e) { var r = this.__find__(e); if (r < 0) { if (t) return; throw new Error("Rules manager: invalid rule name " + e) } this.__rules__[r].enabled = !1, i.push(e) }), this), this.__cache__ = null, i }, t.prototype.getRules = function (e) { return null === this.__cache__ && this.__compile__(), this.__cache__[e] || [] }, e.exports = t }, 5258: (e, t, i) => { "use strict"; var r = i(7022).isSpace; e.exports = function (e, t, i, o) { var n, s, a, d, l, c, u, h, p, m, f, g, b, v, y, w, S, x, k, _, C = e.lineMax, I = e.bMarks[t] + e.tShift[t], T = e.eMarks[t]; if (e.sCount[t] - e.blkIndent >= 4) return !1; if (62 !== e.src.charCodeAt(I++)) return !1; if (o) return !0; for (d = p = e.sCount[t] + 1, 32 === e.src.charCodeAt(I) ? (I++, d++, p++, n = !1, w = !0) : 9 === e.src.charCodeAt(I) ? (w = !0, (e.bsCount[t] + p) % 4 == 3 ? (I++, d++, p++, n = !1) : n = !0) : w = !1, m = [e.bMarks[t]], e.bMarks[t] = I; I < T && (s = e.src.charCodeAt(I), r(s));)9 === s ? p += 4 - (p + e.bsCount[t] + (n ? 1 : 0)) % 4 : p++, I++; for (f = [e.bsCount[t]], e.bsCount[t] = e.sCount[t] + 1 + (w ? 1 : 0), c = I >= T, v = [e.sCount[t]], e.sCount[t] = p - d, y = [e.tShift[t]], e.tShift[t] = I - e.bMarks[t], x = e.md.block.ruler.getRules("blockquote"), b = e.parentType, e.parentType = "blockquote", h = t + 1; h < i && (_ = e.sCount[h] < e.blkIndent, !((I = e.bMarks[h] + e.tShift[h]) >= (T = e.eMarks[h]))); h++)if (62 !== e.src.charCodeAt(I++) || _) { if (c) break; for (S = !1, a = 0, l = x.length; a < l; a++)if (x[a](e, h, i, !0)) { S = !0; break } if (S) { e.lineMax = h, 0 !== e.blkIndent && (m.push(e.bMarks[h]), f.push(e.bsCount[h]), y.push(e.tShift[h]), v.push(e.sCount[h]), e.sCount[h] -= e.blkIndent); break } m.push(e.bMarks[h]), f.push(e.bsCount[h]), y.push(e.tShift[h]), v.push(e.sCount[h]), e.sCount[h] = -1 } else { for (d = p = e.sCount[h] + 1, 32 === e.src.charCodeAt(I) ? (I++, d++, p++, n = !1, w = !0) : 9 === e.src.charCodeAt(I) ? (w = !0, (e.bsCount[h] + p) % 4 == 3 ? (I++, d++, p++, n = !1) : n = !0) : w = !1, m.push(e.bMarks[h]), e.bMarks[h] = I; I < T && (s = e.src.charCodeAt(I), r(s));)9 === s ? p += 4 - (p + e.bsCount[h] + (n ? 1 : 0)) % 4 : p++, I++; c = I >= T, f.push(e.bsCount[h]), e.bsCount[h] = e.sCount[h] + 1 + (w ? 1 : 0), v.push(e.sCount[h]), e.sCount[h] = p - d, y.push(e.tShift[h]), e.tShift[h] = I - e.bMarks[h] } for (g = e.blkIndent, e.blkIndent = 0, (k = e.push("blockquote_open", "blockquote", 1)).markup = ">", k.map = u = [t, 0], e.md.block.tokenize(e, t, h), (k = e.push("blockquote_close", "blockquote", -1)).markup = ">", e.lineMax = C, e.parentType = b, u[1] = e.line, a = 0; a < y.length; a++)e.bMarks[a + t] = m[a], e.tShift[a + t] = y[a], e.sCount[a + t] = v[a], e.bsCount[a + t] = f[a]; return e.blkIndent = g, !0 } }, 8768: e => { "use strict"; e.exports = function (e, t, i) { var r, o, n; if (e.sCount[t] - e.blkIndent < 4) return !1; for (o = r = t + 1; r < i;)if (e.isEmpty(r)) r++; else { if (!(e.sCount[r] - e.blkIndent >= 4)) break; o = ++r } return e.line = o, (n = e.push("code_block", "code", 0)).content = e.getLines(t, o, 4 + e.blkIndent, !1) + "\n", n.map = [t, e.line], !0 } }, 3542: e => { "use strict"; e.exports = function (e, t, i, r) { var o, n, s, a, d, l, c, u = !1, h = e.bMarks[t] + e.tShift[t], p = e.eMarks[t]; if (e.sCount[t] - e.blkIndent >= 4) return !1; if (h + 3 > p) return !1; if (126 !== (o = e.src.charCodeAt(h)) && 96 !== o) return !1; if (d = h, (n = (h = e.skipChars(h, o)) - d) < 3) return !1; if (c = e.src.slice(d, h), s = e.src.slice(h, p), 96 === o && s.indexOf(String.fromCharCode(o)) >= 0) return !1; if (r) return !0; for (a = t; !(++a >= i || (h = d = e.bMarks[a] + e.tShift[a]) < (p = e.eMarks[a]) && e.sCount[a] < e.blkIndent);)if (e.src.charCodeAt(h) === o && !(e.sCount[a] - e.blkIndent >= 4 || (h = e.skipChars(h, o)) - d < n || (h = e.skipSpaces(h)) < p)) { u = !0; break } return n = e.sCount[t], e.line = a + (u ? 1 : 0), (l = e.push("fence", "code", 0)).info = s, l.content = e.getLines(t + 1, a, n, !0), l.markup = c, l.map = [t, e.line], !0 } }, 1630: (e, t, i) => { "use strict"; var r = i(7022).isSpace; e.exports = function (e, t, i, o) { var n, s, a, d, l = e.bMarks[t] + e.tShift[t], c = e.eMarks[t]; if (e.sCount[t] - e.blkIndent >= 4) return !1; if (35 !== (n = e.src.charCodeAt(l)) || l >= c) return !1; for (s = 1, n = e.src.charCodeAt(++l); 35 === n && l < c && s <= 6;)s++, n = e.src.charCodeAt(++l); return !(s > 6 || l < c && !r(n) || (o || (c = e.skipSpacesBack(c, l), (a = e.skipCharsBack(c, 35, l)) > l && r(e.src.charCodeAt(a - 1)) && (c = a), e.line = t + 1, (d = e.push("heading_open", "h" + String(s), 1)).markup = "########".slice(0, s), d.map = [t, e.line], (d = e.push("inline", "", 0)).content = e.src.slice(l, c).trim(), d.map = [t, e.line], d.children = [], (d = e.push("heading_close", "h" + String(s), -1)).markup = "########".slice(0, s)), 0)) } }, 5634: (e, t, i) => { "use strict"; var r = i(7022).isSpace; e.exports = function (e, t, i, o) { var n, s, a, d, l = e.bMarks[t] + e.tShift[t], c = e.eMarks[t]; if (e.sCount[t] - e.blkIndent >= 4) return !1; if (42 !== (n = e.src.charCodeAt(l++)) && 45 !== n && 95 !== n) return !1; for (s = 1; l < c;) { if ((a = e.src.charCodeAt(l++)) !== n && !r(a)) return !1; a === n && s++ } return !(s < 3 || (o || (e.line = t + 1, (d = e.push("hr", "hr", 0)).map = [t, e.line], d.markup = Array(s + 1).join(String.fromCharCode(n))), 0)) } }, 6329: (e, t, i) => { "use strict"; var r = i(813), o = i(1947).q, n = [[/^<(script|pre|style|textarea)(?=(\s|>|$))/i, /<\/(script|pre|style|textarea)>/i, !0], [/^<!--/, /-->/, !0], [/^<\?/, /\?>/, !0], [/^<![A-Z]/, />/, !0], [/^<!\[CDATA\[/, /\]\]>/, !0], [new RegExp("^</?(" + r.join("|") + ")(?=(\\s|/?>|$))", "i"), /^$/, !0], [new RegExp(o.source + "\\s*$"), /^$/, !1]]; e.exports = function (e, t, i, r) { var o, s, a, d, l = e.bMarks[t] + e.tShift[t], c = e.eMarks[t]; if (e.sCount[t] - e.blkIndent >= 4) return !1; if (!e.md.options.html) return !1; if (60 !== e.src.charCodeAt(l)) return !1; for (d = e.src.slice(l, c), o = 0; o < n.length && !n[o][0].test(d); o++); if (o === n.length) return !1; if (r) return n[o][2]; if (s = t + 1, !n[o][1].test(d)) for (; s < i && !(e.sCount[s] < e.blkIndent); s++)if (l = e.bMarks[s] + e.tShift[s], c = e.eMarks[s], d = e.src.slice(l, c), n[o][1].test(d)) { 0 !== d.length && s++; break } return e.line = s, (a = e.push("html_block", "", 0)).map = [t, s], a.content = e.getLines(t, s, e.blkIndent, !0), !0 } }, 6850: e => { "use strict"; e.exports = function (e, t, i) { var r, o, n, s, a, d, l, c, u, h, p = t + 1, m = e.md.block.ruler.getRules("paragraph"); if (e.sCount[t] - e.blkIndent >= 4) return !1; for (h = e.parentType, e.parentType = "paragraph"; p < i && !e.isEmpty(p); p++)if (!(e.sCount[p] - e.blkIndent > 3)) { if (e.sCount[p] >= e.blkIndent && (d = e.bMarks[p] + e.tShift[p]) < (l = e.eMarks[p]) && (45 === (u = e.src.charCodeAt(d)) || 61 === u) && (d = e.skipChars(d, u), (d = e.skipSpaces(d)) >= l)) { c = 61 === u ? 1 : 2; break } if (!(e.sCount[p] < 0)) { for (o = !1, n = 0, s = m.length; n < s; n++)if (m[n](e, p, i, !0)) { o = !0; break } if (o) break } } return !!c && (r = e.getLines(t, p, e.blkIndent, !1).trim(), e.line = p + 1, (a = e.push("heading_open", "h" + String(c), 1)).markup = String.fromCharCode(u), a.map = [t, e.line], (a = e.push("inline", "", 0)).content = r, a.map = [t, e.line - 1], a.children = [], (a = e.push("heading_close", "h" + String(c), -1)).markup = String.fromCharCode(u), e.parentType = h, !0) } }, 8532: (e, t, i) => { "use strict"; var r = i(7022).isSpace; function o(e, t) { var i, o, n, s; return o = e.bMarks[t] + e.tShift[t], n = e.eMarks[t], 42 !== (i = e.src.charCodeAt(o++)) && 45 !== i && 43 !== i || o < n && (s = e.src.charCodeAt(o), !r(s)) ? -1 : o } function n(e, t) { var i, o = e.bMarks[t] + e.tShift[t], n = o, s = e.eMarks[t]; if (n + 1 >= s) return -1; if ((i = e.src.charCodeAt(n++)) < 48 || i > 57) return -1; for (; ;) { if (n >= s) return -1; if (!((i = e.src.charCodeAt(n++)) >= 48 && i <= 57)) { if (41 === i || 46 === i) break; return -1 } if (n - o >= 10) return -1 } return n < s && (i = e.src.charCodeAt(n), !r(i)) ? -1 : n } e.exports = function (e, t, i, r) { var s, a, d, l, c, u, h, p, m, f, g, b, v, y, w, S, x, k, _, C, I, T, E, A, M, O, P, D, R = !1, L = !0; if (e.sCount[t] - e.blkIndent >= 4) return !1; if (e.listIndent >= 0 && e.sCount[t] - e.listIndent >= 4 && e.sCount[t] < e.blkIndent) return !1; if (r && "paragraph" === e.parentType && e.sCount[t] >= e.blkIndent && (R = !0), (E = n(e, t)) >= 0) { if (h = !0, M = e.bMarks[t] + e.tShift[t], v = Number(e.src.slice(M, E - 1)), R && 1 !== v) return !1 } else { if (!((E = o(e, t)) >= 0)) return !1; h = !1 } if (R && e.skipSpaces(E) >= e.eMarks[t]) return !1; if (b = e.src.charCodeAt(E - 1), r) return !0; for (g = e.tokens.length, h ? (D = e.push("ordered_list_open", "ol", 1), 1 !== v && (D.attrs = [["start", v]])) : D = e.push("bullet_list_open", "ul", 1), D.map = f = [t, 0], D.markup = String.fromCharCode(b), w = t, A = !1, P = e.md.block.ruler.getRules("list"), k = e.parentType, e.parentType = "list"; w < i;) { for (T = E, y = e.eMarks[w], u = S = e.sCount[w] + E - (e.bMarks[t] + e.tShift[t]); T < y;) { if (9 === (s = e.src.charCodeAt(T))) S += 4 - (S + e.bsCount[w]) % 4; else { if (32 !== s) break; S++ } T++ } if ((c = (a = T) >= y ? 1 : S - u) > 4 && (c = 1), l = u + c, (D = e.push("list_item_open", "li", 1)).markup = String.fromCharCode(b), D.map = p = [t, 0], h && (D.info = e.src.slice(M, E - 1)), I = e.tight, C = e.tShift[t], _ = e.sCount[t], x = e.listIndent, e.listIndent = e.blkIndent, e.blkIndent = l, e.tight = !0, e.tShift[t] = a - e.bMarks[t], e.sCount[t] = S, a >= y && e.isEmpty(t + 1) ? e.line = Math.min(e.line + 2, i) : e.md.block.tokenize(e, t, i, !0), e.tight && !A || (L = !1), A = e.line - t > 1 && e.isEmpty(e.line - 1), e.blkIndent = e.listIndent, e.listIndent = x, e.tShift[t] = C, e.sCount[t] = _, e.tight = I, (D = e.push("list_item_close", "li", -1)).markup = String.fromCharCode(b), w = t = e.line, p[1] = w, a = e.bMarks[t], w >= i) break; if (e.sCount[w] < e.blkIndent) break; if (e.sCount[t] - e.blkIndent >= 4) break; for (O = !1, d = 0, m = P.length; d < m; d++)if (P[d](e, w, i, !0)) { O = !0; break } if (O) break; if (h) { if ((E = n(e, w)) < 0) break; M = e.bMarks[w] + e.tShift[w] } else if ((E = o(e, w)) < 0) break; if (b !== e.src.charCodeAt(E - 1)) break } return (D = h ? e.push("ordered_list_close", "ol", -1) : e.push("bullet_list_close", "ul", -1)).markup = String.fromCharCode(b), f[1] = w, e.line = w, e.parentType = k, L && function (e, t) { var i, r, o = e.level + 2; for (i = t + 2, r = e.tokens.length - 2; i < r; i++)e.tokens[i].level === o && "paragraph_open" === e.tokens[i].type && (e.tokens[i + 2].hidden = !0, e.tokens[i].hidden = !0, i += 2) }(e, g), !0 } }, 6864: e => { "use strict"; e.exports = function (e, t) { var i, r, o, n, s, a, d = t + 1, l = e.md.block.ruler.getRules("paragraph"), c = e.lineMax; for (a = e.parentType, e.parentType = "paragraph"; d < c && !e.isEmpty(d); d++)if (!(e.sCount[d] - e.blkIndent > 3 || e.sCount[d] < 0)) { for (r = !1, o = 0, n = l.length; o < n; o++)if (l[o](e, d, c, !0)) { r = !0; break } if (r) break } return i = e.getLines(t, d, e.blkIndent, !1).trim(), e.line = d, (s = e.push("paragraph_open", "p", 1)).map = [t, e.line], (s = e.push("inline", "", 0)).content = i, s.map = [t, e.line], s.children = [], s = e.push("paragraph_close", "p", -1), e.parentType = a, !0 } }, 3804: (e, t, i) => { "use strict"; var r = i(7022).normalizeReference, o = i(7022).isSpace; e.exports = function (e, t, i, n) { var s, a, d, l, c, u, h, p, m, f, g, b, v, y, w, S, x = 0, k = e.bMarks[t] + e.tShift[t], _ = e.eMarks[t], C = t + 1; if (e.sCount[t] - e.blkIndent >= 4) return !1; if (91 !== e.src.charCodeAt(k)) return !1; for (; ++k < _;)if (93 === e.src.charCodeAt(k) && 92 !== e.src.charCodeAt(k - 1)) { if (k + 1 === _) return !1; if (58 !== e.src.charCodeAt(k + 1)) return !1; break } for (l = e.lineMax, w = e.md.block.ruler.getRules("reference"), f = e.parentType, e.parentType = "reference"; C < l && !e.isEmpty(C); C++)if (!(e.sCount[C] - e.blkIndent > 3 || e.sCount[C] < 0)) { for (y = !1, u = 0, h = w.length; u < h; u++)if (w[u](e, C, l, !0)) { y = !0; break } if (y) break } for (_ = (v = e.getLines(t, C, e.blkIndent, !1).trim()).length, k = 1; k < _; k++) { if (91 === (s = v.charCodeAt(k))) return !1; if (93 === s) { m = k; break } (10 === s || 92 === s && ++k < _ && 10 === v.charCodeAt(k)) && x++ } if (m < 0 || 58 !== v.charCodeAt(m + 1)) return !1; for (k = m + 2; k < _; k++)if (10 === (s = v.charCodeAt(k))) x++; else if (!o(s)) break; if (!(g = e.md.helpers.parseLinkDestination(v, k, _)).ok) return !1; if (c = e.md.normalizeLink(g.str), !e.md.validateLink(c)) return !1; for (a = k = g.pos, d = x += g.lines, b = k; k < _; k++)if (10 === (s = v.charCodeAt(k))) x++; else if (!o(s)) break; for (g = e.md.helpers.parseLinkTitle(v, k, _), k < _ && b !== k && g.ok ? (S = g.str, k = g.pos, x += g.lines) : (S = "", k = a, x = d); k < _ && (s = v.charCodeAt(k), o(s));)k++; if (k < _ && 10 !== v.charCodeAt(k) && S) for (S = "", k = a, x = d; k < _ && (s = v.charCodeAt(k), o(s));)k++; return !(k < _ && 10 !== v.charCodeAt(k) || !(p = r(v.slice(1, m))) || (n || (void 0 === e.env.references && (e.env.references = {}), void 0 === e.env.references[p] && (e.env.references[p] = { title: S, href: c }), e.parentType = f, e.line = t + x + 1), 0)) } }, 2948: (e, t, i) => { "use strict"; var r = i(5872), o = i(7022).isSpace; function n(e, t, i, r) { var n, s, a, d, l, c, u, h; for (this.src = e, this.md = t, this.env = i, this.tokens = r, this.bMarks = [], this.eMarks = [], this.tShift = [], this.sCount = [], this.bsCount = [], this.blkIndent = 0, this.line = 0, this.lineMax = 0, this.tight = !1, this.ddIndent = -1, this.listIndent = -1, this.parentType = "root", this.level = 0, this.result = "", h = !1, a = d = c = u = 0, l = (s = this.src).length; d < l; d++) { if (n = s.charCodeAt(d), !h) { if (o(n)) { c++, 9 === n ? u += 4 - u % 4 : u++; continue } h = !0 } 10 !== n && d !== l - 1 || (10 !== n && d++, this.bMarks.push(a), this.eMarks.push(d), this.tShift.push(c), this.sCount.push(u), this.bsCount.push(0), h = !1, c = 0, u = 0, a = d + 1) } this.bMarks.push(s.length), this.eMarks.push(s.length), this.tShift.push(0), this.sCount.push(0), this.bsCount.push(0), this.lineMax = this.bMarks.length - 1 } n.prototype.push = function (e, t, i) { var o = new r(e, t, i); return o.block = !0, i < 0 && this.level--, o.level = this.level, i > 0 && this.level++, this.tokens.push(o), o }, n.prototype.isEmpty = function (e) { return this.bMarks[e] + this.tShift[e] >= this.eMarks[e] }, n.prototype.skipEmptyLines = function (e) { for (var t = this.lineMax; e < t && !(this.bMarks[e] + this.tShift[e] < this.eMarks[e]); e++); return e }, n.prototype.skipSpaces = function (e) { for (var t, i = this.src.length; e < i && (t = this.src.charCodeAt(e), o(t)); e++); return e }, n.prototype.skipSpacesBack = function (e, t) { if (e <= t) return e; for (; e > t;)if (!o(this.src.charCodeAt(--e))) return e + 1; return e }, n.prototype.skipChars = function (e, t) { for (var i = this.src.length; e < i && this.src.charCodeAt(e) === t; e++); return e }, n.prototype.skipCharsBack = function (e, t, i) { if (e <= i) return e; for (; e > i;)if (t !== this.src.charCodeAt(--e)) return e + 1; return e }, n.prototype.getLines = function (e, t, i, r) { var n, s, a, d, l, c, u, h = e; if (e >= t) return ""; for (c = new Array(t - e), n = 0; h < t; h++, n++) { for (s = 0, u = d = this.bMarks[h], l = h + 1 < t || r ? this.eMarks[h] + 1 : this.eMarks[h]; d < l && s < i;) { if (a = this.src.charCodeAt(d), o(a)) 9 === a ? s += 4 - (s + this.bsCount[h]) % 4 : s++; else { if (!(d - u < this.tShift[h])) break; s++ } d++ } c[n] = s > i ? new Array(s - i + 1).join(" ") + this.src.slice(d, l) : this.src.slice(d, l) } return c.join("") }, n.prototype.Token = r, e.exports = n }, 1785: (e, t, i) => { "use strict"; var r = i(7022).isSpace; function o(e, t) { var i = e.bMarks[t] + e.tShift[t], r = e.eMarks[t]; return e.src.slice(i, r) } function n(e) { var t, i = [], r = 0, o = e.length, n = !1, s = 0, a = ""; for (t = e.charCodeAt(r); r < o;)124 === t && (n ? (a += e.substring(s, r - 1), s = r) : (i.push(a + e.substring(s, r)), a = "", s = r + 1)), n = 92 === t, r++, t = e.charCodeAt(r); return i.push(a + e.substring(s)), i } e.exports = function (e, t, i, s) { var a, d, l, c, u, h, p, m, f, g, b, v, y, w, S, x, k, _; if (t + 2 > i) return !1; if (h = t + 1, e.sCount[h] < e.blkIndent) return !1; if (e.sCount[h] - e.blkIndent >= 4) return !1; if ((l = e.bMarks[h] + e.tShift[h]) >= e.eMarks[h]) return !1; if (124 !== (k = e.src.charCodeAt(l++)) && 45 !== k && 58 !== k) return !1; if (l >= e.eMarks[h]) return !1; if (124 !== (_ = e.src.charCodeAt(l++)) && 45 !== _ && 58 !== _ && !r(_)) return !1; if (45 === k && r(_)) return !1; for (; l < e.eMarks[h];) { if (124 !== (a = e.src.charCodeAt(l)) && 45 !== a && 58 !== a && !r(a)) return !1; l++ } for (p = (d = o(e, t + 1)).split("|"), g = [], c = 0; c < p.length; c++) { if (!(b = p[c].trim())) { if (0 === c || c === p.length - 1) continue; return !1 } if (!/^:?-+:?$/.test(b)) return !1; 58 === b.charCodeAt(b.length - 1) ? g.push(58 === b.charCodeAt(0) ? "center" : "right") : 58 === b.charCodeAt(0) ? g.push("left") : g.push("") } if (-1 === (d = o(e, t).trim()).indexOf("|")) return !1; if (e.sCount[t] - e.blkIndent >= 4) return !1; if ((p = n(d)).length && "" === p[0] && p.shift(), p.length && "" === p[p.length - 1] && p.pop(), 0 === (m = p.length) || m !== g.length) return !1; if (s) return !0; for (w = e.parentType, e.parentType = "table", x = e.md.block.ruler.getRules("blockquote"), (f = e.push("table_open", "table", 1)).map = v = [t, 0], (f = e.push("thead_open", "thead", 1)).map = [t, t + 1], (f = e.push("tr_open", "tr", 1)).map = [t, t + 1], c = 0; c < p.length; c++)f = e.push("th_open", "th", 1), g[c] && (f.attrs = [["style", "text-align:" + g[c]]]), (f = e.push("inline", "", 0)).content = p[c].trim(), f.children = [], f = e.push("th_close", "th", -1); for (f = e.push("tr_close", "tr", -1), f = e.push("thead_close", "thead", -1), h = t + 2; h < i && !(e.sCount[h] < e.blkIndent); h++) { for (S = !1, c = 0, u = x.length; c < u; c++)if (x[c](e, h, i, !0)) { S = !0; break } if (S) break; if (!(d = o(e, h).trim())) break; if (e.sCount[h] - e.blkIndent >= 4) break; for ((p = n(d)).length && "" === p[0] && p.shift(), p.length && "" === p[p.length - 1] && p.pop(), h === t + 2 && ((f = e.push("tbody_open", "tbody", 1)).map = y = [t + 2, 0]), (f = e.push("tr_open", "tr", 1)).map = [h, h + 1], c = 0; c < m; c++)f = e.push("td_open", "td", 1), g[c] && (f.attrs = [["style", "text-align:" + g[c]]]), (f = e.push("inline", "", 0)).content = p[c] ? p[c].trim() : "", f.children = [], f = e.push("td_close", "td", -1); f = e.push("tr_close", "tr", -1) } return y && (f = e.push("tbody_close", "tbody", -1), y[1] = h), f = e.push("table_close", "table", -1), v[1] = h, e.parentType = w, e.line = h, !0 } }, 898: e => { "use strict"; e.exports = function (e) { var t; e.inlineMode ? ((t = new e.Token("inline", "", 0)).content = e.src, t.map = [0, 1], t.children = [], e.tokens.push(t)) : e.md.block.parse(e.src, e.md, e.env, e.tokens) } }, 9827: e => { "use strict"; e.exports = function (e) { var t, i, r, o = e.tokens; for (i = 0, r = o.length; i < r; i++)"inline" === (t = o[i]).type && e.md.inline.parse(t.content, e.md, e.env, t.children) } }, 7830: (e, t, i) => { "use strict"; var r = i(7022).arrayReplaceAt; function o(e) { return /^<\/a\s*>/i.test(e) } e.exports = function (e) { var t, i, n, s, a, d, l, c, u, h, p, m, f, g, b, v, y, w, S = e.tokens; if (e.md.options.linkify) for (i = 0, n = S.length; i < n; i++)if ("inline" === S[i].type && e.md.linkify.pretest(S[i].content)) for (f = 0, t = (s = S[i].children).length - 1; t >= 0; t--)if ("link_close" !== (d = s[t]).type) { if ("html_inline" === d.type && (w = d.content, /^<a[>\s]/i.test(w) && f > 0 && f--, o(d.content) && f++), !(f > 0) && "text" === d.type && e.md.linkify.test(d.content)) { for (u = d.content, y = e.md.linkify.match(u), l = [], m = d.level, p = 0, y.length > 0 && 0 === y[0].index && t > 0 && "text_special" === s[t - 1].type && (y = y.slice(1)), c = 0; c < y.length; c++)g = y[c].url, b = e.md.normalizeLink(g), e.md.validateLink(b) && (v = y[c].text, v = y[c].schema ? "mailto:" !== y[c].schema || /^mailto:/i.test(v) ? e.md.normalizeLinkText(v) : e.md.normalizeLinkText("mailto:" + v).replace(/^mailto:/, "") : e.md.normalizeLinkText("http://" + v).replace(/^http:\/\//, ""), (h = y[c].index) > p && ((a = new e.Token("text", "", 0)).content = u.slice(p, h), a.level = m, l.push(a)), (a = new e.Token("link_open", "a", 1)).attrs = [["href", b]], a.level = m++, a.markup = "linkify", a.info = "auto", l.push(a), (a = new e.Token("text", "", 0)).content = v, a.level = m, l.push(a), (a = new e.Token("link_close", "a", -1)).level = --m, a.markup = "linkify", a.info = "auto", l.push(a), p = y[c].lastIndex); p < u.length && ((a = new e.Token("text", "", 0)).content = u.slice(p), a.level = m, l.push(a)), S[i].children = s = r(s, t, l) } } else for (t--; s[t].level !== d.level && "link_open" !== s[t].type;)t-- } }, 4129: e => { "use strict"; var t = /\r\n?|\n/g, i = /\0/g; e.exports = function (e) { var r; r = (r = e.src.replace(t, "\n")).replace(i, "�"), e.src = r } }, 2834: e => { "use strict"; var t = /\+-|\.\.|\?\?\?\?|!!!!|,,|--/, i = /\((c|tm|r)\)/i, r = /\((c|tm|r)\)/gi, o = { c: "©", r: "®", tm: "™" }; function n(e, t) { return o[t.toLowerCase()] } function s(e) { var t, i, o = 0; for (t = e.length - 1; t >= 0; t--)"text" !== (i = e[t]).type || o || (i.content = i.content.replace(r, n)), "link_open" === i.type && "auto" === i.info && o--, "link_close" === i.type && "auto" === i.info && o++ } function a(e) { var i, r, o = 0; for (i = e.length - 1; i >= 0; i--)"text" !== (r = e[i]).type || o || t.test(r.content) && (r.content = r.content.replace(/\+-/g, "±").replace(/\.{2,}/g, "…").replace(/([?!])…/g, "$1..").replace(/([?!]){4,}/g, "$1$1$1").replace(/,{2,}/g, ",").replace(/(^|[^-])---(?=[^-]|$)/gm, "$1—").replace(/(^|\s)--(?=\s|$)/gm, "$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm, "$1–")), "link_open" === r.type && "auto" === r.info && o--, "link_close" === r.type && "auto" === r.info && o++ } e.exports = function (e) { var r; if (e.md.options.typographer) for (r = e.tokens.length - 1; r >= 0; r--)"inline" === e.tokens[r].type && (i.test(e.tokens[r].content) && s(e.tokens[r].children), t.test(e.tokens[r].content) && a(e.tokens[r].children)) } }, 8450: (e, t, i) => { "use strict"; var r = i(7022).isWhiteSpace, o = i(7022).isPunctChar, n = i(7022).isMdAsciiPunct, s = /['"]/, a = /['"]/g; function d(e, t, i) { return e.slice(0, t) + i + e.slice(t + 1) } function l(e, t) { var i, s, l, c, u, h, p, m, f, g, b, v, y, w, S, x, k, _, C, I, T; for (C = [], i = 0; i < e.length; i++) { for (s = e[i], p = e[i].level, k = C.length - 1; k >= 0 && !(C[k].level <= p); k--); if (C.length = k + 1, "text" === s.type) { u = 0, h = (l = s.content).length; e: for (; u < h && (a.lastIndex = u, c = a.exec(l));) { if (S = x = !0, u = c.index + 1, _ = "'" === c[0], f = 32, c.index - 1 >= 0) f = l.charCodeAt(c.index - 1); else for (k = i - 1; k >= 0 && "softbreak" !== e[k].type && "hardbreak" !== e[k].type; k--)if (e[k].content) { f = e[k].content.charCodeAt(e[k].content.length - 1); break } if (g = 32, u < h) g = l.charCodeAt(u); else for (k = i + 1; k < e.length && "softbreak" !== e[k].type && "hardbreak" !== e[k].type; k++)if (e[k].content) { g = e[k].content.charCodeAt(0); break } if (b = n(f) || o(String.fromCharCode(f)), v = n(g) || o(String.fromCharCode(g)), y = r(f), (w = r(g)) ? S = !1 : v && (y || b || (S = !1)), y ? x = !1 : b && (w || v || (x = !1)), 34 === g && '"' === c[0] && f >= 48 && f <= 57 && (x = S = !1), S && x && (S = b, x = v), S || x) { if (x) for (k = C.length - 1; k >= 0 && (m = C[k], !(C[k].level < p)); k--)if (m.single === _ && C[k].level === p) { m = C[k], _ ? (I = t.md.options.quotes[2], T = t.md.options.quotes[3]) : (I = t.md.options.quotes[0], T = t.md.options.quotes[1]), s.content = d(s.content, c.index, T), e[m.token].content = d(e[m.token].content, m.pos, I), u += T.length - 1, m.token === i && (u += I.length - 1), h = (l = s.content).length, C.length = k; continue e } S ? C.push({ token: i, pos: c.index, single: _, level: p }) : x && _ && (s.content = d(s.content, c.index, "’")) } else _ && (s.content = d(s.content, c.index, "’")) } } } } e.exports = function (e) { var t; if (e.md.options.typographer) for (t = e.tokens.length - 1; t >= 0; t--)"inline" === e.tokens[t].type && s.test(e.tokens[t].content) && l(e.tokens[t].children, e) } }, 6480: (e, t, i) => { "use strict"; var r = i(5872); function o(e, t, i) { this.src = e, this.env = i, this.tokens = [], this.inlineMode = !1, this.md = t } o.prototype.Token = r, e.exports = o }, 6633: e => { "use strict"; e.exports = function (e) { var t, i, r, o, n, s, a = e.tokens; for (t = 0, i = a.length; t < i; t++)if ("inline" === a[t].type) { for (n = (r = a[t].children).length, o = 0; o < n; o++)"text_special" === r[o].type && (r[o].type = "text"); for (o = s = 0; o < n; o++)"text" === r[o].type && o + 1 < n && "text" === r[o + 1].type ? r[o + 1].content = r[o].content + r[o + 1].content : (o !== s && (r[s] = r[o]), s++); o !== s && (r.length = s) } } }, 3420: e => { "use strict"; var t = /^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/, i = /^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/; e.exports = function (e, r) { var o, n, s, a, d, l, c = e.pos; if (60 !== e.src.charCodeAt(c)) return !1; for (d = e.pos, l = e.posMax; ;) { if (++c >= l) return !1; if (60 === (a = e.src.charCodeAt(c))) return !1; if (62 === a) break } return o = e.src.slice(d + 1, c), i.test(o) ? (n = e.md.normalizeLink(o), !!e.md.validateLink(n) && (r || ((s = e.push("link_open", "a", 1)).attrs = [["href", n]], s.markup = "autolink", s.info = "auto", (s = e.push("text", "", 0)).content = e.md.normalizeLinkText(o), (s = e.push("link_close", "a", -1)).markup = "autolink", s.info = "auto"), e.pos += o.length + 2, !0)) : !!t.test(o) && (n = e.md.normalizeLink("mailto:" + o), !!e.md.validateLink(n) && (r || ((s = e.push("link_open", "a", 1)).attrs = [["href", n]], s.markup = "autolink", s.info = "auto", (s = e.push("text", "", 0)).content = e.md.normalizeLinkText(o), (s = e.push("link_close", "a", -1)).markup = "autolink", s.info = "auto"), e.pos += o.length + 2, !0)) } }, 9755: e => { "use strict"; e.exports = function (e, t) { var i, r, o, n, s, a, d, l, c = e.pos; if (96 !== e.src.charCodeAt(c)) return !1; for (i = c, c++, r = e.posMax; c < r && 96 === e.src.charCodeAt(c);)c++; if (d = (o = e.src.slice(i, c)).length, e.backticksScanned && (e.backticks[d] || 0) <= i) return t || (e.pending += o), e.pos += d, !0; for (s = a = c; -1 !== (s = e.src.indexOf("`", a));) { for (a = s + 1; a < r && 96 === e.src.charCodeAt(a);)a++; if ((l = a - s) === d) return t || ((n = e.push("code_inline", "code", 0)).markup = o, n.content = e.src.slice(c, s).replace(/\n/g, " ").replace(/^ (.+) $/, "$1")), e.pos = a, !0; e.backticks[l] = s } return e.backticksScanned = !0, t || (e.pending += o), e.pos += d, !0 } }, 9354: e => { "use strict"; function t(e, t) { var i, r, o, n, s, a, d, l, c = {}, u = t.length; if (u) { var h = 0, p = -2, m = []; for (i = 0; i < u; i++)if (o = t[i], m.push(0), t[h].marker === o.marker && p === o.token - 1 || (h = i), p = o.token, o.length = o.length || 0, o.close) { for (c.hasOwnProperty(o.marker) || (c[o.marker] = [-1, -1, -1, -1, -1, -1]), s = c[o.marker][(o.open ? 3 : 0) + o.length % 3], a = r = h - m[h] - 1; r > s; r -= m[r] + 1)if ((n = t[r]).marker === o.marker && n.open && n.end < 0 && (d = !1, (n.close || o.open) && (n.length + o.length) % 3 == 0 && (n.length % 3 == 0 && o.length % 3 == 0 || (d = !0)), !d)) { l = r > 0 && !t[r - 1].open ? m[r - 1] + 1 : 0, m[i] = i - r + l, m[r] = l, o.open = !1, n.end = i, n.close = !1, a = -1, p = -2; break } -1 !== a && (c[o.marker][(o.open ? 3 : 0) + (o.length || 0) % 3] = a) } } } e.exports = function (e) { var i, r = e.tokens_meta, o = e.tokens_meta.length; for (t(0, e.delimiters), i = 0; i < o; i++)r[i] && r[i].delimiters && t(0, r[i].delimiters) } }, 7894: e => { "use strict"; function t(e, t) { var i, r, o, n, s, a; for (i = t.length - 1; i >= 0; i--)95 !== (r = t[i]).marker && 42 !== r.marker || -1 !== r.end && (o = t[r.end], a = i > 0 && t[i - 1].end === r.end + 1 && t[i - 1].marker === r.marker && t[i - 1].token === r.token - 1 && t[r.end + 1].token === o.token + 1, s = String.fromCharCode(r.marker), (n = e.tokens[r.token]).type = a ? "strong_open" : "em_open", n.tag = a ? "strong" : "em", n.nesting = 1, n.markup = a ? s + s : s, n.content = "", (n = e.tokens[o.token]).type = a ? "strong_close" : "em_close", n.tag = a ? "strong" : "em", n.nesting = -1, n.markup = a ? s + s : s, n.content = "", a && (e.tokens[t[i - 1].token].content = "", e.tokens[t[r.end + 1].token].content = "", i--)) } e.exports.w = function (e, t) { var i, r, o = e.pos, n = e.src.charCodeAt(o); if (t) return !1; if (95 !== n && 42 !== n) return !1; for (r = e.scanDelims(e.pos, 42 === n), i = 0; i < r.length; i++)e.push("text", "", 0).content = String.fromCharCode(n), e.delimiters.push({ marker: n, length: r.length, token: e.tokens.length - 1, end: -1, open: r.can_open, close: r.can_close }); return e.pos += r.length, !0 }, e.exports.g = function (e) { var i, r = e.tokens_meta, o = e.tokens_meta.length; for (t(e, e.delimiters), i = 0; i < o; i++)r[i] && r[i].delimiters && t(e, r[i].delimiters) } }, 9391: (e, t, i) => { "use strict"; var r = i(6233), o = i(7022).has, n = i(7022).isValidEntityCode, s = i(7022).fromCodePoint, a = /^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i, d = /^&([a-z][a-z0-9]{1,31});/i; e.exports = function (e, t) { var i, l, c, u = e.pos, h = e.posMax; if (38 !== e.src.charCodeAt(u)) return !1; if (u + 1 >= h) return !1; if (35 === e.src.charCodeAt(u + 1)) { if (l = e.src.slice(u).match(a)) return t || (i = "x" === l[1][0].toLowerCase() ? parseInt(l[1].slice(1), 16) : parseInt(l[1], 10), (c = e.push("text_special", "", 0)).content = n(i) ? s(i) : s(65533), c.markup = l[0], c.info = "entity"), e.pos += l[0].length, !0 } else if ((l = e.src.slice(u).match(d)) && o(r, l[1])) return t || ((c = e.push("text_special", "", 0)).content = r[l[1]], c.markup = l[0], c.info = "entity"), e.pos += l[0].length, !0; return !1 } }, 1917: (e, t, i) => { "use strict"; for (var r = i(7022).isSpace, o = [], n = 0; n < 256; n++)o.push(0); "\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function (e) { o[e.charCodeAt(0)] = 1 })), e.exports = function (e, t) { var i, n, s, a, d, l = e.pos, c = e.posMax; if (92 !== e.src.charCodeAt(l)) return !1; if (++l >= c) return !1; if (10 === (i = e.src.charCodeAt(l))) { for (t || e.push("hardbreak", "br", 0), l++; l < c && (i = e.src.charCodeAt(l), r(i));)l++; return e.pos = l, !0 } return a = e.src[l], i >= 55296 && i <= 56319 && l + 1 < c && (n = e.src.charCodeAt(l + 1)) >= 56320 && n <= 57343 && (a += e.src[l + 1], l++), s = "\\" + a, t || (d = e.push("text_special", "", 0), i < 256 && 0 !== o[i] ? d.content = a : d.content = s, d.markup = s, d.info = "escape"), e.pos = l + 1, !0 } }, 9969: e => { "use strict"; e.exports = function (e) { var t, i, r = 0, o = e.tokens, n = e.tokens.length; for (t = i = 0; t < n; t++)o[t].nesting < 0 && r--, o[t].level = r, o[t].nesting > 0 && r++, "text" === o[t].type && t + 1 < n && "text" === o[t + 1].type ? o[t + 1].content = o[t].content + o[t + 1].content : (t !== i && (o[i] = o[t]), i++); t !== i && (o.length = i) } }, 1779: (e, t, i) => { "use strict"; var r = i(1947).n; e.exports = function (e, t) { var i, o, n, s, a, d = e.pos; return !(!e.md.options.html || (n = e.posMax, 60 !== e.src.charCodeAt(d) || d + 2 >= n || 33 !== (i = e.src.charCodeAt(d + 1)) && 63 !== i && 47 !== i && !function (e) { var t = 32 | e; return t >= 97 && t <= 122 }(i) || !(o = e.src.slice(d).match(r)) || (t || ((s = e.push("html_inline", "", 0)).content = e.src.slice(d, d + o[0].length), a = s.content, /^<a[>\s]/i.test(a) && e.linkLevel++, function (e) { return /^<\/a\s*>/i.test(e) }(s.content) && e.linkLevel--), e.pos += o[0].length, 0))) } }, 3006: (e, t, i) => { "use strict"; var r = i(7022).normalizeReference, o = i(7022).isSpace; e.exports = function (e, t) { var i, n, s, a, d, l, c, u, h, p, m, f, g, b = "", v = e.pos, y = e.posMax; if (33 !== e.src.charCodeAt(e.pos)) return !1; if (91 !== e.src.charCodeAt(e.pos + 1)) return !1; if (l = e.pos + 2, (d = e.md.helpers.parseLinkLabel(e, e.pos + 1, !1)) < 0) return !1; if ((c = d + 1) < y && 40 === e.src.charCodeAt(c)) { for (c++; c < y && (n = e.src.charCodeAt(c), o(n) || 10 === n); c++); if (c >= y) return !1; for (g = c, (h = e.md.helpers.parseLinkDestination(e.src, c, e.posMax)).ok && (b = e.md.normalizeLink(h.str), e.md.validateLink(b) ? c = h.pos : b = ""), g = c; c < y && (n = e.src.charCodeAt(c), o(n) || 10 === n); c++); if (h = e.md.helpers.parseLinkTitle(e.src, c, e.posMax), c < y && g !== c && h.ok) for (p = h.str, c = h.pos; c < y && (n = e.src.charCodeAt(c), o(n) || 10 === n); c++); else p = ""; if (c >= y || 41 !== e.src.charCodeAt(c)) return e.pos = v, !1; c++ } else { if (void 0 === e.env.references) return !1; if (c < y && 91 === e.src.charCodeAt(c) ? (g = c + 1, (c = e.md.helpers.parseLinkLabel(e, c)) >= 0 ? a = e.src.slice(g, c++) : c = d + 1) : c = d + 1, a || (a = e.src.slice(l, d)), !(u = e.env.references[r(a)])) return e.pos = v, !1; b = u.href, p = u.title } return t || (s = e.src.slice(l, d), e.md.inline.parse(s, e.md, e.env, f = []), (m = e.push("image", "img", 0)).attrs = i = [["src", b], ["alt", ""]], m.children = f, m.content = s, p && i.push(["title", p])), e.pos = c, e.posMax = y, !0 } }, 1727: (e, t, i) => { "use strict"; var r = i(7022).normalizeReference, o = i(7022).isSpace; e.exports = function (e, t) { var i, n, s, a, d, l, c, u, h = "", p = "", m = e.pos, f = e.posMax, g = e.pos, b = !0; if (91 !== e.src.charCodeAt(e.pos)) return !1; if (d = e.pos + 1, (a = e.md.helpers.parseLinkLabel(e, e.pos, !0)) < 0) return !1; if ((l = a + 1) < f && 40 === e.src.charCodeAt(l)) { for (b = !1, l++; l < f && (n = e.src.charCodeAt(l), o(n) || 10 === n); l++); if (l >= f) return !1; if (g = l, (c = e.md.helpers.parseLinkDestination(e.src, l, e.posMax)).ok) { for (h = e.md.normalizeLink(c.str), e.md.validateLink(h) ? l = c.pos : h = "", g = l; l < f && (n = e.src.charCodeAt(l), o(n) || 10 === n); l++); if (c = e.md.helpers.parseLinkTitle(e.src, l, e.posMax), l < f && g !== l && c.ok) for (p = c.str, l = c.pos; l < f && (n = e.src.charCodeAt(l), o(n) || 10 === n); l++); } (l >= f || 41 !== e.src.charCodeAt(l)) && (b = !0), l++ } if (b) { if (void 0 === e.env.references) return !1; if (l < f && 91 === e.src.charCodeAt(l) ? (g = l + 1, (l = e.md.helpers.parseLinkLabel(e, l)) >= 0 ? s = e.src.slice(g, l++) : l = a + 1) : l = a + 1, s || (s = e.src.slice(d, a)), !(u = e.env.references[r(s)])) return e.pos = m, !1; h = u.href, p = u.title } return t || (e.pos = d, e.posMax = a, e.push("link_open", "a", 1).attrs = i = [["href", h]], p && i.push(["title", p]), e.linkLevel++, e.md.inline.tokenize(e), e.linkLevel--, e.push("link_close", "a", -1)), e.pos = l, e.posMax = f, !0 } }, 2906: e => { "use strict"; var t = /(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i; e.exports = function (e, i) { var r, o, n, s, a, d, l; return !(!e.md.options.linkify || e.linkLevel > 0 || (r = e.pos) + 3 > e.posMax || 58 !== e.src.charCodeAt(r) || 47 !== e.src.charCodeAt(r + 1) || 47 !== e.src.charCodeAt(r + 2) || !(o = e.pending.match(t)) || (n = o[1], !(s = e.md.linkify.matchAtStart(e.src.slice(r - n.length))) || (a = (a = s.url).replace(/\*+$/, ""), d = e.md.normalizeLink(a), !e.md.validateLink(d) || (i || (e.pending = e.pending.slice(0, -n.length), (l = e.push("link_open", "a", 1)).attrs = [["href", d]], l.markup = "linkify", l.info = "auto", (l = e.push("text", "", 0)).content = e.md.normalizeLinkText(a), (l = e.push("link_close", "a", -1)).markup = "linkify", l.info = "auto"), e.pos += a.length - n.length, 0)))) } }, 3905: (e, t, i) => { "use strict"; var r = i(7022).isSpace; e.exports = function (e, t) { var i, o, n, s = e.pos; if (10 !== e.src.charCodeAt(s)) return !1; if (i = e.pending.length - 1, o = e.posMax, !t) if (i >= 0 && 32 === e.pending.charCodeAt(i)) if (i >= 1 && 32 === e.pending.charCodeAt(i - 1)) { for (n = i - 1; n >= 1 && 32 === e.pending.charCodeAt(n - 1);)n--; e.pending = e.pending.slice(0, n), e.push("hardbreak", "br", 0) } else e.pending = e.pending.slice(0, -1), e.push("softbreak", "br", 0); else e.push("softbreak", "br", 0); for (s++; s < o && r(e.src.charCodeAt(s));)s++; return e.pos = s, !0 } }, 670: (e, t, i) => { "use strict"; var r = i(5872), o = i(7022).isWhiteSpace, n = i(7022).isPunctChar, s = i(7022).isMdAsciiPunct; function a(e, t, i, r) { this.src = e, this.env = i, this.md = t, this.tokens = r, this.tokens_meta = Array(r.length), this.pos = 0, this.posMax = this.src.length, this.level = 0, this.pending = "", this.pendingLevel = 0, this.cache = {}, this.delimiters = [], this._prev_delimiters = [], this.backticks = {}, this.backticksScanned = !1, this.linkLevel = 0 } a.prototype.pushPending = function () { var e = new r("text", "", 0); return e.content = this.pending, e.level = this.pendingLevel, this.tokens.push(e), this.pending = "", e }, a.prototype.push = function (e, t, i) { this.pending && this.pushPending(); var o = new r(e, t, i), n = null; return i < 0 && (this.level--, this.delimiters = this._prev_delimiters.pop()), o.level = this.level, i > 0 && (this.level++, this._prev_delimiters.push(this.delimiters), this.delimiters = [], n = { delimiters: this.delimiters }), this.pendingLevel = this.level, this.tokens.push(o), this.tokens_meta.push(n), o }, a.prototype.scanDelims = function (e, t) { var i, r, a, d, l, c, u, h, p, m = e, f = !0, g = !0, b = this.posMax, v = this.src.charCodeAt(e); for (i = e > 0 ? this.src.charCodeAt(e - 1) : 32; m < b && this.src.charCodeAt(m) === v;)m++; return a = m - e, r = m < b ? this.src.charCodeAt(m) : 32, u = s(i) || n(String.fromCharCode(i)), p = s(r) || n(String.fromCharCode(r)), c = o(i), (h = o(r)) ? f = !1 : p && (c || u || (f = !1)), c ? g = !1 : u && (h || p || (g = !1)), t ? (d = f, l = g) : (d = f && (!g || u), l = g && (!f || p)), { can_open: d, can_close: l, length: a } }, a.prototype.Token = r, e.exports = a }, 4814: e => { "use strict"; function t(e, t) { var i, r, o, n, s, a = [], d = t.length; for (i = 0; i < d; i++)126 === (o = t[i]).marker && -1 !== o.end && (n = t[o.end], (s = e.tokens[o.token]).type = "s_open", s.tag = "s", s.nesting = 1, s.markup = "~~", s.content = "", (s = e.tokens[n.token]).type = "s_close", s.tag = "s", s.nesting = -1, s.markup = "~~", s.content = "", "text" === e.tokens[n.token - 1].type && "~" === e.tokens[n.token - 1].content && a.push(n.token - 1)); for (; a.length;) { for (r = (i = a.pop()) + 1; r < e.tokens.length && "s_close" === e.tokens[r].type;)r++; i !== --r && (s = e.tokens[r], e.tokens[r] = e.tokens[i], e.tokens[i] = s) } } e.exports.w = function (e, t) { var i, r, o, n, s = e.pos, a = e.src.charCodeAt(s); if (t) return !1; if (126 !== a) return !1; if (o = (r = e.scanDelims(e.pos, !0)).length, n = String.fromCharCode(a), o < 2) return !1; for (o % 2 && (e.push("text", "", 0).content = n, o--), i = 0; i < o; i += 2)e.push("text", "", 0).content = n + n, e.delimiters.push({ marker: a, length: 0, token: e.tokens.length - 1, end: -1, open: r.can_open, close: r.can_close }); return e.pos += r.length, !0 }, e.exports.g = function (e) { var i, r = e.tokens_meta, o = e.tokens_meta.length; for (t(e, e.delimiters), i = 0; i < o; i++)r[i] && r[i].delimiters && t(e, r[i].delimiters) } }, 9941: e => { "use strict"; function t(e) { switch (e) { case 10: case 33: case 35: case 36: case 37: case 38: case 42: case 43: case 45: case 58: case 60: case 61: case 62: case 64: case 91: case 92: case 93: case 94: case 95: case 96: case 123: case 125: case 126: return !0; default: return !1 } } e.exports = function (e, i) { for (var r = e.pos; r < e.posMax && !t(e.src.charCodeAt(r));)r++; return r !== e.pos && (i || (e.pending += e.src.slice(e.pos, r)), e.pos = r, !0) } }, 5872: e => { "use strict"; function t(e, t, i) { this.type = e, this.tag = t, this.attrs = null, this.map = null, this.nesting = i, this.level = 0, this.children = null, this.content = "", this.markup = "", this.info = "", this.meta = null, this.block = !1, this.hidden = !1 } t.prototype.attrIndex = function (e) { var t, i, r; if (!this.attrs) return -1; for (i = 0, r = (t = this.attrs).length; i < r; i++)if (t[i][0] === e) return i; return -1 }, t.prototype.attrPush = function (e) { this.attrs ? this.attrs.push(e) : this.attrs = [e] }, t.prototype.attrSet = function (e, t) { var i = this.attrIndex(e), r = [e, t]; i < 0 ? this.attrPush(r) : this.attrs[i] = r }, t.prototype.attrGet = function (e) { var t = this.attrIndex(e), i = null; return t >= 0 && (i = this.attrs[t][1]), i }, t.prototype.attrJoin = function (e, t) { var i = this.attrIndex(e); i < 0 ? this.attrPush([e, t]) : this.attrs[i][1] = this.attrs[i][1] + " " + t }, e.exports = t }, 3122: e => { "use strict"; var t = {}; function i(e, r) { var o; return "string" != typeof r && (r = i.defaultChars), o = function (e) { var i, r, o = t[e]; if (o) return o; for (o = t[e] = [], i = 0; i < 128; i++)r = String.fromCharCode(i), o.push(r); for (i = 0; i < e.length; i++)o[r = e.charCodeAt(i)] = "%" + ("0" + r.toString(16).toUpperCase()).slice(-2); return o }(r), e.replace(/(%[a-f0-9]{2})+/gi, (function (e) { var t, i, r, n, s, a, d, l = ""; for (t = 0, i = e.length; t < i; t += 3)(r = parseInt(e.slice(t + 1, t + 3), 16)) < 128 ? l += o[r] : 192 == (224 & r) && t + 3 < i && 128 == (192 & (n = parseInt(e.slice(t + 4, t + 6), 16))) ? (l += (d = r << 6 & 1984 | 63 & n) < 128 ? "��" : String.fromCharCode(d), t += 3) : 224 == (240 & r) && t + 6 < i && (n = parseInt(e.slice(t + 4, t + 6), 16), s = parseInt(e.slice(t + 7, t + 9), 16), 128 == (192 & n) && 128 == (192 & s)) ? (l += (d = r << 12 & 61440 | n << 6 & 4032 | 63 & s) < 2048 || d >= 55296 && d <= 57343 ? "���" : String.fromCharCode(d), t += 6) : 240 == (248 & r) && t + 9 < i && (n = parseInt(e.slice(t + 4, t + 6), 16), s = parseInt(e.slice(t + 7, t + 9), 16), a = parseInt(e.slice(t + 10, t + 12), 16), 128 == (192 & n) && 128 == (192 & s) && 128 == (192 & a)) ? ((d = r << 18 & 1835008 | n << 12 & 258048 | s << 6 & 4032 | 63 & a) < 65536 || d > 1114111 ? l += "����" : (d -= 65536, l += String.fromCharCode(55296 + (d >> 10), 56320 + (1023 & d))), t += 9) : l += "�"; return l })) } i.defaultChars = ";/?:@&=+$,#", i.componentChars = "", e.exports = i }, 729: e => { "use strict"; var t = {}; function i(e, r, o) { var n, s, a, d, l, c = ""; for ("string" != typeof r && (o = r, r = i.defaultChars), void 0 === o && (o = !0), l = function (e) { var i, r, o = t[e]; if (o) return o; for (o = t[e] = [], i = 0; i < 128; i++)r = String.fromCharCode(i), /^[0-9a-z]$/i.test(r) ? o.push(r) : o.push("%" + ("0" + i.toString(16).toUpperCase()).slice(-2)); for (i = 0; i < e.length; i++)o[e.charCodeAt(i)] = e[i]; return o }(r), n = 0, s = e.length; n < s; n++)if (a = e.charCodeAt(n), o && 37 === a && n + 2 < s && /^[0-9a-f]{2}$/i.test(e.slice(n + 1, n + 3))) c += e.slice(n, n + 3), n += 2; else if (a < 128) c += l[a]; else if (a >= 55296 && a <= 57343) { if (a >= 55296 && a <= 56319 && n + 1 < s && (d = e.charCodeAt(n + 1)) >= 56320 && d <= 57343) { c += encodeURIComponent(e[n] + e[n + 1]), n++; continue } c += "%EF%BF%BD" } else c += encodeURIComponent(e[n]); return c } i.defaultChars = ";/?:@&=+$,-_.!~*'()#", i.componentChars = "-_.!~*'()", e.exports = i }, 2201: e => { "use strict"; e.exports = function (e) { var t = ""; return t += e.protocol || "", t += e.slashes ? "//" : "", t += e.auth ? e.auth + "@" : "", e.hostname && -1 !== e.hostname.indexOf(":") ? t += "[" + e.hostname + "]" : t += e.hostname || "", t += e.port ? ":" + e.port : "", t += e.pathname || "", (t += e.search || "") + (e.hash || "") } }, 8765: (e, t, i) => { "use strict"; e.exports.encode = i(729), e.exports.decode = i(3122), e.exports.format = i(2201), e.exports.parse = i(9553) }, 9553: e => { "use strict"; function t() { this.protocol = null, this.slashes = null, this.auth = null, this.port = null, this.hostname = null, this.hash = null, this.search = null, this.pathname = null } var i = /^([a-z0-9.+-]+:)/i, r = /:[0-9]*$/, o = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/, n = ["{", "}", "|", "\\", "^", "`"].concat(["<", ">", '"', "`", " ", "\r", "\n", "\t"]), s = ["'"].concat(n), a = ["%", "/", "?", ";", "#"].concat(s), d = ["/", "?", "#"], l = /^[+a-z0-9A-Z_-]{0,63}$/, c = /^([+a-z0-9A-Z_-]{0,63})(.*)$/, u = { javascript: !0, "javascript:": !0 }, h = { http: !0, https: !0, ftp: !0, gopher: !0, file: !0, "http:": !0, "https:": !0, "ftp:": !0, "gopher:": !0, "file:": !0 }; t.prototype.parse = function (e, t) { var r, n, s, p, m, f = e; if (f = f.trim(), !t && 1 === e.split("#").length) { var g = o.exec(f); if (g) return this.pathname = g[1], g[2] && (this.search = g[2]), this } var b = i.exec(f); if (b && (s = (b = b[0]).toLowerCase(), this.protocol = b, f = f.substr(b.length)), (t || b || f.match(/^\/\/[^@\/]+@[^@\/]+/)) && (!(m = "//" === f.substr(0, 2)) || b && u[b] || (f = f.substr(2), this.slashes = !0)), !u[b] && (m || b && !h[b])) { var v, y, w = -1; for (r = 0; r < d.length; r++)-1 !== (p = f.indexOf(d[r])) && (-1 === w || p < w) && (w = p); for (-1 !== (y = -1 === w ? f.lastIndexOf("@") : f.lastIndexOf("@", w)) && (v = f.slice(0, y), f = f.slice(y + 1), this.auth = v), w = -1, r = 0; r < a.length; r++)-1 !== (p = f.indexOf(a[r])) && (-1 === w || p < w) && (w = p); -1 === w && (w = f.length), ":" === f[w - 1] && w--; var S = f.slice(0, w); f = f.slice(w), this.parseHost(S), this.hostname = this.hostname || ""; var x = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1]; if (!x) { var k = this.hostname.split(/\./); for (r = 0, n = k.length; r < n; r++) { var _ = k[r]; if (_ && !_.match(l)) { for (var C = "", I = 0, T = _.length; I < T; I++)_.charCodeAt(I) > 127 ? C += "x" : C += _[I]; if (!C.match(l)) { var E = k.slice(0, r), A = k.slice(r + 1), M = _.match(c); M && (E.push(M[1]), A.unshift(M[2])), A.length && (f = A.join(".") + f), this.hostname = E.join("."); break } } } } this.hostname.length > 255 && (this.hostname = ""), x && (this.hostname = this.hostname.substr(1, this.hostname.length - 2)) } var O = f.indexOf("#"); -1 !== O && (this.hash = f.substr(O), f = f.slice(0, O)); var P = f.indexOf("?"); return -1 !== P && (this.search = f.substr(P), f = f.slice(0, P)), f && (this.pathname = f), h[s] && this.hostname && !this.pathname && (this.pathname = ""), this }, t.prototype.parseHost = function (e) { var t = r.exec(e); t && (":" !== (t = t[0]) && (this.port = t.substr(1)), e = e.substr(0, e.length - t.length)), e && (this.hostname = e) }, e.exports = function (e, i) { if (e && e instanceof t) return e; var r = new t; return r.parse(e, i), r } }, 3689: (e, t, i) => { "use strict"; i.r(t), i.d(t, { decode: () => b, default: () => S, encode: () => v, toASCII: () => w, toUnicode: () => y, ucs2decode: () => p, ucs2encode: () => m }); const r = 2147483647, o = 36, n = /^xn--/, s = /[^\0-\x7E]/, a = /[\x2E\u3002\uFF0E\uFF61]/g, d = { overflow: "Overflow: input needs wider integers to process", "not-basic": "Illegal input >= 0x80 (not a basic code point)", "invalid-input": "Invalid input" }, l = Math.floor, c = String.fromCharCode; function u(e) { throw new RangeError(d[e]) } function h(e, t) { const i = e.split("@"); let r = ""; i.length > 1 && (r = i[0] + "@", e = i[1]); const o = function (e, t) { const i = []; let r = e.length; for (; r--;)i[r] = t(e[r]); return i }((e = e.replace(a, ".")).split("."), t).join("."); return r + o } function p(e) { const t = []; let i = 0; const r = e.length; for (; i < r;) { const o = e.charCodeAt(i++); if (o >= 55296 && o <= 56319 && i < r) { const r = e.charCodeAt(i++); 56320 == (64512 & r) ? t.push(((1023 & o) << 10) + (1023 & r) + 65536) : (t.push(o), i--) } else t.push(o) } return t } const m = e => String.fromCodePoint(...e), f = function (e, t) { return e + 22 + 75 * (e < 26) - ((0 != t) << 5) }, g = function (e, t, i) { let r = 0; for (e = i ? l(e / 700) : e >> 1, e += l(e / t); e > 455; r += o)e = l(e / 35); return l(r + 36 * e / (e + 38)) }, b = function (e) { const t = [], i = e.length; let n = 0, s = 128, a = 72, d = e.lastIndexOf("-"); d < 0 && (d = 0); for (let i = 0; i < d; ++i)e.charCodeAt(i) >= 128 && u("not-basic"), t.push(e.charCodeAt(i)); for (let h = d > 0 ? d + 1 : 0; h < i;) { let d = n; for (let t = 1, s = o; ; s += o) { h >= i && u("invalid-input"); const d = (c = e.charCodeAt(h++)) - 48 < 10 ? c - 22 : c - 65 < 26 ? c - 65 : c - 97 < 26 ? c - 97 : o; (d >= o || d > l((r - n) / t)) && u("overflow"), n += d * t; const p = s <= a ? 1 : s >= a + 26 ? 26 : s - a; if (d < p) break; const m = o - p; t > l(r / m) && u("overflow"), t *= m } const p = t.length + 1; a = g(n - d, p, 0 == d), l(n / p) > r - s && u("overflow"), s += l(n / p), n %= p, t.splice(n++, 0, s) } var c; return String.fromCodePoint(...t) }, v = function (e) { const t = []; let i = (e = p(e)).length, n = 128, s = 0, a = 72; for (const i of e) i < 128 && t.push(c(i)); let d = t.length, h = d; for (d && t.push("-"); h < i;) { let i = r; for (const t of e) t >= n && t < i && (i = t); const p = h + 1; i - n > l((r - s) / p) && u("overflow"), s += (i - n) * p, n = i; for (const i of e) if (i < n && ++s > r && u("overflow"), i == n) { let e = s; for (let i = o; ; i += o) { const r = i <= a ? 1 : i >= a + 26 ? 26 : i - a; if (e < r) break; const n = e - r, s = o - r; t.push(c(f(r + n % s, 0))), e = l(n / s) } t.push(c(f(e, 0))), a = g(s, p, h == d), s = 0, ++h } ++s, ++n } return t.join("") }, y = function (e) { return h(e, (function (e) { return n.test(e) ? b(e.slice(4).toLowerCase()) : e })) }, w = function (e) { return h(e, (function (e) { return s.test(e) ? "xn--" + v(e) : e })) }, S = { version: "2.1.0", ucs2: { decode: p, encode: m }, decode: b, encode: v, toASCII: w, toUnicode: y } }, 8222: (e, t, i) => { "use strict"; i.r(t), i.d(t, { default: () => b }); var r = i(3379), o = i.n(r), n = i(7795), s = i.n(n), a = i(569), d = i.n(a), l = i(3565), c = i.n(l), u = i(9216), h = i.n(u), p = i(4589), m = i.n(p), f = i(2411), g = {}; g.styleTagTransform = m(), g.setAttributes = c(), g.insert = d().bind(null, "head"), g.domAPI = s(), g.insertStyleElement = h(), o()(f.Z, g); const b = f.Z && f.Z.locals ? f.Z.locals : void 0 }, 3379: e => { "use strict"; var t = []; function i(e) { for (var i = -1, r = 0; r < t.length; r++)if (t[r].identifier === e) { i = r; break } return i } function r(e, r) { for (var n = {}, s = [], a = 0; a < e.length; a++) { var d = e[a], l = r.base ? d[0] + r.base : d[0], c = n[l] || 0, u = "".concat(l, " ").concat(c); n[l] = c + 1; var h = i(u), p = { css: d[1], media: d[2], sourceMap: d[3], supports: d[4], layer: d[5] }; if (-1 !== h) t[h].references++, t[h].updater(p); else { var m = o(p, r); r.byIndex = a, t.splice(a, 0, { identifier: u, updater: m, references: 1 }) } s.push(u) } return s } function o(e, t) { var i = t.domAPI(t); return i.update(e), function (t) { if (t) { if (t.css === e.css && t.media === e.media && t.sourceMap === e.sourceMap && t.supports === e.supports && t.layer === e.layer) return; i.update(e = t) } else i.remove() } } e.exports = function (e, o) { var n = r(e = e || [], o = o || {}); return function (e) { e = e || []; for (var s = 0; s < n.length; s++) { var a = i(n[s]); t[a].references-- } for (var d = r(e, o), l = 0; l < n.length; l++) { var c = i(n[l]); 0 === t[c].references && (t[c].updater(), t.splice(c, 1)) } n = d } } }, 569: e => { "use strict"; var t = {}; e.exports = function (e, i) { var r = function (e) { if (void 0 === t[e]) { var i = document.querySelector(e); if (window.HTMLIFrameElement && i instanceof window.HTMLIFrameElement) try { i = i.contentDocument.head } catch (e) { i = null } t[e] = i } return t[e] }(e); if (!r) throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid."); r.appendChild(i) } }, 9216: e => { "use strict"; e.exports = function (e) { var t = document.createElement("style"); return e.setAttributes(t, e.attributes), e.insert(t, e.options), t } }, 3565: (e, t, i) => { "use strict"; e.exports = function (e) { var t = i.nc; t && e.setAttribute("nonce", t) } }, 7795: e => { "use strict"; e.exports = function (e) { var t = e.insertStyleElement(e); return { update: function (i) { !function (e, t, i) { var r = ""; i.supports && (r += "@supports (".concat(i.supports, ") {")), i.media && (r += "@media ".concat(i.media, " {")); var o = void 0 !== i.layer; o && (r += "@layer".concat(i.layer.length > 0 ? " ".concat(i.layer) : "", " {")), r += i.css, o && (r += "}"), i.media && (r += "}"), i.supports && (r += "}"); var n = i.sourceMap; n && "undefined" != typeof btoa && (r += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n)))), " */")), t.styleTagTransform(r, e, t.options) }(t, e, i) }, remove: function () { !function (e) { if (null === e.parentNode) return !1; e.parentNode.removeChild(e) }(t) } } } }, 4589: e => { "use strict"; e.exports = function (e, t) { if (t.styleSheet) t.styleSheet.cssText = e; else { for (; t.firstChild;)t.removeChild(t.firstChild); t.appendChild(document.createTextNode(e)) } } }, 7131: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2388), n = i(988); class s { constructor(e, t, i = 440, r = 1, o = .1, n = .1) { this.logger = e, this.sinkId = t, this.frequency = i, this.durationSec = r, this.rampSec = o, this.maxGainValue = n } init() { var e, t; return r(this, void 0, void 0, (function* () { const i = new (window.AudioContext || window.webkitAudioContext), r = i.createGain(); r.gain.value = 0; const a = i.createOscillator(); a.frequency.value = this.frequency, a.connect(r); const d = i.createMediaStreamDestination(); r.connect(d); const l = i.currentTime + .1; r.gain.linearRampToValueAtTime(0, l), r.gain.linearRampToValueAtTime(this.maxGainValue, l + this.rampSec), r.gain.linearRampToValueAtTime(this.maxGainValue, l + this.rampSec + this.durationSec), r.gain.linearRampToValueAtTime(0, l + 2 * this.rampSec + this.durationSec), a.start(); const c = new o.DefaultAudioMixController(this.logger); if ((new o.DefaultBrowserBehavior).supportsSetSinkId()) try { yield c.bindAudioDevice({ deviceId: this.sinkId }) } catch (t) { n.fatal(t), null === (e = this.logger) || void 0 === e || e.error(`Failed to bind audio device: ${t}`) } try { yield c.bindAudioElement(s.testAudioElement) } catch (e) { n.fatal(e), null === (t = this.logger) || void 0 === t || t.error(`Failed to bind audio element: ${e}`) } yield c.bindAudioStream(d.stream), new o.TimeoutScheduler(1e3 * (2 * this.rampSec + this.durationSec + 1)).start((() => { i.close() })) })) } } t.default = s, s.testAudioElement = new Audio }, 3026: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); class i { constructor(e, t) { this.name = e, this.id = e, this.signalStrength = 1 } } class r { constructor() { this.attendeeInfoMap = new Map } hasAttendee(e) { return this.attendeeInfoMap.has(e) } getAllAttendeeIds() { let e = []; const t = this.attendeeInfoMap.keys(); for (let i = 0; i < this.attendeeInfoMap.size; i++)e.push(t.next().value); return e } addAttendee(e, t) { if (this.hasAttendee(e)) return; const o = new i(e, t); this.attendeeInfoMap.set(e, o); const n = document.createElement("li"), s = document.createElement("span"), a = document.createElement("span"); s.className = "name", s.innerText = t, a.className = "status", n.className = "list-group-item d-flex justify-content-between align-items-center", n.id = r.ATTENDEE_ELEMENT_PREFIX + e, n.appendChild(s), n.appendChild(a), this.getContainerElement().appendChild(n) } removeAttendee(e) { if (!this.hasAttendee(e)) return !1; const t = this.getContainerElement(), i = document.getElementById(r.ATTENDEE_ELEMENT_PREFIX + e); return t.removeChild(i), this.attendeeInfoMap.delete(e), !0 } setMuteStatus(e, t) { this.hasAttendee(e) && (this.attendeeInfoMap.get(e).muted = t, this.handleRosterStatusUpdate(e)) } setSignalStrength(e, t) { this.hasAttendee(e) && (this.attendeeInfoMap.get(e).signalStrength = t, this.handleRosterStatusUpdate(e)) } setAttendeeSpeakingStatus(e, t) { this.hasAttendee(e) && (this.attendeeInfoMap.get(e).speaking = t, this.handleRosterStatusUpdate(e)) } clear() { this.getContainerElement().innerHTML = "", this.attendeeInfoMap.clear() } getContainerElement() { return document.getElementById(r.CONTAINER_ID) } handleRosterStatusUpdate(e) { let t = " ", i = "status badge rounded-pill "; const o = this.attendeeInfoMap.get(e); o.signalStrength < 1 ? i += "bg-warning" : 0 === o.signalStrength ? i = "bg-danger" : o.muted ? (t = "MUTED", i += "bg-secondary") : o.speaking && (t = "SPEAKING", i += "bg-success"); const n = document.getElementById(r.ATTENDEE_ELEMENT_PREFIX + e).getElementsByClassName("status")[0]; n.className = i, n.innerText = t } } t.default = r, r.ATTENDEE_ELEMENT_PREFIX = "roster-", r.CONTAINER_ID = "roster" }, 988: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }, o = this && this.__rest || function (e, t) { var i = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (i[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var o = 0; for (r = Object.getOwnPropertySymbols(e); o < r.length; o++)t.indexOf(r[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[o]) && (i[r[o]] = e[r[o]]) } return i }; Object.defineProperty(t, "__esModule", { value: !0 }), t.DemoMeetingApp = t.ContentShareType = t.fatal = void 0, i(8222); const n = i(2388), s = i(7131); i(4735).default; const a = i(1261), d = i(4986), l = i(952), c = i(9745), u = i(1193), h = i(3521), p = i(9100), m = i(63), f = i(9610), g = i(3026); let b = document.location.search.includes("earlyConnect=1"), v = (() => { const e = "127.0.0.1:8080" === document.location.host || "localhost:8080" === document.location.host, t = document.location.search.includes("fatal=1"), i = document.location.search.includes("fatal=0"); return t || e && !i })(); const y = new URLSearchParams(document.location.search), w = y.get("voiceFocusName") || void 0, S = y.get("voiceFocusCDN") || void 0, x = y.get("voiceFocusAssetGroup") || void 0, k = y.get("voiceFocusRevisionID") || void 0, _ = S && { processors: `${S}processors/`, wasm: `${S}wasm/`, workers: `${S}workers/`, models: `${S}wasm/` }; function C(e = w) { if (e && ["default", "ns_es"].includes(e)) return e } const I = { name: C(), assetGroup: x, revisionID: k, paths: _ }; function T(e) { var t, i, r; const o = "AVAILABLE" === (null === (r = null === (i = null === (t = e.Meeting.Meeting) || void 0 === t ? void 0 : t.MeetingFeatures) || void 0 === i ? void 0 : i.Audio) || void 0 === r ? void 0 : r.EchoReduction); let n = I; return n.name || (n.name = C(o ? "ns_es" : "default")), n } const E = void 0, A = y.get("blurCDN") || void 0, M = y.get("blurAssetGroup") || void 0, O = y.get("blurRevisionID") || void 0, P = A && { worker: `${A}/bgblur/workers/worker.js`, wasm: `${A}/bgblur/wasm/_cwt-wasm.wasm`, simd: `${A}/bgblur/wasm/_cwt-wasm-simd.wasm` }, D = A && n.ModelSpecBuilder.builder().withSelfieSegmentationDefaults().withPath(`${A}/bgblur/models/selfie_segmentation_landscape.tflite`).build(), R = (M || O) && { assetGroup: M, revisionID: O }, L = ["Emojify", "CircularCut", "NoOp", "Resize (9/16)"]; var B; !function (e) { e[e.ScreenCapture = 0] = "ScreenCapture", e[e.VideoFile = 1] = "VideoFile" }(B = t.ContentShareType || (t.ContentShareType = {})); const V = { [n.SimulcastLayers.Low]: "Low", [n.SimulcastLayers.LowAndMedium]: "Low and Medium", [n.SimulcastLayers.LowAndHigh]: "Low and High", [n.SimulcastLayers.Medium]: "Medium", [n.SimulcastLayers.MediumAndHigh]: "Medium and High", [n.SimulcastLayers.High]: "High" }, F = new Set(["ja-JP", "zh-CN"]); class N { constructor() { this.loadingBodyPixDependencyTimeoutMs = 1e4, this.attendeeIdPresenceHandler = void 0, this.activeSpeakerHandler = void 0, this.volumeIndicatorHandler = void 0, this.canUnmuteLocalAudioHandler = void 0, this.muteAndUnmuteLocalAudioHandler = void 0, this.blurObserver = void 0, this.replacementObserver = void 0, this.showActiveSpeakerScores = !1, this.meeting = null, this.name = null, this.voiceConnectorId = null, this.sipURI = null, this.region = null, this.primaryExternalMeetingId = void 0, this.primaryMeetingSessionCredentials = void 0, this.meetingSession = null, this.priorityBasedDownlinkPolicy = null, this.audioVideo = null, this.deviceController = void 0, this.canStartLocalVideo = !0, this.defaultBrowserBehavior = new n.DefaultBrowserBehavior, this.videoTileCollection = void 0, this.videoPreferenceManager = void 0, this.roster = new g.default, this.cameraDeviceIds = [], this.microphoneDeviceIds = [], this.buttonStates = { "button-microphone": "on", "button-camera": "off", "button-speaker": "on", "button-content-share": "off", "button-pause-content-share": "off", "button-live-transcription": "off", "button-video-stats": "off", "button-promote-to-primary": "off", "button-video-filter": "off", "button-record-self": "off", "button-record-cloud": "off" }, this.contentShareType = B.ScreenCapture, this.isViewOnly = !1, this.enableWebAudio = !1, this.logLevel = n.LogLevel.INFO, this.videoCodecPreferences = void 0, this.enableSimulcast = !1, this.usePriorityBasedDownlinkPolicy = !1, this.videoPriorityBasedPolicyConfig = n.VideoPriorityBasedPolicyConfig.Default, this.enablePin = !1, this.echoReductionCapability = !1, this.usingStereoMusicAudioProfile = !1, this.supportsVoiceFocus = !1, this.enableVoiceFocus = !1, this.voiceFocusIsActive = !1, this.supportsBackgroundBlur = !1, this.supportsBackgroundReplacement = !1, this.enableLiveTranscription = !1, this.noWordSeparatorForTranscription = !1, this.markdown = i(9980)({ linkify: !0 }), this.lastMessageSender = null, this.lastReceivedMessageTimestamp = 0, this.lastPacketsSent = 0, this.hasChromiumWebRTC = this.defaultBrowserBehavior.hasChromiumWebRTC(), this.deleteOwnAttendeeToLeave = !1, this.voiceFocusDisplayables = [], this.liveTranscriptionDisplayables = [], this.chosenVideoFilter = "None", this.selectedVideoFilterItem = "None", this.meetingLogger = void 0, this.behaviorAfterLeave = "reload", this.videoMetricReport = {}, this.transcriptContainerDiv = document.getElementById("transcript-container"), this.partialTranscriptResultTimeMap = new Map, this.partialTranscriptResultMap = new Map, this.transcriptEntitySet = new Set, this.eventReporter = void 0, this.enableEventReporting = !1, this.resetStats = () => { this.videoMetricReport = {} }, this.transcriptEventHandler = e => { var t; if (this.enableLiveTranscription || (this.enableLiveTranscription = !0, this.updateLiveTranscriptionDisplayState(), this.setButtonVisibility("button-live-transcription", !0, "on"), this.transcriptContainerDiv.style.display = "block"), e instanceof n.TranscriptionStatus) if (this.appendStatusDiv(e), e.type === n.TranscriptionStatusType.STARTED) { let t = null; const i = JSON.parse(e.transcriptionConfiguration); i && (i.EngineTranscribeSettings ? t = i.EngineTranscribeSettings.LanguageCode : i.EngineTranscribeMedicalSettings && (t = i.EngineTranscribeMedicalSettings.languageCode)), t && F.has(t) && (this.noWordSeparatorForTranscription = !0) } else e.type !== n.TranscriptionStatusType.STOPPED && e.type !== n.TranscriptionStatusType.FAILED || !this.enableLiveTranscription || (this.enableLiveTranscription = !1, this.noWordSeparatorForTranscription = !1, this.updateLiveTranscriptionDisplayState(), this.partialTranscriptResultTimeMap.clear(), this.partialTranscriptDiv = null, this.partialTranscriptResultMap.clear()); else if (e instanceof n.Transcript) for (const i of e.results) { const e = i.resultId, r = i.isPartial, o = i.languageCode; if (o && F.has(o) && (this.noWordSeparatorForTranscription = !0), !r && (null === (t = i.alternatives[0].entities) || void 0 === t ? void 0 : t.length) > 0) for (const e of i.alternatives[0].entities) { let t = e.content.split(" "); for (const e of t) this.transcriptEntitySet.add(e) } if (this.partialTranscriptResultMap.set(e, i), this.partialTranscriptResultTimeMap.set(e, i.endTimeMs), this.renderPartialTranscriptResults(), !r) { for (const [t, r] of this.partialTranscriptResultTimeMap) { if (t === e) break; r < i.endTimeMs - 5e3 && this.partialTranscriptResultTimeMap.delete(t) } this.partialTranscriptResultTimeMap.delete(e), this.transcriptEntitySet.clear(), 0 === this.partialTranscriptResultTimeMap.size && (this.partialTranscriptDiv = null, this.partialTranscriptResultMap.clear()) } } this.transcriptContainerDiv.scrollTop = this.transcriptContainerDiv.scrollHeight }, this.renderPartialTranscriptResults = () => { this.partialTranscriptDiv ? this.updatePartialTranscriptDiv() : (this.partialTranscriptDiv = document.createElement("div"), this.updatePartialTranscriptDiv(), this.transcriptContainerDiv.appendChild(this.partialTranscriptDiv)) }, this.updatePartialTranscriptDiv = () => { this.partialTranscriptDiv.innerHTML = ""; const e = []; for (const t of this.partialTranscriptResultMap.values()) this.populatePartialTranscriptSegmentsFromResult(e, t); e.sort(((e, t) => e.startTimeMs - t.startTimeMs)); const t = new Map; for (const i of e) { const e = i.attendee.attendeeId; if (t.has(e)) { const r = Array.from(t.keys()); if (r.indexOf(e) < r.length - 1) t.delete(e), this.appendNewSpeakerTranscriptDiv(i, t); else { const r = t.get(e); r.appendChild(this.createSpaceSpan()), r.appendChild(i.contentSpan) } } else this.appendNewSpeakerTranscriptDiv(i, t) } }, this.populatePartialTranscriptSegmentsFromResult = (e, t) => { let i, r = null, o = null; for (const s of t.alternatives[0].items) { const t = document.createElement("span"); t.innerText = s.content, t.classList.add("transcript-content"), s.hasOwnProperty("confidence") && !s.content.startsWith("[") && s.confidence < .3 && t.classList.add("confidence-style"), this.transcriptEntitySet.size > 0 && this.transcriptEntitySet.has(s.content) && t.classList.add("entity-color"), r ? s.type === n.TranscriptItemType.PUNCTUATION ? (i.appendChild(t), e.push({ contentSpan: i, attendee: o, startTimeMs: r, endTimeMs: s.endTimeMs }), r = null, o = null) : (this.noWordSeparatorForTranscription || i.appendChild(this.createSpaceSpan()), i.appendChild(t)) : (i = document.createElement("span"), i.appendChild(t), o = s.attendee, r = s.startTimeMs) } r && e.push({ contentSpan: i, attendee: o, startTimeMs: r, endTimeMs: t.endTimeMs }) }, this.appendNewSpeakerTranscriptDiv = (e, t) => { const i = document.createElement("div"); i.classList.add("transcript"); const r = document.createElement("span"); r.classList.add("transcript-speaker"), r.innerText = e.attendee.externalUserId.split("#").slice(-1)[0] + ": ", i.appendChild(r), i.appendChild(e.contentSpan), this.partialTranscriptDiv.appendChild(i), t.set(e.attendee.attendeeId, e.contentSpan) }, this.appendStatusDiv = e => { const t = document.createElement("div"); t.innerText = "(Live Transcription " + e.type + " at " + new Date(e.eventTimeMs).toLocaleTimeString() + " in " + e.transcriptionRegion + " with configuration: " + e.transcriptionConfiguration + ")", this.transcriptContainerDiv.appendChild(t) }, this.setupLiveTranscription = () => { var e; null === (e = this.audioVideo.transcriptionController) || void 0 === e || e.subscribeToTranscriptEvent(this.transcriptEventHandler) }, this.selectedVideoInput = null, i.g.app = this, this.addFatalHandlers(), document.location.search.includes("testfatal=1") ? this.fatal(new Error("Testing fatal.")) : (document.getElementById("sdk-version").innerText = "amazon-chime-sdk-js@" + n.Versioning.sdkVersion, this.initEventListeners(), this.initParameters(), this.setMediaRegion(), this.isRecorder() || this.isBroadcaster() ? n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { this.meeting = new URL(window.location.href).searchParams.get("m"), this.name = this.isRecorder() ? "«Meeting Recorder»" : "«Meeting Broadcaster»", yield this.authenticate(), yield this.openAudioOutputFromSelection(), yield this.join(), this.displayButtonStates(), this.switchToFlow("flow-meeting") })))) : this.switchToFlow("flow-authenticate")) } addFatalHandlers() { t.fatal = this.fatal.bind(this); const e = e => { t.fatal(e.error || e.message) }; window.addEventListener("error", e), window.onunhandledrejection = e => { t.fatal(e.reason) }, this.removeFatalHandlers = () => { window.onunhandledrejection = void 0, window.removeEventListener("error", e), t.fatal = void 0, this.removeFatalHandlers = void 0 } } fatal(e) { var t; v ? (console.error("Fatal error: this was going to be caught, but should not have been thrown.", e), e && e instanceof Error ? document.getElementById("stack").innerText = e.message + "\n" + (null === (t = e.stack) || void 0 === t ? void 0 : t.toString()) : document.getElementById("stack").innerText = "" + e, this.switchToFlow("flow-fatal")) : console.info("Ignoring fatal", e) } initParameters() { const e = new URL(window.location.href).searchParams.get("m"); e ? (document.getElementById("inputMeeting").value = e, document.getElementById("inputName").focus()) : document.getElementById("inputMeeting").focus() } initVoiceFocus() { return r(this, void 0, void 0, (function* () { const e = new n.ConsoleLogger("SDK", n.LogLevel.DEBUG); if (!this.enableWebAudio) return void e.info("[DEMO] Web Audio not enabled. Not checking for Amazon Voice Focus support."); const t = T(this.joinInfo); try { if (this.supportsVoiceFocus = yield n.VoiceFocusDeviceTransformer.isSupported(t, { logger: e }), this.supportsVoiceFocus && (this.voiceFocusTransformer = yield this.getVoiceFocusDeviceTransformer(E), this.supportsVoiceFocus = this.voiceFocusTransformer && this.voiceFocusTransformer.isSupported(), this.supportsVoiceFocus)) return e.info("[DEMO] Amazon Voice Focus is supported."), void document.getElementById("voice-focus-setting").classList.remove("hidden") } catch (t) { e.warn(`[DEMO] Does not support Amazon Voice Focus: ${t.message}`) } e.warn("[DEMO] Does not support Amazon Voice Focus."), this.supportsVoiceFocus = !1, document.getElementById("voice-focus-setting").classList.toggle("hidden", !0) })) } initBackgroundBlur() { return r(this, void 0, void 0, (function* () { try { this.supportsBackgroundBlur = yield n.BackgroundBlurVideoFrameProcessor.isSupported(this.getBackgroundBlurSpec()) } catch (e) { this.log(`[DEMO] Does not support background blur: ${e.message}`), this.supportsBackgroundBlur = !1 } })) } createReplacementImageBlob(e, t) { return r(this, void 0, void 0, (function* () { const i = document.createElement("canvas"); i.width = 500, i.height = 500; const r = i.getContext("2d"), o = r.createLinearGradient(0, 0, 250, 0); return o.addColorStop(0, e), o.addColorStop(1, t), r.fillStyle = o, r.fillRect(0, 0, 500, 500), yield new Promise((e => { i.toBlob(e) })) })) } getBackgroundReplacementOptions() { return r(this, void 0, void 0, (function* () { if (!this.replacementOptions) { const e = yield this.createReplacementImageBlob("#000428", "#004e92"); this.replacementOptions = { imageBlob: e } } return this.replacementOptions })) } initBackgroundReplacement() { return r(this, void 0, void 0, (function* () { try { this.supportsBackgroundReplacement = yield n.BackgroundReplacementVideoFrameProcessor.isSupported(this.getBackgroundBlurSpec(), yield this.getBackgroundReplacementOptions()) } catch (e) { this.log(`[DEMO] Does not support background replacement: ${e.message}`), this.supportsBackgroundReplacement = !1 } })) } onVoiceFocusSettingChanged() { return r(this, void 0, void 0, (function* () { this.log("[DEMO] Amazon Voice Focus setting toggled to", this.enableVoiceFocus), this.openAudioInputFromSelectionAndPreview() })) } initEventListeners() { this.defaultBrowserBehavior.hasChromiumWebRTC() || (document.getElementById("simulcast").disabled = !0, document.getElementById("content-simulcast-config").style.display = "none"), this.defaultBrowserBehavior.supportDownlinkBandwidthEstimation() || (document.getElementById("priority-downlink-policy").disabled = !0), document.getElementById("join-view-only").addEventListener("change", (() => { this.isViewOnly = document.getElementById("join-view-only").checked })), document.getElementById("priority-downlink-policy").addEventListener("change", (e => { this.usePriorityBasedDownlinkPolicy = document.getElementById("priority-downlink-policy").checked; const t = document.getElementById("priority-downlink-policy-preset"), i = document.getElementById("priority-downlink-policy-preset-title"), r = document.getElementById("enable-pagination-checkbox"), o = document.getElementById("server-side-network-adaption"), n = document.getElementById("server-side-network-adaption-title"); this.usePriorityBasedDownlinkPolicy ? (i.style.display = "block", t.style.display = "block", r.style.display = "block", o.style.display = "block", n.style.display = "block") : (i.style.display = "none", t.style.display = "none", r.style.display = "none", o.style.display = "none", n.style.display = "none") })); const e = document.getElementById("echo-reduction-checkbox"); document.getElementById("webaudio").addEventListener("change", (t => { this.enableWebAudio = document.getElementById("webaudio").checked, this.enableWebAudio ? e.style.display = "block" : e.style.display = "none" })); const i = document.getElementById("priority-downlink-policy-preset"); i.addEventListener("change", (e => r(this, void 0, void 0, (function* () { switch (i.value) { case "stable": this.videoPriorityBasedPolicyConfig = n.VideoPriorityBasedPolicyConfig.StableNetworkPreset; break; case "unstable": this.videoPriorityBasedPolicyConfig = n.VideoPriorityBasedPolicyConfig.UnstableNetworkPreset; break; case "default": this.videoPriorityBasedPolicyConfig = n.VideoPriorityBasedPolicyConfig.Default }this.log("priority-downlink-policy-preset is changed: " + i.value) })))), document.getElementById("replica-meeting-input").addEventListener("change", (e => r(this, void 0, void 0, (function* () { document.getElementById("primary-meeting-external-id").value = "" })))), document.getElementById("quick-join").addEventListener("click", (e => { e.preventDefault(), this.redirectFromAuthentication(!0) })), document.getElementById("form-authenticate").addEventListener("submit", (e => { e.preventDefault(), this.redirectFromAuthentication() })); const o = document.getElementById("preconnect"); o.checked = b, o.onchange = () => { b = !!o.checked }; const a = document.getElementById("die"); a.checked = v, a.onchange = () => { v = !!a.checked }; const d = document.getElementById("fullband-speech-mono-quality"), l = document.getElementById("fullband-music-mono-quality"), c = document.getElementById("fullband-music-stereo-quality"); d.addEventListener("change", (e => { d.checked && (l.checked = !1, c.checked = !1) })), l.addEventListener("change", (e => { l.checked && (d.checked = !1, c.checked = !1) })), c.addEventListener("change", (e => { c.checked ? (d.checked = !1, l.checked = !1, this.usingStereoMusicAudioProfile = !0) : this.usingStereoMusicAudioProfile = !1 })), document.getElementById("to-sip-flow").addEventListener("click", (e => { e.preventDefault(), this.switchToFlow("flow-sip-authenticate") })), document.getElementById("form-sip-authenticate").addEventListener("submit", (e => { e.preventDefault(), this.meeting = document.getElementById("sip-inputMeeting").value, this.voiceConnectorId = document.getElementById("voiceConnectorId").value, n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { this.showProgress("progress-authenticate"); const e = this.region || "us-east-1"; try { const t = yield fetch(`${N.BASE_URL}join?title=${encodeURIComponent(this.meeting)}&name=${encodeURIComponent(N.DID)}&region=${encodeURIComponent(e)}`, { method: "POST" }), i = (yield t.json()).JoinInfo.Attendee.Attendee.JoinToken; this.sipURI = `sip:${N.DID}@${this.voiceConnectorId};transport=tls;X-joinToken=${i}`, this.switchToFlow("flow-sip-uri") } catch (e) { return document.getElementById("failed-meeting").innerText = `Meeting ID: ${this.meeting}`, document.getElementById("failed-meeting-error").innerText = e.message, void this.switchToFlow("flow-failed-meeting") } document.getElementById("sip-uri").value = this.sipURI, this.hideProgress("progress-authenticate") })))) })), this.areVideoFiltersSupported() || (document.getElementById("video-input-filter-container").style.display = "none"); let u = document.getElementById("video-input-filter"); u.addEventListener("change", (() => r(this, void 0, void 0, (function* () { this.selectedVideoFilterItem = u.value, this.log(`Clicking video filter: ${this.selectedVideoFilterItem}`), yield this.openVideoInputFromSelection(this.selectedVideoInput, !0) })))), document.getElementById("copy-sip-uri").addEventListener("click", (() => { document.getElementById("sip-uri").select(), document.execCommand("copy") })), document.getElementById("audio-input").addEventListener("change", (e => r(this, void 0, void 0, (function* () { this.log("audio input device is changed"), yield this.openAudioInputFromSelectionAndPreview() })))); const h = document.getElementById("video-input"); h.addEventListener("change", (e => r(this, void 0, void 0, (function* () { this.log("video input device is changed"); try { yield this.openVideoInputFromSelection(h.value, !0) } catch (e) { t.fatal(e) } })))); const p = document.getElementById("video-input-quality"); p.addEventListener("change", (e => r(this, void 0, void 0, (function* () { switch (this.log("Video input quality is changed"), p.value) { case "360p": this.audioVideo.chooseVideoInputQuality(640, 360, 15), this.audioVideo.setVideoMaxBandwidthKbps(600); break; case "540p": this.audioVideo.chooseVideoInputQuality(960, 540, 15), this.audioVideo.setVideoMaxBandwidthKbps(1400); break; case "720p": this.audioVideo.chooseVideoInputQuality(1280, 720, 15), this.audioVideo.setVideoMaxBandwidthKbps(1400) }try { this.chosenVideoTransformDevice && (yield this.chosenVideoTransformDevice.stop(), this.chosenVideoTransformDevice = null), yield this.openVideoInputFromSelection(h.value, !0) } catch (e) { t.fatal(e) } })))), document.getElementById("audio-output").addEventListener("change", (e => r(this, void 0, void 0, (function* () { this.log("audio output device is changed"), yield this.openAudioOutputFromSelection() })))), document.getElementById("button-test-sound").addEventListener("click", (e => r(this, void 0, void 0, (function* () { e.preventDefault(); const t = document.getElementById("audio-output"), i = new s.default(this.meetingEventPOSTLogger, t.value); yield i.init() })))), document.getElementById("form-devices").addEventListener("submit", (e => { e.preventDefault(), n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { try { this.showProgress("progress-join"), yield this.stopAudioPreview(), yield this.openVideoInputFromSelection(null, !0), yield this.stopVideoProcessor(), yield this.join(), this.hideProgress("progress-join"), this.displayButtonStates(), this.switchToFlow("flow-meeting") } catch (e) { document.getElementById("failed-join").innerText = `Meeting ID: ${this.meeting}`, document.getElementById("failed-join-error").innerText = `Error: ${e.message}` } })))) })), document.getElementById("add-voice-focus").addEventListener("change", (e => { this.enableVoiceFocus = e.target.checked, this.onVoiceFocusSettingChanged() })), document.getElementById("button-microphone").addEventListener("click", (e => { this.toggleButton("button-microphone"), this.isButtonOn("button-microphone") ? this.audioVideo.realtimeUnmuteLocalAudio() : this.audioVideo.realtimeMuteLocalAudio() })); const m = document.getElementById("button-record-cloud"); let f; m.addEventListener("click", (e => { this.toggleButton("button-record-cloud"), this.isButtonOn("button-record-cloud") ? n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { m.disabled = !0, yield this.startMediaCapture(), m.disabled = !1 })))) : n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { m.disabled = !0, yield this.stopMediaCapture(), m.disabled = !1 })))) })), document.getElementById("button-record-self").addEventListener("click", (e => { const t = []; n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { if (this.toggleButton("button-record-self"), !this.isButtonOn("button-record-self")) return console.info("Stopping recorder ", f), f.stop(), void (f = void 0); const e = new MediaStream, i = this.audioVideo.getLocalVideoTile(); i && e.addTrack(i.state().boundVideoStream.getVideoTracks()[0]); const r = this.audioVideo.audioVideoController, o = yield r.mediaStreamBroker.acquireAudioInputStream(); e.addTrack(o.getAudioTracks()[0]), f = new MediaRecorder(e, { mimeType: "video/webm; codecs=vp9" }), console.info("Setting recorder to", f), f.ondataavailable = e => { e.data.size && t.push(e.data) }, f.onstop = () => { const e = new Blob(t, { type: "video/webm" }); t.length = 0; const i = URL.createObjectURL(e), r = document.createElement("a"); document.body.appendChild(r), r.style = "display: none", r.href = i, r.download = "recording.webm", r.click(), window.URL.revokeObjectURL(i) }, f.start() })))) })), document.getElementById("button-camera").addEventListener("click", (e => { n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { if ("on" === this.toggleButton("button-camera") && this.canStartLocalVideo) try { let e = this.selectedVideoInput; null !== e && "None" !== e || (e = this.cameraDeviceIds.length ? this.cameraDeviceIds[0] : "None"), yield this.openVideoInputFromSelection(e, !1), this.audioVideo.startLocalVideoTile() } catch (e) { this.toggleButton("button-camera", "off"), t.fatal(e) } else yield this.audioVideo.stopVideoInput(), this.toggleButton("button-camera", "off") })))) })), document.getElementById("button-pause-content-share").addEventListener("click", (e => { this.isButtonOn("button-content-share") && n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { if (this.toggleButton("button-pause-content-share"), this.isButtonOn("button-pause-content-share")) this.audioVideo.pauseContentShare(), this.contentShareType === B.VideoFile && document.getElementById("content-share-video").pause(); else if (this.audioVideo.unpauseContentShare(), this.contentShareType === B.VideoFile) { const e = document.getElementById("content-share-video"); yield e.play() } })))) })), document.getElementById("button-content-share").addEventListener("click", (e => { n.AsyncScheduler.nextTick((() => { this.isButtonOn("button-content-share") ? this.contentShareStop() : this.contentShareStart() })) })), document.getElementById("button-speaker").addEventListener("click", (e => { n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { if (this.toggleButton("button-speaker"), this.isButtonOn("button-speaker")) try { yield this.audioVideo.bindAudioElement(document.getElementById("meeting-audio")) } catch (e) { t.fatal(e), this.log("Failed to bindAudioElement", e) } else this.audioVideo.unbindAudioElement() })))) })), document.getElementById("button-live-transcription").addEventListener("click", (() => { this.transcriptContainerDiv.style.display = this.isButtonOn("button-live-transcription") ? "none" : "block", this.toggleButton("button-live-transcription") })), document.getElementById("button-live-transcription-modal-close").addEventListener("click", (() => { document.getElementById("live-transcription-modal").style.display = "none" })), document.getElementsByName("transcription-engine").forEach((e => { e.addEventListener("change", (() => { const e = document.getElementById("engine-transcribe").checked, t = document.getElementById("content-identification-checkbox").checked, i = document.getElementById("content-redaction-checkbox").checked; document.getElementById("engine-transcribe-language").classList.toggle("hidden", !e), document.getElementById("engine-transcribe-medical-language").classList.toggle("hidden", e), document.getElementById("engine-transcribe-region").classList.toggle("hidden", !e), document.getElementById("engine-transcribe-medical-region").classList.toggle("hidden", e), document.getElementById("engine-transcribe-medical-content-identification").classList.toggle("hidden", e), document.getElementById("engine-transcribe-language-identification").classList.toggle("hidden", !e), document.getElementById("engine-transcribe-content-identification").classList.toggle("hidden", !e), document.getElementById("engine-transcribe-redaction").classList.toggle("hidden", !e), document.getElementById("engine-transcribe-partial-stabilization").classList.toggle("hidden", !e), document.getElementById("engine-transcribe-custom-language-model").classList.toggle("hidden", !e), e ? e && (t || i) && document.getElementById("transcribe-entity-types").classList.toggle("hidden", !1) : document.getElementById("transcribe-entity-types").classList.toggle("hidden", !0) })) })); const g = document.getElementById("identify-language-checkbox"); g.addEventListener("click", (() => { document.getElementById("button-start-transcription").disabled = g.checked, document.getElementById("language-options").classList.toggle("hidden", !g.checked), document.getElementById("preferred-language").classList.toggle("hidden", !g.checked), document.getElementById("transcribe-language").disabled = g.checked, document.getElementById("content-identification-checkbox").disabled = g.checked, document.getElementById("content-redaction-checkbox").disabled = g.checked, document.getElementById("custom-language-model-checkbox").disabled = g.checked, document.getElementById("transcribe-entity").disabled = g.checked, document.getElementById("language-model-input-text").disabled = g.checked })), document.getElementById("language-options").addEventListener("change", (e => function (e) { let t = new Set; document.getElementById("language-options-error-message").innerHTML = ""; const i = document.querySelectorAll("#language-options option:checked"); let r = document.getElementById("preferred-language-selection"); if (r.hasChildNodes) { let e = r.options; for (let t = e.length - 1; t >= 0; t--)e[t].value.length > 0 && r.removeChild(e[t]) } for (let e = i.length - 1; e >= 0; e--) { let r = i.item(e); if (t.has(r.parentElement.id)) return C("Please select one language per group"), !1; t.add(r.parentElement.id); let o = r.value, n = document.createElement("option"); n.value = o, n.text = r.innerText, document.getElementById("preferred-language-selection").appendChild(n) } if (1 == i.length) return C("Please select at least 2 language options"), !1; i.length >= 2 && (document.getElementById("button-start-transcription").disabled = !1) }())); const y = document.getElementById("content-identification-checkbox"); y.addEventListener("click", (() => { document.getElementById("content-redaction-checkbox").disabled = y.checked, document.getElementById("transcribe-entity-types").classList.toggle("hidden", !y.checked) })); const w = document.getElementById("content-redaction-checkbox"); w.addEventListener("click", (() => { document.getElementById("content-identification-checkbox").disabled = w.checked, document.getElementById("transcribe-entity-types").classList.toggle("hidden", !w.checked) })); const S = document.getElementById("partial-stabilization-checkbox"); S.addEventListener("click", (() => { document.getElementById("transcribe-partial-stability").classList.toggle("hidden", !S.checked) })); const x = document.getElementById("custom-language-model-checkbox"); function k(e) { return document.getElementById(e).checked } function _(e) { let t = e + " option:checked"; const i = document.querySelectorAll(t); let r = ""; return i.length > 0 && (r = Array.from(i).filter((e => "" !== e.value)).map((e => e.value)).join(",")), r } function C(e) { let t = document.createElement("span"); t.innerText = e, t.classList.add("error-message-color"), document.getElementById("language-options-error-message").appendChild(t), document.getElementById("button-start-transcription").disabled = !0 } x.addEventListener("click", (() => { document.getElementById("language-model").classList.toggle("hidden", !x.checked) })), document.getElementById("button-start-transcription").addEventListener("click", (() => r(this, void 0, void 0, (function* () { let e = "", t = "", i = ""; const r = {}; if (document.getElementById("engine-transcribe").checked) { if (e = "transcribe", i = document.getElementById("transcribe-region").value, !k("identify-language-checkbox")) { if (t = document.getElementById("transcribe-language").value, k("content-identification-checkbox") && (r.contentIdentificationType = "PII"), k("content-redaction-checkbox") && (r.contentRedactionType = "PII"), k("content-identification-checkbox") || k("content-redaction-checkbox")) { let e = _("#transcribe-entity"); "" !== e && (r.piiEntityTypes = e) } if (k("custom-language-model-checkbox")) { let e = document.getElementById("language-model-input-text").value; e && (r.languageModelName = e) } } if (k("identify-language-checkbox")) { r.identifyLanguage = !0; let e = _("#language-options"); "" !== e && (r.languageOptions = e); let t = document.getElementById("preferred-language-selection").value; t && (r.preferredLanguage = t) } k("partial-stabilization-checkbox") && (r.enablePartialResultsStability = !0); let o = document.getElementById("partial-stability").value; o && (r.partialResultsStability = o) } else { if (!document.getElementById("engine-transcribe-medical").checked) throw new Error("Unknown transcription engine"); e = "transcribe_medical", t = document.getElementById("transcribe-medical-language").value, i = document.getElementById("transcribe-medical-region").value, k("medical-content-identification-checkbox") && (r.contentIdentificationType = "PHI") } yield I(e, t, i, r) })))); const I = (e, t, i, o) => r(this, void 0, void 0, (function* () { const r = JSON.stringify(o), n = yield fetch(`${N.BASE_URL}start_transcription?title=${encodeURIComponent(this.meeting)}&engine=${encodeURIComponent(e)}&language=${encodeURIComponent(t)}&region=${encodeURIComponent(i)}&transcriptionStreamParams=${encodeURIComponent(r)}`, { method: "POST" }), s = yield n.json(); if (s.error) throw new Error(`Server error: ${s.error}`); document.getElementById("live-transcription-modal").style.display = "none" })); document.getElementById("button-video-stats").addEventListener("click", (() => { this.isButtonOn("button-video-stats") ? document.querySelectorAll(".stats-info").forEach((e => e.remove())) : this.getRelayProtocol(), this.toggleButton("button-video-stats") })), document.getElementById("button-promote-to-primary").addEventListener("click", (() => r(this, void 0, void 0, (function* () { var e; this.isButtonOn("button-promote-to-primary") ? (this.meetingLogger.info("Demoting from primary meeting"), this.deleteOwnAttendeeToLeave ? this.deleteAttendee(this.primaryExternalMeetingId, null === (e = this.primaryMeetingSessionCredentials) || void 0 === e ? void 0 : e.attendeeId) : this.audioVideo.demoteFromPrimaryMeeting()) : yield this.promoteToPrimaryMeeting() })))); const T = () => { n.AsyncScheduler.nextTick((() => { const e = document.getElementById("send-message"), t = e.value.trim(); t && (e.value = "", this.audioVideo.realtimeSendDataMessage(N.DATA_MESSAGE_TOPIC, t, N.DATA_MESSAGE_LIFETIME_MS), this.dataMessageHandler(new n.DataMessage(Date.now(), N.DATA_MESSAGE_TOPIC, (new TextEncoder).encode(t), this.meetingSession.configuration.credentials.attendeeId, this.meetingSession.configuration.credentials.externalUserId))) })) }, E = document.getElementById("send-message"); E.addEventListener("keydown", (e => { 13 === e.keyCode && (e.shiftKey ? E.rows++ : (e.preventDefault(), T(), E.rows = 1)) })); const A = document.getElementById("button-meeting-end"); A.addEventListener("click", (e => { "true" === new URL(window.location.href).searchParams.get("confirm-end") && !window.confirm("Are you sure you want to end the meeting for everyone? The meeting cannot be used after ending it.") || n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { A.disabled = !0, yield this.endMeeting(), yield this.leave(), A.disabled = !1 })))) })); const M = document.getElementById("button-meeting-leave"); M.addEventListener("click", (e => { e.shiftKey && (this.behaviorAfterLeave = "halt"), n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { M.disabled = !0, yield this.leave(), M.disabled = !1 })))) })) } logAudioStreamPPS(e) { const { currentTimestampMs: t, previousTimestampMs: i } = e, r = t - i; e.getRTCStatsReport().forEach((e => { if ("outbound-rtp" === e.type && "audio" === e.kind) { if (0 === e.packetsSent && 0 === i) return; const t = 1e3 * (e.packetsSent - this.lastPacketsSent) / r; let o = 0; t > 52 || t < 47 ? console.error("PPS:", t, `(${++o})`) : (o = 0, console.debug("PPS:", t)), this.lastPacketsSent = e.packetsSent } })) } getSupportedMediaRegions() { const e = [], t = document.getElementById("inputRegion"); for (let i = 0; i < t.length; i++)e.push(t.value); return e } getNearestMediaRegion() { return r(this, void 0, void 0, (function* () { const e = yield fetch("https://nearest-media-region.l.chime.aws", { method: "GET" }); return (yield e.json()).region })) } setMediaRegion() { n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { try { const e = new URLSearchParams(document.location.search).get("region") || (yield this.getNearestMediaRegion()); if ("" === e || null === e) throw new Error("Nearest Media Region cannot be null or empty"); const t = this.getSupportedMediaRegions(); if (-1 === t.indexOf(e)) { t.push(e); const i = document.getElementById("inputRegion"), r = document.createElement("option"); r.value = e, r.text = e + " (" + e + ")", i.add(r, null) } document.getElementById("inputRegion").value = e } catch (e) { t.fatal(e), this.log("Default media region selected: " + e.message) } })))) } promoteToPrimaryMeeting() { return r(this, void 0, void 0, (function* () { this.meetingLogger.info("Attempting to promote self to primary meeting from replica"), void 0 === this.primaryMeetingSessionCredentials && (this.primaryMeetingSessionCredentials = yield this.getPrimaryMeetingCredentials()), yield this.audioVideo.promoteToPrimaryMeeting(this.primaryMeetingSessionCredentials).then((e => { const t = document.getElementById("toast-container"), i = document.createElement("meeting-toast"); t.appendChild(i), e.isFailure() ? (i.message = ` Failed to promote to primary meeting due to error: ${e.toString()}`, i.addButton("Retry", (() => { this.promoteToPrimaryMeeting() }))) : (i.message = "Successfully promoted to primary meeting", this.updateUXForReplicaMeetingPromotionState("promoted")), i.show() })) })) } getPrimaryMeetingCredentials() { return r(this, void 0, void 0, (function* () { const e = (yield this.sendJoinRequest(this.primaryExternalMeetingId, `promoted-${this.name}`, this.region)).JoinInfo; return new n.MeetingSessionConfiguration(e.Meeting, e.Attendee).credentials })) } updateUXForViewOnlyMode() { for (const e in this.buttonStates) "button-speaker" !== e && "button-video-stats" !== e && "button-live-transcription" !== e && this.toggleButton(e, "disabled"); this.audioVideo.realtimeMuteLocalAudio() } updateUXForReplicaMeetingPromotionState(e) { const t = "promoted" === e; for (const e in this.buttonStates) "button-speaker" !== e && "button-video-stats" !== e && "button-live-transcription" !== e && ("button-promote-to-primary" !== e ? this.toggleButton(e, t ? "off" : "disabled") : (this.meetingLogger.info("promote button " + (t ? "on" : "off")), this.toggleButton(e, t ? "on" : "off"))); t || this.audioVideo.realtimeMuteLocalAudio() } setButtonVisibility(e, t, i) { document.getElementById(e).style.display = t ? "inline-block" : "none", this.toggleButton(e, i) } toggleButton(e, t) { return t ? this.buttonStates[e] = t : "on" === this.buttonStates[e] ? this.buttonStates[e] = "off" : this.buttonStates[e] = "on", this.displayButtonStates(), this.buttonStates[e] } isButtonOn(e) { return "on" === this.buttonStates[e] } displayButtonStates() { for (const e in this.buttonStates) { const t = document.getElementById(e), i = document.getElementById(`${e}-drop`), r = this.isButtonOn(e); t.classList.add(r ? "btn-success" : "btn-outline-secondary"), t.classList.remove(r ? "btn-outline-secondary" : "btn-success"), t.firstElementChild.classList.add(r ? "svg-active" : "svg-inactive"), t.firstElementChild.classList.remove(r ? "svg-inactive" : "svg-active"), "disabled" === this.buttonStates[e] ? t.setAttribute("disabled", "") : t.removeAttribute("disabled"), i && (i.classList.add(r ? "btn-success" : "btn-outline-secondary"), i.classList.remove(r ? "btn-outline-secondary" : "btn-success"), "disabled" === this.buttonStates[e] ? i.setAttribute("disabled", "") : i.removeAttribute("disabled")) } } showProgress(e) { document.getElementById(e).style.visibility = "visible" } hideProgress(e) { document.getElementById(e).style.visibility = "hidden" } switchToFlow(e) { Array.from(document.getElementsByClassName("flow")).map((e => e.style.display = "none")), document.getElementById(e).style.display = "block" } onAudioInputsChanged(e) { return r(this, void 0, void 0, (function* () { if (yield this.populateAudioInputList(), this.currentAudioInputDevice) return "default" === this.currentAudioInputDevice ? (this.log("Reselecting default device."), void (yield this.selectAudioInputDevice(this.currentAudioInputDevice))) : void (void 0 === e.find((e => e.deviceId === this.currentAudioInputDevice)) && (this.log("Existing device disappeared. Selecting a new one."), yield this.openAudioInputFromSelectionAndPreview())) })) } audioInputMuteStateChanged(e, t) { this.log("Mute state: device", e, t ? "is muted" : "is not muted") } audioInputsChanged(e) { this.onAudioInputsChanged(e) } videoInputsChanged(e) { this.populateVideoInputList() } audioOutputsChanged(e) { this.populateAudioOutputList() } audioInputStreamEnded(e) { this.log(`Current audio input stream from device id ${e} ended.`) } videoInputStreamEnded(e) { this.log(`Current video input stream from device id ${e} ended.`), "on" === this.buttonStates["button-camera"] && (this.buttonStates["button-camera"] = "off", this.displayButtonStates()) } metricsDidReceive(e) { this.logAudioStreamPPS(e); const t = e.getObservableMetrics(); this.videoMetricReport = e.getObservableVideoMetrics(), this.displayEstimatedUplinkBandwidth(t.availableOutgoingBitrate), this.displayEstimatedDownlinkBandwidth(t.availableIncomingBitrate), this.isButtonOn("button-video-stats") && this.videoTileCollection.showVideoWebRTCStats(this.videoMetricReport) } displayEstimatedUplinkBandwidth(e) { const t = `Available Uplink Bandwidth: ${e ? e / 1e3 : "Unknown"} Kbps`; document.getElementById("video-uplink-bandwidth").innerText = t, document.getElementById("mobile-video-uplink-bandwidth").innerText = t } displayEstimatedDownlinkBandwidth(e) { const t = `Available Downlink Bandwidth: ${e ? e / 1e3 : "Unknown"} Kbps`; document.getElementById("video-downlink-bandwidth").innerText = t, document.getElementById("mobile-video-downlink-bandwidth").innerText = t } getRelayProtocol() { return r(this, void 0, void 0, (function* () { const e = yield this.audioVideo.getRTCPeerConnectionStats(); e && e.forEach((e => { if ("local-candidate" === e.type) { this.log(`Local WebRTC Ice Candidate stats: ${JSON.stringify(e)}`); const t = e.relayProtocol; "string" == typeof t && ("udp" === t ? this.log(`Connection using ${t.toUpperCase()} protocol`) : this.log(`Connection fell back to ${t.toUpperCase()} protocol`)) } })) })) } createLogStream(e, i) { return r(this, void 0, void 0, (function* () { const r = JSON.stringify({ meetingId: e.meetingId, attendeeId: e.credentials.attendeeId }); try { 200 === (yield fetch(`${N.BASE_URL}${i}`, { method: "POST", body: r })).status && console.log("[DEMO] log stream created") } catch (e) { t.fatal(e), this.log(e.message) } })) } eventDidReceive(e, t) { var i, r; this.log(`Received an event: ${JSON.stringify({ name: e, attributes: t })}`); const { meetingHistory: n } = t, s = o(t, ["meetingHistory"]); switch (e) { case "meetingStartRequested": case "meetingStartSucceeded": case "meetingEnded": case "audioInputSelected": case "videoInputSelected": case "audioInputUnselected": case "videoInputUnselected": case "meetingReconnected": case "receivingAudioDropped": case "signalingDropped": case "attendeePresenceReceived": null === (i = this.meetingEventPOSTLogger) || void 0 === i || i.info(JSON.stringify({ name: e, attributes: s })); break; case "audioInputFailed": case "videoInputFailed": case "meetingStartFailed": case "meetingFailed": null === (r = this.meetingEventPOSTLogger) || void 0 === r || r.info(JSON.stringify({ name: e, attributes: Object.assign(Object.assign({}, s), { meetingHistory: n.filter((({ timestampMs: e }) => Date.now() - e < N.MAX_MEETING_HISTORY_MS)) }) })) } } initializeMeetingSession(e) { return r(this, void 0, void 0, (function* () { const t = this.meetingLogger = new n.ConsoleLogger("SDK", this.logLevel); this.isLocalHost() ? this.meetingLogger = t : (yield Promise.all([this.createLogStream(e, "create_log_stream"), this.createLogStream(e, "create_browser_event_log_stream")]), this.meetingSessionPOSTLogger = f.getPOSTLogger(e, "SDK", `${N.BASE_URL}logs`, this.logLevel), this.meetingLogger = new n.MultiLogger(t, this.meetingSessionPOSTLogger), this.meetingEventPOSTLogger = f.getPOSTLogger(e, "SDKEvent", `${N.BASE_URL}log_meeting_event`, this.logLevel)), this.eventReporter = yield this.setupEventReporter(e), this.deviceController = new n.DefaultDeviceController(this.meetingLogger, { enableWebAudio: this.enableWebAudio }); const i = new URL(window.location.href).searchParams, r = Number(i.get("attendee-presence-timeout-ms")); if (isNaN(r) || (e.attendeePresenceTimeoutMs = Number(r)), e.enableSimulcastForUnifiedPlanChromiumBasedBrowsers = this.enableSimulcast, this.usePriorityBasedDownlinkPolicy) { switch (document.getElementById("server-side-network-adaption").value) { case "default": this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption = n.ServerSideNetworkAdaption.Default; break; case "none": this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption = n.ServerSideNetworkAdaption.None; break; case "enable-bandwidth-probing": this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption = n.ServerSideNetworkAdaption.BandwidthProbing }this.priorityBasedDownlinkPolicy = new n.VideoPriorityBasedPolicy(this.meetingLogger, this.videoPriorityBasedPolicyConfig), e.videoDownlinkBandwidthPolicy = this.priorityBasedDownlinkPolicy, this.priorityBasedDownlinkPolicy.addObserver(this) } e.applicationMetadata = n.ApplicationMetadata.create("amazon-chime-sdk-js-demo", "2.0.0"), document.getElementById("pause-last-frame").checked && (e.keepLastFrameWhenPaused = !0), this.meetingSession = new n.DefaultMeetingSession(e, this.meetingLogger, this.deviceController, new n.DefaultEventController(e, this.meetingLogger, this.eventReporter)), document.getElementById("fullband-speech-mono-quality").checked ? (this.meetingSession.audioVideo.setAudioProfile(n.AudioProfile.fullbandSpeechMono()), this.meetingSession.audioVideo.setContentAudioProfile(n.AudioProfile.fullbandSpeechMono()), this.log("Using audio profile fullband-speech-mono-quality")) : document.getElementById("fullband-music-mono-quality").checked ? (this.meetingSession.audioVideo.setAudioProfile(n.AudioProfile.fullbandMusicMono()), this.meetingSession.audioVideo.setContentAudioProfile(n.AudioProfile.fullbandMusicMono()), this.log("Using audio profile fullband-music-mono-quality")) : document.getElementById("fullband-music-stereo-quality").checked && (this.meetingSession.audioVideo.setAudioProfile(n.AudioProfile.fullbandMusicStereo()), this.meetingSession.audioVideo.setContentAudioProfile(n.AudioProfile.fullbandMusicStereo()), this.log("Using audio profile fullband-music-stereo-quality")), this.audioVideo = this.meetingSession.audioVideo, this.audioVideo.addDeviceChangeObserver(this), this.setupDeviceLabelTrigger(), this.setupMuteHandler(), this.setupCanUnmuteHandler(), this.setupSubscribeToAttendeeIdPresenceHandler(), this.setupDataMessage(), this.setupLiveTranscription(), this.audioVideo.addObserver(this), this.meetingSession.eventController.addObserver(this), this.audioVideo.addContentShareObserver(this), void 0 !== this.videoCodecPreferences && this.videoCodecPreferences.length > 0 && (this.audioVideo.setVideoCodecSendPreferences(this.videoCodecPreferences), this.audioVideo.setContentShareVideoCodecPreferences(this.videoCodecPreferences)), this.videoTileCollection = new a.default(this.audioVideo, this.meetingLogger, this.usePriorityBasedDownlinkPolicy ? new d.default(this.meetingLogger, this.priorityBasedDownlinkPolicy) : void 0, document.getElementById("enable-pagination").checked ? N.REDUCED_REMOTE_VIDEO_PAGE_SIZE : N.REMOTE_VIDEO_PAGE_SIZE), this.audioVideo.addObserver(this.videoTileCollection), this.initContentShareDropDownItems() })) } setupEventReporter(e) { return r(this, void 0, void 0, (function* () { let t; const i = e.urls.eventIngestionURL; if (!i) return t; if (!this.enableEventReporting) return new n.NoOpEventReporter; const r = new n.ConsoleLogger("SDKEventIngestion", n.LogLevel.INFO), o = new n.MeetingEventsClientConfiguration(e.meetingId, e.credentials.attendeeId, e.credentials.joinToken), s = new n.EventIngestionConfiguration(o, i); if (this.isLocalHost()) t = new n.DefaultMeetingEventReporter(s, r); else { yield this.createLogStream(e, "create_browser_event_ingestion_log_stream"); const i = f.getPOSTLogger(e, "SDKEventIngestion", `${N.BASE_URL}log_event_ingestion`, n.LogLevel.DEBUG), o = new n.MultiLogger(r, i); t = new n.DefaultMeetingEventReporter(s, o) } return t })) } isLocalHost() { return "127.0.0.1:8080" === document.location.host || "localhost:8080" === document.location.host } join() { return r(this, void 0, void 0, (function* () { window.addEventListener("unhandledrejection", (e => { this.log(e.reason) })), this.audioVideo.start() })) } leave() { var e, t; return r(this, void 0, void 0, (function* () { this.deleteOwnAttendeeToLeave ? yield this.deleteAttendee(this.meeting, this.meetingSession.configuration.credentials.attendeeId) : (this.resetStats(), this.audioVideo.stop(), yield null === (e = this.voiceFocusDevice) || void 0 === e ? void 0 : e.stop(), this.voiceFocusDevice = void 0, yield null === (t = this.chosenVideoTransformDevice) || void 0 === t ? void 0 : t.stop(), this.chosenVideoTransformDevice = void 0, this.roster.clear()) })) } setupMuteHandler() { this.muteAndUnmuteLocalAudioHandler = e => { this.log(`muted = ${e}`) }, this.audioVideo.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.muteAndUnmuteLocalAudioHandler); const e = this.audioVideo.realtimeIsLocalAudioMuted(); this.muteAndUnmuteLocalAudioHandler(e) } setupCanUnmuteHandler() { this.canUnmuteLocalAudioHandler = e => { this.log(`canUnmute = ${e}`) }, this.audioVideo.realtimeSubscribeToSetCanUnmuteLocalAudio(this.canUnmuteLocalAudioHandler), this.canUnmuteLocalAudioHandler(this.audioVideo.realtimeCanUnmuteLocalAudio()) } updateProperty(e, t, i) { void 0 !== i && e[t] !== i && (e[t] = i) } setupSubscribeToAttendeeIdPresenceHandler() { this.attendeeIdPresenceHandler = (e, t, i, o) => { var s; this.log(`${e} present = ${t} (${i})`); const a = new n.DefaultModality(e).hasModality(n.DefaultModality.MODALITY_CONTENT), d = new n.DefaultModality(e).base() === this.meetingSession.configuration.credentials.attendeeId || new n.DefaultModality(e).base() === (null === (s = this.primaryMeetingSessionCredentials) || void 0 === s ? void 0 : s.attendeeId); if (!t) return this.roster.removeAttendee(e), this.audioVideo.realtimeUnsubscribeFromVolumeIndicator(e, this.volumeIndicatorHandler), void this.log(`${e} dropped = ${o} (${i})`); !this.allowMaxContentShare() && !d && a && this.isButtonOn("button-content-share") && this.contentShareStop(); const l = i.split("#").slice(-1)[0] + (a ? " «Content»" : ""); this.roster.addAttendee(e, l), this.volumeIndicatorHandler = (e, t, i, o) => r(this, void 0, void 0, (function* () { null !== i && this.roster.setMuteStatus(e, i), null !== o && this.roster.setSignalStrength(e, Math.round(100 * o)) })), this.audioVideo.realtimeSubscribeToVolumeIndicator(e, this.volumeIndicatorHandler) }, this.audioVideo.realtimeSubscribeToAttendeeIdPresence(this.attendeeIdPresenceHandler), this.activeSpeakerHandler = e => { for (const e of this.roster.getAllAttendeeIds()) this.roster.setAttendeeSpeakingStatus(e, !1); for (const t of e) if (this.roster.hasAttendee(t)) { this.roster.setAttendeeSpeakingStatus(t, !0), this.videoTileCollection.activeSpeakerAttendeeId = t; break } }, this.audioVideo.subscribeToActiveSpeakerDetector(new n.DefaultActiveSpeakerPolicy, this.activeSpeakerHandler, (e => { }), this.showActiveSpeakerScores ? 100 : 0) } dataMessageHandler(e) { if (e.throttled) this.log("Message is throttled. Please resend"); else { const t = e.senderAttendeeId === this.meetingSession.configuration.credentials.attendeeId; if (e.timestampMs <= this.lastReceivedMessageTimestamp) return; this.lastReceivedMessageTimestamp = e.timestampMs; const i = document.getElementById("receive-message"), r = document.createElement("div"); r.classList.add("message-bubble-sender"), r.innerText = e.senderExternalUserId.split("#").slice(-1)[0]; const o = document.createElement("div"); o.classList.add(t ? "message-bubble-self" : "message-bubble-other"), o.innerHTML = this.markdown.render(e.text()).replace(/[<]a /g, '<a target="_blank" '); const n = (e, t) => { for (let i = 0; i < e.children.length; i++) { const r = e.children[i]; r.classList.add(t), n(r, t) } }; n(o, "markdown"), this.lastMessageSender !== e.senderAttendeeId && i.appendChild(r), this.lastMessageSender = e.senderAttendeeId, i.appendChild(o), i.scrollTop = i.scrollHeight } } setupDataMessage() { this.audioVideo.realtimeSubscribeToReceiveDataMessage(N.DATA_MESSAGE_TOPIC, (e => { this.dataMessageHandler(e) })) } createSpaceSpan() { const e = document.createElement("span"); return e.classList.add("transcript-content"), e.innerText = " ", e } sendJoinRequest(e, t, i, o) { return r(this, void 0, void 0, (function* () { let r = `${N.BASE_URL}join?title=${encodeURIComponent(e)}&name=${encodeURIComponent(t)}&region=${encodeURIComponent(i)}`; o && (r += `&primaryExternalMeetingId=${o}`), r += `&ns_es=${this.echoReductionCapability}`; const n = yield fetch(r, { method: "POST" }), s = yield n.json(); if (s.error) throw new Error(`Server error: ${s.error}`); return s })) } deleteAttendee(e, t) { return r(this, void 0, void 0, (function* () { let i = `${N.BASE_URL}deleteAttendee?title=${encodeURIComponent(e)}&attendeeId=${encodeURIComponent(t)}`; const r = yield fetch(i, { method: "POST" }), o = yield r.json(); this.meetingLogger.info(`Delete attendee response: ${JSON.stringify(o)}`) })) } startMediaCapture() { return r(this, void 0, void 0, (function* () { yield fetch(`${N.BASE_URL}startCapture?title=${encodeURIComponent(this.meeting)}`, { method: "POST" }) })) } stopMediaCapture() { return r(this, void 0, void 0, (function* () { yield fetch(`${N.BASE_URL}endCapture?title=${encodeURIComponent(this.meeting)}`, { method: "POST" }) })) } endMeeting() { return r(this, void 0, void 0, (function* () { yield fetch(`${N.BASE_URL}end?title=${encodeURIComponent(this.meeting)}`, { method: "POST" }) })) } getAttendee(e) { return r(this, void 0, void 0, (function* () { const t = yield fetch(`${N.BASE_URL}attendee?title=${encodeURIComponent(this.meeting)}&attendee=${encodeURIComponent(e)}`), i = yield t.json(); if (i.error) throw new Error(`Server error: ${i.error}`); return i })) } setupDeviceLabelTrigger() { this.defaultBrowserBehavior.doesNotSupportMediaDeviceLabels() || this.audioVideo.setDeviceLabelTrigger((() => r(this, void 0, void 0, (function* () { if (this.isRecorder() || this.isBroadcaster() || this.isViewOnly) throw new Error("Recorder or Broadcaster does not need device labels"); this.switchToFlow("flow-need-permission"); const e = yield navigator.mediaDevices.getUserMedia({ audio: !0, video: !0 }); return this.switchToFlow("flow-devices"), e })))) } populateDeviceList(e, t, i, r) { const o = document.getElementById(e); for (; o.firstElementChild;)o.removeChild(o.firstElementChild); for (let e = 0; e < i.length; e++) { const r = document.createElement("option"); o.appendChild(r), r.text = i[e].label || `${t} ${e + 1}`, r.value = i[e].deviceId } if (r.length > 0) { const e = document.createElement("option"); e.disabled = !0, e.text = "──────────", o.appendChild(e); for (const e of r) { const t = document.createElement("option"); o.appendChild(t), t.text = e, t.value = e } } if (!o.firstElementChild) { const e = document.createElement("option"); e.text = "Device selection unavailable", o.appendChild(e) } } populateVideoPreviewFilterList(e, t, i) { const r = document.getElementById(e); for (; r.firstElementChild;)r.removeChild(r.firstElementChild); for (let e = 0; e < i.length; e++) { const o = document.createElement("option"); r.appendChild(o), o.text = i[e] || `${t} ${e + 1}`, o.value = i[e] } if (!r.firstElementChild) { const e = document.createElement("option"); e.text = "Filter selection unavailable", r.appendChild(e) } } populateInMeetingDeviceList(e, t, i, r, o, n) { const s = document.getElementById(e); for (; s.firstElementChild;)s.removeChild(s.firstElementChild); for (let e = 0; e < i.length; e++)this.createDropdownMenuItem(s, i[e].label || `${t} ${e + 1}`, (() => { n(i[e].deviceId) })); if (r.length) { this.createDropdownMenuItem(s, "──────────", (() => { })).classList.add("text-center"); for (const t of r) this.createDropdownMenuItem(s, t, (() => { n(t) }), `${e}-${t.replace(/\s/g, "-")}`) } if (null == o ? void 0 : o.length) { this.createDropdownMenuItem(s, "──────────", (() => { })).classList.add("text-center"); for (const { name: t, oncreate: i, action: r } of o) { const o = `toggle-${e}-${t.replace(/\s/g, "-")}`; i(this.createDropdownMenuItem(s, t, r, o)) } } s.firstElementChild || this.createDropdownMenuItem(s, "Device selection unavailable", (() => { })) } createDropdownMenuItem(e, t, i, r) { const o = document.createElement("button"); return e.appendChild(o), o.innerText = t, o.classList.add("dropdown-item"), this.updateProperty(o, "id", r), o.addEventListener("click", (() => { i() })), o } populateAllDeviceLists() { return r(this, void 0, void 0, (function* () { yield this.populateAudioInputList(), yield this.populateVideoInputList(), yield this.populateAudioOutputList() })) } selectVideoFilterByName(e) { return r(this, void 0, void 0, (function* () { if (this.selectedVideoFilterItem = e, this.log(`clicking video filter ${this.selectedVideoFilterItem}`), this.toggleButton("button-video-filter", "None" === this.selectedVideoFilterItem ? "off" : "on"), this.isButtonOn("button-camera")) try { yield this.openVideoInputFromSelection(this.selectedVideoInput, !1) } catch (e) { t.fatal(e), this.log("Failed to choose VideoTransformDevice", e) } })) } stopVideoProcessor() { var e; return r(this, void 0, void 0, (function* () { this.log("Clearing filter variables and stopping the video transform device"), this.chosenVideoFilter = "None", this.selectedVideoFilterItem = "None", null === (e = this.chosenVideoTransformDevice) || void 0 === e || e.stop() })) } getBackgroundBlurSpec() { return Object.assign({ paths: P, model: D }, R) } populateVideoFilterInputList(e) { return r(this, void 0, void 0, (function* () { const t = "Filter"; let i = ["None"]; this.areVideoFiltersSupported() && (i = i.concat(L), p.platformCanSupportBodyPixWithoutDegradation() && (this.loadingBodyPixDependencyPromise || (this.loadingBodyPixDependencyPromise = p.loadBodyPixDependency(this.loadingBodyPixDependencyTimeoutMs)), this.loadingBodyPixDependencyPromise.then((() => { i.push("Segmentation"), this.populateFilterList(e, t, i) })).catch((e => { this.log("Could not load BodyPix dependency", e) }))), this.supportsBackgroundBlur && (i.push("Background Blur 10% CPU"), i.push("Background Blur 20% CPU"), i.push("Background Blur 30% CPU"), i.push("Background Blur 40% CPU")), this.supportsBackgroundReplacement && i.push("Background Replacement")), this.populateFilterList(e, t, i) })) } populateFilterList(e, t, i) { return r(this, void 0, void 0, (function* () { e ? this.populateVideoPreviewFilterList("video-input-filter", t, i) : this.populateInMeetingDeviceList("dropdown-menu-filter", t, [], i, void 0, (e => r(this, void 0, void 0, (function* () { yield this.selectVideoFilterByName(e) })))) })) } populateAudioInputList() { return r(this, void 0, void 0, (function* () { const e = "Microphone"; let t = ["None", "440 Hz", "Prerecorded Speech", "Echo"]; const i = []; this.enableWebAudio && this.supportsVoiceFocus && i.push({ name: "Amazon Voice Focus", oncreate: e => { this.voiceFocusDisplayables.push(e) }, action: () => this.toggleVoiceFocusInMeeting() }), void 0 !== this.primaryExternalMeetingId && 0 !== this.primaryExternalMeetingId.length || i.push({ name: "Live Transcription", oncreate: e => { this.liveTranscriptionDisplayables.push(e) }, action: () => this.toggleLiveTranscription() }), this.populateDeviceList("audio-input", e, yield this.audioVideo.listAudioInputDevices(), t), this.usingStereoMusicAudioProfile && (t = t.concat(["L-500Hz R-1000Hz", "Prerecorded Speech (Stereo)"])), this.populateInMeetingDeviceList("dropdown-menu-microphone", e, yield this.audioVideo.listAudioInputDevices(), t, i, (e => r(this, void 0, void 0, (function* () { yield this.selectAudioInputDeviceByName(e) })))) })) } areVideoFiltersSupported() { return this.defaultBrowserBehavior.supportsCanvasCapturedStreamPlayback() } isVoiceFocusActive() { return this.currentAudioInputDevice instanceof n.VoiceFocusTransformDevice } updateVoiceFocusDisplayState() { const e = this.isVoiceFocusActive(); this.log("Updating Amazon Voice Focus display state:", e); for (const t of this.voiceFocusDisplayables) t.classList.toggle("vf-active", e) } isVoiceFocusEnabled() { return this.log("VF supported:", this.supportsVoiceFocus), this.log("VF enabled:", this.enableVoiceFocus), this.supportsVoiceFocus && this.enableVoiceFocus } reselectAudioInputDevice() { return r(this, void 0, void 0, (function* () { const e = this.currentAudioInputDevice; if (e instanceof n.VoiceFocusTransformDevice) { const t = e.getInnerDevice(), i = yield this.audioInputSelectionWithOptionalVoiceFocus(t); return this.selectAudioInputDevice(i) } if (n.isAudioTransformDevice(e)) return this.selectAudioInputDevice(e); const t = yield this.audioInputSelectionWithOptionalVoiceFocus(e); return this.selectAudioInputDevice(t) })) } toggleVoiceFocusInMeeting() { return r(this, void 0, void 0, (function* () { const e = document.getElementById("add-voice-focus"); this.enableVoiceFocus = this.supportsVoiceFocus && !this.enableVoiceFocus, e.checked = this.enableVoiceFocus, this.log("Amazon Voice Focus toggle is now", e.checked), yield this.reselectAudioInputDevice() })) } updateLiveTranscriptionDisplayState() { this.log("Updating live transcription display state to:", this.enableLiveTranscription); for (const e of this.liveTranscriptionDisplayables) e.classList.toggle("live-transcription-active", this.enableLiveTranscription) } toggleLiveTranscription() { return r(this, void 0, void 0, (function* () { if (this.log("live transcription were previously set to " + this.enableLiveTranscription + "; attempting to toggle"), this.enableLiveTranscription) { const e = yield fetch(`${N.BASE_URL}${encodeURIComponent("stop_transcription")}?title=${encodeURIComponent(this.meeting)}`, { method: "POST" }), t = yield e.json(); if (t.error) throw new Error(`Server error: ${t.error}`) } else document.getElementById("live-transcription-modal").style.display = "block" })) } populateVideoInputList() { return r(this, void 0, void 0, (function* () { const e = "Camera", i = ["None", "Blue", "SMPTE Color Bars"]; this.populateDeviceList("video-input", e, yield this.audioVideo.listVideoInputDevices(), i), this.populateInMeetingDeviceList("dropdown-menu-camera", e, yield this.audioVideo.listVideoInputDevices(), i, void 0, (e => r(this, void 0, void 0, (function* () { try { this.meetingSession.audioVideo.hasStartedLocalVideoTile() ? yield this.openVideoInputFromSelection(e, !1) : this.selectedVideoInput = e } catch (e) { t.fatal(e) } })))); const o = yield this.audioVideo.listVideoInputDevices(); this.cameraDeviceIds = o.map((e => e.deviceId)) })) } populateAudioOutputList() { return r(this, void 0, void 0, (function* () { const e = this.defaultBrowserBehavior.supportsSetSinkId(), i = "Speaker", o = [], n = e ? yield this.audioVideo.listAudioOutputDevices() : []; this.populateDeviceList("audio-output", i, n, o), this.populateInMeetingDeviceList("dropdown-menu-speaker", i, n, o, void 0, (i => r(this, void 0, void 0, (function* () { if (e) try { yield this.chooseAudioOutput(i) } catch (e) { t.fatal(e), this.log("Failed to chooseAudioOutput", e) } })))) })) } chooseAudioOutput(e) { return r(this, void 0, void 0, (function* () { const t = document.getElementById("content-share-video"); this.defaultBrowserBehavior.supportsSetSinkId() && t.setSinkId(e), yield this.audioVideo.chooseAudioOutput(e) })) } selectedAudioInput() { return r(this, void 0, void 0, (function* () { const e = document.getElementById("audio-input"); return yield this.audioInputSelectionToDevice(e.value) })) } selectAudioInputDevice(e) { return r(this, void 0, void 0, (function* () { this.currentAudioInputDevice = e, this.log("Selecting audio input", e); try { yield this.audioVideo.startAudioInput(e) } catch (i) { t.fatal(i), this.log(`failed to choose audio input device ${e}`, i) } this.updateVoiceFocusDisplayState() })) } selectAudioInputDeviceByName(e) { return r(this, void 0, void 0, (function* () { this.log("Selecting audio input device by name:", e); const t = yield this.audioInputSelectionToDevice(e); return this.selectAudioInputDevice(t) })) } openAudioInputFromSelection() { return r(this, void 0, void 0, (function* () { const e = yield this.selectedAudioInput(); yield this.selectAudioInputDevice(e) })) } openAudioInputFromSelectionAndPreview() { return r(this, void 0, void 0, (function* () { yield this.stopAudioPreview(), yield this.openAudioInputFromSelection(), this.log("Starting audio preview."), yield this.startAudioPreview() })) } setAudioPreviewPercent(e) { const t = document.getElementById("audio-preview"); t && (this.updateProperty(t.style, "transitionDuration", "33ms"), this.updateProperty(t.style, "width", `${e}%`), t.getAttribute("aria-valuenow") !== `${e}` && t.setAttribute("aria-valuenow", `${e}`)) } stopAudioPreview() { return r(this, void 0, void 0, (function* () { this.analyserNode && (this.analyserNodeCallback = void 0, this.analyserNode.disconnect(), this.analyserNode.removeOriginalInputs(), this.analyserNode = void 0) })) } startAudioPreview() { this.setAudioPreviewPercent(0), this.analyserNode && (this.analyserNode.disconnect(), this.analyserNode.removeOriginalInputs(), this.analyserNode = void 0); const e = this.audioVideo.createAnalyserNodeForAudioInput(); if (!e) return; if (!e.getByteTimeDomainData) return void (document.getElementById("audio-preview").parentElement.style.visibility = "hidden"); this.analyserNode = e; const t = new Uint8Array(e.fftSize); let i = 0; this.analyserNodeCallback = () => { if (0 === i) { e.getByteTimeDomainData(t); const i = .01; let r = i; for (const e of t) r = Math.max(r, (e - 128) / 128); let o = (Math.log(i) - Math.log(r)) / Math.log(i), n = Math.min(Math.max(100 * o, 0), 100); this.setAudioPreviewPercent(n) } i = (i + 1) % 2, this.analyserNodeCallback && requestAnimationFrame(this.analyserNodeCallback) }, requestAnimationFrame(this.analyserNodeCallback) } openAudioOutputFromSelection() { return r(this, void 0, void 0, (function* () { if (this.defaultBrowserBehavior.supportsSetSinkId()) try { const e = document.getElementById("audio-output"); yield this.chooseAudioOutput(e.value) } catch (e) { t.fatal(e), this.log("failed to chooseAudioOutput", e) } const e = document.getElementById("meeting-audio"); try { yield this.audioVideo.bindAudioElement(e) } catch (e) { t.fatal(e), this.log("failed to bindAudioElement", e) } })) } openVideoInputFromSelection(e, i) { return r(this, void 0, void 0, (function* () { this.selectedVideoInput = e, this.log(`Switching to: ${this.selectedVideoInput}`); const r = yield this.videoInputSelectionToDevice(this.selectedVideoInput); if (null === r) { try { yield this.audioVideo.stopVideoInput() } catch (e) { t.fatal(e), this.log("failed to stop video input", e) } if (this.log("no video device selected"), i) { const e = document.getElementById("video-preview"); yield this.audioVideo.stopVideoPreviewForVideoInput(e) } } else { try { yield this.audioVideo.startVideoInput(r) } catch (e) { t.fatal(e), this.log(`failed to start video input ${r}`, e) } if (i) { const e = document.getElementById("video-preview"); this.audioVideo.startVideoPreviewForVideoInput(e) } } })) } audioInputSelectionToIntrinsicDevice(e) { return r(this, void 0, void 0, (function* () { if (this.isRecorder() || this.isBroadcaster()) return null; if ("440 Hz" === e) return n.DefaultDeviceController.synthesizeAudioDevice(440); if ("L-500Hz R-1000Hz" === e) return this.synthesizeStereoTones(500, 1e3); if ("Prerecorded Speech" === e) return this.streamAudioFile("audio_file"); if ("Prerecorded Speech (Stereo)" === e) return this.streamAudioFile("stereo_audio_file", !0); if ("Echo" === e) try { const e = yield this.audioVideo.getCurrentMeetingAudioStream(), t = n.DefaultDeviceController.getAudioContext(), i = t.createMediaStreamDestination(), r = t.createMediaStreamSource(e), o = t.createDelay(.05), s = t.createGain(); return s.gain.value = .8, r.connect(o), o.connect(s), s.connect(i), i.stream } catch (e) { return this.log("Error creating Echo"), null } return "None" === e || "" === e ? null : e })) } synthesizeStereoTones(e, t) { return r(this, void 0, void 0, (function* () { const i = n.DefaultDeviceController.getAudioContext(), r = i.createMediaStreamDestination(), o = i.createGain(); o.gain.value = .1, o.connect(r); const s = i.createOscillator(); s.frequency.value = e; const a = i.createOscillator(); a.frequency.value = t; const d = i.createChannelMerger(2); return s.connect(d, 0, 0), a.connect(d, 0, 1), d.connect(o), s.start(), a.start(), r.stream })) } streamAudioFile(e, t = !1) { return r(this, void 0, void 0, (function* () { try { const i = yield fetch(e), r = yield i.arrayBuffer(), o = new TextDecoder("utf8").decode(r), n = new Audio("data:audio/mpeg;base64," + o); n.loop = t, n.crossOrigin = "anonymous", n.play(); const s = new (window.AudioContext || window.webkitAudioContext), a = s.createMediaStreamDestination(); return s.createMediaElementSource(n).connect(a), a.stream } catch (t) { return this.log(`Error fetching audio from ${e}: ${t}`), null } })) } getVoiceFocusDeviceTransformer(e) { return r(this, void 0, void 0, (function* () { if (this.voiceFocusTransformer) return this.voiceFocusTransformer; const t = new n.ConsoleLogger("SDK", n.LogLevel.DEBUG), i = T(this.joinInfo), r = yield n.VoiceFocusDeviceTransformer.configure(i, { logger: t }); let o; return e && r.supported && function (t) { const i = Number.parseInt(e.substring(1), 10); return Number.parseInt(t.substring(1), 10) > i }(r.model.variant) ? (t.info(`Downgrading VF to ${e}`), i.variant = e, o = n.VoiceFocusDeviceTransformer.create(i, { logger: t }, void 0, this.joinInfo)) : o = n.VoiceFocusDeviceTransformer.create(i, { logger: t }, r, this.joinInfo), this.voiceFocusTransformer = yield o })) } createVoiceFocusDevice(e) { return r(this, void 0, void 0, (function* () { if (!this.supportsVoiceFocus) return e; if (this.voiceFocusDevice) return this.voiceFocusDevice = yield this.voiceFocusDevice.chooseNewInnerDevice(e); try { const t = yield this.getVoiceFocusDeviceTransformer(E), i = yield t.createTransformDevice(e); if (i) return yield i.observeMeetingAudio(this.audioVideo), this.voiceFocusDevice = i } catch (e) { } return e })) } audioInputSelectionWithOptionalVoiceFocus(e) { return r(this, void 0, void 0, (function* () { return this.isVoiceFocusEnabled() ? this.voiceFocusDevice ? this.voiceFocusDevice = yield this.voiceFocusDevice.chooseNewInnerDevice(e) : this.createVoiceFocusDevice(e) : e })) } audioInputSelectionToDevice(e) { return r(this, void 0, void 0, (function* () { const t = yield this.audioInputSelectionToIntrinsicDevice(e); return this.audioInputSelectionWithOptionalVoiceFocus(t) })) } videoInputSelectionToIntrinsicDevice(e) { return "Blue" === e ? m.default.create("blue") : "SMPTE Color Bars" === e ? m.default.create("smpte") : e } videoFilterToProcessor(e) { return r(this, void 0, void 0, (function* () { if (this.log(`Choosing video filter ${e}`), "Emojify" === e) return new c.default("🚀"); if ("CircularCut" === e) return new l.default; if ("NoOp" === e) return new n.NoOpVideoFrameProcessor; if ("Segmentation" === e) return new u.default; if ("Resize (9/16)" === e) return new h.default(.5625); if (e.startsWith("Background Blur")) { this.blurObserver = { filterFrameDurationHigh: e => { this.log(`background filter duration high: framed dropped - ${e.framesDropped}, avg - ${e.avgFilterDurationMillis} ms, frame rate - ${e.framerate}, period - ${e.periodMillis} ms`) }, filterCPUUtilizationHigh: e => { this.log(`background filter CPU utilization high: ${e.cpuUtilization}%`) } }; const t = Number(e.match(/([0-9]{2})%/)[1]); return this.blurProcessor = yield n.BackgroundBlurVideoFrameProcessor.create(this.getBackgroundBlurSpec(), { filterCPUUtilization: t }), this.blurProcessor.addObserver(this.blurObserver), this.blurProcessor } return e.startsWith("Background Replacement") ? (this.replacementObserver = { filterFrameDurationHigh: e => { this.log(`background filter duration high: framed dropped - ${e.framesDropped}, avg - ${e.avgFilterDurationMillis} ms, frame rate - ${e.framerate}, period - ${e.periodMillis} ms`) } }, this.replacementProcessor = yield n.BackgroundReplacementVideoFrameProcessor.create(this.getBackgroundBlurSpec(), yield this.getBackgroundReplacementOptions()), this.replacementProcessor.addObserver(this.replacementObserver), this.replacementProcessor) : null })) } videoInputSelectionWithOptionalFilter(e) { return r(this, void 0, void 0, (function* () { if ("None" === this.selectedVideoFilterItem) return e; if (this.chosenVideoTransformDevice && this.selectedVideoFilterItem === this.chosenVideoFilter) return this.chosenVideoTransformDevice.getInnerDevice() !== e && (this.chosenVideoTransformDevice = this.chosenVideoTransformDevice.chooseNewInnerDevice(e)), this.chosenVideoTransformDevice; this.chosenVideoTransformDevice && (yield this.chosenVideoTransformDevice.stop()); const t = yield this.videoFilterToProcessor(this.selectedVideoFilterItem); return this.chosenVideoFilter = this.selectedVideoFilterItem, this.chosenVideoTransformDevice = new n.DefaultVideoTransformDevice(this.meetingLogger, e, [t]), this.chosenVideoTransformDevice })) } videoInputSelectionToDevice(e) { return r(this, void 0, void 0, (function* () { if (this.isRecorder() || this.isBroadcaster() || "None" === e || null === e) return null; const t = this.videoInputSelectionToIntrinsicDevice(e); return yield this.videoInputSelectionWithOptionalFilter(t) })) } initContentShareDropDownItems() { let e = document.getElementById("dropdown-item-content-share-configuration"); e.addEventListener("click", (() => { document.getElementById("content-simulcast-modal").style.display = "block" })), e = document.getElementById("dropdown-item-content-share-screen-capture"), e.addEventListener("click", (() => { this.contentShareType = B.ScreenCapture, this.contentShareStart() })), e = document.getElementById("dropdown-item-content-share-screen-test-video"), e.addEventListener("click", (() => { this.contentShareType = B.VideoFile, this.contentShareStart(N.testVideo) })), e = document.getElementById("dropdown-item-content-share-test-mono-audio-speech"), e.addEventListener("click", (() => { this.contentShareStartAudio("audio_file") })), e = document.getElementById("dropdown-item-content-share-test-stereo-audio-speech"), e.addEventListener("click", (() => { this.contentShareStartAudio("stereo_audio_file") })), this.usingStereoMusicAudioProfile || (e.style.display = "none"), e = document.getElementById("dropdown-item-content-share-test-stereo-audio-tone"), e.addEventListener("click", (() => { this.contentShareStartAudio() })), this.usingStereoMusicAudioProfile || (e.style.display = "none"), document.getElementById("content-share-item").addEventListener("change", (() => { const e = document.getElementById("content-share-item"), t = e.files[0]; if (!t) return void this.log("no content share selected"); const i = URL.createObjectURL(t); this.log(`content share selected: ${i}`), this.contentShareType = B.VideoFile, this.contentShareStart(i), e.value = "", document.getElementById("dropdown-item-content-share-file-item").click() })), document.getElementById("dropdown-item-content-share-stop").addEventListener("click", (() => { this.contentShareStop() })), document.getElementById("button-content-share-modal-close").addEventListener("click", (() => { document.getElementById("content-simulcast-modal").style.display = "none" })), document.getElementById("button-save-content-share-configs").addEventListener("click", (() => { if (document.getElementById("content-simulcast-modal").style.display = "none", document.getElementById("content-enable-simulcast").checked) { const e = parseInt(document.getElementById("content-simulcast-low-max-bitratekbps").value) || void 0, t = parseInt(document.getElementById("content-simulcast-low-scale-factor").value) || void 0, i = parseInt(document.getElementById("content-simulcast-low-max-framerate").value) || void 0, r = parseInt(document.getElementById("content-simulcast-high-max-bitratekbps").value) || void 0, o = parseInt(document.getElementById("content-simulcast-high-scale-factor").value) || void 0, n = parseInt(document.getElementById("content-simulcast-high-max-framerate").value) || void 0; this.audioVideo.enableSimulcastForContentShare(!0, { low: { maxBitrateKbps: e, scaleResolutionDownBy: t, maxFramerate: i }, high: { maxBitrateKbps: r, scaleResolutionDownBy: o, maxFramerate: n } }) } else this.audioVideo.enableSimulcastForContentShare(!1) })) } playToStream(e) { return r(this, void 0, void 0, (function* () { return yield e.play(), this.defaultBrowserBehavior.hasFirefoxWebRTC() ? e.mozCaptureStream() : e.captureStream() })) } contentShareStart(e) { var t, i; return r(this, void 0, void 0, (function* () { switch (this.contentShareType) { case B.ScreenCapture: try { const e = document.getElementById("content-capture-frame-rate").value; yield this.audioVideo.startContentShareFromScreenCapture(void 0, parseInt(e, 10) || void 0) } catch (e) { return void (null === (t = this.meetingLogger) || void 0 === t || t.error(`Could not start content share: ${e}`)) } break; case B.VideoFile: { const t = document.getElementById("content-share-video"); e && (t.src = e); const r = yield this.playToStream(t); try { yield this.audioVideo.startContentShare(r) } catch (e) { return void (null === (i = this.meetingLogger) || void 0 === i || i.error(`Could not start content share: ${e}`)) } break } }this.toggleButton("button-content-share", "on"), this.updateContentShareDropdown(!0) })) } contentShareStartAudio(e = null) { var t; return r(this, void 0, void 0, (function* () { let i = null; i = e ? yield this.streamAudioFile(e, !0) : yield this.synthesizeStereoTones(500, 1e3); try { yield this.audioVideo.startContentShare(i) } catch (e) { return void (null === (t = this.meetingLogger) || void 0 === t || t.error(`Could not start content share: ${e}`)) } this.toggleButton("button-content-share", "on"), this.updateContentShareDropdown(!0) })) } contentShareStop() { return r(this, void 0, void 0, (function* () { if (this.audioVideo.stopContentShare(), this.toggleButton("button-pause-content-share", "off"), this.toggleButton("button-content-share", "off"), this.updateContentShareDropdown(!1), this.contentShareType === B.VideoFile) { const e = document.getElementById("content-share-video"); e.pause(), e.style.display = "none" } })) } updateContentShareDropdown(e) { document.getElementById("dropdown-item-content-share-screen-capture").style.display = e ? "none" : "block", document.getElementById("dropdown-item-content-share-screen-test-video").style.display = e ? "none" : "block", document.getElementById("dropdown-item-content-share-test-mono-audio-speech").style.display = e ? "none" : "block", document.getElementById("dropdown-item-content-share-test-stereo-audio-speech").style.display = e ? "none" : this.usingStereoMusicAudioProfile ? "block" : "none", document.getElementById("dropdown-item-content-share-test-stereo-audio-tone").style.display = e ? "none" : this.usingStereoMusicAudioProfile ? "block" : "none", document.getElementById("dropdown-item-content-share-file-item").style.display = e ? "none" : "block", document.getElementById("dropdown-item-content-share-stop").style.display = e ? "block" : "none" } isRecorder() { return "true" === new URL(window.location.href).searchParams.get("record") } isBroadcaster() { return "true" === new URL(window.location.href).searchParams.get("broadcast") } isAbortingOnReconnect() { return "true" === new URL(window.location.href).searchParams.get("abort-on-reconnect") } authenticate() { return r(this, void 0, void 0, (function* () { this.joinInfo = (yield this.sendJoinRequest(this.meeting, this.name, this.region, this.primaryExternalMeetingId)).JoinInfo, this.region = this.joinInfo.Meeting.Meeting.MediaRegion; const e = new n.MeetingSessionConfiguration(this.joinInfo.Meeting, this.joinInfo.Attendee); yield this.initializeMeetingSession(e), this.primaryExternalMeetingId = this.joinInfo.PrimaryExternalMeetingId; const t = new URL(window.location.href); return t.searchParams.set("m", this.meeting), history.replaceState({}, `${this.meeting}`, t.toString()), e.meetingId })) } log(e, ...t) { console.log.apply(console, [`[DEMO] ${e}`, ...t]) } audioVideoDidStartConnecting(e) { this.log(`session connecting. reconnecting: ${e}`), e && this.isAbortingOnReconnect() && t.fatal(Error("reconnect occured with abort-on-reconnect set to true")) } audioVideoDidStart() { this.log("session started") } audioVideoDidStop(e) { if (this.log(`session stopped from ${JSON.stringify(e)}`), "nothing" === this.behaviorAfterLeave) return; this.log("resetting stats"), this.resetStats(); const t = () => { switch (this.behaviorAfterLeave) { case "spa": this.switchToFlow("flow-authenticate"); break; case "reload": window.location.href = window.location.pathname; break; case "halt": setTimeout((() => { window.app = void 0, window.app_meetingV2 = void 0, window.webpackHotUpdateapp_meetingV2 = void 0, document.getElementsByTagName("body")[0].innerHTML = "<b>Gone</b>", this.removeFatalHandlers() }), 2e3) } }, i = () => r(this, void 0, void 0, (function* () { var e, t, i, o, s, a, d, l; this.audioVideo.unsubscribeFromActiveSpeakerDetector(this.activeSpeakerHandler), this.audioVideo.realtimeUnsubscribeToAttendeeIdPresence(this.attendeeIdPresenceHandler), null === (e = this.audioVideo.transcriptionController) || void 0 === e || e.unsubscribeFromTranscriptEvent(this.transcriptEventHandler), this.audioVideo.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.muteAndUnmuteLocalAudioHandler), this.audioVideo.realtimeUnsubscribeToSetCanUnmuteLocalAudio(this.canUnmuteLocalAudioHandler), this.audioVideo.realtimeUnsubscribeFromReceiveDataMessage(N.DATA_MESSAGE_TOPIC), this.audioVideo.removeDeviceChangeObserver(this), yield this.audioVideo.stopLocalVideoTile(), yield this.audioVideo.stopContentShare(), this.audioVideo.unbindAudioElement(), yield this.deviceController.destroy(), null === (t = this.blurProcessor) || void 0 === t || t.removeObserver(this.blurObserver), null === (i = this.replacementProcessor) || void 0 === i || i.removeObserver(this.replacementObserver), yield null === (o = this.chosenVideoTransformDevice) || void 0 === o ? void 0 : o.stop(), yield null === (s = this.voiceFocusDevice) || void 0 === s ? void 0 : s.stop(), setTimeout((() => r(this, void 0, void 0, (function* () { var e, t; yield null === (e = this.meetingEventPOSTLogger) || void 0 === e ? void 0 : e.destroy(), yield null === (t = this.meetingSessionPOSTLogger) || void 0 === t ? void 0 : t.destroy() }))), 500), n.isDestroyable(this.eventReporter) && (null === (a = this.eventReporter) || void 0 === a || a.destroy()), yield null === (d = this.blurProcessor) || void 0 === d ? void 0 : d.destroy(), yield null === (l = this.replacementProcessor) || void 0 === l ? void 0 : l.destroy(), this.audioVideo = void 0, this.voiceFocusDevice = void 0, this.meetingSession = void 0, this.activeSpeakerHandler = void 0, this.currentAudioInputDevice = void 0, this.eventReporter = void 0, this.blurProcessor = void 0, this.replacementProcessor = void 0 })), o = () => r(this, void 0, void 0, (function* () { yield i(), t() })); return e.statusCode() === n.MeetingSessionStatusCode.MeetingEnded ? (this.log("meeting ended"), void o()) : e.statusCode() === n.MeetingSessionStatusCode.Left ? (this.log("left meeting"), void o()) : void 0 } audioVideoWasDemotedFromPrimaryMeeting(e) { const t = `Was demoted from primary meeting with status ${e.toString()}`; this.log(t), this.updateUXForReplicaMeetingPromotionState("demoted"); const i = document.getElementById("toast-container"), r = document.createElement("meeting-toast"); i.appendChild(r), r.message = t, r.addButton("Retry Promotion", (() => { this.promoteToPrimaryMeeting() })), r.show() } videoAvailabilityDidChange(e) { const t = this.canStartLocalVideo !== e.canStartLocalVideo; this.canStartLocalVideo = e.canStartLocalVideo, this.log(`video availability changed: canStartLocalVideo  ${e.canStartLocalVideo}`), t && !this.meetingSession.audioVideo.hasStartedLocalVideoTile() && (this.canStartLocalVideo ? this.enableLocalVideoButton(!0, "You can now enable local video in conference.") : this.enableLocalVideoButton(!1, "Can no longer enable local video in conference.")) } enableLocalVideoButton(e, t = "") { if (this.toggleButton("button-camera", e ? "off" : "disabled"), t) { const e = document.getElementById("toast-container"), i = document.createElement("meeting-toast"); e.appendChild(i), i.message = t, i.show() } } redirectFromAuthentication(e = !1) { switch (this.meeting = document.getElementById("inputMeeting").value, this.name = document.getElementById("inputName").value, this.region = document.getElementById("inputRegion").value, this.enableSimulcast = document.getElementById("simulcast").checked, this.enableEventReporting = document.getElementById("event-reporting").checked, this.deleteOwnAttendeeToLeave = document.getElementById("delete-attendee").checked, this.enableWebAudio = document.getElementById("webaudio").checked, this.usePriorityBasedDownlinkPolicy = document.getElementById("priority-downlink-policy").checked, this.echoReductionCapability = document.getElementById("echo-reduction-capability").checked, this.primaryExternalMeetingId = document.getElementById("primary-meeting-external-id").value, document.getElementById("logLevelSelect").value) { case "INFO": this.logLevel = n.LogLevel.INFO; break; case "DEBUG": this.logLevel = n.LogLevel.DEBUG; break; case "WARN": this.logLevel = n.LogLevel.WARN; break; case "ERROR": this.logLevel = n.LogLevel.ERROR; break; default: this.logLevel = n.LogLevel.OFF }switch (document.getElementById("videoCodecSelect").value) { case "vp8": this.videoCodecPreferences = [n.VideoCodecCapability.vp8()]; break; case "h264ConstrainedBaselineProfile": this.videoCodecPreferences = [n.VideoCodecCapability.h264ConstrainedBaselineProfile(), n.VideoCodecCapability.vp8()] }n.AsyncScheduler.nextTick((() => r(this, void 0, void 0, (function* () { let i = ""; this.showProgress("progress-authenticate"); try { i = yield this.authenticate() } catch (e) { console.error(e); const t = "UserMedia is not allowed in HTTP sites. Either use HTTPS or enable media capture on insecure sites."; return document.getElementById("failed-meeting").innerText = `Meeting ID: ${this.meeting}`, document.getElementById("failed-meeting-error").innerText = "http:" === window.location.protocol ? t : e.message, void this.switchToFlow("flow-failed-meeting") } if (document.getElementById("meeting-id").innerText = `${this.meeting} (${this.region})`, document.getElementById("chime-meeting-id").innerText = `Meeting ID: ${i}`, document.getElementById("mobile-chime-meeting-id").innerText = `Meeting ID: ${i}`, document.getElementById("mobile-attendee-id").innerText = `Attendee ID: ${this.meetingSession.configuration.credentials.attendeeId}`, document.getElementById("desktop-attendee-id").innerText = `Attendee ID: ${this.meetingSession.configuration.credentials.attendeeId}`, document.getElementById("info-meeting").innerText = this.meeting, document.getElementById("info-name").innerText = this.name, this.isViewOnly) return this.updateUXForViewOnlyMode(), void (yield this.skipDeviceSelection(!1)); if (yield this.initVoiceFocus(), yield this.initBackgroundBlur(), yield this.initBackgroundReplacement(), yield this.populateAllDeviceLists(), yield this.populateVideoFilterInputList(!1), yield this.populateVideoFilterInputList(!0), this.enableSimulcast) { const e = document.getElementById("video-input-quality"); e.value = "720p", this.audioVideo.chooseVideoInputQuality(1280, 720, 15), e.disabled = !0 } const r = document.getElementById("button-promote-to-primary"); if (this.primaryExternalMeetingId ? (this.setButtonVisibility("button-record-cloud", !1), this.updateUXForReplicaMeetingPromotionState("demoted")) : r.style.display = "none", e) return yield this.skipDeviceSelection(), void this.displayButtonStates(); this.switchToFlow("flow-devices"), yield this.openAudioInputFromSelectionAndPreview(); try { yield this.openVideoInputFromSelection(document.getElementById("video-input").value, !0) } catch (e) { t.fatal(e) } yield this.openAudioOutputFromSelection(), this.hideProgress("progress-authenticate"), document.getElementById("preconnect").checked && this.audioVideo.start({ signalingOnly: !0 }) })))) } skipDeviceSelection(e = !0) { return r(this, void 0, void 0, (function* () { e && (yield this.openAudioInputFromSelection()), yield this.openAudioOutputFromSelection(), yield this.join(), this.switchToFlow("flow-meeting"), this.hideProgress("progress-authenticate") })) } allowMaxContentShare() { return !("true" !== new URL(window.location.href).searchParams.get("max-content-share")) } connectionDidBecomePoor() { this.log("connection is poor") } connectionDidSuggestStopVideo() { this.log("suggest turning the video off") } connectionDidBecomeGood() { this.log("connection is good now") } videoSendDidBecomeUnavailable() { this.log("sending video is not available"), this.enableLocalVideoButton(!1, "Cannot enable local video due to call being at capacity") } contentShareDidStart() { this.log("content share started.") } contentShareDidStop() { this.log("content share stopped."), this.isButtonOn("button-content-share") && (this.buttonStates["button-content-share"] = "off", this.buttonStates["button-pause-content-share"] = "off"), this.displayButtonStates(), this.updateContentShareDropdown(!1) } contentShareDidPause() { this.log("content share paused.") } contentShareDidUnpause() { this.log("content share unpaused.") } encodingSimulcastLayersDidChange(e) { this.log(`current active simulcast layers changed to: ${V[e]}`) } tileWillBePausedByDownlinkPolicy(e) { this.log(`Tile ${e} will be paused due to insufficient bandwidth`), this.videoTileCollection.bandwidthConstrainedTiles.add(e) } tileWillBeUnpausedByDownlinkPolicy(e) { this.log(`Tile ${e} will be resumed due to sufficient bandwidth`), this.videoTileCollection.bandwidthConstrainedTiles.delete(e) } } t.DemoMeetingApp = N, N.DID = "+17035550122", N.BASE_URL = [location.protocol, "//", location.host, location.pathname.replace(/\/*$/, "/").replace("/v2", "")].join(""), N.testVideo = "https://upload.wikimedia.org/wikipedia/commons/transcoded/c/c0/Big_Buck_Bunny_4K.webm/Big_Buck_Bunny_4K.webm.360p.vp9.webm", N.MAX_MEETING_HISTORY_MS = 3e5, N.DATA_MESSAGE_TOPIC = "chat", N.DATA_MESSAGE_LIFETIME_MS = 3e5, N.REMOTE_VIDEO_PAGE_SIZE = 25, N.REDUCED_REMOTE_VIDEO_PAGE_SIZE = 2, window.addEventListener("load", (() => { new N })), window.addEventListener("click", (e => { const t = document.getElementById("live-transcription-modal"); e.target === t && (t.style.display = "none") })) }, 9610: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.getPOSTLogger = void 0; const r = i(2388); t.getPOSTLogger = function (e, t, i, o) { const n = { url: i, logLevel: o, metadata: { appName: t, meetingId: e.meetingId, attendeeId: e.credentials.attendeeId } }; return new r.POSTLogger(n) } }, 4735: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(5169); class o extends HTMLElement { constructor() { super(...arguments), this.innerHTMLToInject = '\n    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="10000">\n      <div class="toast-body">\n        <p class="toast-message"></p>\n        <div class="mt-2 pt-2 border-top button-container">\n          <button type="button" class="close-button btn btn-secondary btn-sm">Close</button>\n        </div>\n      </div>\n    </div>\n  ' } set message(e) { this.querySelector(".toast-message").innerHTML = e } addButton(e, t) { let i = document.createElement("button"); i.classList.add("btn"), i.classList.add("btn-primary"), i.classList.add("btn-sm"), i.innerHTML = e, i.addEventListener("click", t), this.querySelector(".button-container").appendChild(i) } show() { const e = this.querySelector(".toast"); new r.Toast(e).show() } hide() { const e = this.querySelector(".toast"); new r.Toast(e).hide() } connectedCallback() { this.innerHTML = this.innerHTMLToInject, this.className = "meeting-toast", this.querySelector(".close-button").addEventListener("click", (() => { this.hide() })) } } t.default = o, customElements.define("meeting-toast", o) }, 5279: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e) { this.pageSize = e, this.currentPageStart = 0, this.all = new Array } currentPage() { return this.all.slice(this.currentPageStart, this.currentPageStart + this.pageSize) } add(e) { this.all.includes(e) || this.all.push(e) } remove(e) { this.all.splice(this.all.indexOf(e)) } removeIf(e) { const t = this.all.findIndex(e); -1 !== t && this.all.splice(t) } hasNextPage() { return this.currentPageStart + this.pageSize < this.all.length } nextPage() { this.hasNextPage && (this.currentPageStart += this.pageSize) } hasPreviousPage() { return this.currentPageStart - this.pageSize >= 0 } previousPage() { this.currentPageStart -= this.pageSize } } }, 63: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2388); t.default = class { static create(e) { const t = document.createElement("canvas"); t.width = 480, t.height = t.width / 16 * 9; const i = function (e, t) { const i = new r.IntervalScheduler(1e3), o = e.getContext("2d"), n = e.captureStream(5) || null; if (!n) return; i.start((() => { "smpte" === t ? function (e, t) { const i = e.width, r = e.height, o = 2 * r / 3, n = 3 * r / 4, s = r, a = ["#c0c0c0", "#c0c000", "#00c0c0", "#00c000", "#c000c0", "#c00000", "#0000c0"], d = ["#0000c0", "#000000", "#c000c0", "#000000", "#00c0c0", "#000000", "#c0c0c0"], l = ["#00214c", "#ffffff", "#32006a", "#131313", "#090909", "#131313", "#1d1d1d", "#131313"], c = [0 * i, 1 * i / 4 * (5 / 7), 2 * i / 4 * (5 / 7), 3 * i / 4 * (5 / 7), i * (5 / 7), i * (5 / 7 + 1 / 21), i * (5 / 7 + 2 / 21), i * (6 / 7), 1 * i], u = i / a.length, h = e.getContext("2d"); for (let e = 0; e < a.length; e++)h.fillStyle = a[e], h.fillRect(0 + e * u, 0, u, o), h.fillStyle = d[e], h.fillRect(0 + e * u, o, u, n - o); for (let e = 0; e < l.length; e++)h.fillStyle = l[e], h.fillRect(0 + c[e], n, c[e + 1] - c[e], s - n) }(e) : (o.fillStyle = t, o.fillRect(0, 0, e.width, e.height)) })); const s = () => { i.stop() }; return n.getVideoTracks()[0].addEventListener("ended", s), { listener: s, scheduler: i, stream: n } }(t, e); if (!i) return null; const { stream: o } = i; return o } } }, 4986: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2388); class o { constructor(e, t) { this.logger = e, this.downlinkPolicy = t, this.attendeeIdToVideoPreference = new Map, this.priorityBasedDownlinkPolicy = null, this._visibleAttendees = new Array } set visibleAttendees(e) { this._visibleAttendees = e, this.updateDownlinkPreference() } ensureDefaultPreferences(e) { this.logger.info(`Available remote video sources changed: ${JSON.stringify(e)}`); for (const t of e) this.attendeeIdToVideoPreference.has(t.attendee.attendeeId) || this.attendeeIdToVideoPreference.set(t.attendee.attendeeId, new r.VideoPreference(t.attendee.attendeeId, o.DefaultVideoTilePriority, o.DefaultVideoTileTargetDisplaySize)) } setAttendeeTargetDisplaySize(e, t) { this.attendeeIdToVideoPreference.has(e) ? this.attendeeIdToVideoPreference.get(e).targetSize = t : this.attendeeIdToVideoPreference.set(e, new r.VideoPreference(e, o.DefaultVideoTilePriority, t)), this.updateDownlinkPreference() } setAttendeePriority(e, t) { this.attendeeIdToVideoPreference.has(e) ? this.attendeeIdToVideoPreference.get(e).priority = t : this.attendeeIdToVideoPreference.set(e, new r.VideoPreference(e, t, o.DefaultVideoTileTargetDisplaySize)), this.updateDownlinkPreference() } updateDownlinkPreference() { if (0 === this.attendeeIdToVideoPreference.size) return void this.logger.info("No video preferences set yet, not updating"); const e = r.VideoPreferences.prepare(); for (const [t, i] of this.attendeeIdToVideoPreference.entries()) this._visibleAttendees.includes(t) && e.add(i); this.downlinkPolicy.chooseRemoteVideoSources(e.build()) } } t.default = o, o.DefaultVideoTilePriority = 5, o.DefaultVideoTileTargetDisplaySize = r.TargetDisplaySize.High }, 1641: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.DemoVideoTile = void 0; class o extends HTMLElement { constructor() { super(...arguments), this.innerHTMLToInject = '\n  <video class="video-tile-video"></video>\n  <div class="video-tile-attendee-id"></div>\n  <div class="video-tile-nameplate"></div>\n  <div class="video-tile-pause-state"></div>\n  <div class="button-video-tile-config" role="group">\n    <button type="button" class="btn btn-success dropdown-toggle button-video-tile-config-drop" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Video Tile Settings"><%= require(\'../../../node_modules/open-iconic/svg/cog.svg\') %></button>\n    <div class="dropdown-menu dropdown-menu-end dropdown-video-tile-config" aria-labelledby="button-video-tile-config-drop" style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; left: 0px; will-change: transform;">\n      <a class="dropdown-item video-tile-pause">Pause</a>\n      <div class="dropdown-divider"></div>\n      <h6 class="dropdown-header target-resolution-header">Target Resolution</h6>\n      <form class="btn-group video-tile-config-toggle target-resolution-toggle" role="group">\n        <input type="radio" class="btn-check" name="level" value="low" id="resolution-low">\n        <label class="btn btn-secondary" id="resolution-low-label" for="low">Low</label>\n        <input type="radio" class="btn-check" name="level" value="medium" id="resolution-medium">\n        <label class="btn btn-secondary" id="resolution-medium-label" for="medium">Medium</label>\n        <input type="radio" class="btn-check" name="level" value="high" id="resolution-high" checked>\n        <label class="btn btn-secondary" id="resolution-high-label" for="high">High</label>\n      </form>\n      <h6 class="dropdown-header video-priority-header">Video Priority</h6>\n      <form class="btn-group video-tile-config-toggle video-priority-toggle">\n        <input type="radio" class="btn-check" name="level" value="low" id="priority-low">\n        <label class="btn btn-secondary" id="priority-low-label" for="low">Low</label>\n        <input type="radio" class="btn-check" name="level" value="medium" id="priority-medium" checked>\n        <label class="btn btn-secondary" id="priority-medium-label" for="medium">Medium</label>\n        <input type="radio" class="btn-check" name="level" value="high" id="priority-high">\n        <label class="btn btn-secondary" id="priority-high-label" for="high">High</label>\n      </form>\n    </div>\n  </div>\n', this._attendeeId = "" } set tileIndex(e) { this.querySelector(".video-tile-nameplate").id = `nameplate-${e}`, this.querySelector(".video-tile-video").id = `video-${e}`; const t = ["priority-low", "priority-medium", "priority-high", "resolution-low", "resolution-medium", "resolution-high"]; for (const i of t) this.querySelector(`#${i}`).id = `${i}-${e}`, this.querySelector(`#${i}-label`).setAttribute("for", `${i}-${e}`), this.querySelector(`#${i}-label`).id = `${i}-label-${e}` } set showConfigDropdown(e) { const t = e ? "block" : "none"; this.querySelector(".button-video-tile-config-drop").style.display = t, this.querySelector(".video-tile-pause").style.display = t } set showRemoteVideoPreferences(e) { const t = e ? "block" : "none"; this.querySelector(".target-resolution-header").style.display = t, this.querySelector(".target-resolution-toggle").style.display = t, this.querySelector(".video-priority-header").style.display = t, this.querySelector(".video-priority-toggle").style.display = t } show(e) { this.classList.add("active"), e && this.classList.add("content") } set featured(e) { e ? this.classList.add("featured") : this.classList.remove("featured") } hide() { this.classList.remove("active", "featured", "content") } showVideoStats(e, t, i) { const r = t ? Object.keys(t) : []; if (0 === r.length) return; let o = this.querySelector("#stats-info"); o || (o = document.createElement("div"), o.setAttribute("id", "stats-info"), o.setAttribute("class", "stats-info")); let n = this.querySelector("#stats-table"); n && o.removeChild(n), n = document.createElement("table"), n.setAttribute("id", "stats-table"), n.setAttribute("class", "stats-table"), o.appendChild(n), this.videoElement.insertAdjacentElement("afterend", o); const s = n.insertRow(-1); let a = s.insertCell(-1); a.innerHTML = "Video statistics"; for (let e = 0; e < r.length; e++)a = s.insertCell(-1), a.innerHTML = `${i} ${e + 1}`; for (const i of r) for (const [r, o] of Object.entries(t[i])) if (e[r]) { const t = n.insertRow(-1); t.setAttribute("id", `${r}`), a = t.insertCell(-1), a.innerHTML = e[r], a = t.insertCell(-1), a.innerHTML = `${o}` } } get videoElement() { return this.querySelector(".video-tile-video") } set nameplate(e) { const t = this.querySelector(".video-tile-nameplate"); console.log(`setting nameplate to ${e}`), t.innerText = e } set attendeeId(e) { console.log(`setting attendeeId to ${e}`), this._attendeeId = e, this.querySelector(".video-tile-attendee-id").innerText = this._attendeeId } get attendeeId() { return this._attendeeId } set pauseState(e) { this.querySelector(".video-tile-pause-state").innerText = e } get pauseButtonElement() { return this.querySelector(".video-tile-pause") } get targetResolutionRadioElement() { return this.querySelector(".target-resolution-toggle") } get videoPriorityRadioElement() { return this.querySelector(".video-priority-toggle") } connectedCallback() { return r(this, void 0, void 0, (function* () { this.innerHTML = this.innerHTMLToInject, this.querySelector(".button-video-tile-config-drop").innerHTML = i(8309), this.className = "video-tile" })) } } t.DemoVideoTile = o, customElements.define("video-tile", o) }, 1261: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2388), o = i(5279); i(1641).DemoVideoTile; const n = { low: 10, medium: 5, high: 1 }, s = { low: r.TargetDisplaySize.Low, medium: r.TargetDisplaySize.Medium, high: r.TargetDisplaySize.High }, a = { videoUpstreamFrameHeight: "Frame Height", videoUpstreamFrameWidth: "Frame Width", videoUpstreamBitrate: "Bitrate (bps)", videoUpstreamPacketsSent: "Packets Sent", videoUpstreamPacketLossPercent: "Packet Loss (%)", videoUpstreamFramesEncodedPerSecond: "Frame Rate" }, d = { videoDownstreamFrameHeight: "Frame Height", videoDownstreamFrameWidth: "Frame Width", videoDownstreamBitrate: "Bitrate (bps)", videoDownstreamPacketLossPercent: "Packet Loss (%)", videoDownstreamPacketsReceived: "Packet Received", videoDownstreamFramesDecodedPerSecond: "Frame Rate" }; class l { constructor() { this.tiles = {}, this.tileStates = {}, this.remoteTileCount = 0 } acquireTileIndex(e) { for (let t = 0; t <= l.MaxTiles; t++)if (this.tiles[t] === e) return t; for (let t = 0; t <= l.MaxTiles; t++)if (!(t in this.tiles)) return this.tiles[t] = e, this.remoteTileCount++, t; throw new Error("no tiles are available") } releaseTileIndex(e) { for (let t = 0; t <= l.MaxTiles; t++)if (this.tiles[t] === e) return this.remoteTileCount--, delete this.tiles[t], t; return l.MaxTiles } } l.MaxTiles = 27; class c { constructor(e, t, i, r) { if (this.videoTileController = e, this.logger = t, this.videoPreferenceManager = i, this.tileOrganizer = new l, this.tileIndexToTileId = {}, this.tileIdToTileIndex = {}, this.tileIdToAttendeeId = {}, this.tileIndexToPauseEventListener = {}, this.tileIndexToTargetResolutionEventListener = {}, this.tileIndexToPriorityEventListener = {}, this.tileArea = document.getElementById("tile-area"), this.tileIndexToDemoVideoTile = new Map, this.bandwidthConstrainedTiles = new Set, this._activeSpeakerAttendeeId = "", this.setupVideoTiles(), void 0 === this.videoPreferenceManager) for (let e = 0; e <= l.MaxTiles; e++)this.tileIndexToDemoVideoTile.get(e).showRemoteVideoPreferences = !1; else this.pagination = new o.default(r), document.getElementById("video-paginate-left").addEventListener("click", (e => { this.paginateLeft() })), document.getElementById("video-paginate-right").addEventListener("click", (e => { this.paginateRight() })), this.updatePaginatedVisibleTiles() } set activeSpeakerAttendeeId(e) { this.logger.info(`setting act spk to ${e}`), this._activeSpeakerAttendeeId = e, this.layoutFeaturedTile() } remoteVideoSourcesDidChange(e) { if (void 0 !== this.videoPreferenceManager) { for (const t of e) this.pagination.add(t.attendee.attendeeId); this.pagination.removeIf((t => !e.some((e => e.attendee.attendeeId === t)))), this.videoPreferenceManager.ensureDefaultPreferences(e), this.updatePaginatedVisibleTiles() } } videoTileDidUpdate(e) { if (console.log(`video tile updated: ${JSON.stringify(e, null, "  ")}`), !e.boundAttendeeId) return; const t = e.localTile ? c.LocalVideoTileIndex : this.tileOrganizer.acquireTileIndex(e.tileId), i = this.tileIndexToDemoVideoTile.get(t); e.localTile || (i.pauseButtonElement.removeEventListener("click", this.tileIndexToPauseEventListener[t]), this.tileIndexToPauseEventListener[t] = this.createPauseResumeListener(e), i.pauseButtonElement.addEventListener("click", this.tileIndexToPauseEventListener[t])), void 0 === this.videoPreferenceManager || e.localTile || (this.logger.info("adding config listeners for tileIndex " + t), i.targetResolutionRadioElement.removeEventListener("click", this.tileIndexToTargetResolutionEventListener[t]), this.tileIndexToTargetResolutionEventListener[t] = this.createTargetResolutionListener(e), i.targetResolutionRadioElement.addEventListener("click", this.tileIndexToTargetResolutionEventListener[t]), i.videoPriorityRadioElement.removeEventListener("click", this.tileIndexToPriorityEventListener[t]), this.tileIndexToPriorityEventListener[t] = this.createVideoPriorityListener(e), i.videoPriorityRadioElement.addEventListener("click", this.tileIndexToPriorityEventListener[t])); const r = i.videoElement; this.logger.info(`binding video tile ${e.tileId} to ${r.id}`), this.videoTileController.bindVideoElement(e.tileId, this.tileIndexToDemoVideoTile.get(t).videoElement), this.tileIndexToTileId[t] = e.tileId, this.tileIdToTileIndex[e.tileId] = t, this.tileIdToAttendeeId[e.tileId] = e.boundAttendeeId, e.boundExternalUserId && (i.nameplate = e.boundExternalUserId.split("#").slice(-1)[0]), e.paused && this.bandwidthConstrainedTiles.has(e.tileId) ? i.pauseState = "⚡" : i.pauseState = "", i.attendeeId = e.boundAttendeeId, e.active || e.paused ? i.show(e.isContent) : i.hide(), this.updateLayout(), this.layoutFeaturedTile() } videoTileWasRemoved(e) { const t = this.tileOrganizer.releaseTileIndex(e); this.logger.info(`video tileId removed: ${e} from tile-${t}`); const i = this.tileIndexToDemoVideoTile.get(t); i.pauseButtonElement.removeEventListener("click", this.tileIndexToPauseEventListener[t]), i.targetResolutionRadioElement.removeEventListener("click", this.tileIndexToTargetResolutionEventListener[t]), i.videoPriorityRadioElement.removeEventListener("click", this.tileIndexToPriorityEventListener[t]), i.hide(), i.attendeeId = "", i.nameplate = "", i.pauseState = "", this.updateLayout() } showVideoWebRTCStats(e) { this.logger.info(`showing stats ${JSON.stringify(e)}`); const t = this.videoTileController.getAllVideoTiles(); if (0 !== t.length) for (const i of t) { const t = i.state(); if (t.paused) continue; const r = i.id(), o = this.tileIdToTileIndex[r], n = this.tileIndexToDemoVideoTile.get(o); t.localTile ? (this.logger.info(`showing stats ${JSON.stringify(e)}`), n.showVideoStats(a, e[t.boundAttendeeId], "Upstream")) : n.showVideoStats(d, e[t.boundAttendeeId], "Downstream") } } setupVideoTiles() { const e = document.getElementById("tile-area"); for (let t = 0; t <= l.MaxTiles; t++) { const i = document.createElement("video-tile"); e.appendChild(i), i.tileIndex = t, t === c.LocalVideoTileIndex && (i.showConfigDropdown = !1, i.showRemoteVideoPreferences = !1), this.tileIndexToDemoVideoTile.set(t, i); const r = i.videoElement; r.onresize = () => { r.videoHeight > r.videoWidth ? (r.style.objectFit = "contain", this.logger.info(`video-${t} changed to portrait mode resolution ${r.videoWidth}x${r.videoHeight}`)) : r.style.objectFit = "cover" } } } tileIdForAttendeeId(e) { for (const t of this.videoTileController.getAllVideoTiles()) { const i = t.state(); if (i.boundAttendeeId === e) return i.tileId } return null } findContentTileId() { for (const e of this.videoTileController.getAllVideoTiles()) { const t = e.state(); if (t.isContent) return t.tileId } return null } activeTileId() { let e = this.findContentTileId(); return null !== e ? e : this.tileIdForAttendeeId(this._activeSpeakerAttendeeId) } layoutFeaturedTile() { const e = this.visibleTileIndices(), t = this.localTileId(), i = this.activeTileId(); for (let r = 0; r < e.length; r++) { const o = e[r], n = this.tileIndexToDemoVideoTile.get(o), s = this.tileIndexToTileId[o]; n.featured = s === i && s !== t } this.updateLayout() } updateLayout() { this.tileArea.className = `v-grid size-${this.videoTileCount()}`; const e = this.localTileId(), t = this.activeTileId(); t && t !== e ? this.tileArea.classList.add("featured") : this.tileArea.classList.remove("featured") } videoTileCount() { return this.tileOrganizer.remoteTileCount + (this.videoTileController.hasStartedLocalVideoTile() ? 1 : 0) } localTileId() { return this.videoTileController.hasStartedLocalVideoTile() ? this.videoTileController.getLocalVideoTile().state().tileId : null } visibleTileIndices() { return Object.keys(this.tileOrganizer.tiles).map((e => parseInt(e))) } paginateLeft() { this.pagination.previousPage(), this.updatePaginatedVisibleTiles() } paginateRight() { this.pagination.nextPage(), this.updatePaginatedVisibleTiles() } updatePaginatedVisibleTiles() { let e = this.pagination.currentPage(); this.logger.info(`Showing current page ${JSON.stringify(e)}`), this.videoPreferenceManager.visibleAttendees = e; for (let [t, i] of this.tileIndexToDemoVideoTile.entries()) e.includes(i.attendeeId) ? i.show(!1) : t !== c.LocalVideoTileIndex && this.tileIndexToTileId[t] !== this.findContentTileId() && i.hide(); const t = e => e ? "block" : "none"; document.getElementById("video-paginate-left").style.display = t(this.pagination.hasPreviousPage()), document.getElementById("video-paginate-right").style.display = t(this.pagination.hasNextPage()) } createTargetResolutionListener(e) { return t => { if (!(t.target instanceof HTMLInputElement)) return; const i = e.boundAttendeeId, r = t.target.value; this.logger.info(`target resolution changed for: ${i} to ${r}`); const o = s[r]; this.videoPreferenceManager.setAttendeeTargetDisplaySize(i, o) } } createVideoPriorityListener(e) { return t => { if (!(t.target instanceof HTMLInputElement)) return; const i = e.boundAttendeeId, r = t.target.value; this.logger.info(`priority changed for: ${i} to ${r}`); const o = n[r]; this.videoPreferenceManager.setAttendeePriority(i, o) } } createPauseResumeListener(e) { return t => { e.paused ? (this.videoTileController.unpauseVideoTile(e.tileId), t.target.innerText = "Pause") : (this.videoTileController.pauseVideoTile(e.tileId), t.target.innerText = "Resume") } } } t.default = c, c.LocalVideoTileIndex = l.MaxTiles }, 952: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2388); t.default = class { constructor(e = 150) { this.radius = e, this.targetCanvas = document.createElement("canvas"), this.targetCanvasCtx = this.targetCanvas.getContext("2d"), this.canvasVideoFrameBuffer = new r.CanvasVideoFrameBuffer(this.targetCanvas), this.sourceWidth = 0, this.sourceHeight = 0 } destroy() { this.targetCanvasCtx = null, this.targetCanvas = null, this.canvasVideoFrameBuffer.destroy() } process(e) { const t = e[0].asCanvasElement(), i = t.width, r = t.height; return 0 === i || 0 === r || (this.sourceWidth === i && this.sourceHeight === r || (this.sourceWidth = i, this.sourceHeight = r, this.targetCanvas.width = this.sourceWidth, this.targetCanvas.height = this.sourceHeight, this.targetCanvasCtx.beginPath(), this.targetCanvasCtx.arc(this.sourceWidth / 2, this.sourceHeight / 2, this.radius, 0, 2 * Math.PI), this.targetCanvasCtx.clip(), this.targetCanvasCtx.stroke(), this.targetCanvasCtx.closePath()), this.targetCanvasCtx.drawImage(t, 0, 0), e[0] = this.canvasVideoFrameBuffer), Promise.resolve(e) } } }, 9745: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.default = class { constructor(e) { this.emoji = e, this.x = Math.floor(Math.random()), this.y = 0 } destroy() { } process(e) { for (const t of e) { if (!t) continue; const e = t.asCanvasElement(); if (!e) continue; const i = e.getContext("2d"); this.x > e.width ? this.x = Math.min(Math.floor(Math.random() * e.width), e.width) : this.y > e.height && (this.x = Math.min(Math.floor(Math.random() * e.width), e.width), this.y = 0), this.y += 5, i.font = "50px serif", i.fillStyle = "rgba(0, 0, 255, 0.8)", i.fillText(this.emoji, this.x, this.y) } return Promise.resolve(e) } } }, 3521: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }); const r = i(2388); t.default = class { constructor(e) { this.displayAspectRatio = e, this.targetCanvas = document.createElement("canvas"), this.targetCanvasCtx = this.targetCanvas.getContext("2d"), this.canvasVideoFrameBuffer = new r.CanvasVideoFrameBuffer(this.targetCanvas), this.renderWidth = 0, this.renderHeight = 0, this.sourceWidth = 0, this.sourceHeight = 0, this.dx = 0 } destroy() { this.targetCanvasCtx = null, this.targetCanvas = null, this.canvasVideoFrameBuffer.destroy() } process(e) { const t = e[0].asCanvasElement(), i = t.width, r = t.height; return 0 === i || 0 === r || (this.sourceWidth === i && this.sourceHeight === r || (this.sourceWidth = i, this.sourceHeight = r, this.renderWidth = Math.floor(this.sourceHeight * this.displayAspectRatio), this.renderHeight = this.sourceHeight, this.dx = Math.max(0, Math.floor((i - this.renderWidth) / 2)), this.targetCanvas.width = this.renderWidth, this.targetCanvas.height = this.renderHeight), this.targetCanvasCtx.drawImage(t, this.dx, 0, this.renderWidth, this.renderHeight, 0, 0, this.renderWidth, this.renderHeight), e[0] = this.canvasVideoFrameBuffer), Promise.resolve(e) } } }, 1193: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2388); class n { constructor() { this.targetCanvas = document.createElement("canvas"), this.canvasVideoFrameBuffer = new o.CanvasVideoFrameBuffer(this.targetCanvas), this.sourceWidth = 0, this.sourceHeight = 0, this.mask = void 0, this.model = void 0 } process(e) { return r(this, void 0, void 0, (function* () { this.model || (this.model = yield bodyPix.load()); const t = e[0].asCanvasElement(); if (!t) throw new Error("buffer is already destroyed"); const i = t.width, r = t.height; if (0 === i || 0 === r) return e; this.sourceWidth === i && this.sourceHeight === r || (this.sourceWidth = i, this.sourceHeight = r, this.targetCanvas.width = this.sourceWidth, this.targetCanvas.height = this.sourceHeight); let o = yield this.model.segmentPerson(t); return o && (this.mask = bodyPix.toMask(o, n.FOREGROUND_COLOR, n.BACKGROUND_COLOR, !0)), this.mask && (bodyPix.drawMask(this.targetCanvas, t, this.mask), e[0] = this.canvasVideoFrameBuffer), e })) } destroy() { return r(this, void 0, void 0, (function* () { this.model && this.model.dispose(), this.model = void 0 })) } } t.default = n, n.FOREGROUND_COLOR = { r: 255, g: 255, b: 255, a: 255 }, n.BACKGROUND_COLOR = { r: 0, g: 0, b: 0, a: 255 } }, 9100: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.platformCanSupportBodyPixWithoutDegradation = t.loadBodyPixDependency = void 0; const o = i(4924), n = [{ src: "https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.7.0/dist/tf.min.js", integrity: "sha384-uI1PW0SEa/QzAUuRQ6Bz5teBONsa9D0ZbVxMcM8mu4IjJ5msHyM7RRtZtL8LnSf3", crossOrigin: "anonymous" }, { src: "https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core@2.7.0/dist/tf-core.min.js", integrity: "sha384-DlI/SVdTGUBY5hi4h0p+nmC6V8i0FW5Nya/gYElz0L68HrSiXsBh+rqWcoZx3SXY", crossOrigin: "anonymous" }, { src: "https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl@2.7.0/dist/tf-backend-webgl.min.js", integrity: "sha384-21TV9Kpzn8SF68G1U6nYN3qPZnb97F06JuW4v0FDDBzW+CUwv8GcKMR+BjnE7Vmm", crossOrigin: "anonymous" }, { src: "https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0.5/dist/body-pix.min.js", integrity: "sha384-dPJ/sICXCqdh39bsuGLVFcOiRyeL/XcFrwiFrJq9oh7k1TCtsUKhX6UV2X4UuKU4", crossOrigin: "anonymous" }]; t.loadBodyPixDependency = function (e) { return r(this, void 0, void 0, (function* () { for (const { src: t, integrity: i, crossOrigin: r } of n) yield new Promise(((o, n) => { const s = document.createElement("script"), a = setTimeout((() => { n(new Error(`Loading script ${t} takes longer than ${e}`)) }), e); s.onload = function (e) { clearTimeout(a), o() }, s.onerror = function (e) { clearTimeout(a), n(new Error(`Failed to load ${t}`)) }, s.integrity = i, s.crossOrigin = r, s.src = t, document.body.appendChild(s) })) })) }, t.platformCanSupportBodyPixWithoutDegradation = function () { return "chrome" === o.detect().name && !1 === /(android)/i.test(navigator.userAgent) } }, 9413: e => { e.exports = /[\0-\x1F\x7F-\x9F]/ }, 2326: e => { e.exports = /[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/ }, 3189: e => { e.exports = /[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/ }, 5045: e => { e.exports = /[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/ }, 4205: (e, t, i) => { "use strict"; t.Any = i(9369), t.Cc = i(9413), t.Cf = i(2326), t.P = i(3189), t.Z = i(5045) }, 9369: e => { e.exports = /[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/ }, 2880: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.decideModel = t.measureAndDecideExecutionApproach = void 0; const o = i(6889), n = i(2479), s = { wasm: { noSupport: .07, inline: { c100: 1, c50: .36, c20: .16, c10: .07 }, worker: { c100: .5, c50: .18, c20: .08, c10: .06 } }, simd: { noSupport: .1, inline: { c100: 1, c50: .43, c20: .3, c10: .2 }, worker: { c100: .5, c50: .21, c20: .15, c10: .1 } } }; class a { constructor(e, t) { this.fetchConfig = e, this.logger = t; const i = `${e.paths.workers}estimator-v1.js`; this.fetchBehavior = { headers: e.headers, escapedQueryString: e.escapedQueryString }, this.worker = o.loadWorker(i, "VoiceFocusEstimator", this.fetchBehavior, t) } roundtrip(e, t, i) { return new Promise(((r, o) => { this.worker.then((o => { let n; n = e => { const { message: s, key: a } = e.data; s === t && a === i && (o.removeEventListener("message", n), r(e.data)) }, o.addEventListener("message", n), o.postMessage(e) })).catch((e => { var t; null === (t = this.logger) || void 0 === t || t.error("Failed to load worker.", e), o(e) })) })) } supportsSIMD(e) { const t = "simd", i = e || `${this.fetchConfig.paths.wasm}simd-v1.wasm`, r = { message: "supports-simd", fetchBehavior: this.fetchBehavior, path: i, key: t }; return this.roundtrip(r, "simd-support", t).then((e => e.supports)) } measure(e, t) { const i = `${this.fetchConfig.paths.wasm}bench-v1.wasm`, r = `${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`, o = e ? r : i, n = `bench:${e}`, s = { message: "measure", fetchBehavior: this.fetchBehavior, budget: t, path: o, key: n }; return this.roundtrip(s, "measurement", n).then((e => { if (e.measurement) return e.measurement; throw new Error("Failed to measure.") })) } stop() { this.worker.then((e => { var t; null === (t = this.logger) || void 0 === t || t.debug("Stopping estimator worker."), e.terminate() })).catch((e => { })) } } const d = (e, t, i, o) => r(void 0, void 0, void 0, (function* () { const r = { supportsSIMD: e, supportsSAB: n.supportsSharedArrayBuffer(globalThis, window, i), duration: -1 }; if (e) return null == i || i.info("Supports SIMD: true (force)"), r; const s = !o, d = o || new a(t, i); try { const t = !n.isOldChrome(window, i) && (yield d.supportsSIMD()); return null == i || i.info(`Supports SIMD: ${t} (force: ${e})`), r.supportsSIMD = t, r } finally { s && d.stop() } })); t.measureAndDecideExecutionApproach = (e, t, i, o = s) => r(void 0, void 0, void 0, (function* () { let l = e.executionPreference; const { usagePreference: c, variantPreference: u, namePreference: h, simdPreference: p, estimatorBudget: m, executionQuantaPreference: f } = e; "interactivity" === c && "inline" !== l && (null == i || i.debug(`Overriding execution preference ${l} to reflect interactivity preference.`), l = "inline"); const g = "force" === p, b = "auto" !== u, v = "auto" !== l; let y; try { y = b && v ? yield d(g, t, i) : yield ((e, t, i, o) => r(void 0, void 0, void 0, (function* () { const r = new a(t, o); try { const n = yield d(e, t, o, r); if (n.supportsSIMD) try { return n.duration = yield r.measure(!0, i), null == o || o.info("SIMD timing:", n.duration), n } catch (e) { null == o || o.warn("Failed SIMD estimation; falling back to non-SIMD."), n.supportsSIMD = !1 } return n.duration = yield r.measure(!1, i), null == o || o.info("No-SIMD timing:", n.duration), n } catch (e) { throw null == o || o.error("Could not feature check.", e), e } finally { r.stop() } })))(g, t, m, i) } catch (e) { throw null == i || i.error("Could not load estimator.", e), new Error("Could not load Voice Focus estimator.") } return (({ supportsSIMD: e, supportsSAB: t, duration: i, executionPreference: r = "auto", simdPreference: o, variantPreference: a = "auto", namePreference: d = "default", usagePreference: l, executionQuantaPreference: c = 3 }, u = s, h) => { const p = "force" === o || "disable" !== o && e, m = -1 !== i, f = m ? (p ? 2.5 : 2.63) / i : 0, g = p ? u.simd : u.wasm, b = m ? ((e, t) => 1 === e ? .6 : "quality" === t ? .65 * e : .5 * e)(c, l) * f : 0, v = m ? .7 * f : 0, y = d, w = e => ({ supported: !1, reason: e }); if (m) { if (f < g.noSupport) return w(`Performance score ${f} worse than threshold ${g.noSupport}.`) } else if ("auto" === r || "auto" === a) return w(`Missing explicit execution (${r}) or variant (${a}) preference, but no scoring performed.`); null == h || h.debug(`Bench duration ${i} yields inline score ${b} and worker score ${v}.`); const S = (e, t, i) => ({ supported: !0, useSIMD: p, processor: e, executionApproach: t, variant: i, executionQuanta: "inline" === t ? c : void 0, name: y }), x = (e, t, i) => "auto" !== t ? !m || e > i[t] ? t : "failed" : e > i.c100 ? "c100" : e > i.c50 ? "c50" : e > i.c20 ? "c20" : e > i.c10 ? "c10" : "failed", k = e => { switch (e || "auto") { case "auto": { let e = k("inline"), t = k("worker"); return null == h || h.debug(`Reducing auto preference: ${JSON.stringify(e)} vs ${JSON.stringify(t)}`), !1 === e.supported || !1 === t.supported ? t : e.variant === t.variant || "c50" === e.variant ? e : t } case "worker": return n.supportsSharedArrayBuffer(globalThis, window, h) ? k("worker-sab") : k("worker-postMessage"); case "inline": { const e = x(b, a, g.inline); return "failed" === e ? w(`Performance score ${b} not sufficient for inline use with variant preference ${a}.`) : S("voicefocus-inline-processor", "inline", e) } case "worker-sab": { if (!t) { const e = "Requested worker-sab but no SharedArrayBuffer support."; return null == h || h.warn(e), { supported: !1, reason: e } } const e = x(v, a, g.worker); return "failed" === e ? w(`Performance score ${v} not sufficient for worker use with variant preference ${a}.`) : S("voicefocus-worker-sab-processor", "worker-sab", e) } case "worker-postMessage": { const e = x(v, a, g.worker); if ("failed" === e) return w(`Performance score ${v} not sufficient for worker use.`); if ("ns_es" === y) { const e = "Requested echo suppression but postMessage executor does not support it."; return null == h || h.warn(e), { supported: !1, reason: e } } return S("voicefocus-worker-postMessage-processor", "worker-postMessage", e) } } }; return k(r) })(Object.assign(Object.assign({}, y), { simdPreference: p, executionPreference: l, variantPreference: u, namePreference: h, usagePreference: c, executionQuantaPreference: f }), o, i) })), t.decideModel = ({ category: e, name: t, variant: i, simd: r, url: o }) => `${e}-${t}-${i}-v1${r ? "_simd" : ""}` }, 3772: (e, t) => { "use strict"; function i(e, t, i) { if (!i) return fetch(e, t); const n = o(e, i), s = r(t, i); return fetch(n, s) } function r(e, t) { return (null == t ? void 0 : t.headers) ? e ? Object.assign(Object.assign({}, e), { headers: Object.assign(Object.assign({}, e.headers || {}), t.headers) }) : { headers: t.headers } : e } function o(e, t) { if (!(null == t ? void 0 : t.escapedQueryString)) return e; const i = -1 !== e.lastIndexOf("?"); return `${e}${i ? "&" : "?"}${t.escapedQueryString}` } Object.defineProperty(t, "__esModule", { value: !0 }), t.isValidRevisionID = t.isValidAssetGroup = t.resolveURL = t.addQueryParams = t.withQueryString = t.withRequestHeaders = t.fetchWithBehavior = void 0, t.fetchWithBehavior = i, t.withRequestHeaders = r, t.withQueryString = o, t.addQueryParams = function (e, t) { const i = Object.keys(t); if (!i.length) return e; const r = new URLSearchParams(null == e ? void 0 : e.escapedQueryString); for (const e of i) r.append(e, t[e]); return Object.assign(Object.assign({}, e), { escapedQueryString: r.toString() }) }; const n = { method: "HEAD", mode: "cors", credentials: "omit", redirect: "follow", referrerPolicy: "origin" }; t.resolveURL = function (e, t) { return i(e, n, t).then((t => t.redirected ? t.url : e)) }, t.isValidAssetGroup = function (e) { return !!e && /^[-.a-zA-Z0-9]+$/.test(e) }, t.isValidRevisionID = function (e) { return !!e && /^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e) } }, 6889: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.loadWorker = void 0; const r = i(3772), o = { method: "GET", mode: "cors", credentials: "omit", redirect: "follow", referrerPolicy: "no-referrer" }; t.loadWorker = (e, t, i, n) => { null == n || n.debug(`Loading ${t} worker from ${e}.`); let s = !1; try { s = self.origin === new URL(e).origin } catch (e) { null == n || n.error("Could not compare origins.", e) } if (s) { const o = r.withQueryString(e, i); return Promise.resolve(new Worker(o, { name: t })) } return r.fetchWithBehavior(e, o, i).then((e => { if (e.ok) return e.blob().then((e => new Worker(window.URL.createObjectURL(e)))); throw new Error("Fetch failed.") })) } }, 2479: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.isOldChrome = t.supportsWASMStreaming = t.supportsSharedArrayBuffer = t.supportsWASM = t.supportsAudioWorklet = t.supportsWorker = t.supportsVoiceFocusWorker = t.supportsWASMPostMessage = t.isSafari = void 0; const o = i(6889); t.isSafari = (e = globalThis) => { const t = e.navigator.userAgent, i = t.match(/Safari\//), r = t.match(/Chrom(?:e|ium)\//); return !(!i || r) }, t.supportsWASMPostMessage = (e = globalThis) => !t.isSafari(e) && (!((e = globalThis) => !!e.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/))(e) || (n(e) || 0) < 95), t.supportsVoiceFocusWorker = (e = globalThis, i, n) => r(void 0, void 0, void 0, (function* () { if (!t.supportsWorker(e, n)) return !1; const r = `${i.paths.workers}worker-v1.js`; try { const e = yield o.loadWorker(r, "VoiceFocusTestWorker", i, n); try { e.terminate() } catch (e) { null == n || n.debug("Failed to terminate worker.", e) } return !0 } catch (e) { return null == n || n.info("Failed to fetch and instantiate test worker", e), !1 } })), t.supportsWorker = (e = globalThis, t) => { try { return !!e.Worker } catch (e) { return null == t || t.info("Does not support Worker", e), !1 } }, t.supportsAudioWorklet = (e = globalThis, t) => { try { return !!e.AudioWorklet && !!e.AudioWorkletNode } catch (e) { return null == t || t.info("Does not support Audio Worklet", e), !1 } }, t.supportsWASM = (e = globalThis, t) => { try { return !(!e.WebAssembly || !e.WebAssembly.compile && !e.WebAssembly.compileStreaming) } catch (e) { return null == t || t.info("Does not support WASM", e), !1 } }, t.supportsSharedArrayBuffer = (e = globalThis, t = globalThis, i) => { try { return !(!e.SharedArrayBuffer || !t.chrome && !e.crossOriginIsolated) } catch (e) { return null == i || i.info("Does not support SharedArrayBuffer."), !1 } }, t.supportsWASMStreaming = (e = globalThis, t) => { var i; try { return !!(null === (i = e.WebAssembly) || void 0 === i ? void 0 : i.compileStreaming) } catch (e) { return null == t || t.info("Does not support WASM streaming compilation", e), !1 } }; const n = (e = globalThis) => { try { if (!e.chrome) return } catch (e) { } const t = e.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/); if (t) return parseInt(t[1], 10) }; t.isOldChrome = (e = globalThis, t) => { const i = n(e); return !!i && i < 90 && (null == t || t.debug(`Chrome ${i} has incomplete SIMD support.`), !0) } }, 8991: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.VoiceFocusAudioWorkletNode = void 0; class i extends ("undefined" != typeof globalThis && globalThis.AudioWorkletNode || class { }) { } t.VoiceFocusAudioWorkletNode = i }, 9800: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }), t.getAudioInput = t.createAudioContext = t.VoiceFocus = void 0; const o = i(2880), n = i(3772), s = i(6889), a = i(2479), d = i(3342), l = i(27), c = i(3733), u = { useVoiceFocusAGC: !1, useBuiltInAGC: !0 }, h = "stable-v1", p = "https://static.sdkassets.chime.aws", m = { processors: `${p}/processors/`, workers: `${p}/workers/`, wasm: `${p}/wasm/`, models: `${p}/wasm/` }, f = { latencyHint: 0 }, g = { channelCount: 1, echoCancellation: !0, googEchoCancellation: !0, noiseSuppression: !1, googNoiseSuppression: !1, googHighpassFilter: !1, googTypingNoiseDetection: !1 }, b = Object.assign(Object.assign({}, g), { autoGainControl: !0, googAutoGainControl: !0, googAutoGainControl2: !0 }), v = Object.assign(Object.assign({}, g), { autoGainControl: !1, googAutoGainControl: !1, googAutoGainControl2: !1 }), y = { "voicefocus-worker-sab-processor": { file: "worklet-worker-sab-processor-v1.js", node: l.default }, "voicefocus-worker-postMessage-processor": { file: "worklet-worker-postMessage-processor-v1.js", node: c.default }, "voicefocus-inline-processor": { file: "worklet-inline-processor-v1.js", node: d.default } }, w = (e, t) => { if (void 0 !== e && !n.isValidAssetGroup(e)) throw new Error(`Invalid asset group ${e}`); if (void 0 !== t && !n.isValidRevisionID(t)) throw new Error(`Invalid revision ID ${t}`) }, S = (e, t) => `${t.models}${o.decideModel(e)}.wasm`; class x { constructor(e, t, i, r, o) { this.processorURL = t, this.nodeConstructor = i, this.nodeOptions = r, this.executionQuanta = o, this.internal = { worker: e, nodeOptions: r } } static isSupported(e, t) { const { fetchBehavior: i, logger: r } = t || {}; if ("undefined" == typeof globalThis) return null == r || r.debug("Browser does not have globalThis."), Promise.resolve(!1); if (!a.supportsAudioWorklet(globalThis, r)) return null == r || r.debug("Browser does not support Audio Worklet."), Promise.resolve(!1); if (!a.supportsWASM(globalThis, r)) return null == r || r.debug("Browser does not support WASM."), Promise.resolve(!1); a.supportsWASMStreaming(globalThis, r) || null == r || r.debug("Browser does not support streaming WASM compilation."); const { assetGroup: o = h, revisionID: s, paths: d = m } = e || {}; w(o, s); const l = s ? { revisionID: s } : { assetGroup: o }, c = n.addQueryParams(i, l), u = Object.assign(Object.assign({}, c), { paths: d }); return a.supportsVoiceFocusWorker(globalThis, u, r) } static mungeExecutionPreference(e, t) { const i = void 0 === e || "auto" === e; if (a.isSafari(globalThis)) { if (i || "inline" === e) return "inline"; if (!i) throw new Error(`Unsupported execution preference ${e}`) } if ("worker-sab" === e && !a.supportsSharedArrayBuffer(globalThis, globalThis, t)) throw new Error(`Unsupported execution preference ${e}`); return e || "auto" } static configure(e, t) { return r(this, void 0, void 0, (function* () { const { fetchBehavior: i, preResolve: r, logger: s } = t || {}, { category: a = "voicefocus", name: d = "default", variant: l = "auto", assetGroup: c = h, revisionID: u, simd: p = "detect", executionPreference: f = "auto", executionQuantaPreference: g, usagePreference: b = "interactivity", estimatorBudget: v = 100, paths: y = m, thresholds: x } = e || {}; if (null == s || s.debug("Configuring Voice Focus with spec", e), void 0 !== a && "voicefocus" !== a) throw new Error(`Unrecognized category ${a}`); if (void 0 !== d && "default" !== d && "ns_es" !== d) throw new Error(`Unrecognized feature name ${d}`); if (void 0 !== l && !["auto", "c100", "c50", "c20", "c10"].includes(l)) throw new Error(`Unrecognized feature variant ${l}`); if (void 0 !== g && ![1, 2, 3].includes(g)) throw new Error(`Unrecognized execution quanta preference ${g}`); if (w(c, u), void 0 !== p && !["detect", "force", "disable"].includes(p)) throw new Error(`Unrecognized SIMD option ${p}`); if (void 0 !== f && !["auto", "inline", "worker", "worker-sab", "worker-postMessage"].includes(f)) throw new Error(`Unrecognized execution preference ${f}`); if (void 0 !== b && !["quality", "interactivity"].includes(b)) throw new Error(`Unrecognized usage preference ${b}`); const k = { executionPreference: this.mungeExecutionPreference(f, s), usagePreference: b, executionQuantaPreference: g, variantPreference: l, namePreference: d, simdPreference: p, estimatorBudget: v }, _ = u ? { revisionID: u } : { assetGroup: c }, C = n.addQueryParams(i, _), I = Object.assign({ paths: y }, C), T = yield o.measureAndDecideExecutionApproach(k, I, s, x); if (!1 === T.supported) return { supported: !1, reason: T.reason }; null == s || s.info("Decided execution approach", T); const { useSIMD: E, processor: A, variant: M, executionQuanta: O } = T, P = { category: a || "voicefocus", name: d || "default", variant: M, simd: E }; if (r) { const e = S(P, y); P.url = yield n.resolveURL(e, C) } return { fetchConfig: I, model: P, processor: A, executionQuanta: O, supported: !0 } })) } static init(e, { delegate: t, preload: i = !0, logger: o }) { return r(this, void 0, void 0, (function* () { if (!1 === e.supported) throw new Error("Voice Focus not supported. Reason: " + e.reason); const { model: r, processor: n, fetchConfig: d, executionQuanta: l } = e, { simd: c, name: u } = r, { paths: h } = d; if ("voicefocus-inline-processor" !== n && "voicefocus-worker-postMessage-processor" !== n && "voicefocus-worker-sab-processor" !== n) throw new Error(`Unknown processor ${n}`); const p = r.url || S(r, h); null == o || o.debug(`Using model URL ${p}.`); const m = `${h.wasm}audio_buffer-v1${c ? "_simd" : ""}.wasm`, f = `${h.wasm}resampler-v1${c ? "_simd" : ""}.wasm`, g = `${h.workers}worker-v1.js`, { file: b, node: v } = y[n], w = `${h.processors}${b}`, k = yield s.loadWorker(g, "VoiceFocusWorker", d, o); if (i) { null == o || o.debug("Preloading", p); let e = a.supportsWASMPostMessage(globalThis) ? "get-module" : "get-module-buffer"; k.postMessage({ message: e, preload: !0, key: "model", fetchBehavior: d, path: p }) } const _ = new x(k, w, v, { processor: n, worker: k, audioBufferURL: m, resamplerURL: f, fetchBehavior: d, modelURL: p, delegate: t, logger: o, numberOfInputs: "ns_es" === u ? 2 : 1 }, l); return Promise.resolve(_) })) } createNode(e, t) { var i; const { voiceFocusSampleRate: r = (16e3 === e.sampleRate ? 16e3 : 48e3), enabled: o = !0, agc: s = u } = t || {}, a = null == t ? void 0 : t.es, d = { voiceFocusSampleRate: r, enabled: o, sendBufferCount: 10, prefill: 6, agc: s, executionQuanta: this.executionQuanta, supportFarendStream: a }, l = n.withQueryString(this.processorURL, null === (i = this.nodeOptions) || void 0 === i ? void 0 : i.fetchBehavior); return e.audioWorklet.addModule(l).then((() => new this.nodeConstructor(e, Object.assign(Object.assign({}, this.nodeOptions), { processorOptions: d })))) } applyToStream(e, t, i) { return r(this, void 0, void 0, (function* () { const r = t.createMediaStreamSource(e), o = yield this.applyToSourceNode(r, t, i), n = t.createMediaStreamDestination(); return o.connect(n), { node: o, source: r, destination: n, stream: n.stream } })) } applyToSourceNode(e, t, i) { return r(this, void 0, void 0, (function* () { const r = yield this.createNode(t, i); return e.connect(r), r })) } } t.VoiceFocus = x, t.createAudioContext = (e = f) => new (window.AudioContext || window.webkitAudioContext)(e), t.getAudioInput = (e, t, i) => r(void 0, void 0, void 0, (function* () { var r, o; const { constraints: n, spec: s, delegate: a, preload: d = !0, options: l } = t, { logger: c } = i, h = yield x.configure(s, i); if (!h.supported) return null === (r = i.logger) || void 0 === r || r.warn("Voice Focus not supported; returning standard stream."), window.navigator.mediaDevices.getUserMedia(n); const p = yield x.init(h, { delegate: a, preload: d, logger: c }), m = (null === (o = t.options) || void 0 === o ? void 0 : o.agc) || u, f = yield window.navigator.mediaDevices.getUserMedia(((e, t) => { let i; if (i = t.useBuiltInAGC ? b : v, !e) return { audio: i }; if (!e.audio) return e; if (e.video) throw new Error("Not adding Voice Focus to multi-device getUserMedia call."); return Object.assign(Object.assign({}, e), { audio: !0 === e.audio ? i : Object.assign(Object.assign({}, e.audio), i) }) })(n, m)); return p.applyToStream(f, e, l).then((e => e.stream)) })) }, 3342: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2479), n = i(8991); class s extends n.VoiceFocusAudioWorkletNode { constructor(e, t) { super(e, t.processor, t), this.cpuWarningCount = 0, this.channelCountMode = "explicit", this.channelCount = 1; const { modelURL: i, worker: r, fetchBehavior: n, logger: s, delegate: a } = t; this.logger = s, this.port.onmessage = this.onProcessorMessage.bind(this), this.delegate = a, s && s.debug("VoiceFocusInlineNode:", i), this.worker = r, this.worker.onmessage = this.onWorkerMessage.bind(this); const d = o.supportsWASMPostMessage(globalThis) ? "get-module" : "get-module-buffer"; this.worker.postMessage({ message: d, key: "model", fetchBehavior: n, path: i }) } onModuleBufferLoaded(e, t) { this.port.postMessage({ message: "module-buffer", buffer: e, key: t }) } onModuleLoaded(e, t) { this.port.postMessage({ message: "module", module: e, key: t }) } enable() { return r(this, void 0, void 0, (function* () { this.port.postMessage({ message: "enable" }) })) } disable() { return r(this, void 0, void 0, (function* () { this.port.postMessage({ message: "disable" }) })) } stop() { var e; return r(this, void 0, void 0, (function* () { this.port.postMessage({ message: "stop" }); try { null === (e = this.worker) || void 0 === e || e.terminate() } catch (e) { console.error("failed to terminate worker:", e) } this.disconnect() })) } onProcessorMessage(e) { var t, i, r; const o = e.data; if ("cpu" === o.message) { this.cpuWarningCount++; const e = Date.now(), r = this.cpuWarningLastTriggered || e, n = Math.abs(e - r); (!this.cpuWarningLastTriggered || n > 5e3) && (null === (t = this.logger) || void 0 === t || t.warn(`CPU warning (count: ${this.cpuWarningCount}):`, o.message), this.cpuWarningCount = 0, this.cpuWarningLastTriggered = e), null === (i = this.delegate) || void 0 === i || i.onCPUWarning() } else null === (r = this.logger) || void 0 === r || r.debug("Ignoring processor message.") } onWorkerMessage(e) { const t = e.data; switch (t.message) { case "module-buffer": if (!t.buffer || !t.key) return; this.onModuleBufferLoaded(t.buffer, t.key); break; case "module": if (!t.module || !t.key) return; this.onModuleLoaded(t.module, t.key); break; case "stopped": this.worker && this.worker.terminate(); break; default: return } } } t.default = s }, 3733: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2479), n = i(8991); class s extends n.VoiceFocusAudioWorkletNode { constructor(e, t) { super(e, t.processor, t), this.channelCountMode = "explicit", this.channelCount = 1; const { modelURL: i, audioBufferURL: r, worker: n, fetchBehavior: s, delegate: a } = t; this.delegate = a, this.worker = n, this.worker.onmessage = this.onWorkerMessage.bind(this), this.port.onmessage = this.onProcessorMessage.bind(this); const { enabled: d, agc: l, supportFarendStream: c } = t.processorOptions; this.worker.postMessage({ message: "init", approach: "postMessage", frames: 16e3 === e.sampleRate ? 160 : 480, enabled: d, agc: l, fetchBehavior: s, model: i, supportFarendStream: c }); const u = o.supportsWASMPostMessage(globalThis) ? "get-module" : "get-module-buffer"; this.worker.postMessage({ message: u, key: "buffer", fetchBehavior: s, path: r }) } enable() { return r(this, void 0, void 0, (function* () { this.worker.postMessage({ message: "enable" }) })) } disable() { return r(this, void 0, void 0, (function* () { this.worker.postMessage({ message: "disable" }) })) } stop() { return r(this, void 0, void 0, (function* () { try { this.worker.postMessage({ message: "stop" }) } catch (e) { } this.disconnect() })) } onWorkerMessage(e) { var t; const i = e.data; switch (i.message) { case "ready": this.port.postMessage({ message: "ready", shared: i.shared }, i.shared ? Object.values(i.shared) : []); break; case "data": if (!i.buffer) return; this.port.postMessage({ message: "data", buffer: i.buffer }, [i.buffer]); break; case "stopped": this.worker.terminate(); break; case "module-buffer": case "module": case "processing": this.port.postMessage(i); break; case "cpu": null === (t = this.delegate) || void 0 === t || t.onCPUWarning(); break; default: return } } onProcessorMessage(e) { var t; const i = e.data; switch (i.message) { case "data": if (!i.buffer) return; this.worker.postMessage({ message: "data", buffer: i.buffer }, [i.buffer]); break; case "cpu": null === (t = this.delegate) || void 0 === t || t.onCPUWarning(); break; case "prepare-for-frames": this.worker.postMessage(i); break; default: return } } } t.default = s }, 27: function (e, t, i) { "use strict"; var r = this && this.__awaiter || function (e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) }; Object.defineProperty(t, "__esModule", { value: !0 }); const o = i(2479), n = i(8991); class s extends n.VoiceFocusAudioWorkletNode { constructor(e, t) { super(e, t.processor, t), this.channelCountMode = "explicit", this.channelCount = 1; const { modelURL: i, resamplerURL: r, worker: n, fetchBehavior: s, delegate: a } = t; this.delegate = a, this.worker = n, this.worker.onmessage = this.onWorkerMessage.bind(this), this.port.onmessage = this.onProcessorMessage.bind(this); const { enabled: d, supportFarendStream: l } = t.processorOptions; this.worker.postMessage({ message: "init", approach: "sab", frames: 16e3 === e.sampleRate ? 160 : 480, enabled: d, model: i, supportFarendStream: l }); const c = o.supportsWASMPostMessage(globalThis) ? "get-module" : "get-module-buffer"; this.worker.postMessage({ message: c, key: "resampler", fetchBehavior: s, path: r }) } enable() { return r(this, void 0, void 0, (function* () { this.state ? (Atomics.store(this.state, 1, 1), Atomics.notify(this.state, 0, 1)) : this.worker.postMessage({ message: "enable" }) })) } disable() { return r(this, void 0, void 0, (function* () { this.state ? (Atomics.store(this.state, 1, 0), Atomics.notify(this.state, 0, 1)) : this.worker.postMessage({ message: "disable" }) })) } stop() { return r(this, void 0, void 0, (function* () { if (this.state) Atomics.store(this.state, 1, 2), Atomics.notify(this.state, 0, 1); else try { this.worker.postMessage({ message: "stop" }) } catch (e) { } this.disconnect() })) } onWorkerMessage(e) { var t; const i = e.data; switch (i.message) { case "ready": if (!i.shared) throw new Error("No shared state."); this.state = new Int32Array(i.shared.state), this.port.postMessage(i); break; case "stopped": this.worker.terminate(); break; case "module-buffer": case "module": case "processing": this.port.postMessage(i); break; case "cpu": null === (t = this.delegate) || void 0 === t || t.onCPUWarning(); break; default: return } } onProcessorMessage(e) { var t; const i = e.data; switch (i.message) { case "cpu": null === (t = this.delegate) || void 0 === t || t.onCPUWarning(); break; case "prepare-for-frames": this.worker.postMessage(i) } } } t.default = s }, 4002: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.RawSha256 = void 0; var r = i(149), o = function () { function e() { this.state = Int32Array.from(r.INIT), this.temp = new Int32Array(64), this.buffer = new Uint8Array(64), this.bufferLength = 0, this.bytesHashed = 0, this.finished = !1 } return e.prototype.update = function (e) { if (this.finished) throw new Error("Attempted to update an already finished hash."); var t = 0, i = e.byteLength; if (this.bytesHashed += i, 8 * this.bytesHashed > r.MAX_HASHABLE_LENGTH) throw new Error("Cannot hash more than 2^53 - 1 bits"); for (; i > 0;)this.buffer[this.bufferLength++] = e[t++], i--, this.bufferLength === r.BLOCK_SIZE && (this.hashBuffer(), this.bufferLength = 0) }, e.prototype.digest = function () { if (!this.finished) { var e = 8 * this.bytesHashed, t = new DataView(this.buffer.buffer, this.buffer.byteOffset, this.buffer.byteLength), i = this.bufferLength; if (t.setUint8(this.bufferLength++, 128), i % r.BLOCK_SIZE >= r.BLOCK_SIZE - 8) { for (var o = this.bufferLength; o < r.BLOCK_SIZE; o++)t.setUint8(o, 0); this.hashBuffer(), this.bufferLength = 0 } for (o = this.bufferLength; o < r.BLOCK_SIZE - 8; o++)t.setUint8(o, 0); t.setUint32(r.BLOCK_SIZE - 8, Math.floor(e / 4294967296), !0), t.setUint32(r.BLOCK_SIZE - 4, e), this.hashBuffer(), this.finished = !0 } var n = new Uint8Array(r.DIGEST_LENGTH); for (o = 0; o < 8; o++)n[4 * o] = this.state[o] >>> 24 & 255, n[4 * o + 1] = this.state[o] >>> 16 & 255, n[4 * o + 2] = this.state[o] >>> 8 & 255, n[4 * o + 3] = this.state[o] >>> 0 & 255; return n }, e.prototype.hashBuffer = function () { for (var e = this.buffer, t = this.state, i = t[0], o = t[1], n = t[2], s = t[3], a = t[4], d = t[5], l = t[6], c = t[7], u = 0; u < r.BLOCK_SIZE; u++) { if (u < 16) this.temp[u] = (255 & e[4 * u]) << 24 | (255 & e[4 * u + 1]) << 16 | (255 & e[4 * u + 2]) << 8 | 255 & e[4 * u + 3]; else { var h = this.temp[u - 2], p = (h >>> 17 | h << 15) ^ (h >>> 19 | h << 13) ^ h >>> 10, m = ((h = this.temp[u - 15]) >>> 7 | h << 25) ^ (h >>> 18 | h << 14) ^ h >>> 3; this.temp[u] = (p + this.temp[u - 7] | 0) + (m + this.temp[u - 16] | 0) } var f = (((a >>> 6 | a << 26) ^ (a >>> 11 | a << 21) ^ (a >>> 25 | a << 7)) + (a & d ^ ~a & l) | 0) + (c + (r.KEY[u] + this.temp[u] | 0) | 0) | 0, g = ((i >>> 2 | i << 30) ^ (i >>> 13 | i << 19) ^ (i >>> 22 | i << 10)) + (i & o ^ i & n ^ o & n) | 0; c = l, l = d, d = a, a = s + f | 0, s = n, n = o, o = i, i = f + g | 0 } t[0] += i, t[1] += o, t[2] += n, t[3] += s, t[4] += a, t[5] += d, t[6] += l, t[7] += c }, e }(); t.RawSha256 = o }, 149: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.MAX_HASHABLE_LENGTH = t.INIT = t.KEY = t.DIGEST_LENGTH = t.BLOCK_SIZE = void 0, t.BLOCK_SIZE = 64, t.DIGEST_LENGTH = 32, t.KEY = new Uint32Array([1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298]), t.INIT = [1779033703, 3144134277, 1013904242, 2773480762, 1359893119, 2600822924, 528734635, 1541459225], t.MAX_HASHABLE_LENGTH = Math.pow(2, 53) - 1 }, 9387: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), (0, i(5163).__exportStar)(i(3572), t) }, 3572: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.Sha256 = void 0; var r = i(5163), o = i(149), n = i(4002), s = i(4959), a = function () { function e(e) { if (this.hash = new n.RawSha256, e) { this.outer = new n.RawSha256; var t = function (e) { var t = (0, s.convertToBuffer)(e); if (t.byteLength > o.BLOCK_SIZE) { var i = new n.RawSha256; i.update(t), t = i.digest() } var r = new Uint8Array(o.BLOCK_SIZE); return r.set(t), r }(e), i = new Uint8Array(o.BLOCK_SIZE); i.set(t); for (var r = 0; r < o.BLOCK_SIZE; r++)t[r] ^= 54, i[r] ^= 92; for (this.hash.update(t), this.outer.update(i), r = 0; r < t.byteLength; r++)t[r] = 0 } } return e.prototype.update = function (e) { if (!(0, s.isEmptyData)(e) && !this.error) try { this.hash.update((0, s.convertToBuffer)(e)) } catch (e) { this.error = e } }, e.prototype.digestSync = function () { if (this.error) throw this.error; return this.outer ? (this.outer.finished || this.outer.update(this.hash.digest()), this.outer.digest()) : this.hash.digest() }, e.prototype.digest = function () { return (0, r.__awaiter)(this, void 0, void 0, (function () { return (0, r.__generator)(this, (function (e) { return [2, this.digestSync()] })) })) }, e }(); t.Sha256 = a }, 3376: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.convertToBuffer = void 0; var r = i(6778), o = "undefined" != typeof Buffer && Buffer.from ? function (e) { return Buffer.from(e, "utf8") } : r.fromUtf8; t.convertToBuffer = function (e) { return e instanceof Uint8Array ? e : "string" == typeof e ? o(e) : ArrayBuffer.isView(e) ? new Uint8Array(e.buffer, e.byteOffset, e.byteLength / Uint8Array.BYTES_PER_ELEMENT) : new Uint8Array(e) } }, 4959: (e, t, i) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.uint32ArrayFrom = t.numToUint8 = t.isEmptyData = t.convertToBuffer = void 0; var r = i(3376); Object.defineProperty(t, "convertToBuffer", { enumerable: !0, get: function () { return r.convertToBuffer } }); var o = i(1205); Object.defineProperty(t, "isEmptyData", { enumerable: !0, get: function () { return o.isEmptyData } }); var n = i(1443); Object.defineProperty(t, "numToUint8", { enumerable: !0, get: function () { return n.numToUint8 } }); var s = i(1650); Object.defineProperty(t, "uint32ArrayFrom", { enumerable: !0, get: function () { return s.uint32ArrayFrom } }) }, 1205: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.isEmptyData = void 0, t.isEmptyData = function (e) { return "string" == typeof e ? 0 === e.length : 0 === e.byteLength } }, 1443: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.numToUint8 = void 0, t.numToUint8 = function (e) { return new Uint8Array([(4278190080 & e) >> 24, (16711680 & e) >> 16, (65280 & e) >> 8, 255 & e]) } }, 1650: (e, t) => { "use strict"; Object.defineProperty(t, "__esModule", { value: !0 }), t.uint32ArrayFrom = void 0, t.uint32ArrayFrom = function (e) { if (!Uint32Array.from) { for (var t = new Uint32Array(e.length), i = 0; i < e.length;)t[i] = e[i], i += 1; return t } return Uint32Array.from(e) } }, 6145: (e, t, i) => { "use strict"; i.r(t), i.d(t, { fromHex: () => a, toHex: () => d }); for (var r = {}, o = {}, n = 0; n < 256; n++) { var s = n.toString(16).toLowerCase(); 1 === s.length && (s = "0".concat(s)), r[n] = s, o[s] = n } function a(e) { if (e.length % 2 != 0) throw new Error("Hex encoded strings must have an even number length"); for (var t = new Uint8Array(e.length / 2), i = 0; i < e.length; i += 2) { var r = e.slice(i, i + 2).toLowerCase(); if (!(r in o)) throw new Error("Cannot decode unrecognized sequence ".concat(r, " as hexadecimal")); t[i / 2] = o[r] } return t } function d(e) { for (var t = "", i = 0; i < e.byteLength; i++)t += r[e[i]]; return t } }, 6778: (e, t, i) => { "use strict"; i.r(t), i.d(t, { fromUtf8: () => r, toUtf8: () => o }); var r = function (e) { return "function" == typeof TextEncoder ? function (e) { return (new TextEncoder).encode(e) }(e) : function (e) { for (var t = [], i = 0, r = e.length; i < r; i++) { var o = e.charCodeAt(i); if (o < 128) t.push(o); else if (o < 2048) t.push(o >> 6 | 192, 63 & o | 128); else if (i + 1 < e.length && 55296 == (64512 & o) && 56320 == (64512 & e.charCodeAt(i + 1))) { var n = 65536 + ((1023 & o) << 10) + (1023 & e.charCodeAt(++i)); t.push(n >> 18 | 240, n >> 12 & 63 | 128, n >> 6 & 63 | 128, 63 & n | 128) } else t.push(o >> 12 | 224, o >> 6 & 63 | 128, 63 & o | 128) } return Uint8Array.from(t) }(e) }, o = function (e) { return "function" == typeof TextDecoder ? function (e) { return new TextDecoder("utf-8").decode(e) }(e) : function (e) { for (var t = "", i = 0, r = e.length; i < r; i++) { var o = e[i]; if (o < 128) t += String.fromCharCode(o); else if (192 <= o && o < 224) { var n = e[++i]; t += String.fromCharCode((31 & o) << 6 | 63 & n) } else if (240 <= o && o < 365) { var s = "%" + [o, e[++i], e[++i], e[++i]].map((function (e) { return e.toString(16) })).join("%"); t += decodeURIComponent(s) } else t += String.fromCharCode((15 & o) << 12 | (63 & e[++i]) << 6 | 63 & e[++i]) } return t }(e) } }, 6781: e => { "use strict"; e.exports = function (e, t) { for (var i = new Array(arguments.length - 1), r = 0, o = 2, n = !0; o < arguments.length;)i[r++] = arguments[o++]; return new Promise((function (o, s) { i[r] = function (e) { if (n) if (n = !1, e) s(e); else { for (var t = new Array(arguments.length - 1), i = 0; i < t.length;)t[i++] = arguments[i]; o.apply(null, t) } }; try { e.apply(t || null, i) } catch (e) { n && (n = !1, s(e)) } })) } }, 7026: (e, t) => { "use strict"; var i = t; i.length = function (e) { var t = e.length; if (!t) return 0; for (var i = 0; --t % 4 > 1 && "=" === e.charAt(t);)++i; return Math.ceil(3 * e.length) / 4 - i }; for (var r = new Array(64), o = new Array(123), n = 0; n < 64;)o[r[n] = n < 26 ? n + 65 : n < 52 ? n + 71 : n < 62 ? n - 4 : n - 59 | 43] = n++; i.encode = function (e, t, i) { for (var o, n = null, s = [], a = 0, d = 0; t < i;) { var l = e[t++]; switch (d) { case 0: s[a++] = r[l >> 2], o = (3 & l) << 4, d = 1; break; case 1: s[a++] = r[o | l >> 4], o = (15 & l) << 2, d = 2; break; case 2: s[a++] = r[o | l >> 6], s[a++] = r[63 & l], d = 0 }a > 8191 && ((n || (n = [])).push(String.fromCharCode.apply(String, s)), a = 0) } return d && (s[a++] = r[o], s[a++] = 61, 1 === d && (s[a++] = 61)), n ? (a && n.push(String.fromCharCode.apply(String, s.slice(0, a))), n.join("")) : String.fromCharCode.apply(String, s.slice(0, a)) }; var s = "invalid encoding"; i.decode = function (e, t, i) { for (var r, n = i, a = 0, d = 0; d < e.length;) { var l = e.charCodeAt(d++); if (61 === l && a > 1) break; if (void 0 === (l = o[l])) throw Error(s); switch (a) { case 0: r = l, a = 1; break; case 1: t[i++] = r << 2 | (48 & l) >> 4, r = l, a = 2; break; case 2: t[i++] = (15 & r) << 4 | (60 & l) >> 2, r = l, a = 3; break; case 3: t[i++] = (3 & r) << 6 | l, a = 0 } } if (1 === a) throw Error(s); return i - n }, i.test = function (e) { return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e) } }, 5570: e => { "use strict"; function t() { this._listeners = {} } e.exports = t, t.prototype.on = function (e, t, i) { return (this._listeners[e] || (this._listeners[e] = [])).push({ fn: t, ctx: i || this }), this }, t.prototype.off = function (e, t) { if (void 0 === e) this._listeners = {}; else if (void 0 === t) this._listeners[e] = []; else for (var i = this._listeners[e], r = 0; r < i.length;)i[r].fn === t ? i.splice(r, 1) : ++r; return this }, t.prototype.emit = function (e) { var t = this._listeners[e]; if (t) { for (var i = [], r = 1; r < arguments.length;)i.push(arguments[r++]); for (r = 0; r < t.length;)t[r].fn.apply(t[r++].ctx, i) } return this } }, 5298: e => { "use strict"; function t(e) { return "undefined" != typeof Float32Array ? function () { var t = new Float32Array([-0]), i = new Uint8Array(t.buffer), r = 128 === i[3]; function o(e, r, o) { t[0] = e, r[o] = i[0], r[o + 1] = i[1], r[o + 2] = i[2], r[o + 3] = i[3] } function n(e, r, o) { t[0] = e, r[o] = i[3], r[o + 1] = i[2], r[o + 2] = i[1], r[o + 3] = i[0] } function s(e, r) { return i[0] = e[r], i[1] = e[r + 1], i[2] = e[r + 2], i[3] = e[r + 3], t[0] } function a(e, r) { return i[3] = e[r], i[2] = e[r + 1], i[1] = e[r + 2], i[0] = e[r + 3], t[0] } e.writeFloatLE = r ? o : n, e.writeFloatBE = r ? n : o, e.readFloatLE = r ? s : a, e.readFloatBE = r ? a : s }() : function () { function t(e, t, i, r) { var o = t < 0 ? 1 : 0; if (o && (t = -t), 0 === t) e(1 / t > 0 ? 0 : 2147483648, i, r); else if (isNaN(t)) e(2143289344, i, r); else if (t > 34028234663852886e22) e((o << 31 | 2139095040) >>> 0, i, r); else if (t < 11754943508222875e-54) e((o << 31 | Math.round(t / 1401298464324817e-60)) >>> 0, i, r); else { var n = Math.floor(Math.log(t) / Math.LN2); e((o << 31 | n + 127 << 23 | 8388607 & Math.round(t * Math.pow(2, -n) * 8388608)) >>> 0, i, r) } } function s(e, t, i) { var r = e(t, i), o = 2 * (r >> 31) + 1, n = r >>> 23 & 255, s = 8388607 & r; return 255 === n ? s ? NaN : o * (1 / 0) : 0 === n ? 1401298464324817e-60 * o * s : o * Math.pow(2, n - 150) * (s + 8388608) } e.writeFloatLE = t.bind(null, i), e.writeFloatBE = t.bind(null, r), e.readFloatLE = s.bind(null, o), e.readFloatBE = s.bind(null, n) }(), "undefined" != typeof Float64Array ? function () { var t = new Float64Array([-0]), i = new Uint8Array(t.buffer), r = 128 === i[7]; function o(e, r, o) { t[0] = e, r[o] = i[0], r[o + 1] = i[1], r[o + 2] = i[2], r[o + 3] = i[3], r[o + 4] = i[4], r[o + 5] = i[5], r[o + 6] = i[6], r[o + 7] = i[7] } function n(e, r, o) { t[0] = e, r[o] = i[7], r[o + 1] = i[6], r[o + 2] = i[5], r[o + 3] = i[4], r[o + 4] = i[3], r[o + 5] = i[2], r[o + 6] = i[1], r[o + 7] = i[0] } function s(e, r) { return i[0] = e[r], i[1] = e[r + 1], i[2] = e[r + 2], i[3] = e[r + 3], i[4] = e[r + 4], i[5] = e[r + 5], i[6] = e[r + 6], i[7] = e[r + 7], t[0] } function a(e, r) { return i[7] = e[r], i[6] = e[r + 1], i[5] = e[r + 2], i[4] = e[r + 3], i[3] = e[r + 4], i[2] = e[r + 5], i[1] = e[r + 6], i[0] = e[r + 7], t[0] } e.writeDoubleLE = r ? o : n, e.writeDoubleBE = r ? n : o, e.readDoubleLE = r ? s : a, e.readDoubleBE = r ? a : s }() : function () { function t(e, t, i, r, o, n) { var s = r < 0 ? 1 : 0; if (s && (r = -r), 0 === r) e(0, o, n + t), e(1 / r > 0 ? 0 : 2147483648, o, n + i); else if (isNaN(r)) e(0, o, n + t), e(2146959360, o, n + i); else if (r > 17976931348623157e292) e(0, o, n + t), e((s << 31 | 2146435072) >>> 0, o, n + i); else { var a; if (r < 22250738585072014e-324) e((a = r / 5e-324) >>> 0, o, n + t), e((s << 31 | a / 4294967296) >>> 0, o, n + i); else { var d = Math.floor(Math.log(r) / Math.LN2); 1024 === d && (d = 1023), e(4503599627370496 * (a = r * Math.pow(2, -d)) >>> 0, o, n + t), e((s << 31 | d + 1023 << 20 | 1048576 * a & 1048575) >>> 0, o, n + i) } } } function s(e, t, i, r, o) { var n = e(r, o + t), s = e(r, o + i), a = 2 * (s >> 31) + 1, d = s >>> 20 & 2047, l = 4294967296 * (1048575 & s) + n; return 2047 === d ? l ? NaN : a * (1 / 0) : 0 === d ? 5e-324 * a * l : a * Math.pow(2, d - 1075) * (l + 4503599627370496) } e.writeDoubleLE = t.bind(null, i, 0, 4), e.writeDoubleBE = t.bind(null, r, 4, 0), e.readDoubleLE = s.bind(null, o, 0, 4), e.readDoubleBE = s.bind(null, n, 4, 0) }(), e } function i(e, t, i) { t[i] = 255 & e, t[i + 1] = e >>> 8 & 255, t[i + 2] = e >>> 16 & 255, t[i + 3] = e >>> 24 } function r(e, t, i) { t[i] = e >>> 24, t[i + 1] = e >>> 16 & 255, t[i + 2] = e >>> 8 & 255, t[i + 3] = 255 & e } function o(e, t) { return (e[t] | e[t + 1] << 8 | e[t + 2] << 16 | e[t + 3] << 24) >>> 0 } function n(e, t) { return (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0 } e.exports = t(t) }, 6116: module => { "use strict"; function inquire(moduleName) { try { var mod = eval("quire".replace(/^/, "re"))(moduleName); if (mod && (mod.length || Object.keys(mod).length)) return mod } catch (e) { } return null } module.exports = inquire }, 804: e => { "use strict"; e.exports = function (e, t, i) { var r = i || 8192, o = r >>> 1, n = null, s = r; return function (i) { if (i < 1 || i > o) return e(i); s + i > r && (n = e(r), s = 0); var a = t.call(n, s, s += i); return 7 & s && (s = 1 + (7 | s)), a } } }, 7958: (e, t) => { "use strict"; var i = t; i.length = function (e) { for (var t = 0, i = 0, r = 0; r < e.length; ++r)(i = e.charCodeAt(r)) < 128 ? t += 1 : i < 2048 ? t += 2 : 55296 == (64512 & i) && 56320 == (64512 & e.charCodeAt(r + 1)) ? (++r, t += 4) : t += 3; return t }, i.read = function (e, t, i) { if (i - t < 1) return ""; for (var r, o = null, n = [], s = 0; t < i;)(r = e[t++]) < 128 ? n[s++] = r : r > 191 && r < 224 ? n[s++] = (31 & r) << 6 | 63 & e[t++] : r > 239 && r < 365 ? (r = ((7 & r) << 18 | (63 & e[t++]) << 12 | (63 & e[t++]) << 6 | 63 & e[t++]) - 65536, n[s++] = 55296 + (r >> 10), n[s++] = 56320 + (1023 & r)) : n[s++] = (15 & r) << 12 | (63 & e[t++]) << 6 | 63 & e[t++], s > 8191 && ((o || (o = [])).push(String.fromCharCode.apply(String, n)), s = 0); return o ? (s && o.push(String.fromCharCode.apply(String, n.slice(0, s))), o.join("")) : String.fromCharCode.apply(String, n.slice(0, s)) }, i.write = function (e, t, i) { for (var r, o, n = i, s = 0; s < e.length; ++s)(r = e.charCodeAt(s)) < 128 ? t[i++] = r : r < 2048 ? (t[i++] = r >> 6 | 192, t[i++] = 63 & r | 128) : 55296 == (64512 & r) && 56320 == (64512 & (o = e.charCodeAt(s + 1))) ? (r = 65536 + ((1023 & r) << 10) + (1023 & o), ++s, t[i++] = r >> 18 | 240, t[i++] = r >> 12 & 63 | 128, t[i++] = r >> 6 & 63 | 128, t[i++] = 63 & r | 128) : (t[i++] = r >> 12 | 224, t[i++] = r >> 6 & 63 | 128, t[i++] = 63 & r | 128); return i - n } }, 4924: (e, t, i) => { "use strict"; i.r(t), i.d(t, { BotInfo: () => a, BrowserInfo: () => o, NodeInfo: () => n, ReactNativeInfo: () => d, SearchBotDeviceInfo: () => s, browserName: () => m, detect: () => h, detectOS: () => g, getNodeVersion: () => b, parseUserAgent: () => f }); var r = function (e, t, i) { if (i || 2 === arguments.length) for (var r, o = 0, n = t.length; o < n; o++)!r && o in t || (r || (r = Array.prototype.slice.call(t, 0, o)), r[o] = t[o]); return e.concat(r || Array.prototype.slice.call(t)) }, o = function (e, t, i) { this.name = e, this.version = t, this.os = i, this.type = "browser" }, n = function (e) { this.version = e, this.type = "node", this.name = "node", this.os = process.platform }, s = function (e, t, i, r) { this.name = e, this.version = t, this.os = i, this.bot = r, this.type = "bot-device" }, a = function () { this.type = "bot", this.bot = !0, this.name = "bot", this.version = null, this.os = null }, d = function () { this.type = "react-native", this.name = "react-native", this.version = null, this.os = null }, l = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/, c = [["aol", /AOLShield\/([0-9\._]+)/], ["edge", /Edge\/([0-9\._]+)/], ["edge-ios", /EdgiOS\/([0-9\._]+)/], ["yandexbrowser", /YaBrowser\/([0-9\._]+)/], ["kakaotalk", /KAKAOTALK\s([0-9\.]+)/], ["samsung", /SamsungBrowser\/([0-9\.]+)/], ["silk", /\bSilk\/([0-9._-]+)\b/], ["miui", /MiuiBrowser\/([0-9\.]+)$/], ["beaker", /BeakerBrowser\/([0-9\.]+)/], ["edge-chromium", /EdgA?\/([0-9\.]+)/], ["chromium-webview", /(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/], ["chrome", /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/], ["phantomjs", /PhantomJS\/([0-9\.]+)(:?\s|$)/], ["crios", /CriOS\/([0-9\.]+)(:?\s|$)/], ["firefox", /Firefox\/([0-9\.]+)(?:\s|$)/], ["fxios", /FxiOS\/([0-9\.]+)/], ["opera-mini", /Opera Mini.*Version\/([0-9\.]+)/], ["opera", /Opera\/([0-9\.]+)(?:\s|$)/], ["opera", /OPR\/([0-9\.]+)(:?\s|$)/], ["pie", /^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/], ["pie", /^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/], ["netfront", /^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/], ["ie", /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/], ["ie", /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/], ["ie", /MSIE\s(7\.0)/], ["bb10", /BB10;\sTouch.*Version\/([0-9\.]+)/], ["android", /Android\s([0-9\.]+)/], ["ios", /Version\/([0-9\._]+).*Mobile.*Safari.*/], ["safari", /Version\/([0-9\._]+).*Safari/], ["facebook", /FB[AS]V\/([0-9\.]+)/], ["instagram", /Instagram\s([0-9\.]+)/], ["ios-webview", /AppleWebKit\/([0-9\.]+).*Mobile/], ["ios-webview", /AppleWebKit\/([0-9\.]+).*Gecko\)$/], ["curl", /^curl\/([0-9\.]+)$/], ["searchbot", /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]], u = [["iOS", /iP(hone|od|ad)/], ["Android OS", /Android/], ["BlackBerry OS", /BlackBerry|BB10/], ["Windows Mobile", /IEMobile/], ["Amazon OS", /Kindle/], ["Windows 3.11", /Win16/], ["Windows 95", /(Windows 95)|(Win95)|(Windows_95)/], ["Windows 98", /(Windows 98)|(Win98)/], ["Windows 2000", /(Windows NT 5.0)|(Windows 2000)/], ["Windows XP", /(Windows NT 5.1)|(Windows XP)/], ["Windows Server 2003", /(Windows NT 5.2)/], ["Windows Vista", /(Windows NT 6.0)/], ["Windows 7", /(Windows NT 6.1)/], ["Windows 8", /(Windows NT 6.2)/], ["Windows 8.1", /(Windows NT 6.3)/], ["Windows 10", /(Windows NT 10.0)/], ["Windows ME", /Windows ME/], ["Windows CE", /Windows CE|WinCE|Microsoft Pocket Internet Explorer/], ["Open BSD", /OpenBSD/], ["Sun OS", /SunOS/], ["Chrome OS", /CrOS/], ["Linux", /(Linux)|(X11)/], ["Mac OS", /(Mac_PowerPC)|(Macintosh)/], ["QNX", /QNX/], ["BeOS", /BeOS/], ["OS/2", /OS\/2/]]; function h(e) { return e ? f(e) : "undefined" == typeof document && "undefined" != typeof navigator && "ReactNative" === navigator.product ? new d : "undefined" != typeof navigator ? f(navigator.userAgent) : b() } function p(e) { return "" !== e && c.reduce((function (t, i) { var r = i[0], o = i[1]; if (t) return t; var n = o.exec(e); return !!n && [r, n] }), !1) } function m(e) { var t = p(e); return t ? t[0] : null } function f(e) { var t = p(e); if (!t) return null; var i = t[0], n = t[1]; if ("searchbot" === i) return new a; var d = n[1] && n[1].split(".").join("_").split("_").slice(0, 3); d ? d.length < 3 && (d = r(r([], d, !0), function (e) { for (var t = [], i = 0; i < e; i++)t.push("0"); return t }(3 - d.length), !0)) : d = []; var c = d.join("."), u = g(e), h = l.exec(e); return h && h[1] ? new s(i, c, u, h[1]) : new o(i, c, u) } function g(e) { for (var t = 0, i = u.length; t < i; t++) { var r = u[t], o = r[0]; if (r[1].exec(e)) return o } return null } function b() { return "undefined" != typeof process && process.version ? new n(process.version.slice(1)) : null } }, 2845: (e, t, i) => { "use strict"; const { Deflate: r, deflate: o, deflateRaw: n, gzip: s } = i(9880), { Inflate: a, inflate: d, inflateRaw: l, ungzip: c } = i(1380), u = i(1271); e.exports.Deflate = r, e.exports.deflate = o, e.exports.deflateRaw = n, e.exports.gzip = s, e.exports.Inflate = a, e.exports.inflate = d, e.exports.inflateRaw = l, e.exports.ungzip = c, e.exports.constants = u }, 9880: (e, t, i) => { "use strict"; const r = i(5789), o = i(9761), n = i(7944), s = i(2950), a = i(878), d = Object.prototype.toString, { Z_NO_FLUSH: l, Z_SYNC_FLUSH: c, Z_FULL_FLUSH: u, Z_FINISH: h, Z_OK: p, Z_STREAM_END: m, Z_DEFAULT_COMPRESSION: f, Z_DEFAULT_STRATEGY: g, Z_DEFLATED: b } = i(1271); function v(e) { this.options = o.assign({ level: f, method: b, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: g }, e || {}); let t = this.options; t.raw && t.windowBits > 0 ? t.windowBits = -t.windowBits : t.gzip && t.windowBits > 0 && t.windowBits < 16 && (t.windowBits += 16), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new a, this.strm.avail_out = 0; let i = r.deflateInit2(this.strm, t.level, t.method, t.windowBits, t.memLevel, t.strategy); if (i !== p) throw new Error(s[i]); if (t.header && r.deflateSetHeader(this.strm, t.header), t.dictionary) { let e; if (e = "string" == typeof t.dictionary ? n.string2buf(t.dictionary) : "[object ArrayBuffer]" === d.call(t.dictionary) ? new Uint8Array(t.dictionary) : t.dictionary, i = r.deflateSetDictionary(this.strm, e), i !== p) throw new Error(s[i]); this._dict_set = !0 } } function y(e, t) { const i = new v(t); if (i.push(e, !0), i.err) throw i.msg || s[i.err]; return i.result } v.prototype.push = function (e, t) { const i = this.strm, o = this.options.chunkSize; let s, a; if (this.ended) return !1; for (a = t === ~~t ? t : !0 === t ? h : l, "string" == typeof e ? i.input = n.string2buf(e) : "[object ArrayBuffer]" === d.call(e) ? i.input = new Uint8Array(e) : i.input = e, i.next_in = 0, i.avail_in = i.input.length; ;)if (0 === i.avail_out && (i.output = new Uint8Array(o), i.next_out = 0, i.avail_out = o), (a === c || a === u) && i.avail_out <= 6) this.onData(i.output.subarray(0, i.next_out)), i.avail_out = 0; else { if (s = r.deflate(i, a), s === m) return i.next_out > 0 && this.onData(i.output.subarray(0, i.next_out)), s = r.deflateEnd(this.strm), this.onEnd(s), this.ended = !0, s === p; if (0 !== i.avail_out) { if (a > 0 && i.next_out > 0) this.onData(i.output.subarray(0, i.next_out)), i.avail_out = 0; else if (0 === i.avail_in) break } else this.onData(i.output) } return !0 }, v.prototype.onData = function (e) { this.chunks.push(e) }, v.prototype.onEnd = function (e) { e === p && (this.result = o.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg }, e.exports.Deflate = v, e.exports.deflate = y, e.exports.deflateRaw = function (e, t) { return (t = t || {}).raw = !0, y(e, t) }, e.exports.gzip = function (e, t) { return (t = t || {}).gzip = !0, y(e, t) }, e.exports.constants = i(1271) }, 1380: (e, t, i) => { "use strict"; const r = i(5020), o = i(9761), n = i(7944), s = i(2950), a = i(878), d = i(7357), l = Object.prototype.toString, { Z_NO_FLUSH: c, Z_FINISH: u, Z_OK: h, Z_STREAM_END: p, Z_NEED_DICT: m, Z_STREAM_ERROR: f, Z_DATA_ERROR: g, Z_MEM_ERROR: b } = i(1271); function v(e) { this.options = o.assign({ chunkSize: 65536, windowBits: 15, to: "" }, e || {}); const t = this.options; t.raw && t.windowBits >= 0 && t.windowBits < 16 && (t.windowBits = -t.windowBits, 0 === t.windowBits && (t.windowBits = -15)), !(t.windowBits >= 0 && t.windowBits < 16) || e && e.windowBits || (t.windowBits += 32), t.windowBits > 15 && t.windowBits < 48 && 0 == (15 & t.windowBits) && (t.windowBits |= 15), this.err = 0, this.msg = "", this.ended = !1, this.chunks = [], this.strm = new a, this.strm.avail_out = 0; let i = r.inflateInit2(this.strm, t.windowBits); if (i !== h) throw new Error(s[i]); if (this.header = new d, r.inflateGetHeader(this.strm, this.header), t.dictionary && ("string" == typeof t.dictionary ? t.dictionary = n.string2buf(t.dictionary) : "[object ArrayBuffer]" === l.call(t.dictionary) && (t.dictionary = new Uint8Array(t.dictionary)), t.raw && (i = r.inflateSetDictionary(this.strm, t.dictionary), i !== h))) throw new Error(s[i]) } function y(e, t) { const i = new v(t); if (i.push(e), i.err) throw i.msg || s[i.err]; return i.result } v.prototype.push = function (e, t) { const i = this.strm, o = this.options.chunkSize, s = this.options.dictionary; let a, d, v; if (this.ended) return !1; for (d = t === ~~t ? t : !0 === t ? u : c, "[object ArrayBuffer]" === l.call(e) ? i.input = new Uint8Array(e) : i.input = e, i.next_in = 0, i.avail_in = i.input.length; ;) { for (0 === i.avail_out && (i.output = new Uint8Array(o), i.next_out = 0, i.avail_out = o), a = r.inflate(i, d), a === m && s && (a = r.inflateSetDictionary(i, s), a === h ? a = r.inflate(i, d) : a === g && (a = m)); i.avail_in > 0 && a === p && i.state.wrap > 0 && 0 !== e[i.next_in];)r.inflateReset(i), a = r.inflate(i, d); switch (a) { case f: case g: case m: case b: return this.onEnd(a), this.ended = !0, !1 }if (v = i.avail_out, i.next_out && (0 === i.avail_out || a === p)) if ("string" === this.options.to) { let e = n.utf8border(i.output, i.next_out), t = i.next_out - e, r = n.buf2string(i.output, e); i.next_out = t, i.avail_out = o - t, t && i.output.set(i.output.subarray(e, e + t), 0), this.onData(r) } else this.onData(i.output.length === i.next_out ? i.output : i.output.subarray(0, i.next_out)); if (a !== h || 0 !== v) { if (a === p) return a = r.inflateEnd(this.strm), this.onEnd(a), this.ended = !0, !0; if (0 === i.avail_in) break } } return !0 }, v.prototype.onData = function (e) { this.chunks.push(e) }, v.prototype.onEnd = function (e) { e === h && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = o.flattenChunks(this.chunks)), this.chunks = [], this.err = e, this.msg = this.strm.msg }, e.exports.Inflate = v, e.exports.inflate = y, e.exports.inflateRaw = function (e, t) { return (t = t || {}).raw = !0, y(e, t) }, e.exports.ungzip = y, e.exports.constants = i(1271) }, 9761: e => { "use strict"; const t = (e, t) => Object.prototype.hasOwnProperty.call(e, t); e.exports.assign = function (e) { const i = Array.prototype.slice.call(arguments, 1); for (; i.length;) { const r = i.shift(); if (r) { if ("object" != typeof r) throw new TypeError(r + "must be non-object"); for (const i in r) t(r, i) && (e[i] = r[i]) } } return e }, e.exports.flattenChunks = e => { let t = 0; for (let i = 0, r = e.length; i < r; i++)t += e[i].length; const i = new Uint8Array(t); for (let t = 0, r = 0, o = e.length; t < o; t++) { let o = e[t]; i.set(o, r), r += o.length } return i } }, 7944: e => { "use strict"; let t = !0; try { String.fromCharCode.apply(null, new Uint8Array(1)) } catch (e) { t = !1 } const i = new Uint8Array(256); for (let e = 0; e < 256; e++)i[e] = e >= 252 ? 6 : e >= 248 ? 5 : e >= 240 ? 4 : e >= 224 ? 3 : e >= 192 ? 2 : 1; i[254] = i[254] = 1, e.exports.string2buf = e => { if ("function" == typeof TextEncoder && TextEncoder.prototype.encode) return (new TextEncoder).encode(e); let t, i, r, o, n, s = e.length, a = 0; for (o = 0; o < s; o++)i = e.charCodeAt(o), 55296 == (64512 & i) && o + 1 < s && (r = e.charCodeAt(o + 1), 56320 == (64512 & r) && (i = 65536 + (i - 55296 << 10) + (r - 56320), o++)), a += i < 128 ? 1 : i < 2048 ? 2 : i < 65536 ? 3 : 4; for (t = new Uint8Array(a), n = 0, o = 0; n < a; o++)i = e.charCodeAt(o), 55296 == (64512 & i) && o + 1 < s && (r = e.charCodeAt(o + 1), 56320 == (64512 & r) && (i = 65536 + (i - 55296 << 10) + (r - 56320), o++)), i < 128 ? t[n++] = i : i < 2048 ? (t[n++] = 192 | i >>> 6, t[n++] = 128 | 63 & i) : i < 65536 ? (t[n++] = 224 | i >>> 12, t[n++] = 128 | i >>> 6 & 63, t[n++] = 128 | 63 & i) : (t[n++] = 240 | i >>> 18, t[n++] = 128 | i >>> 12 & 63, t[n++] = 128 | i >>> 6 & 63, t[n++] = 128 | 63 & i); return t }, e.exports.buf2string = (e, r) => { const o = r || e.length; if ("function" == typeof TextDecoder && TextDecoder.prototype.decode) return (new TextDecoder).decode(e.subarray(0, r)); let n, s; const a = new Array(2 * o); for (s = 0, n = 0; n < o;) { let t = e[n++]; if (t < 128) { a[s++] = t; continue } let r = i[t]; if (r > 4) a[s++] = 65533, n += r - 1; else { for (t &= 2 === r ? 31 : 3 === r ? 15 : 7; r > 1 && n < o;)t = t << 6 | 63 & e[n++], r--; r > 1 ? a[s++] = 65533 : t < 65536 ? a[s++] = t : (t -= 65536, a[s++] = 55296 | t >> 10 & 1023, a[s++] = 56320 | 1023 & t) } } return ((e, i) => { if (i < 65534 && e.subarray && t) return String.fromCharCode.apply(null, e.length === i ? e : e.subarray(0, i)); let r = ""; for (let t = 0; t < i; t++)r += String.fromCharCode(e[t]); return r })(a, s) }, e.exports.utf8border = (e, t) => { (t = t || e.length) > e.length && (t = e.length); let r = t - 1; for (; r >= 0 && 128 == (192 & e[r]);)r--; return r < 0 || 0 === r ? t : r + i[e[r]] > t ? r : t } }, 5562: e => { "use strict"; e.exports = (e, t, i, r) => { let o = 65535 & e | 0, n = e >>> 16 & 65535 | 0, s = 0; for (; 0 !== i;) { s = i > 2e3 ? 2e3 : i, i -= s; do { o = o + t[r++] | 0, n = n + o | 0 } while (--s); o %= 65521, n %= 65521 } return o | n << 16 | 0 } }, 1271: e => { "use strict"; e.exports = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_MEM_ERROR: -4, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 } }, 4299: e => { "use strict"; const t = new Uint32Array((() => { let e, t = []; for (var i = 0; i < 256; i++) { e = i; for (var r = 0; r < 8; r++)e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1; t[i] = e } return t })()); e.exports = (e, i, r, o) => { const n = t, s = o + r; e ^= -1; for (let t = o; t < s; t++)e = e >>> 8 ^ n[255 & (e ^ i[t])]; return -1 ^ e } }, 5789: (e, t, i) => { "use strict"; const { _tr_init: r, _tr_stored_block: o, _tr_flush_block: n, _tr_tally: s, _tr_align: a } = i(9564), d = i(5562), l = i(4299), c = i(2950), { Z_NO_FLUSH: u, Z_PARTIAL_FLUSH: h, Z_FULL_FLUSH: p, Z_FINISH: m, Z_BLOCK: f, Z_OK: g, Z_STREAM_END: b, Z_STREAM_ERROR: v, Z_DATA_ERROR: y, Z_BUF_ERROR: w, Z_DEFAULT_COMPRESSION: S, Z_FILTERED: x, Z_HUFFMAN_ONLY: k, Z_RLE: _, Z_FIXED: C, Z_DEFAULT_STRATEGY: I, Z_UNKNOWN: T, Z_DEFLATED: E } = i(1271), A = 258, M = 262, O = 103, P = 113, D = 666, R = (e, t) => (e.msg = c[t], t), L = e => (e << 1) - (e > 4 ? 9 : 0), B = e => { let t = e.length; for (; --t >= 0;)e[t] = 0 }; let V = (e, t, i) => (t << e.hash_shift ^ i) & e.hash_mask; const F = e => { const t = e.state; let i = t.pending; i > e.avail_out && (i = e.avail_out), 0 !== i && (e.output.set(t.pending_buf.subarray(t.pending_out, t.pending_out + i), e.next_out), e.next_out += i, t.pending_out += i, e.total_out += i, e.avail_out -= i, t.pending -= i, 0 === t.pending && (t.pending_out = 0)) }, N = (e, t) => { n(e, e.block_start >= 0 ? e.block_start : -1, e.strstart - e.block_start, t), e.block_start = e.strstart, F(e.strm) }, j = (e, t) => { e.pending_buf[e.pending++] = t }, U = (e, t) => { e.pending_buf[e.pending++] = t >>> 8 & 255, e.pending_buf[e.pending++] = 255 & t }, z = (e, t, i, r) => { let o = e.avail_in; return o > r && (o = r), 0 === o ? 0 : (e.avail_in -= o, t.set(e.input.subarray(e.next_in, e.next_in + o), i), 1 === e.state.wrap ? e.adler = d(e.adler, t, o, i) : 2 === e.state.wrap && (e.adler = l(e.adler, t, o, i)), e.next_in += o, e.total_in += o, o) }, $ = (e, t) => { let i, r, o = e.max_chain_length, n = e.strstart, s = e.prev_length, a = e.nice_match; const d = e.strstart > e.w_size - M ? e.strstart - (e.w_size - M) : 0, l = e.window, c = e.w_mask, u = e.prev, h = e.strstart + A; let p = l[n + s - 1], m = l[n + s]; e.prev_length >= e.good_match && (o >>= 2), a > e.lookahead && (a = e.lookahead); do { if (i = t, l[i + s] === m && l[i + s - 1] === p && l[i] === l[n] && l[++i] === l[n + 1]) { n += 2, i++; do { } while (l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && l[++n] === l[++i] && n < h); if (r = A - (h - n), n = h - A, r > s) { if (e.match_start = t, s = r, r >= a) break; p = l[n + s - 1], m = l[n + s] } } } while ((t = u[t & c]) > d && 0 != --o); return s <= e.lookahead ? s : e.lookahead }, H = e => { const t = e.w_size; let i, r, o, n, s; do { if (n = e.window_size - e.lookahead - e.strstart, e.strstart >= t + (t - M)) { e.window.set(e.window.subarray(t, t + t), 0), e.match_start -= t, e.strstart -= t, e.block_start -= t, r = e.hash_size, i = r; do { o = e.head[--i], e.head[i] = o >= t ? o - t : 0 } while (--r); r = t, i = r; do { o = e.prev[--i], e.prev[i] = o >= t ? o - t : 0 } while (--r); n += t } if (0 === e.strm.avail_in) break; if (r = z(e.strm, e.window, e.strstart + e.lookahead, n), e.lookahead += r, e.lookahead + e.insert >= 3) for (s = e.strstart - e.insert, e.ins_h = e.window[s], e.ins_h = V(e, e.ins_h, e.window[s + 1]); e.insert && (e.ins_h = V(e, e.ins_h, e.window[s + 3 - 1]), e.prev[s & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = s, s++, e.insert--, !(e.lookahead + e.insert < 3));); } while (e.lookahead < M && 0 !== e.strm.avail_in) }, W = (e, t) => { let i, r; for (; ;) { if (e.lookahead < M) { if (H(e), e.lookahead < M && t === u) return 1; if (0 === e.lookahead) break } if (i = 0, e.lookahead >= 3 && (e.ins_h = V(e, e.ins_h, e.window[e.strstart + 3 - 1]), i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), 0 !== i && e.strstart - i <= e.w_size - M && (e.match_length = $(e, i)), e.match_length >= 3) if (r = s(e, e.strstart - e.match_start, e.match_length - 3), e.lookahead -= e.match_length, e.match_length <= e.max_lazy_match && e.lookahead >= 3) { e.match_length--; do { e.strstart++, e.ins_h = V(e, e.ins_h, e.window[e.strstart + 3 - 1]), i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart } while (0 != --e.match_length); e.strstart++ } else e.strstart += e.match_length, e.match_length = 0, e.ins_h = e.window[e.strstart], e.ins_h = V(e, e.ins_h, e.window[e.strstart + 1]); else r = s(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++; if (r && (N(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = e.strstart < 2 ? e.strstart : 2, t === m ? (N(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (N(e, !1), 0 === e.strm.avail_out) ? 1 : 2 }, q = (e, t) => { let i, r, o; for (; ;) { if (e.lookahead < M) { if (H(e), e.lookahead < M && t === u) return 1; if (0 === e.lookahead) break } if (i = 0, e.lookahead >= 3 && (e.ins_h = V(e, e.ins_h, e.window[e.strstart + 3 - 1]), i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart), e.prev_length = e.match_length, e.prev_match = e.match_start, e.match_length = 2, 0 !== i && e.prev_length < e.max_lazy_match && e.strstart - i <= e.w_size - M && (e.match_length = $(e, i), e.match_length <= 5 && (e.strategy === x || 3 === e.match_length && e.strstart - e.match_start > 4096) && (e.match_length = 2)), e.prev_length >= 3 && e.match_length <= e.prev_length) { o = e.strstart + e.lookahead - 3, r = s(e, e.strstart - 1 - e.prev_match, e.prev_length - 3), e.lookahead -= e.prev_length - 1, e.prev_length -= 2; do { ++e.strstart <= o && (e.ins_h = V(e, e.ins_h, e.window[e.strstart + 3 - 1]), i = e.prev[e.strstart & e.w_mask] = e.head[e.ins_h], e.head[e.ins_h] = e.strstart) } while (0 != --e.prev_length); if (e.match_available = 0, e.match_length = 2, e.strstart++, r && (N(e, !1), 0 === e.strm.avail_out)) return 1 } else if (e.match_available) { if (r = s(e, 0, e.window[e.strstart - 1]), r && N(e, !1), e.strstart++, e.lookahead--, 0 === e.strm.avail_out) return 1 } else e.match_available = 1, e.strstart++, e.lookahead-- } return e.match_available && (r = s(e, 0, e.window[e.strstart - 1]), e.match_available = 0), e.insert = e.strstart < 2 ? e.strstart : 2, t === m ? (N(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (N(e, !1), 0 === e.strm.avail_out) ? 1 : 2 }; function K(e, t, i, r, o) { this.good_length = e, this.max_lazy = t, this.nice_length = i, this.max_chain = r, this.func = o } const G = [new K(0, 0, 0, 0, ((e, t) => { let i = 65535; for (i > e.pending_buf_size - 5 && (i = e.pending_buf_size - 5); ;) { if (e.lookahead <= 1) { if (H(e), 0 === e.lookahead && t === u) return 1; if (0 === e.lookahead) break } e.strstart += e.lookahead, e.lookahead = 0; const r = e.block_start + i; if ((0 === e.strstart || e.strstart >= r) && (e.lookahead = e.strstart - r, e.strstart = r, N(e, !1), 0 === e.strm.avail_out)) return 1; if (e.strstart - e.block_start >= e.w_size - M && (N(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = 0, t === m ? (N(e, !0), 0 === e.strm.avail_out ? 3 : 4) : (e.strstart > e.block_start && (N(e, !1), e.strm.avail_out), 1) })), new K(4, 4, 8, 4, W), new K(4, 5, 16, 8, W), new K(4, 6, 32, 32, W), new K(4, 4, 16, 16, q), new K(8, 16, 32, 32, q), new K(8, 16, 128, 128, q), new K(8, 32, 128, 256, q), new K(32, 128, 258, 1024, q), new K(32, 258, 258, 4096, q)]; function J() { this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = E, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(1146), this.dyn_dtree = new Uint16Array(122), this.bl_tree = new Uint16Array(78), B(this.dyn_ltree), B(this.dyn_dtree), B(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(16), this.heap = new Uint16Array(573), B(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(573), B(this.depth), this.l_buf = 0, this.lit_bufsize = 0, this.last_lit = 0, this.d_buf = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0 } const Z = e => { if (!e || !e.state) return R(e, v); e.total_in = e.total_out = 0, e.data_type = T; const t = e.state; return t.pending = 0, t.pending_out = 0, t.wrap < 0 && (t.wrap = -t.wrap), t.status = t.wrap ? 42 : P, e.adler = 2 === t.wrap ? 0 : 1, t.last_flush = u, r(t), g }, Q = e => { const t = Z(e); var i; return t === g && ((i = e.state).window_size = 2 * i.w_size, B(i.head), i.max_lazy_match = G[i.level].max_lazy, i.good_match = G[i.level].good_length, i.nice_match = G[i.level].nice_length, i.max_chain_length = G[i.level].max_chain, i.strstart = 0, i.block_start = 0, i.lookahead = 0, i.insert = 0, i.match_length = i.prev_length = 2, i.match_available = 0, i.ins_h = 0), t }, X = (e, t, i, r, o, n) => { if (!e) return v; let s = 1; if (t === S && (t = 6), r < 0 ? (s = 0, r = -r) : r > 15 && (s = 2, r -= 16), o < 1 || o > 9 || i !== E || r < 8 || r > 15 || t < 0 || t > 9 || n < 0 || n > C) return R(e, v); 8 === r && (r = 9); const a = new J; return e.state = a, a.strm = e, a.wrap = s, a.gzhead = null, a.w_bits = r, a.w_size = 1 << a.w_bits, a.w_mask = a.w_size - 1, a.hash_bits = o + 7, a.hash_size = 1 << a.hash_bits, a.hash_mask = a.hash_size - 1, a.hash_shift = ~~((a.hash_bits + 3 - 1) / 3), a.window = new Uint8Array(2 * a.w_size), a.head = new Uint16Array(a.hash_size), a.prev = new Uint16Array(a.w_size), a.lit_bufsize = 1 << o + 6, a.pending_buf_size = 4 * a.lit_bufsize, a.pending_buf = new Uint8Array(a.pending_buf_size), a.d_buf = 1 * a.lit_bufsize, a.l_buf = 3 * a.lit_bufsize, a.level = t, a.strategy = n, a.method = i, Q(e) }; e.exports.deflateInit = (e, t) => X(e, t, E, 15, 8, I), e.exports.deflateInit2 = X, e.exports.deflateReset = Q, e.exports.deflateResetKeep = Z, e.exports.deflateSetHeader = (e, t) => e && e.state ? 2 !== e.state.wrap ? v : (e.state.gzhead = t, g) : v, e.exports.deflate = (e, t) => { let i, r; if (!e || !e.state || t > f || t < 0) return e ? R(e, v) : v; const n = e.state; if (!e.output || !e.input && 0 !== e.avail_in || n.status === D && t !== m) return R(e, 0 === e.avail_out ? w : v); n.strm = e; const d = n.last_flush; if (n.last_flush = t, 42 === n.status) if (2 === n.wrap) e.adler = 0, j(n, 31), j(n, 139), j(n, 8), n.gzhead ? (j(n, (n.gzhead.text ? 1 : 0) + (n.gzhead.hcrc ? 2 : 0) + (n.gzhead.extra ? 4 : 0) + (n.gzhead.name ? 8 : 0) + (n.gzhead.comment ? 16 : 0)), j(n, 255 & n.gzhead.time), j(n, n.gzhead.time >> 8 & 255), j(n, n.gzhead.time >> 16 & 255), j(n, n.gzhead.time >> 24 & 255), j(n, 9 === n.level ? 2 : n.strategy >= k || n.level < 2 ? 4 : 0), j(n, 255 & n.gzhead.os), n.gzhead.extra && n.gzhead.extra.length && (j(n, 255 & n.gzhead.extra.length), j(n, n.gzhead.extra.length >> 8 & 255)), n.gzhead.hcrc && (e.adler = l(e.adler, n.pending_buf, n.pending, 0)), n.gzindex = 0, n.status = 69) : (j(n, 0), j(n, 0), j(n, 0), j(n, 0), j(n, 0), j(n, 9 === n.level ? 2 : n.strategy >= k || n.level < 2 ? 4 : 0), j(n, 3), n.status = P); else { let t = E + (n.w_bits - 8 << 4) << 8, i = -1; i = n.strategy >= k || n.level < 2 ? 0 : n.level < 6 ? 1 : 6 === n.level ? 2 : 3, t |= i << 6, 0 !== n.strstart && (t |= 32), t += 31 - t % 31, n.status = P, U(n, t), 0 !== n.strstart && (U(n, e.adler >>> 16), U(n, 65535 & e.adler)), e.adler = 1 } if (69 === n.status) if (n.gzhead.extra) { for (i = n.pending; n.gzindex < (65535 & n.gzhead.extra.length) && (n.pending !== n.pending_buf_size || (n.gzhead.hcrc && n.pending > i && (e.adler = l(e.adler, n.pending_buf, n.pending - i, i)), F(e), i = n.pending, n.pending !== n.pending_buf_size));)j(n, 255 & n.gzhead.extra[n.gzindex]), n.gzindex++; n.gzhead.hcrc && n.pending > i && (e.adler = l(e.adler, n.pending_buf, n.pending - i, i)), n.gzindex === n.gzhead.extra.length && (n.gzindex = 0, n.status = 73) } else n.status = 73; if (73 === n.status) if (n.gzhead.name) { i = n.pending; do { if (n.pending === n.pending_buf_size && (n.gzhead.hcrc && n.pending > i && (e.adler = l(e.adler, n.pending_buf, n.pending - i, i)), F(e), i = n.pending, n.pending === n.pending_buf_size)) { r = 1; break } r = n.gzindex < n.gzhead.name.length ? 255 & n.gzhead.name.charCodeAt(n.gzindex++) : 0, j(n, r) } while (0 !== r); n.gzhead.hcrc && n.pending > i && (e.adler = l(e.adler, n.pending_buf, n.pending - i, i)), 0 === r && (n.gzindex = 0, n.status = 91) } else n.status = 91; if (91 === n.status) if (n.gzhead.comment) { i = n.pending; do { if (n.pending === n.pending_buf_size && (n.gzhead.hcrc && n.pending > i && (e.adler = l(e.adler, n.pending_buf, n.pending - i, i)), F(e), i = n.pending, n.pending === n.pending_buf_size)) { r = 1; break } r = n.gzindex < n.gzhead.comment.length ? 255 & n.gzhead.comment.charCodeAt(n.gzindex++) : 0, j(n, r) } while (0 !== r); n.gzhead.hcrc && n.pending > i && (e.adler = l(e.adler, n.pending_buf, n.pending - i, i)), 0 === r && (n.status = O) } else n.status = O; if (n.status === O && (n.gzhead.hcrc ? (n.pending + 2 > n.pending_buf_size && F(e), n.pending + 2 <= n.pending_buf_size && (j(n, 255 & e.adler), j(n, e.adler >> 8 & 255), e.adler = 0, n.status = P)) : n.status = P), 0 !== n.pending) { if (F(e), 0 === e.avail_out) return n.last_flush = -1, g } else if (0 === e.avail_in && L(t) <= L(d) && t !== m) return R(e, w); if (n.status === D && 0 !== e.avail_in) return R(e, w); if (0 !== e.avail_in || 0 !== n.lookahead || t !== u && n.status !== D) { let i = n.strategy === k ? ((e, t) => { let i; for (; ;) { if (0 === e.lookahead && (H(e), 0 === e.lookahead)) { if (t === u) return 1; break } if (e.match_length = 0, i = s(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++, i && (N(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = 0, t === m ? (N(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (N(e, !1), 0 === e.strm.avail_out) ? 1 : 2 })(n, t) : n.strategy === _ ? ((e, t) => { let i, r, o, n; const a = e.window; for (; ;) { if (e.lookahead <= A) { if (H(e), e.lookahead <= A && t === u) return 1; if (0 === e.lookahead) break } if (e.match_length = 0, e.lookahead >= 3 && e.strstart > 0 && (o = e.strstart - 1, r = a[o], r === a[++o] && r === a[++o] && r === a[++o])) { n = e.strstart + A; do { } while (r === a[++o] && r === a[++o] && r === a[++o] && r === a[++o] && r === a[++o] && r === a[++o] && r === a[++o] && r === a[++o] && o < n); e.match_length = A - (n - o), e.match_length > e.lookahead && (e.match_length = e.lookahead) } if (e.match_length >= 3 ? (i = s(e, 1, e.match_length - 3), e.lookahead -= e.match_length, e.strstart += e.match_length, e.match_length = 0) : (i = s(e, 0, e.window[e.strstart]), e.lookahead--, e.strstart++), i && (N(e, !1), 0 === e.strm.avail_out)) return 1 } return e.insert = 0, t === m ? (N(e, !0), 0 === e.strm.avail_out ? 3 : 4) : e.last_lit && (N(e, !1), 0 === e.strm.avail_out) ? 1 : 2 })(n, t) : G[n.level].func(n, t); if (3 !== i && 4 !== i || (n.status = D), 1 === i || 3 === i) return 0 === e.avail_out && (n.last_flush = -1), g; if (2 === i && (t === h ? a(n) : t !== f && (o(n, 0, 0, !1), t === p && (B(n.head), 0 === n.lookahead && (n.strstart = 0, n.block_start = 0, n.insert = 0))), F(e), 0 === e.avail_out)) return n.last_flush = -1, g } return t !== m ? g : n.wrap <= 0 ? b : (2 === n.wrap ? (j(n, 255 & e.adler), j(n, e.adler >> 8 & 255), j(n, e.adler >> 16 & 255), j(n, e.adler >> 24 & 255), j(n, 255 & e.total_in), j(n, e.total_in >> 8 & 255), j(n, e.total_in >> 16 & 255), j(n, e.total_in >> 24 & 255)) : (U(n, e.adler >>> 16), U(n, 65535 & e.adler)), F(e), n.wrap > 0 && (n.wrap = -n.wrap), 0 !== n.pending ? g : b) }, e.exports.deflateEnd = e => { if (!e || !e.state) return v; const t = e.state.status; return 42 !== t && 69 !== t && 73 !== t && 91 !== t && t !== O && t !== P && t !== D ? R(e, v) : (e.state = null, t === P ? R(e, y) : g) }, e.exports.deflateSetDictionary = (e, t) => { let i = t.length; if (!e || !e.state) return v; const r = e.state, o = r.wrap; if (2 === o || 1 === o && 42 !== r.status || r.lookahead) return v; if (1 === o && (e.adler = d(e.adler, t, i, 0)), r.wrap = 0, i >= r.w_size) { 0 === o && (B(r.head), r.strstart = 0, r.block_start = 0, r.insert = 0); let e = new Uint8Array(r.w_size); e.set(t.subarray(i - r.w_size, i), 0), t = e, i = r.w_size } const n = e.avail_in, s = e.next_in, a = e.input; for (e.avail_in = i, e.next_in = 0, e.input = t, H(r); r.lookahead >= 3;) { let e = r.strstart, t = r.lookahead - 2; do { r.ins_h = V(r, r.ins_h, r.window[e + 3 - 1]), r.prev[e & r.w_mask] = r.head[r.ins_h], r.head[r.ins_h] = e, e++ } while (--t); r.strstart = e, r.lookahead = 2, H(r) } return r.strstart += r.lookahead, r.block_start = r.strstart, r.insert = r.lookahead, r.lookahead = 0, r.match_length = r.prev_length = 2, r.match_available = 0, e.next_in = s, e.input = a, e.avail_in = n, r.wrap = o, g }, e.exports.deflateInfo = "pako deflate (from Nodeca project)" }, 7357: e => { "use strict"; e.exports = function () { this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = !1 } }, 4980: e => { "use strict"; e.exports = function (e, t) { let i, r, o, n, s, a, d, l, c, u, h, p, m, f, g, b, v, y, w, S, x, k, _, C; const I = e.state; i = e.next_in, _ = e.input, r = i + (e.avail_in - 5), o = e.next_out, C = e.output, n = o - (t - e.avail_out), s = o + (e.avail_out - 257), a = I.dmax, d = I.wsize, l = I.whave, c = I.wnext, u = I.window, h = I.hold, p = I.bits, m = I.lencode, f = I.distcode, g = (1 << I.lenbits) - 1, b = (1 << I.distbits) - 1; e: do { p < 15 && (h += _[i++] << p, p += 8, h += _[i++] << p, p += 8), v = m[h & g]; t: for (; ;) { if (y = v >>> 24, h >>>= y, p -= y, y = v >>> 16 & 255, 0 === y) C[o++] = 65535 & v; else { if (!(16 & y)) { if (0 == (64 & y)) { v = m[(65535 & v) + (h & (1 << y) - 1)]; continue t } if (32 & y) { I.mode = 12; break e } e.msg = "invalid literal/length code", I.mode = 30; break e } w = 65535 & v, y &= 15, y && (p < y && (h += _[i++] << p, p += 8), w += h & (1 << y) - 1, h >>>= y, p -= y), p < 15 && (h += _[i++] << p, p += 8, h += _[i++] << p, p += 8), v = f[h & b]; i: for (; ;) { if (y = v >>> 24, h >>>= y, p -= y, y = v >>> 16 & 255, !(16 & y)) { if (0 == (64 & y)) { v = f[(65535 & v) + (h & (1 << y) - 1)]; continue i } e.msg = "invalid distance code", I.mode = 30; break e } if (S = 65535 & v, y &= 15, p < y && (h += _[i++] << p, p += 8, p < y && (h += _[i++] << p, p += 8)), S += h & (1 << y) - 1, S > a) { e.msg = "invalid distance too far back", I.mode = 30; break e } if (h >>>= y, p -= y, y = o - n, S > y) { if (y = S - y, y > l && I.sane) { e.msg = "invalid distance too far back", I.mode = 30; break e } if (x = 0, k = u, 0 === c) { if (x += d - y, y < w) { w -= y; do { C[o++] = u[x++] } while (--y); x = o - S, k = C } } else if (c < y) { if (x += d + c - y, y -= c, y < w) { w -= y; do { C[o++] = u[x++] } while (--y); if (x = 0, c < w) { y = c, w -= y; do { C[o++] = u[x++] } while (--y); x = o - S, k = C } } } else if (x += c - y, y < w) { w -= y; do { C[o++] = u[x++] } while (--y); x = o - S, k = C } for (; w > 2;)C[o++] = k[x++], C[o++] = k[x++], C[o++] = k[x++], w -= 3; w && (C[o++] = k[x++], w > 1 && (C[o++] = k[x++])) } else { x = o - S; do { C[o++] = C[x++], C[o++] = C[x++], C[o++] = C[x++], w -= 3 } while (w > 2); w && (C[o++] = C[x++], w > 1 && (C[o++] = C[x++])) } break } } break } } while (i < r && o < s); w = p >> 3, i -= w, p -= w << 3, h &= (1 << p) - 1, e.next_in = i, e.next_out = o, e.avail_in = i < r ? r - i + 5 : 5 - (i - r), e.avail_out = o < s ? s - o + 257 : 257 - (o - s), I.hold = h, I.bits = p } }, 5020: (e, t, i) => { "use strict"; const r = i(5562), o = i(4299), n = i(4980), s = i(881), { Z_FINISH: a, Z_BLOCK: d, Z_TREES: l, Z_OK: c, Z_STREAM_END: u, Z_NEED_DICT: h, Z_STREAM_ERROR: p, Z_DATA_ERROR: m, Z_MEM_ERROR: f, Z_BUF_ERROR: g, Z_DEFLATED: b } = i(1271), v = 12, y = 30, w = e => (e >>> 24 & 255) + (e >>> 8 & 65280) + ((65280 & e) << 8) + ((255 & e) << 24); function S() { this.mode = 0, this.last = !1, this.wrap = 0, this.havedict = !1, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Uint16Array(320), this.work = new Uint16Array(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0 } const x = e => { if (!e || !e.state) return p; const t = e.state; return e.total_in = e.total_out = t.total = 0, e.msg = "", t.wrap && (e.adler = 1 & t.wrap), t.mode = 1, t.last = 0, t.havedict = 0, t.dmax = 32768, t.head = null, t.hold = 0, t.bits = 0, t.lencode = t.lendyn = new Int32Array(852), t.distcode = t.distdyn = new Int32Array(592), t.sane = 1, t.back = -1, c }, k = e => { if (!e || !e.state) return p; const t = e.state; return t.wsize = 0, t.whave = 0, t.wnext = 0, x(e) }, _ = (e, t) => { let i; if (!e || !e.state) return p; const r = e.state; return t < 0 ? (i = 0, t = -t) : (i = 1 + (t >> 4), t < 48 && (t &= 15)), t && (t < 8 || t > 15) ? p : (null !== r.window && r.wbits !== t && (r.window = null), r.wrap = i, r.wbits = t, k(e)) }, C = (e, t) => { if (!e) return p; const i = new S; e.state = i, i.window = null; const r = _(e, t); return r !== c && (e.state = null), r }; let I, T, E = !0; const A = e => { if (E) { I = new Int32Array(512), T = new Int32Array(32); let t = 0; for (; t < 144;)e.lens[t++] = 8; for (; t < 256;)e.lens[t++] = 9; for (; t < 280;)e.lens[t++] = 7; for (; t < 288;)e.lens[t++] = 8; for (s(1, e.lens, 0, 288, I, 0, e.work, { bits: 9 }), t = 0; t < 32;)e.lens[t++] = 5; s(2, e.lens, 0, 32, T, 0, e.work, { bits: 5 }), E = !1 } e.lencode = I, e.lenbits = 9, e.distcode = T, e.distbits = 5 }, M = (e, t, i, r) => { let o; const n = e.state; return null === n.window && (n.wsize = 1 << n.wbits, n.wnext = 0, n.whave = 0, n.window = new Uint8Array(n.wsize)), r >= n.wsize ? (n.window.set(t.subarray(i - n.wsize, i), 0), n.wnext = 0, n.whave = n.wsize) : (o = n.wsize - n.wnext, o > r && (o = r), n.window.set(t.subarray(i - r, i - r + o), n.wnext), (r -= o) ? (n.window.set(t.subarray(i - r, i), 0), n.wnext = r, n.whave = n.wsize) : (n.wnext += o, n.wnext === n.wsize && (n.wnext = 0), n.whave < n.wsize && (n.whave += o))), 0 }; e.exports.inflateReset = k, e.exports.inflateReset2 = _, e.exports.inflateResetKeep = x, e.exports.inflateInit = e => C(e, 15), e.exports.inflateInit2 = C, e.exports.inflate = (e, t) => { let i, S, x, k, _, C, I, T, E, O, P, D, R, L, B, V, F, N, j, U, z, $, H = 0; const W = new Uint8Array(4); let q, K; const G = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]); if (!e || !e.state || !e.output || !e.input && 0 !== e.avail_in) return p; i = e.state, i.mode === v && (i.mode = 13), _ = e.next_out, x = e.output, I = e.avail_out, k = e.next_in, S = e.input, C = e.avail_in, T = i.hold, E = i.bits, O = C, P = I, $ = c; e: for (; ;)switch (i.mode) { case 1: if (0 === i.wrap) { i.mode = 13; break } for (; E < 16;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (2 & i.wrap && 35615 === T) { i.check = 0, W[0] = 255 & T, W[1] = T >>> 8 & 255, i.check = o(i.check, W, 2, 0), T = 0, E = 0, i.mode = 2; break } if (i.flags = 0, i.head && (i.head.done = !1), !(1 & i.wrap) || (((255 & T) << 8) + (T >> 8)) % 31) { e.msg = "incorrect header check", i.mode = y; break } if ((15 & T) !== b) { e.msg = "unknown compression method", i.mode = y; break } if (T >>>= 4, E -= 4, z = 8 + (15 & T), 0 === i.wbits) i.wbits = z; else if (z > i.wbits) { e.msg = "invalid window size", i.mode = y; break } i.dmax = 1 << i.wbits, e.adler = i.check = 1, i.mode = 512 & T ? 10 : v, T = 0, E = 0; break; case 2: for (; E < 16;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (i.flags = T, (255 & i.flags) !== b) { e.msg = "unknown compression method", i.mode = y; break } if (57344 & i.flags) { e.msg = "unknown header flags set", i.mode = y; break } i.head && (i.head.text = T >> 8 & 1), 512 & i.flags && (W[0] = 255 & T, W[1] = T >>> 8 & 255, i.check = o(i.check, W, 2, 0)), T = 0, E = 0, i.mode = 3; case 3: for (; E < 32;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } i.head && (i.head.time = T), 512 & i.flags && (W[0] = 255 & T, W[1] = T >>> 8 & 255, W[2] = T >>> 16 & 255, W[3] = T >>> 24 & 255, i.check = o(i.check, W, 4, 0)), T = 0, E = 0, i.mode = 4; case 4: for (; E < 16;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } i.head && (i.head.xflags = 255 & T, i.head.os = T >> 8), 512 & i.flags && (W[0] = 255 & T, W[1] = T >>> 8 & 255, i.check = o(i.check, W, 2, 0)), T = 0, E = 0, i.mode = 5; case 5: if (1024 & i.flags) { for (; E < 16;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } i.length = T, i.head && (i.head.extra_len = T), 512 & i.flags && (W[0] = 255 & T, W[1] = T >>> 8 & 255, i.check = o(i.check, W, 2, 0)), T = 0, E = 0 } else i.head && (i.head.extra = null); i.mode = 6; case 6: if (1024 & i.flags && (D = i.length, D > C && (D = C), D && (i.head && (z = i.head.extra_len - i.length, i.head.extra || (i.head.extra = new Uint8Array(i.head.extra_len)), i.head.extra.set(S.subarray(k, k + D), z)), 512 & i.flags && (i.check = o(i.check, S, D, k)), C -= D, k += D, i.length -= D), i.length)) break e; i.length = 0, i.mode = 7; case 7: if (2048 & i.flags) { if (0 === C) break e; D = 0; do { z = S[k + D++], i.head && z && i.length < 65536 && (i.head.name += String.fromCharCode(z)) } while (z && D < C); if (512 & i.flags && (i.check = o(i.check, S, D, k)), C -= D, k += D, z) break e } else i.head && (i.head.name = null); i.length = 0, i.mode = 8; case 8: if (4096 & i.flags) { if (0 === C) break e; D = 0; do { z = S[k + D++], i.head && z && i.length < 65536 && (i.head.comment += String.fromCharCode(z)) } while (z && D < C); if (512 & i.flags && (i.check = o(i.check, S, D, k)), C -= D, k += D, z) break e } else i.head && (i.head.comment = null); i.mode = 9; case 9: if (512 & i.flags) { for (; E < 16;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (T !== (65535 & i.check)) { e.msg = "header crc mismatch", i.mode = y; break } T = 0, E = 0 } i.head && (i.head.hcrc = i.flags >> 9 & 1, i.head.done = !0), e.adler = i.check = 0, i.mode = v; break; case 10: for (; E < 32;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } e.adler = i.check = w(T), T = 0, E = 0, i.mode = 11; case 11: if (0 === i.havedict) return e.next_out = _, e.avail_out = I, e.next_in = k, e.avail_in = C, i.hold = T, i.bits = E, h; e.adler = i.check = 1, i.mode = v; case v: if (t === d || t === l) break e; case 13: if (i.last) { T >>>= 7 & E, E -= 7 & E, i.mode = 27; break } for (; E < 3;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } switch (i.last = 1 & T, T >>>= 1, E -= 1, 3 & T) { case 0: i.mode = 14; break; case 1: if (A(i), i.mode = 20, t === l) { T >>>= 2, E -= 2; break e } break; case 2: i.mode = 17; break; case 3: e.msg = "invalid block type", i.mode = y }T >>>= 2, E -= 2; break; case 14: for (T >>>= 7 & E, E -= 7 & E; E < 32;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if ((65535 & T) != (T >>> 16 ^ 65535)) { e.msg = "invalid stored block lengths", i.mode = y; break } if (i.length = 65535 & T, T = 0, E = 0, i.mode = 15, t === l) break e; case 15: i.mode = 16; case 16: if (D = i.length, D) { if (D > C && (D = C), D > I && (D = I), 0 === D) break e; x.set(S.subarray(k, k + D), _), C -= D, k += D, I -= D, _ += D, i.length -= D; break } i.mode = v; break; case 17: for (; E < 14;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (i.nlen = 257 + (31 & T), T >>>= 5, E -= 5, i.ndist = 1 + (31 & T), T >>>= 5, E -= 5, i.ncode = 4 + (15 & T), T >>>= 4, E -= 4, i.nlen > 286 || i.ndist > 30) { e.msg = "too many length or distance symbols", i.mode = y; break } i.have = 0, i.mode = 18; case 18: for (; i.have < i.ncode;) { for (; E < 3;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } i.lens[G[i.have++]] = 7 & T, T >>>= 3, E -= 3 } for (; i.have < 19;)i.lens[G[i.have++]] = 0; if (i.lencode = i.lendyn, i.lenbits = 7, q = { bits: i.lenbits }, $ = s(0, i.lens, 0, 19, i.lencode, 0, i.work, q), i.lenbits = q.bits, $) { e.msg = "invalid code lengths set", i.mode = y; break } i.have = 0, i.mode = 19; case 19: for (; i.have < i.nlen + i.ndist;) { for (; H = i.lencode[T & (1 << i.lenbits) - 1], B = H >>> 24, V = H >>> 16 & 255, F = 65535 & H, !(B <= E);) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (F < 16) T >>>= B, E -= B, i.lens[i.have++] = F; else { if (16 === F) { for (K = B + 2; E < K;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (T >>>= B, E -= B, 0 === i.have) { e.msg = "invalid bit length repeat", i.mode = y; break } z = i.lens[i.have - 1], D = 3 + (3 & T), T >>>= 2, E -= 2 } else if (17 === F) { for (K = B + 3; E < K;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } T >>>= B, E -= B, z = 0, D = 3 + (7 & T), T >>>= 3, E -= 3 } else { for (K = B + 7; E < K;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } T >>>= B, E -= B, z = 0, D = 11 + (127 & T), T >>>= 7, E -= 7 } if (i.have + D > i.nlen + i.ndist) { e.msg = "invalid bit length repeat", i.mode = y; break } for (; D--;)i.lens[i.have++] = z } } if (i.mode === y) break; if (0 === i.lens[256]) { e.msg = "invalid code -- missing end-of-block", i.mode = y; break } if (i.lenbits = 9, q = { bits: i.lenbits }, $ = s(1, i.lens, 0, i.nlen, i.lencode, 0, i.work, q), i.lenbits = q.bits, $) { e.msg = "invalid literal/lengths set", i.mode = y; break } if (i.distbits = 6, i.distcode = i.distdyn, q = { bits: i.distbits }, $ = s(2, i.lens, i.nlen, i.ndist, i.distcode, 0, i.work, q), i.distbits = q.bits, $) { e.msg = "invalid distances set", i.mode = y; break } if (i.mode = 20, t === l) break e; case 20: i.mode = 21; case 21: if (C >= 6 && I >= 258) { e.next_out = _, e.avail_out = I, e.next_in = k, e.avail_in = C, i.hold = T, i.bits = E, n(e, P), _ = e.next_out, x = e.output, I = e.avail_out, k = e.next_in, S = e.input, C = e.avail_in, T = i.hold, E = i.bits, i.mode === v && (i.back = -1); break } for (i.back = 0; H = i.lencode[T & (1 << i.lenbits) - 1], B = H >>> 24, V = H >>> 16 & 255, F = 65535 & H, !(B <= E);) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (V && 0 == (240 & V)) { for (N = B, j = V, U = F; H = i.lencode[U + ((T & (1 << N + j) - 1) >> N)], B = H >>> 24, V = H >>> 16 & 255, F = 65535 & H, !(N + B <= E);) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } T >>>= N, E -= N, i.back += N } if (T >>>= B, E -= B, i.back += B, i.length = F, 0 === V) { i.mode = 26; break } if (32 & V) { i.back = -1, i.mode = v; break } if (64 & V) { e.msg = "invalid literal/length code", i.mode = y; break } i.extra = 15 & V, i.mode = 22; case 22: if (i.extra) { for (K = i.extra; E < K;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } i.length += T & (1 << i.extra) - 1, T >>>= i.extra, E -= i.extra, i.back += i.extra } i.was = i.length, i.mode = 23; case 23: for (; H = i.distcode[T & (1 << i.distbits) - 1], B = H >>> 24, V = H >>> 16 & 255, F = 65535 & H, !(B <= E);) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (0 == (240 & V)) { for (N = B, j = V, U = F; H = i.distcode[U + ((T & (1 << N + j) - 1) >> N)], B = H >>> 24, V = H >>> 16 & 255, F = 65535 & H, !(N + B <= E);) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } T >>>= N, E -= N, i.back += N } if (T >>>= B, E -= B, i.back += B, 64 & V) { e.msg = "invalid distance code", i.mode = y; break } i.offset = F, i.extra = 15 & V, i.mode = 24; case 24: if (i.extra) { for (K = i.extra; E < K;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } i.offset += T & (1 << i.extra) - 1, T >>>= i.extra, E -= i.extra, i.back += i.extra } if (i.offset > i.dmax) { e.msg = "invalid distance too far back", i.mode = y; break } i.mode = 25; case 25: if (0 === I) break e; if (D = P - I, i.offset > D) { if (D = i.offset - D, D > i.whave && i.sane) { e.msg = "invalid distance too far back", i.mode = y; break } D > i.wnext ? (D -= i.wnext, R = i.wsize - D) : R = i.wnext - D, D > i.length && (D = i.length), L = i.window } else L = x, R = _ - i.offset, D = i.length; D > I && (D = I), I -= D, i.length -= D; do { x[_++] = L[R++] } while (--D); 0 === i.length && (i.mode = 21); break; case 26: if (0 === I) break e; x[_++] = i.length, I--, i.mode = 21; break; case 27: if (i.wrap) { for (; E < 32;) { if (0 === C) break e; C--, T |= S[k++] << E, E += 8 } if (P -= I, e.total_out += P, i.total += P, P && (e.adler = i.check = i.flags ? o(i.check, x, P, _ - P) : r(i.check, x, P, _ - P)), P = I, (i.flags ? T : w(T)) !== i.check) { e.msg = "incorrect data check", i.mode = y; break } T = 0, E = 0 } i.mode = 28; case 28: if (i.wrap && i.flags) { for (; E < 32;) { if (0 === C) break e; C--, T += S[k++] << E, E += 8 } if (T !== (4294967295 & i.total)) { e.msg = "incorrect length check", i.mode = y; break } T = 0, E = 0 } i.mode = 29; case 29: $ = u; break e; case y: $ = m; break e; case 31: return f; default: return p }return e.next_out = _, e.avail_out = I, e.next_in = k, e.avail_in = C, i.hold = T, i.bits = E, (i.wsize || P !== e.avail_out && i.mode < y && (i.mode < 27 || t !== a)) && M(e, e.output, e.next_out, P - e.avail_out) ? (i.mode = 31, f) : (O -= e.avail_in, P -= e.avail_out, e.total_in += O, e.total_out += P, i.total += P, i.wrap && P && (e.adler = i.check = i.flags ? o(i.check, x, P, e.next_out - P) : r(i.check, x, P, e.next_out - P)), e.data_type = i.bits + (i.last ? 64 : 0) + (i.mode === v ? 128 : 0) + (20 === i.mode || 15 === i.mode ? 256 : 0), (0 === O && 0 === P || t === a) && $ === c && ($ = g), $) }, e.exports.inflateEnd = e => { if (!e || !e.state) return p; let t = e.state; return t.window && (t.window = null), e.state = null, c }, e.exports.inflateGetHeader = (e, t) => { if (!e || !e.state) return p; const i = e.state; return 0 == (2 & i.wrap) ? p : (i.head = t, t.done = !1, c) }, e.exports.inflateSetDictionary = (e, t) => { const i = t.length; let o, n, s; return e && e.state ? (o = e.state, 0 !== o.wrap && 11 !== o.mode ? p : 11 === o.mode && (n = 1, n = r(n, t, i, 0), n !== o.check) ? m : (s = M(e, t, i, i), s ? (o.mode = 31, f) : (o.havedict = 1, c))) : p }, e.exports.inflateInfo = "pako inflate (from Nodeca project)" }, 881: e => { "use strict"; const t = new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]), i = new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]), r = new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]), o = new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]); e.exports = (e, n, s, a, d, l, c, u) => { const h = u.bits; let p, m, f, g, b, v, y = 0, w = 0, S = 0, x = 0, k = 0, _ = 0, C = 0, I = 0, T = 0, E = 0, A = null, M = 0; const O = new Uint16Array(16), P = new Uint16Array(16); let D, R, L, B = null, V = 0; for (y = 0; y <= 15; y++)O[y] = 0; for (w = 0; w < a; w++)O[n[s + w]]++; for (k = h, x = 15; x >= 1 && 0 === O[x]; x--); if (k > x && (k = x), 0 === x) return d[l++] = 20971520, d[l++] = 20971520, u.bits = 1, 0; for (S = 1; S < x && 0 === O[S]; S++); for (k < S && (k = S), I = 1, y = 1; y <= 15; y++)if (I <<= 1, I -= O[y], I < 0) return -1; if (I > 0 && (0 === e || 1 !== x)) return -1; for (P[1] = 0, y = 1; y < 15; y++)P[y + 1] = P[y] + O[y]; for (w = 0; w < a; w++)0 !== n[s + w] && (c[P[n[s + w]]++] = w); if (0 === e ? (A = B = c, v = 19) : 1 === e ? (A = t, M -= 257, B = i, V -= 257, v = 256) : (A = r, B = o, v = -1), E = 0, w = 0, y = S, b = l, _ = k, C = 0, f = -1, T = 1 << k, g = T - 1, 1 === e && T > 852 || 2 === e && T > 592) return 1; for (; ;) { D = y - C, c[w] < v ? (R = 0, L = c[w]) : c[w] > v ? (R = B[V + c[w]], L = A[M + c[w]]) : (R = 96, L = 0), p = 1 << y - C, m = 1 << _, S = m; do { m -= p, d[b + (E >> C) + m] = D << 24 | R << 16 | L | 0 } while (0 !== m); for (p = 1 << y - 1; E & p;)p >>= 1; if (0 !== p ? (E &= p - 1, E += p) : E = 0, w++, 0 == --O[y]) { if (y === x) break; y = n[s + c[w]] } if (y > k && (E & g) !== f) { for (0 === C && (C = k), b += S, _ = y - C, I = 1 << _; _ + C < x && (I -= O[_ + C], !(I <= 0));)_++, I <<= 1; if (T += 1 << _, 1 === e && T > 852 || 2 === e && T > 592) return 1; f = E & g, d[f] = k << 24 | _ << 16 | b - l | 0 } } return 0 !== E && (d[b + E] = y - C << 24 | 64 << 16 | 0), u.bits = k, 0 } }, 2950: e => { "use strict"; e.exports = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" } }, 9564: e => { "use strict"; function t(e) { let t = e.length; for (; --t >= 0;)e[t] = 0 } const i = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]), r = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]), o = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]), n = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]), s = new Array(576); t(s); const a = new Array(60); t(a); const d = new Array(512); t(d); const l = new Array(256); t(l); const c = new Array(29); t(c); const u = new Array(30); function h(e, t, i, r, o) { this.static_tree = e, this.extra_bits = t, this.extra_base = i, this.elems = r, this.max_length = o, this.has_stree = e && e.length } let p, m, f; function g(e, t) { this.dyn_tree = e, this.max_code = 0, this.stat_desc = t } t(u); const b = e => e < 256 ? d[e] : d[256 + (e >>> 7)], v = (e, t) => { e.pending_buf[e.pending++] = 255 & t, e.pending_buf[e.pending++] = t >>> 8 & 255 }, y = (e, t, i) => { e.bi_valid > 16 - i ? (e.bi_buf |= t << e.bi_valid & 65535, v(e, e.bi_buf), e.bi_buf = t >> 16 - e.bi_valid, e.bi_valid += i - 16) : (e.bi_buf |= t << e.bi_valid & 65535, e.bi_valid += i) }, w = (e, t, i) => { y(e, i[2 * t], i[2 * t + 1]) }, S = (e, t) => { let i = 0; do { i |= 1 & e, e >>>= 1, i <<= 1 } while (--t > 0); return i >>> 1 }, x = (e, t, i) => { const r = new Array(16); let o, n, s = 0; for (o = 1; o <= 15; o++)r[o] = s = s + i[o - 1] << 1; for (n = 0; n <= t; n++) { let t = e[2 * n + 1]; 0 !== t && (e[2 * n] = S(r[t]++, t)) } }, k = e => { let t; for (t = 0; t < 286; t++)e.dyn_ltree[2 * t] = 0; for (t = 0; t < 30; t++)e.dyn_dtree[2 * t] = 0; for (t = 0; t < 19; t++)e.bl_tree[2 * t] = 0; e.dyn_ltree[512] = 1, e.opt_len = e.static_len = 0, e.last_lit = e.matches = 0 }, _ = e => { e.bi_valid > 8 ? v(e, e.bi_buf) : e.bi_valid > 0 && (e.pending_buf[e.pending++] = e.bi_buf), e.bi_buf = 0, e.bi_valid = 0 }, C = (e, t, i, r) => { const o = 2 * t, n = 2 * i; return e[o] < e[n] || e[o] === e[n] && r[t] <= r[i] }, I = (e, t, i) => { const r = e.heap[i]; let o = i << 1; for (; o <= e.heap_len && (o < e.heap_len && C(t, e.heap[o + 1], e.heap[o], e.depth) && o++, !C(t, r, e.heap[o], e.depth));)e.heap[i] = e.heap[o], i = o, o <<= 1; e.heap[i] = r }, T = (e, t, o) => { let n, s, a, d, h = 0; if (0 !== e.last_lit) do { n = e.pending_buf[e.d_buf + 2 * h] << 8 | e.pending_buf[e.d_buf + 2 * h + 1], s = e.pending_buf[e.l_buf + h], h++, 0 === n ? w(e, s, t) : (a = l[s], w(e, a + 256 + 1, t), d = i[a], 0 !== d && (s -= c[a], y(e, s, d)), n--, a = b(n), w(e, a, o), d = r[a], 0 !== d && (n -= u[a], y(e, n, d))) } while (h < e.last_lit); w(e, 256, t) }, E = (e, t) => { const i = t.dyn_tree, r = t.stat_desc.static_tree, o = t.stat_desc.has_stree, n = t.stat_desc.elems; let s, a, d, l = -1; for (e.heap_len = 0, e.heap_max = 573, s = 0; s < n; s++)0 !== i[2 * s] ? (e.heap[++e.heap_len] = l = s, e.depth[s] = 0) : i[2 * s + 1] = 0; for (; e.heap_len < 2;)d = e.heap[++e.heap_len] = l < 2 ? ++l : 0, i[2 * d] = 1, e.depth[d] = 0, e.opt_len--, o && (e.static_len -= r[2 * d + 1]); for (t.max_code = l, s = e.heap_len >> 1; s >= 1; s--)I(e, i, s); d = n; do { s = e.heap[1], e.heap[1] = e.heap[e.heap_len--], I(e, i, 1), a = e.heap[1], e.heap[--e.heap_max] = s, e.heap[--e.heap_max] = a, i[2 * d] = i[2 * s] + i[2 * a], e.depth[d] = (e.depth[s] >= e.depth[a] ? e.depth[s] : e.depth[a]) + 1, i[2 * s + 1] = i[2 * a + 1] = d, e.heap[1] = d++, I(e, i, 1) } while (e.heap_len >= 2); e.heap[--e.heap_max] = e.heap[1], ((e, t) => { const i = t.dyn_tree, r = t.max_code, o = t.stat_desc.static_tree, n = t.stat_desc.has_stree, s = t.stat_desc.extra_bits, a = t.stat_desc.extra_base, d = t.stat_desc.max_length; let l, c, u, h, p, m, f = 0; for (h = 0; h <= 15; h++)e.bl_count[h] = 0; for (i[2 * e.heap[e.heap_max] + 1] = 0, l = e.heap_max + 1; l < 573; l++)c = e.heap[l], h = i[2 * i[2 * c + 1] + 1] + 1, h > d && (h = d, f++), i[2 * c + 1] = h, c > r || (e.bl_count[h]++, p = 0, c >= a && (p = s[c - a]), m = i[2 * c], e.opt_len += m * (h + p), n && (e.static_len += m * (o[2 * c + 1] + p))); if (0 !== f) { do { for (h = d - 1; 0 === e.bl_count[h];)h--; e.bl_count[h]--, e.bl_count[h + 1] += 2, e.bl_count[d]--, f -= 2 } while (f > 0); for (h = d; 0 !== h; h--)for (c = e.bl_count[h]; 0 !== c;)u = e.heap[--l], u > r || (i[2 * u + 1] !== h && (e.opt_len += (h - i[2 * u + 1]) * i[2 * u], i[2 * u + 1] = h), c--) } })(e, t), x(i, l, e.bl_count) }, A = (e, t, i) => { let r, o, n = -1, s = t[1], a = 0, d = 7, l = 4; for (0 === s && (d = 138, l = 3), t[2 * (i + 1) + 1] = 65535, r = 0; r <= i; r++)o = s, s = t[2 * (r + 1) + 1], ++a < d && o === s || (a < l ? e.bl_tree[2 * o] += a : 0 !== o ? (o !== n && e.bl_tree[2 * o]++, e.bl_tree[32]++) : a <= 10 ? e.bl_tree[34]++ : e.bl_tree[36]++, a = 0, n = o, 0 === s ? (d = 138, l = 3) : o === s ? (d = 6, l = 3) : (d = 7, l = 4)) }, M = (e, t, i) => { let r, o, n = -1, s = t[1], a = 0, d = 7, l = 4; for (0 === s && (d = 138, l = 3), r = 0; r <= i; r++)if (o = s, s = t[2 * (r + 1) + 1], !(++a < d && o === s)) { if (a < l) do { w(e, o, e.bl_tree) } while (0 != --a); else 0 !== o ? (o !== n && (w(e, o, e.bl_tree), a--), w(e, 16, e.bl_tree), y(e, a - 3, 2)) : a <= 10 ? (w(e, 17, e.bl_tree), y(e, a - 3, 3)) : (w(e, 18, e.bl_tree), y(e, a - 11, 7)); a = 0, n = o, 0 === s ? (d = 138, l = 3) : o === s ? (d = 6, l = 3) : (d = 7, l = 4) } }; let O = !1; const P = (e, t, i, r) => { y(e, 0 + (r ? 1 : 0), 3), ((e, t, i, r) => { _(e), v(e, i), v(e, ~i), e.pending_buf.set(e.window.subarray(t, t + i), e.pending), e.pending += i })(e, t, i) }; e.exports._tr_init = e => { O || ((() => { let e, t, n, g, b; const v = new Array(16); for (n = 0, g = 0; g < 28; g++)for (c[g] = n, e = 0; e < 1 << i[g]; e++)l[n++] = g; for (l[n - 1] = g, b = 0, g = 0; g < 16; g++)for (u[g] = b, e = 0; e < 1 << r[g]; e++)d[b++] = g; for (b >>= 7; g < 30; g++)for (u[g] = b << 7, e = 0; e < 1 << r[g] - 7; e++)d[256 + b++] = g; for (t = 0; t <= 15; t++)v[t] = 0; for (e = 0; e <= 143;)s[2 * e + 1] = 8, e++, v[8]++; for (; e <= 255;)s[2 * e + 1] = 9, e++, v[9]++; for (; e <= 279;)s[2 * e + 1] = 7, e++, v[7]++; for (; e <= 287;)s[2 * e + 1] = 8, e++, v[8]++; for (x(s, 287, v), e = 0; e < 30; e++)a[2 * e + 1] = 5, a[2 * e] = S(e, 5); p = new h(s, i, 257, 286, 15), m = new h(a, r, 0, 30, 15), f = new h(new Array(0), o, 0, 19, 7) })(), O = !0), e.l_desc = new g(e.dyn_ltree, p), e.d_desc = new g(e.dyn_dtree, m), e.bl_desc = new g(e.bl_tree, f), e.bi_buf = 0, e.bi_valid = 0, k(e) }, e.exports._tr_stored_block = P, e.exports._tr_flush_block = (e, t, i, r) => { let o, d, l = 0; e.level > 0 ? (2 === e.strm.data_type && (e.strm.data_type = (e => { let t, i = 4093624447; for (t = 0; t <= 31; t++, i >>>= 1)if (1 & i && 0 !== e.dyn_ltree[2 * t]) return 0; if (0 !== e.dyn_ltree[18] || 0 !== e.dyn_ltree[20] || 0 !== e.dyn_ltree[26]) return 1; for (t = 32; t < 256; t++)if (0 !== e.dyn_ltree[2 * t]) return 1; return 0 })(e)), E(e, e.l_desc), E(e, e.d_desc), l = (e => { let t; for (A(e, e.dyn_ltree, e.l_desc.max_code), A(e, e.dyn_dtree, e.d_desc.max_code), E(e, e.bl_desc), t = 18; t >= 3 && 0 === e.bl_tree[2 * n[t] + 1]; t--); return e.opt_len += 3 * (t + 1) + 5 + 5 + 4, t })(e), o = e.opt_len + 3 + 7 >>> 3, d = e.static_len + 3 + 7 >>> 3, d <= o && (o = d)) : o = d = i + 5, i + 4 <= o && -1 !== t ? P(e, t, i, r) : 4 === e.strategy || d === o ? (y(e, 2 + (r ? 1 : 0), 3), T(e, s, a)) : (y(e, 4 + (r ? 1 : 0), 3), ((e, t, i, r) => { let o; for (y(e, t - 257, 5), y(e, i - 1, 5), y(e, r - 4, 4), o = 0; o < r; o++)y(e, e.bl_tree[2 * n[o] + 1], 3); M(e, e.dyn_ltree, t - 1), M(e, e.dyn_dtree, i - 1) })(e, e.l_desc.max_code + 1, e.d_desc.max_code + 1, l + 1), T(e, e.dyn_ltree, e.dyn_dtree)), k(e), r && _(e) }, e.exports._tr_tally = (e, t, i) => (e.pending_buf[e.d_buf + 2 * e.last_lit] = t >>> 8 & 255, e.pending_buf[e.d_buf + 2 * e.last_lit + 1] = 255 & t, e.pending_buf[e.l_buf + e.last_lit] = 255 & i, e.last_lit++, 0 === t ? e.dyn_ltree[2 * i]++ : (e.matches++, t--, e.dyn_ltree[2 * (l[i] + 256 + 1)]++, e.dyn_dtree[2 * b(t)]++), e.last_lit === e.lit_bufsize - 1), e.exports._tr_align = e => { y(e, 2, 3), w(e, 256, s), (e => { 16 === e.bi_valid ? (v(e, e.bi_buf), e.bi_buf = 0, e.bi_valid = 0) : e.bi_valid >= 8 && (e.pending_buf[e.pending++] = 255 & e.bi_buf, e.bi_buf >>= 8, e.bi_valid -= 8) })(e) } }, 878: e => { "use strict"; e.exports = function () { this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0 } }, 3737: (e, t, i) => { "use strict"; e.exports = i(536) }, 536: (e, t, i) => { "use strict"; var r = t; function o() { r.util._configure(), r.Writer._configure(r.BufferWriter), r.Reader._configure(r.BufferReader) } r.build = "minimal", r.Writer = i(123), r.BufferWriter = i(6673), r.Reader = i(9799), r.BufferReader = i(7038), r.util = i(4165), r.rpc = i(4963), r.roots = i(9009), r.configure = o, o() }, 9799: (e, t, i) => { "use strict"; e.exports = d; var r, o = i(4165), n = o.LongBits, s = o.utf8; function a(e, t) { return RangeError("index out of range: " + e.pos + " + " + (t || 1) + " > " + e.len) } function d(e) { this.buf = e, this.pos = 0, this.len = e.length } var l, c = "undefined" != typeof Uint8Array ? function (e) { if (e instanceof Uint8Array || Array.isArray(e)) return new d(e); throw Error("illegal buffer") } : function (e) { if (Array.isArray(e)) return new d(e); throw Error("illegal buffer") }, u = function () { return o.Buffer ? function (e) { return (d.create = function (e) { return o.Buffer.isBuffer(e) ? new r(e) : c(e) })(e) } : c }; function h() { var e = new n(0, 0), t = 0; if (!(this.len - this.pos > 4)) { for (; t < 3; ++t) { if (this.pos >= this.len) throw a(this); if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e } return e.lo = (e.lo | (127 & this.buf[this.pos++]) << 7 * t) >>> 0, e } for (; t < 4; ++t)if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e; if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e.hi = (e.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, this.buf[this.pos++] < 128) return e; if (t = 0, this.len - this.pos > 4) { for (; t < 5; ++t)if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e } else for (; t < 5; ++t) { if (this.pos >= this.len) throw a(this); if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e } throw Error("invalid varint encoding") } function p(e, t) { return (e[t - 4] | e[t - 3] << 8 | e[t - 2] << 16 | e[t - 1] << 24) >>> 0 } function m() { if (this.pos + 8 > this.len) throw a(this, 8); return new n(p(this.buf, this.pos += 4), p(this.buf, this.pos += 4)) } d.create = u(), d.prototype._slice = o.Array.prototype.subarray || o.Array.prototype.slice, d.prototype.uint32 = (l = 4294967295, function () { if (l = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return l; if (l = (l | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return l; if (l = (l | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return l; if (l = (l | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return l; if (l = (l | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return l; if ((this.pos += 5) > this.len) throw this.pos = this.len, a(this, 10); return l }), d.prototype.int32 = function () { return 0 | this.uint32() }, d.prototype.sint32 = function () { var e = this.uint32(); return e >>> 1 ^ -(1 & e) | 0 }, d.prototype.bool = function () { return 0 !== this.uint32() }, d.prototype.fixed32 = function () { if (this.pos + 4 > this.len) throw a(this, 4); return p(this.buf, this.pos += 4) }, d.prototype.sfixed32 = function () { if (this.pos + 4 > this.len) throw a(this, 4); return 0 | p(this.buf, this.pos += 4) }, d.prototype.float = function () { if (this.pos + 4 > this.len) throw a(this, 4); var e = o.float.readFloatLE(this.buf, this.pos); return this.pos += 4, e }, d.prototype.double = function () { if (this.pos + 8 > this.len) throw a(this, 4); var e = o.float.readDoubleLE(this.buf, this.pos); return this.pos += 8, e }, d.prototype.bytes = function () { var e = this.uint32(), t = this.pos, i = this.pos + e; if (i > this.len) throw a(this, e); return this.pos += e, Array.isArray(this.buf) ? this.buf.slice(t, i) : t === i ? new this.buf.constructor(0) : this._slice.call(this.buf, t, i) }, d.prototype.string = function () { var e = this.bytes(); return s.read(e, 0, e.length) }, d.prototype.skip = function (e) { if ("number" == typeof e) { if (this.pos + e > this.len) throw a(this, e); this.pos += e } else do { if (this.pos >= this.len) throw a(this) } while (128 & this.buf[this.pos++]); return this }, d.prototype.skipType = function (e) { switch (e) { case 0: this.skip(); break; case 1: this.skip(8); break; case 2: this.skip(this.uint32()); break; case 3: for (; 4 != (e = 7 & this.uint32());)this.skipType(e); break; case 5: this.skip(4); break; default: throw Error("invalid wire type " + e + " at offset " + this.pos) }return this }, d._configure = function (e) { r = e, d.create = u(), r._configure(); var t = o.Long ? "toLong" : "toNumber"; o.merge(d.prototype, { int64: function () { return h.call(this)[t](!1) }, uint64: function () { return h.call(this)[t](!0) }, sint64: function () { return h.call(this).zzDecode()[t](!1) }, fixed64: function () { return m.call(this)[t](!0) }, sfixed64: function () { return m.call(this)[t](!1) } }) } }, 7038: (e, t, i) => { "use strict"; e.exports = n; var r = i(9799); (n.prototype = Object.create(r.prototype)).constructor = n; var o = i(4165); function n(e) { r.call(this, e) } n._configure = function () { o.Buffer && (n.prototype._slice = o.Buffer.prototype.slice) }, n.prototype.string = function () { var e = this.uint32(); return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e, this.len)) }, n._configure() }, 9009: e => { "use strict"; e.exports = {} }, 4963: (e, t, i) => { "use strict"; t.Service = i(9548) }, 9548: (e, t, i) => { "use strict"; e.exports = o; var r = i(4165); function o(e, t, i) { if ("function" != typeof e) throw TypeError("rpcImpl must be a function"); r.EventEmitter.call(this), this.rpcImpl = e, this.requestDelimited = Boolean(t), this.responseDelimited = Boolean(i) } (o.prototype = Object.create(r.EventEmitter.prototype)).constructor = o, o.prototype.rpcCall = function e(t, i, o, n, s) { if (!n) throw TypeError("request must be specified"); var a = this; if (!s) return r.asPromise(e, a, t, i, o, n); if (a.rpcImpl) try { return a.rpcImpl(t, i[a.requestDelimited ? "encodeDelimited" : "encode"](n).finish(), (function (e, i) { if (e) return a.emit("error", e, t), s(e); if (null !== i) { if (!(i instanceof o)) try { i = o[a.responseDelimited ? "decodeDelimited" : "decode"](i) } catch (e) { return a.emit("error", e, t), s(e) } return a.emit("data", i, t), s(null, i) } a.end(!0) })) } catch (e) { return a.emit("error", e, t), void setTimeout((function () { s(e) }), 0) } else setTimeout((function () { s(Error("already ended")) }), 0) }, o.prototype.end = function (e) { return this.rpcImpl && (e || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this } }, 1697: (e, t, i) => { "use strict"; e.exports = o; var r = i(4165); function o(e, t) { this.lo = e >>> 0, this.hi = t >>> 0 } var n = o.zero = new o(0, 0); n.toNumber = function () { return 0 }, n.zzEncode = n.zzDecode = function () { return this }, n.length = function () { return 1 }; var s = o.zeroHash = "\0\0\0\0\0\0\0\0"; o.fromNumber = function (e) { if (0 === e) return n; var t = e < 0; t && (e = -e); var i = e >>> 0, r = (e - i) / 4294967296 >>> 0; return t && (r = ~r >>> 0, i = ~i >>> 0, ++i > 4294967295 && (i = 0, ++r > 4294967295 && (r = 0))), new o(i, r) }, o.from = function (e) { if ("number" == typeof e) return o.fromNumber(e); if (r.isString(e)) { if (!r.Long) return o.fromNumber(parseInt(e, 10)); e = r.Long.fromString(e) } return e.low || e.high ? new o(e.low >>> 0, e.high >>> 0) : n }, o.prototype.toNumber = function (e) { if (!e && this.hi >>> 31) { var t = 1 + ~this.lo >>> 0, i = ~this.hi >>> 0; return t || (i = i + 1 >>> 0), -(t + 4294967296 * i) } return this.lo + 4294967296 * this.hi }, o.prototype.toLong = function (e) { return r.Long ? new r.Long(0 | this.lo, 0 | this.hi, Boolean(e)) : { low: 0 | this.lo, high: 0 | this.hi, unsigned: Boolean(e) } }; var a = String.prototype.charCodeAt; o.fromHash = function (e) { return e === s ? n : new o((a.call(e, 0) | a.call(e, 1) << 8 | a.call(e, 2) << 16 | a.call(e, 3) << 24) >>> 0, (a.call(e, 4) | a.call(e, 5) << 8 | a.call(e, 6) << 16 | a.call(e, 7) << 24) >>> 0) }, o.prototype.toHash = function () { return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24) }, o.prototype.zzEncode = function () { var e = this.hi >> 31; return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0, this.lo = (this.lo << 1 ^ e) >>> 0, this }, o.prototype.zzDecode = function () { var e = -(1 & this.lo); return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0, this.hi = (this.hi >>> 1 ^ e) >>> 0, this }, o.prototype.length = function () { var e = this.lo, t = (this.lo >>> 28 | this.hi << 4) >>> 0, i = this.hi >>> 24; return 0 === i ? 0 === t ? e < 16384 ? e < 128 ? 1 : 2 : e < 2097152 ? 3 : 4 : t < 16384 ? t < 128 ? 5 : 6 : t < 2097152 ? 7 : 8 : i < 128 ? 9 : 10 } }, 4165: function (e, t, i) { "use strict"; var r = t; function o(e, t, i) { for (var r = Object.keys(t), o = 0; o < r.length; ++o)void 0 !== e[r[o]] && i || (e[r[o]] = t[r[o]]); return e } function n(e) { function t(e, i) { if (!(this instanceof t)) return new t(e, i); Object.defineProperty(this, "message", { get: function () { return e } }), Error.captureStackTrace ? Error.captureStackTrace(this, t) : Object.defineProperty(this, "stack", { value: (new Error).stack || "" }), i && o(this, i) } return (t.prototype = Object.create(Error.prototype)).constructor = t, Object.defineProperty(t.prototype, "name", { get: function () { return e } }), t.prototype.toString = function () { return this.name + ": " + this.message }, t } r.asPromise = i(6781), r.base64 = i(7026), r.EventEmitter = i(5570), r.float = i(5298), r.inquire = i(6116), r.utf8 = i(7958), r.pool = i(804), r.LongBits = i(1697), r.isNode = Boolean(void 0 !== i.g && i.g && i.g.process && i.g.process.versions && i.g.process.versions.node), r.global = r.isNode && i.g || "undefined" != typeof window && window || "undefined" != typeof self && self || this, r.emptyArray = Object.freeze ? Object.freeze([]) : [], r.emptyObject = Object.freeze ? Object.freeze({}) : {}, r.isInteger = Number.isInteger || function (e) { return "number" == typeof e && isFinite(e) && Math.floor(e) === e }, r.isString = function (e) { return "string" == typeof e || e instanceof String }, r.isObject = function (e) { return e && "object" == typeof e }, r.isset = r.isSet = function (e, t) { var i = e[t]; return !(null == i || !e.hasOwnProperty(t)) && ("object" != typeof i || (Array.isArray(i) ? i.length : Object.keys(i).length) > 0) }, r.Buffer = function () { try { var e = r.inquire("buffer").Buffer; return e.prototype.utf8Write ? e : null } catch (e) { return null } }(), r._Buffer_from = null, r._Buffer_allocUnsafe = null, r.newBuffer = function (e) { return "number" == typeof e ? r.Buffer ? r._Buffer_allocUnsafe(e) : new r.Array(e) : r.Buffer ? r._Buffer_from(e) : "undefined" == typeof Uint8Array ? e : new Uint8Array(e) }, r.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, r.Long = r.global.dcodeIO && r.global.dcodeIO.Long || r.global.Long || r.inquire("long"), r.key2Re = /^true|false|0|1$/, r.key32Re = /^-?(?:0|[1-9][0-9]*)$/, r.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, r.longToHash = function (e) { return e ? r.LongBits.from(e).toHash() : r.LongBits.zeroHash }, r.longFromHash = function (e, t) { var i = r.LongBits.fromHash(e); return r.Long ? r.Long.fromBits(i.lo, i.hi, t) : i.toNumber(Boolean(t)) }, r.merge = o, r.lcFirst = function (e) { return e.charAt(0).toLowerCase() + e.substring(1) }, r.newError = n, r.ProtocolError = n("ProtocolError"), r.oneOfGetter = function (e) { for (var t = {}, i = 0; i < e.length; ++i)t[e[i]] = 1; return function () { for (var e = Object.keys(this), i = e.length - 1; i > -1; --i)if (1 === t[e[i]] && void 0 !== this[e[i]] && null !== this[e[i]]) return e[i] } }, r.oneOfSetter = function (e) { return function (t) { for (var i = 0; i < e.length; ++i)e[i] !== t && delete this[e[i]] } }, r.toJSONOptions = { longs: String, enums: String, bytes: String, json: !0 }, r._configure = function () { var e = r.Buffer; e ? (r._Buffer_from = e.from !== Uint8Array.from && e.from || function (t, i) { return new e(t, i) }, r._Buffer_allocUnsafe = e.allocUnsafe || function (t) { return new e(t) }) : r._Buffer_from = r._Buffer_allocUnsafe = null } }, 123: (e, t, i) => { "use strict"; e.exports = u; var r, o = i(4165), n = o.LongBits, s = o.base64, a = o.utf8; function d(e, t, i) { this.fn = e, this.len = t, this.next = void 0, this.val = i } function l() { } function c(e) { this.head = e.head, this.tail = e.tail, this.len = e.len, this.next = e.states } function u() { this.len = 0, this.head = new d(l, 0, 0), this.tail = this.head, this.states = null } var h = function () { return o.Buffer ? function () { return (u.create = function () { return new r })() } : function () { return new u } }; function p(e, t, i) { t[i] = 255 & e } function m(e, t) { this.len = e, this.next = void 0, this.val = t } function f(e, t, i) { for (; e.hi;)t[i++] = 127 & e.lo | 128, e.lo = (e.lo >>> 7 | e.hi << 25) >>> 0, e.hi >>>= 7; for (; e.lo > 127;)t[i++] = 127 & e.lo | 128, e.lo = e.lo >>> 7; t[i++] = e.lo } function g(e, t, i) { t[i] = 255 & e, t[i + 1] = e >>> 8 & 255, t[i + 2] = e >>> 16 & 255, t[i + 3] = e >>> 24 } u.create = h(), u.alloc = function (e) { return new o.Array(e) }, o.Array !== Array && (u.alloc = o.pool(u.alloc, o.Array.prototype.subarray)), u.prototype._push = function (e, t, i) { return this.tail = this.tail.next = new d(e, t, i), this.len += t, this }, m.prototype = Object.create(d.prototype), m.prototype.fn = function (e, t, i) { for (; e > 127;)t[i++] = 127 & e | 128, e >>>= 7; t[i] = e }, u.prototype.uint32 = function (e) { return this.len += (this.tail = this.tail.next = new m((e >>>= 0) < 128 ? 1 : e < 16384 ? 2 : e < 2097152 ? 3 : e < 268435456 ? 4 : 5, e)).len, this }, u.prototype.int32 = function (e) { return e < 0 ? this._push(f, 10, n.fromNumber(e)) : this.uint32(e) }, u.prototype.sint32 = function (e) { return this.uint32((e << 1 ^ e >> 31) >>> 0) }, u.prototype.uint64 = function (e) { var t = n.from(e); return this._push(f, t.length(), t) }, u.prototype.int64 = u.prototype.uint64, u.prototype.sint64 = function (e) { var t = n.from(e).zzEncode(); return this._push(f, t.length(), t) }, u.prototype.bool = function (e) { return this._push(p, 1, e ? 1 : 0) }, u.prototype.fixed32 = function (e) { return this._push(g, 4, e >>> 0) }, u.prototype.sfixed32 = u.prototype.fixed32, u.prototype.fixed64 = function (e) { var t = n.from(e); return this._push(g, 4, t.lo)._push(g, 4, t.hi) }, u.prototype.sfixed64 = u.prototype.fixed64, u.prototype.float = function (e) { return this._push(o.float.writeFloatLE, 4, e) }, u.prototype.double = function (e) { return this._push(o.float.writeDoubleLE, 8, e) }; var b = o.Array.prototype.set ? function (e, t, i) { t.set(e, i) } : function (e, t, i) { for (var r = 0; r < e.length; ++r)t[i + r] = e[r] }; u.prototype.bytes = function (e) { var t = e.length >>> 0; if (!t) return this._push(p, 1, 0); if (o.isString(e)) { var i = u.alloc(t = s.length(e)); s.decode(e, i, 0), e = i } return this.uint32(t)._push(b, t, e) }, u.prototype.string = function (e) { var t = a.length(e); return t ? this.uint32(t)._push(a.write, t, e) : this._push(p, 1, 0) }, u.prototype.fork = function () { return this.states = new c(this), this.head = this.tail = new d(l, 0, 0), this.len = 0, this }, u.prototype.reset = function () { return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new d(l, 0, 0), this.len = 0), this }, u.prototype.ldelim = function () { var e = this.head, t = this.tail, i = this.len; return this.reset().uint32(i), i && (this.tail.next = e.next, this.tail = t, this.len += i), this }, u.prototype.finish = function () { for (var e = this.head.next, t = this.constructor.alloc(this.len), i = 0; e;)e.fn(e.val, t, i), i += e.len, e = e.next; return t }, u._configure = function (e) { r = e, u.create = h(), r._configure() } }, 6673: (e, t, i) => { "use strict"; e.exports = n; var r = i(123); (n.prototype = Object.create(r.prototype)).constructor = n; var o = i(4165); function n() { r.call(this) } function s(e, t, i) { e.length < 40 ? o.utf8.write(e, t, i) : t.utf8Write ? t.utf8Write(e, i) : t.write(e, i) } n._configure = function () { n.alloc = o._Buffer_allocUnsafe, n.writeBytesBuffer = o.Buffer && o.Buffer.prototype instanceof Uint8Array && "set" === o.Buffer.prototype.set.name ? function (e, t, i) { t.set(e, i) } : function (e, t, i) { if (e.copy) e.copy(t, i, 0, e.length); else for (var r = 0; r < e.length;)t[i++] = e[r++] } }, n.prototype.bytes = function (e) { o.isString(e) && (e = o._Buffer_from(e, "base64")); var t = e.length >>> 0; return this.uint32(t), t && this._push(n.writeBytesBuffer, t, e), this }, n.prototype.string = function (e) { var t = o.Buffer.byteLength(e); return this.uint32(t), t && this._push(s, t, e), this }, n._configure() }, 5163: (e, t, i) => { "use strict"; i.r(t), i.d(t, { __assign: () => n, __asyncDelegator: () => w, __asyncGenerator: () => y, __asyncValues: () => S, __await: () => v, __awaiter: () => c, __classPrivateFieldGet: () => C, __classPrivateFieldSet: () => I, __createBinding: () => h, __decorate: () => a, __exportStar: () => p, __extends: () => o, __generator: () => u, __importDefault: () => _, __importStar: () => k, __makeTemplateObject: () => x, __metadata: () => l, __param: () => d, __read: () => f, __rest: () => s, __spread: () => g, __spreadArrays: () => b, __values: () => m }); var r = function (e, t) { return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) }, r(e, t) }; function o(e, t) { function i() { this.constructor = e } r(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i) } var n = function () { return n = Object.assign || function (e) { for (var t, i = 1, r = arguments.length; i < r; i++)for (var o in t = arguments[i]) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]); return e }, n.apply(this, arguments) }; function s(e, t) { var i = {}; for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (i[r] = e[r]); if (null != e && "function" == typeof Object.getOwnPropertySymbols) { var o = 0; for (r = Object.getOwnPropertySymbols(e); o < r.length; o++)t.indexOf(r[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[o]) && (i[r[o]] = e[r[o]]) } return i } function a(e, t, i, r) { var o, n = arguments.length, s = n < 3 ? t : null === r ? r = Object.getOwnPropertyDescriptor(t, i) : r; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, r); else for (var a = e.length - 1; a >= 0; a--)(o = e[a]) && (s = (n < 3 ? o(s) : n > 3 ? o(t, i, s) : o(t, i)) || s); return n > 3 && s && Object.defineProperty(t, i, s), s } function d(e, t) { return function (i, r) { t(i, r, e) } } function l(e, t) { if ("object" == typeof Reflect && "function" == typeof Reflect.metadata) return Reflect.metadata(e, t) } function c(e, t, i, r) { return new (i || (i = Promise))((function (o, n) { function s(e) { try { d(r.next(e)) } catch (e) { n(e) } } function a(e) { try { d(r.throw(e)) } catch (e) { n(e) } } function d(e) { var t; e.done ? o(e.value) : (t = e.value, t instanceof i ? t : new i((function (e) { e(t) }))).then(s, a) } d((r = r.apply(e, t || [])).next()) })) } function u(e, t) { var i, r, o, n, s = { label: 0, sent: function () { if (1 & o[0]) throw o[1]; return o[1] }, trys: [], ops: [] }; return n = { next: a(0), throw: a(1), return: a(2) }, "function" == typeof Symbol && (n[Symbol.iterator] = function () { return this }), n; function a(n) { return function (a) { return function (n) { if (i) throw new TypeError("Generator is already executing."); for (; s;)try { if (i = 1, r && (o = 2 & n[0] ? r.return : n[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, n[1])).done) return o; switch (r = 0, o && (n = [2 & n[0], o.value]), n[0]) { case 0: case 1: o = n; break; case 4: return s.label++, { value: n[1], done: !1 }; case 5: s.label++, r = n[1], n = [0]; continue; case 7: n = s.ops.pop(), s.trys.pop(); continue; default: if (!((o = (o = s.trys).length > 0 && o[o.length - 1]) || 6 !== n[0] && 2 !== n[0])) { s = 0; continue } if (3 === n[0] && (!o || n[1] > o[0] && n[1] < o[3])) { s.label = n[1]; break } if (6 === n[0] && s.label < o[1]) { s.label = o[1], o = n; break } if (o && s.label < o[2]) { s.label = o[2], s.ops.push(n); break } o[2] && s.ops.pop(), s.trys.pop(); continue }n = t.call(e, s) } catch (e) { n = [6, e], r = 0 } finally { i = o = 0 } if (5 & n[0]) throw n[1]; return { value: n[0] ? n[1] : void 0, done: !0 } }([n, a]) } } } function h(e, t, i, r) { void 0 === r && (r = i), e[r] = t[i] } function p(e, t) { for (var i in e) "default" === i || t.hasOwnProperty(i) || (t[i] = e[i]) } function m(e) { var t = "function" == typeof Symbol && Symbol.iterator, i = t && e[t], r = 0; if (i) return i.call(e); if (e && "number" == typeof e.length) return { next: function () { return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e } } }; throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.") } function f(e, t) { var i = "function" == typeof Symbol && e[Symbol.iterator]; if (!i) return e; var r, o, n = i.call(e), s = []; try { for (; (void 0 === t || t-- > 0) && !(r = n.next()).done;)s.push(r.value) } catch (e) { o = { error: e } } finally { try { r && !r.done && (i = n.return) && i.call(n) } finally { if (o) throw o.error } } return s } function g() { for (var e = [], t = 0; t < arguments.length; t++)e = e.concat(f(arguments[t])); return e } function b() { for (var e = 0, t = 0, i = arguments.length; t < i; t++)e += arguments[t].length; var r = Array(e), o = 0; for (t = 0; t < i; t++)for (var n = arguments[t], s = 0, a = n.length; s < a; s++, o++)r[o] = n[s]; return r } function v(e) { return this instanceof v ? (this.v = e, this) : new v(e) } function y(e, t, i) { if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined."); var r, o = i.apply(e, t || []), n = []; return r = {}, s("next"), s("throw"), s("return"), r[Symbol.asyncIterator] = function () { return this }, r; function s(e) { o[e] && (r[e] = function (t) { return new Promise((function (i, r) { n.push([e, t, i, r]) > 1 || a(e, t) })) }) } function a(e, t) { try { (i = o[e](t)).value instanceof v ? Promise.resolve(i.value.v).then(d, l) : c(n[0][2], i) } catch (e) { c(n[0][3], e) } var i } function d(e) { a("next", e) } function l(e) { a("throw", e) } function c(e, t) { e(t), n.shift(), n.length && a(n[0][0], n[0][1]) } } function w(e) { var t, i; return t = {}, r("next"), r("throw", (function (e) { throw e })), r("return"), t[Symbol.iterator] = function () { return this }, t; function r(r, o) { t[r] = e[r] ? function (t) { return (i = !i) ? { value: v(e[r](t)), done: "return" === r } : o ? o(t) : t } : o } } function S(e) { if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined."); var t, i = e[Symbol.asyncIterator]; return i ? i.call(e) : (e = m(e), t = {}, r("next"), r("throw"), r("return"), t[Symbol.asyncIterator] = function () { return this }, t); function r(i) { t[i] = e[i] && function (t) { return new Promise((function (r, o) { !function (e, t, i, r) { Promise.resolve(r).then((function (t) { e({ value: t, done: i }) }), t) }(r, o, (t = e[i](t)).done, t.value) })) } } } function x(e, t) { return Object.defineProperty ? Object.defineProperty(e, "raw", { value: t }) : e.raw = t, e } function k(e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var i in e) Object.hasOwnProperty.call(e, i) && (t[i] = e[i]); return t.default = e, t } function _(e) { return e && e.__esModule ? e : { default: e } } function C(e, t) { if (!t.has(e)) throw new TypeError("attempted to get private field on non-instance"); return t.get(e) } function I(e, t, i) { if (!t.has(e)) throw new TypeError("attempted to set private field on non-instance"); return t.set(e, i), i } }, 6353: function (e, t, i) { var r; !function (o, n) { "use strict"; var s = "function", a = "undefined", d = "object", l = "string", c = "model", u = "name", h = "type", p = "vendor", m = "version", f = "architecture", g = "console", b = "mobile", v = "tablet", y = "smarttv", w = "wearable", S = "embedded", x = "Amazon", k = "Apple", _ = "ASUS", C = "BlackBerry", I = "Google", T = "Huawei", E = "LG", A = "Microsoft", M = "Motorola", O = "Samsung", P = "Sony", D = "Xiaomi", R = "Zebra", L = "Facebook", B = function (e) { for (var t = {}, i = 0; i < e.length; i++)t[e[i].toUpperCase()] = e[i]; return t }, V = function (e, t) { return typeof e === l && -1 !== F(t).indexOf(F(e)) }, F = function (e) { return e.toLowerCase() }, N = function (e, t) { if (typeof e === l) return e = e.replace(/^\s\s*/, "").replace(/\s\s*$/, ""), typeof t === a ? e : e.substring(0, 255) }, j = function (e, t) { for (var i, r, o, a, l, c, u = 0; u < t.length && !l;) { var h = t[u], p = t[u + 1]; for (i = r = 0; i < h.length && !l;)if (l = h[i++].exec(e)) for (o = 0; o < p.length; o++)c = l[++r], typeof (a = p[o]) === d && a.length > 0 ? 2 === a.length ? typeof a[1] == s ? this[a[0]] = a[1].call(this, c) : this[a[0]] = a[1] : 3 === a.length ? typeof a[1] !== s || a[1].exec && a[1].test ? this[a[0]] = c ? c.replace(a[1], a[2]) : n : this[a[0]] = c ? a[1].call(this, c, a[2]) : n : 4 === a.length && (this[a[0]] = c ? a[3].call(this, c.replace(a[1], a[2])) : n) : this[a] = c || n; u += 2 } }, U = function (e, t) { for (var i in t) if (typeof t[i] === d && t[i].length > 0) { for (var r = 0; r < t[i].length; r++)if (V(t[i][r], e)) return "?" === i ? n : i } else if (V(t[i], e)) return "?" === i ? n : i; return e }, z = { ME: "4.90", "NT 3.11": "NT3.51", "NT 4.0": "NT4.0", 2e3: "NT 5.0", XP: ["NT 5.1", "NT 5.2"], Vista: "NT 6.0", 7: "NT 6.1", 8: "NT 6.2", 8.1: "NT 6.3", 10: ["NT 6.4", "NT 10.0"], RT: "ARM" }, $ = { browser: [[/\b(?:crmo|crios)\/([\w\.]+)/i], [m, [u, "Chrome"]], [/edg(?:e|ios|a)?\/([\w\.]+)/i], [m, [u, "Edge"]], [/(opera mini)\/([-\w\.]+)/i, /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i, /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i], [u, m], [/opios[\/ ]+([\w\.]+)/i], [m, [u, "Opera Mini"]], [/\bopr\/([\w\.]+)/i], [m, [u, "Opera"]], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i, /(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i, /(ba?idubrowser)[\/ ]?([\w\.]+)/i, /(?:ms|\()(ie) ([\w\.]+)/i, /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i, /(weibo)__([\d\.]+)/i], [u, m], [/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i], [m, [u, "UCBrowser"]], [/\bqbcore\/([\w\.]+)/i], [m, [u, "WeChat(Win) Desktop"]], [/micromessenger\/([\w\.]+)/i], [m, [u, "WeChat"]], [/konqueror\/([\w\.]+)/i], [m, [u, "Konqueror"]], [/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i], [m, [u, "IE"]], [/yabrowser\/([\w\.]+)/i], [m, [u, "Yandex"]], [/(avast|avg)\/([\w\.]+)/i], [[u, /(.+)/, "$1 Secure Browser"], m], [/\bfocus\/([\w\.]+)/i], [m, [u, "Firefox Focus"]], [/\bopt\/([\w\.]+)/i], [m, [u, "Opera Touch"]], [/coc_coc\w+\/([\w\.]+)/i], [m, [u, "Coc Coc"]], [/dolfin\/([\w\.]+)/i], [m, [u, "Dolphin"]], [/coast\/([\w\.]+)/i], [m, [u, "Opera Coast"]], [/miuibrowser\/([\w\.]+)/i], [m, [u, "MIUI Browser"]], [/fxios\/([-\w\.]+)/i], [m, [u, "Firefox"]], [/\bqihu|(qi?ho?o?|360)browser/i], [[u, "360 Browser"]], [/(oculus|samsung|sailfish)browser\/([\w\.]+)/i], [[u, /(.+)/, "$1 Browser"], m], [/(comodo_dragon)\/([\w\.]+)/i], [[u, /_/g, " "], m], [/(electron)\/([\w\.]+) safari/i, /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i, /m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i], [u, m], [/(metasr)[\/ ]?([\w\.]+)/i, /(lbbrowser)/i], [u], [/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i], [[u, L], m], [/safari (line)\/([\w\.]+)/i, /\b(line)\/([\w\.]+)\/iab/i, /(chromium|instagram)[\/ ]([-\w\.]+)/i], [u, m], [/\bgsa\/([\w\.]+) .*safari\//i], [m, [u, "GSA"]], [/headlesschrome(?:\/([\w\.]+)| )/i], [m, [u, "Chrome Headless"]], [/ wv\).+(chrome)\/([\w\.]+)/i], [[u, "Chrome WebView"], m], [/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i], [m, [u, "Android Browser"]], [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i], [u, m], [/version\/([\w\.]+) .*mobile\/\w+ (safari)/i], [m, [u, "Mobile Safari"]], [/version\/([\w\.]+) .*(mobile ?safari|safari)/i], [m, u], [/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i], [u, [m, U, { "1.0": "/8", 1.2: "/1", 1.3: "/3", "2.0": "/412", "2.0.2": "/416", "2.0.3": "/417", "2.0.4": "/419", "?": "/" }]], [/(webkit|khtml)\/([\w\.]+)/i], [u, m], [/(navigator|netscape\d?)\/([-\w\.]+)/i], [[u, "Netscape"], m], [/mobile vr; rv:([\w\.]+)\).+firefox/i], [m, [u, "Firefox Reality"]], [/ekiohf.+(flow)\/([\w\.]+)/i, /(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i, /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i, /(firefox)\/([\w\.]+)/i, /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i, /(links) \(([\w\.]+)/i], [u, m]], cpu: [[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i], [[f, "amd64"]], [/(ia32(?=;))/i], [[f, F]], [/((?:i[346]|x)86)[;\)]/i], [[f, "ia32"]], [/\b(aarch64|arm(v?8e?l?|_?64))\b/i], [[f, "arm64"]], [/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i], [[f, "armhf"]], [/windows (ce|mobile); ppc;/i], [[f, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i], [[f, /ower/, "", F]], [/(sun4\w)[;\)]/i], [[f, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i], [[f, F]]], device: [[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i], [c, [p, O], [h, v]], [/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i, /samsung[- ]([-\w]+)/i, /sec-(sgh\w+)/i], [c, [p, O], [h, b]], [/\((ip(?:hone|od)[\w ]*);/i], [c, [p, k], [h, b]], [/\((ipad);[-\w\),; ]+apple/i, /applecoremedia\/[\w\.]+ \((ipad)/i, /\b(ipad)\d\d?,\d\d?[;\]].+ios/i], [c, [p, k], [h, v]], [/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i], [c, [p, T], [h, v]], [/(?:huawei|honor)([-\w ]+)[;\)]/i, /\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i], [c, [p, T], [h, b]], [/\b(poco[\w ]+)(?: bui|\))/i, /\b; (\w+) build\/hm\1/i, /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i, /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i, /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i], [[c, /_/g, " "], [p, D], [h, b]], [/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i], [[c, /_/g, " "], [p, D], [h, v]], [/; (\w+) bui.+ oppo/i, /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i], [c, [p, "OPPO"], [h, b]], [/vivo (\w+)(?: bui|\))/i, /\b(v[12]\d{3}\w?[at])(?: bui|;)/i], [c, [p, "Vivo"], [h, b]], [/\b(rmx[12]\d{3})(?: bui|;|\))/i], [c, [p, "Realme"], [h, b]], [/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i, /\bmot(?:orola)?[- ](\w*)/i, /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i], [c, [p, M], [h, b]], [/\b(mz60\d|xoom[2 ]{0,2}) build\//i], [c, [p, M], [h, v]], [/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i], [c, [p, E], [h, v]], [/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i, /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i, /\blg-?([\d\w]+) bui/i], [c, [p, E], [h, b]], [/(ideatab[-\w ]+)/i, /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i], [c, [p, "Lenovo"], [h, v]], [/(?:maemo|nokia).*(n900|lumia \d+)/i, /nokia[-_ ]?([-\w\.]*)/i], [[c, /_/g, " "], [p, "Nokia"], [h, b]], [/(pixel c)\b/i], [c, [p, I], [h, v]], [/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i], [c, [p, I], [h, b]], [/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i], [c, [p, P], [h, b]], [/sony tablet [ps]/i, /\b(?:sony)?sgp\w+(?: bui|\))/i], [[c, "Xperia Tablet"], [p, P], [h, v]], [/ (kb2005|in20[12]5|be20[12][59])\b/i, /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i], [c, [p, "OnePlus"], [h, b]], [/(alexa)webm/i, /(kf[a-z]{2}wi)( bui|\))/i, /(kf[a-z]+)( bui|\)).+silk\//i], [c, [p, x], [h, v]], [/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i], [[c, /(.+)/g, "Fire Phone $1"], [p, x], [h, b]], [/(playbook);[-\w\),; ]+(rim)/i], [c, p, [h, v]], [/\b((?:bb[a-f]|st[hv])100-\d)/i, /\(bb10; (\w+)/i], [c, [p, C], [h, b]], [/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i], [c, [p, _], [h, v]], [/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i], [c, [p, _], [h, b]], [/(nexus 9)/i], [c, [p, "HTC"], [h, v]], [/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i, /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i, /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i], [p, [c, /_/g, " "], [h, b]], [/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i], [c, [p, "Acer"], [h, v]], [/droid.+; (m[1-5] note) bui/i, /\bmz-([-\w]{2,})/i], [c, [p, "Meizu"], [h, b]], [/\b(sh-?[altvz]?\d\d[a-ekm]?)/i], [c, [p, "Sharp"], [h, b]], [/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i, /(hp) ([\w ]+\w)/i, /(asus)-?(\w+)/i, /(microsoft); (lumia[\w ]+)/i, /(lenovo)[-_ ]?([-\w]+)/i, /(jolla)/i, /(oppo) ?([\w ]+) bui/i], [p, c, [h, b]], [/(archos) (gamepad2?)/i, /(hp).+(touchpad(?!.+tablet)|tablet)/i, /(kindle)\/([\w\.]+)/i, /(nook)[\w ]+build\/(\w+)/i, /(dell) (strea[kpr\d ]*[\dko])/i, /(le[- ]+pan)[- ]+(\w{1,9}) bui/i, /(trinity)[- ]*(t\d{3}) bui/i, /(gigaset)[- ]+(q\w{1,9}) bui/i, /(vodafone) ([\w ]+)(?:\)| bui)/i], [p, c, [h, v]], [/(surface duo)/i], [c, [p, A], [h, v]], [/droid [\d\.]+; (fp\du?)(?: b|\))/i], [c, [p, "Fairphone"], [h, b]], [/(u304aa)/i], [c, [p, "AT&T"], [h, b]], [/\bsie-(\w*)/i], [c, [p, "Siemens"], [h, b]], [/\b(rct\w+) b/i], [c, [p, "RCA"], [h, v]], [/\b(venue[\d ]{2,7}) b/i], [c, [p, "Dell"], [h, v]], [/\b(q(?:mv|ta)\w+) b/i], [c, [p, "Verizon"], [h, v]], [/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i], [c, [p, "Barnes & Noble"], [h, v]], [/\b(tm\d{3}\w+) b/i], [c, [p, "NuVision"], [h, v]], [/\b(k88) b/i], [c, [p, "ZTE"], [h, v]], [/\b(nx\d{3}j) b/i], [c, [p, "ZTE"], [h, b]], [/\b(gen\d{3}) b.+49h/i], [c, [p, "Swiss"], [h, b]], [/\b(zur\d{3}) b/i], [c, [p, "Swiss"], [h, v]], [/\b((zeki)?tb.*\b) b/i], [c, [p, "Zeki"], [h, v]], [/\b([yr]\d{2}) b/i, /\b(dragon[- ]+touch |dt)(\w{5}) b/i], [[p, "Dragon Touch"], c, [h, v]], [/\b(ns-?\w{0,9}) b/i], [c, [p, "Insignia"], [h, v]], [/\b((nxa|next)-?\w{0,9}) b/i], [c, [p, "NextBook"], [h, v]], [/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i], [[p, "Voice"], c, [h, b]], [/\b(lvtel\-)?(v1[12]) b/i], [[p, "LvTel"], c, [h, b]], [/\b(ph-1) /i], [c, [p, "Essential"], [h, b]], [/\b(v(100md|700na|7011|917g).*\b) b/i], [c, [p, "Envizen"], [h, v]], [/\b(trio[-\w\. ]+) b/i], [c, [p, "MachSpeed"], [h, v]], [/\btu_(1491) b/i], [c, [p, "Rotor"], [h, v]], [/(shield[\w ]+) b/i], [c, [p, "Nvidia"], [h, v]], [/(sprint) (\w+)/i], [p, c, [h, b]], [/(kin\.[onetw]{3})/i], [[c, /\./g, " "], [p, A], [h, b]], [/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i], [c, [p, R], [h, v]], [/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i], [c, [p, R], [h, b]], [/(ouya)/i, /(nintendo) ([wids3utch]+)/i], [p, c, [h, g]], [/droid.+; (shield) bui/i], [c, [p, "Nvidia"], [h, g]], [/(playstation [345portablevi]+)/i], [c, [p, P], [h, g]], [/\b(xbox(?: one)?(?!; xbox))[\); ]/i], [c, [p, A], [h, g]], [/smart-tv.+(samsung)/i], [p, [h, y]], [/hbbtv.+maple;(\d+)/i], [[c, /^/, "SmartTV"], [p, O], [h, y]], [/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i], [[p, E], [h, y]], [/(apple) ?tv/i], [p, [c, "Apple TV"], [h, y]], [/crkey/i], [[c, "Chromecast"], [p, I], [h, y]], [/droid.+aft(\w)( bui|\))/i], [c, [p, x], [h, y]], [/\(dtv[\);].+(aquos)/i], [c, [p, "Sharp"], [h, y]], [/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i, /hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i], [[p, N], [c, N], [h, y]], [/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i], [[h, y]], [/((pebble))app/i], [p, c, [h, w]], [/droid.+; (glass) \d/i], [c, [p, I], [h, w]], [/droid.+; (wt63?0{2,3})\)/i], [c, [p, R], [h, w]], [/(quest( 2)?)/i], [c, [p, L], [h, w]], [/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i], [p, [h, S]], [/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i], [c, [h, b]], [/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i], [c, [h, v]], [/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i], [[h, v]], [/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i], [[h, b]], [/(android[-\w\. ]{0,9});.+buil/i], [c, [p, "Generic"]]], engine: [[/windows.+ edge\/([\w\.]+)/i], [m, [u, "EdgeHTML"]], [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i], [m, [u, "Blink"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /ekioh(flow)\/([\w\.]+)/i, /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i, /(icab)[\/ ]([23]\.[\d\.]+)/i], [u, m], [/rv\:([\w\.]{1,9})\b.+(gecko)/i], [m, u]], os: [[/microsoft (windows) (vista|xp)/i], [u, m], [/(windows) nt 6\.2; (arm)/i, /(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i, /(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i], [u, [m, U, z]], [/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i], [[u, "Windows"], [m, U, z]], [/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i, /cfnetwork\/.+darwin/i], [[m, /_/g, "."], [u, "iOS"]], [/(mac os x) ?([\w\. ]*)/i, /(macintosh|mac_powerpc\b)(?!.+haiku)/i], [[u, "Mac OS"], [m, /_/g, "."]], [/droid ([\w\.]+)\b.+(android[- ]x86)/i], [m, u], [/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i, /(blackberry)\w*\/([\w\.]*)/i, /(tizen|kaios)[\/ ]([\w\.]+)/i, /\((series40);/i], [u, m], [/\(bb(10);/i], [m, [u, C]], [/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i], [m, [u, "Symbian"]], [/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i], [m, [u, "Firefox OS"]], [/web0s;.+rt(tv)/i, /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i], [m, [u, "webOS"]], [/crkey\/([\d\.]+)/i], [m, [u, "Chromecast"]], [/(cros) [\w]+ ([\w\.]+\w)/i], [[u, "Chromium OS"], m], [/(nintendo|playstation) ([wids345portablevuch]+)/i, /(xbox); +xbox ([^\);]+)/i, /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i, /(mint)[\/\(\) ]?(\w*)/i, /(mageia|vectorlinux)[; ]/i, /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i, /(hurd|linux) ?([\w\.]*)/i, /(gnu) ?([\w\.]*)/i, /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i, /(haiku) (\w+)/i], [u, m], [/(sunos) ?([\w\.\d]*)/i], [[u, "Solaris"], m], [/((?:open)?solaris)[-\/ ]?([\w\.]*)/i, /(aix) ((\d)(?=\.|\)| )[\w\.])*/i, /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i, /(unix) ?([\w\.]*)/i], [u, m]] }, H = function (e, t) { if (typeof e === d && (t = e, e = n), !(this instanceof H)) return new H(e, t).getResult(); var i = e || (typeof o !== a && o.navigator && o.navigator.userAgent ? o.navigator.userAgent : ""), r = t ? function (e, t) { var i = {}; for (var r in e) t[r] && t[r].length % 2 == 0 ? i[r] = t[r].concat(e[r]) : i[r] = e[r]; return i }($, t) : $; return this.getBrowser = function () { var e, t = {}; return t.name = n, t.version = n, j.call(t, i, r.browser), t.major = typeof (e = t.version) === l ? e.replace(/[^\d\.]/g, "").split(".")[0] : n, t }, this.getCPU = function () { var e = {}; return e.architecture = n, j.call(e, i, r.cpu), e }, this.getDevice = function () { var e = {}; return e.vendor = n, e.model = n, e.type = n, j.call(e, i, r.device), e }, this.getEngine = function () { var e = {}; return e.name = n, e.version = n, j.call(e, i, r.engine), e }, this.getOS = function () { var e = {}; return e.name = n, e.version = n, j.call(e, i, r.os), e }, this.getResult = function () { return { ua: this.getUA(), browser: this.getBrowser(), engine: this.getEngine(), os: this.getOS(), device: this.getDevice(), cpu: this.getCPU() } }, this.getUA = function () { return i }, this.setUA = function (e) { return i = typeof e === l && e.length > 255 ? N(e, 255) : e, this }, this.setUA(i), this }; H.VERSION = "1.0.2", H.BROWSER = B([u, m, "major"]), H.CPU = B([f]), H.DEVICE = B([c, p, h, g, b, y, v, w, S]), H.ENGINE = H.OS = B([u, m]), typeof t !== a ? (e.exports && (t = e.exports = H), t.UAParser = H) : i.amdO ? (r = function () { return H }.call(t, i, t, e)) === n || (e.exports = r) : typeof o !== a && (o.UAParser = H); var W = typeof o !== a && (o.jQuery || o.Zepto); if (W && !W.ua) { var q = new H; W.ua = q.getResult(), W.ua.get = function () { return q.getUA() }, W.ua.set = function (e) { q.setUA(e); var t = q.getResult(); for (var i in t) W.ua[i] = t[i] } } }("object" == typeof window ? window : this) }, 2204: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e" }, 1763: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23969fa8%27/%3e%3c/svg%3e" }, 2469: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e" }, 7486: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e" }, 15: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23e74c3c%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23e74c3c%27 stroke=%27none%27/%3e%3c/svg%3e" }, 6254: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z%27/%3e%3c/svg%3e" }, 8179: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23283848%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e" }, 5647: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e" }, 1692: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e" }, 6529: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27var%28--bs-body-color%29%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e" }, 6770: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e" }, 8931: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e" }, 6199: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27m6 10 3 3 6-6%27/%3e%3c/svg%3e" }, 1116: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e" }, 1217: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e" }, 9134: e => { "use strict"; e.exports = "data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%2318bc9c%27 d=%27M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e" }, 8309: e => { "use strict"; e.exports = '<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">\n  <path d="M3.5 0l-.5 1.19c-.1.03-.19.08-.28.13l-1.19-.5-.72.72.5 1.19c-.05.1-.09.18-.13.28l-1.19.5v1l1.19.5c.04.1.08.18.13.28l-.5 1.19.72.72 1.19-.5c.09.04.18.09.28.13l.5 1.19h1l.5-1.19c.09-.04.19-.08.28-.13l1.19.5.72-.72-.5-1.19c.04-.09.09-.19.13-.28l1.19-.5v-1l-1.19-.5c-.03-.09-.08-.19-.13-.28l.5-1.19-.72-.72-1.19.5c-.09-.04-.19-.09-.28-.13l-.5-1.19h-1zm.5 2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z"\n  />\n</svg>' }, 5485: e => { "use strict"; e.exports = JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}') } }, __webpack_module_cache__ = {}; function __webpack_require__(e) { var t = __webpack_module_cache__[e]; if (void 0 !== t) return t.exports; var i = __webpack_module_cache__[e] = { id: e, exports: {} }; return __webpack_modules__[e].call(i.exports, i, i.exports, __webpack_require__), i.exports } __webpack_require__.m = __webpack_modules__, __webpack_require__.amdO = {}, __webpack_require__.n = e => { var t = e && e.__esModule ? () => e.default : () => e; return __webpack_require__.d(t, { a: t }), t }, __webpack_require__.d = (e, t) => { for (var i in t) __webpack_require__.o(t, i) && !__webpack_require__.o(e, i) && Object.defineProperty(e, i, { enumerable: !0, get: t[i] }) }, __webpack_require__.g = function () { if ("object" == typeof globalThis) return globalThis; try { return this || new Function("return this")() } catch (e) { if ("object" == typeof window) return window } }(), __webpack_require__.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t), __webpack_require__.r = e => { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, __webpack_require__.b = document.baseURI || self.location.href, __webpack_require__.nc = void 0; var __webpack_exports__ = __webpack_require__(988); app_meetingV2 = __webpack_exports__ })();</script>
</head>

<body>
  <div id="flow-fatal" class="flow">
    <div style="vertical-align: middle; text-align: left; width: 40%; margin: 10em 30% 10em 30%;">
      <h1>Fatal error</h1>
      <p>An error was thrown that should not occur in ordinary use. This should be considered a fatal error for testing
        and canary purposes.</p>
      <p>This error will ordinarily be muffled, but you should consider removing this code if you are building an app
        based on this demo.</p><code id="stack"></code>
    </div>
  </div>
  <div id="flow-authenticate" class="flow text-center p-2">
    <div class="text-muted" style="position:fixed;right:3px;bottom:3px" id="sdk-version"></div>
    <div class="container">
      <form id="form-authenticate">
        <h1 class="h3 mb-3 fw-normal">Join a meeting</h1>
        <div class="form-floating row mt-3"><input type="name" id="inputMeeting" class="form-control"
            placeholder="Meeting Title or ID" required autofocus> <label for="inputMeeting"
            style="text-align: left;">Meeting Title or ID</label></div>
        <div class="form-floating row mt-3"><input type="name" id="inputName" class="form-control"
            placeholder="Your Name" required> <label for="inputName" style="text-align: left;">Your Name</label></div>
        <div class="form-floating row mt-3" title="Used only for meeting creation. Ignored if meeting already exists">
          <select id="inputRegion" class="form-select" style="width:100%">
            <option value="us-east-1" selected="selected">United States (N. Virginia)</option>
            <option value="ap-northeast-1">Japan (Tokyo)</option>
            <option value="ap-southeast-1">Singapore</option>
            <option value="af-south-1">South Africa (Cape Town)</option>
            <option value="eu-south-1">Italy (Milan)</option>
            <option value="ap-south-1">India (Mumbai)</option>
            <option value="ap-northeast-2">South Korea (Seoul)</option>
            <option value="ap-southeast-2">Australia (Sydney)</option>
            <option value="ca-central-1">Canada</option>
            <option value="eu-central-1">Germany (Frankfurt)</option>
            <option value="eu-north-1">Sweden (Stockholm)</option>
            <option value="eu-west-1">Ireland</option>
            <option value="eu-west-2">United Kingdom (London)</option>
            <option value="eu-west-3">France (Paris)</option>
            <option value="sa-east-1">Brazil (São Paulo)</option>
            <option value="us-east-2">United States (Ohio)</option>
            <option value="us-west-1">United States (N. California)</option>
            <option value="us-west-2">United States (Oregon)</option>
            <option value="us-gov-west-1">GovCloud (US-West)</option>
            <option value="us-gov-east-1">GovCloud (US-East)</option>
          </select> <label for="inputRegion" style="text-align: left;">Media Region</label>
        </div>
        <div class="row mt-3"><button type="button" class="btn btn-outline-secondary h-50 d-sm-block"
            data-bs-toggle="modal" id="additional-options-button" data-bs-target="#additional-options-modal">Additional
            Options</button></div>
        <div class="row mt-3">
          <div class="btn-group p-0" role="group"><button id="authenticate" class="btn btn-lg btn-secondary w-100"
              type="submit">Continue</button> <button id="quick-join" class="btn btn-lg btn-success"
              title="Skip Device Selection"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"
                viewBox="0 0 8 8">
                <path d="M3 0l-3 5h2v3l3-5h-2v-3z" transform="translate(1)" />
              </svg></button></div>
        </div>
        <div class="row mt-3">
          <p>Anyone with access to the meeting link can join.</p>
        </div>
        <div class="row mt-3"><a id="to-sip-flow" href="#">Joining via SIP? Click here.</a></div>
        <div class="row mt-3">
          <div id="progress-authenticate" class="w-100 progress progress-hidden">
            <div class="w-100 progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
              aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="modal fade" id="additional-options-modal" tabindex="-1" aria-labelledby="additional-options-modal-label"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="additional-options-modal-label">Additional Options</h5><button type="button"
            class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <fieldset>
            <div class="form-floating mb-3" style="text-align: left;"><select name="logLevel" class="form-select"
                id="logLevelSelect">
                <option value="INFO">INFO</option>
                <option value="DEBUG">DEBUG</option>
                <option value="WARN">WARN</option>
                <option value="ERROR">ERROR</option>
                <option value="OFF">OFF</option>
              </select> <label for="logLevel" style="text-align: left;">Log Level:</label></div>
            <div class="form-floating mb-3"><select name="videoCodec" class="form-select" id="videoCodecSelect">
                <option value="default">Meeting Default</option>
                <option value="vp8">VP8</option>
                <option value="h264ConstrainedBaselineProfile">H.264 Constrained Baseline Profile</option>
              </select> <label for="videoCodec" style="text-align: left;">Preferred Video Send Codec:</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="webaudio"
                class="form-check-input"> <label for="webaudio" class="form-check-label">Use WebAudio</label></div>
            <div class="form-check" id="echo-reduction-checkbox" style="text-align: left; display: none;"><input
                type="checkbox" id="echo-reduction-capability" class="form-check-input"> <label
                for="echo-reduction-capability" class="form-check-label">Use Echo Reduction (new meetings only)</label>
            </div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="fullband-speech-mono-quality"
                class="form-check-input"> <label for="fullband-speech-mono-quality" class="form-check-label">Set
                fullband speech (mono) quality</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="fullband-music-mono-quality"
                class="form-check-input"> <label for="fullband-music-mono-quality" class="form-check-label">Set fullband
                music (mono) quality</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="fullband-music-stereo-quality"
                class="form-check-input"> <label for="fullband-music-stereo-quality" class="form-check-label">Set
                fullband music (stereo) quality</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="simulcast"
                class="form-check-input"> <label for="simulcast" class="form-check-label">Enable Simulcast for
                Chrome</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="priority-downlink-policy"
                class="form-check-input"> <label for="priority-downlink-policy" class="form-check-label">Use
                Priority-Based Downlink Policy</label></div>
            <lable id="priority-downlink-policy-preset-title" for="priority-downlink-policy-preset"
              style="display: none; padding-top:5px">Policy Preset</lable><select id="priority-downlink-policy-preset"
              class="form-select" style="width:100%; display: none;">
              <option value="default" selected="selected">Default</option>
              <option value="stable">Stable Network</option>
              <option value="unstable">Unstable Network</option>
            </select>
            <lable id="server-side-network-adaption-title" for="server-side-network-adaption"
              style="display: none; padding-top:5px">Server Side Network Adaption</lable><select
              id="server-side-network-adaption" class="form-select" style="width:100%; display: none;">
              <option value="default" selected="selected">Default</option>
              <option value="none">None</option>
              <option value="enable-bandwidth-probing">Enable Bandwidth Probing</option>
            </select>
            <div class="form-check" id="enable-pagination-checkbox" style="text-align: left; display: none;"><input
                type="checkbox" id="enable-pagination" class="form-check-input"> <label for="enable-pagination"
                class="form-check-label">Paginate displayed video tiles</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" checked="checked" id="preconnect"
                class="form-check-input"> <label for="preconnect" class="form-check-label">Open signaling connection
                early</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="join-view-only"
                class="form-check-input"> <label for="join-view-only" class="form-check-label">Join with view-only
                mode</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="pause-last-frame"
                class="form-check-input"> <label for="pause-last-frame" class="form-check-label">Keep Video Last Frame
                When Paused</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="event-reporting"
                class="form-check-input"> <label for="event-reporting" class="form-check-label">Enable event
                reporting</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="replica-meeting-input"
                class="form-check-input"> <label for="replica-meeting-input" class="form-check-label">Create meeting as
                replica</label> <input type="name" id="primary-meeting-external-id" class="form-control"
                placeholder="Primary Meeting Title or ID"></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="delete-attendee"
                class="form-check-input"> <label for="delete-attendee" class="form-check-label">Delete own attendee to
                leave</label></div>
            <div class="form-check" style="text-align: left;"><input type="checkbox" id="die" class="form-check-input"
                checked="true"> <label for="die" class="form-check-label">Abort on fatal errors</label></div>
          </fieldset>
        </div><button type="button" class="btn btn-primary" data-bs-dismiss="modal"
          id="additional-options-save-button">Save</button>
      </div>
    </div>
  </div>
  <div id="flow-sip-authenticate" class="flow text-center">
    <div class="container">
      <form id="form-sip-authenticate">
        <h1 class="h3 mb-3 font-weight-normal">Join a meeting via SIP</h1>
        <div class="row mt-3"><label for="sip-inputMeeting" class="visually-hidden">Meeting Title</label> <input
            type="name" id="sip-inputMeeting" class="form-control" placeholder="Meeting Title" required autofocus></div>
        <div class="row mt-3"><label for="voiceConnectorId" class="visually-hidden">Voice Connector ID</label> <input
            type="name" id="voiceConnectorId" class="form-control" placeholder="Voice Connector ID" required></div>
        <div class="row mt-3"><button id="button-sip-authenticate" class="btn btn-lg btn-primary"
            type="submit">Continue</button></div>
        <div class="row mt-3">
          <p>You will need a SIP client in order to join the meeting.</p>
        </div>
      </form>
    </div>
  </div>
  <div id="flow-failed-meeting" class="flow">
    <div class="container">
      <form id="form-failed-meeting">
        <div class="card border-warning mb-3" style="max-width: 20rem;">
          <div id="failed-meeting" class="card-header"></div>
          <div class="card-body">
            <h4 class="card-title">Unable to find meeting</h4>
            <p class="card-text">There was an issue finding that meeting. The meeting may have already ended, or your
              authorization may have expired.</p><small id="failed-meeting-error" class="text-muted"></small>
          </div>
        </div>
        <div class="d-grid gap-2"><button class="btn btn-lg btn-outline-warning" type="submit">OK</button></div>
      </form>
    </div>
  </div>
  <div id="flow-need-permission" class="flow">
    <div class="container">
      <form id="form-need-permission">
        <div class="card border-info mb-3" style="max-width: 20rem;">
          <div class="card-header">Permissions check</div>
          <div class="card-body">
            <h4 class="card-title">Unable to get device labels</h4>
            <p class="card-text">In order to select media devices, we need to do a quick permissions check of your mic
              and camera. When the pop-up appears, choose <b>Allow</b>.</p>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div id="flow-sip-uri" class="flow">
    <div class="container">
      <form id="sip-uri-form">
        <div class="card border-info mb-3" style="max-width: 20rem;">
          <div class="card-header">SIP URI</div>
          <div class="card-body"><a id="copy-sip-uri" class="card-title" href="#">Copy</a> <input id="sip-uri"
              class="card-text"></div>
        </div>
      </form>
    </div>
  </div>
  <div id="flow-devices" class="flow">
    <div class="container">
      <form id="form-devices">
        <h1 class="h3 mb-3 font-weight-normal text-center">Select devices</h1>
        <div class="row mt-3">
          <div class="col-12 text-center d-sm-block video-preview"><video id="video-preview" class
              style="border-radius:8px"></video></div>
        </div>
        <div class="row mt-3">
          <div class="col-12"><label for="audio-input block">Microphone</label> <select id="audio-input"
              class="form-select" style="width:100%"></select></div>
          <div class="text-center col-12 d-sm-block"><label>Preview</label>
            <div class="w-100 progress" style="margin-top:0.75rem">
              <div id="audio-preview" class="progress-bar bg-success" role="progressbar" aria-valuenow="0"
                aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div id="voice-focus-setting" class="col-12 hidden"><input autocomplete="off" type="checkbox"
              id="add-voice-focus"><label style="margin-left: 0.5em" for="voice-focus-setting block">Add Voice
              Focus</label></div>
        </div>
        <div class="row mt-3">
          <div class="col-12"><label for="video-input block">Camera</label> <select id="video-input" class="form-select"
              style="width:100%"></select></div>
        </div>
        <div class="row mt-3">
          <div class="col-12"><label for="video-input-quality block">Resolution</label> <select id="video-input-quality"
              class="form-select" style="width:100%">
              <option value="360p">360p (nHD) @ 15 fps (600 Kbps max)</option>
              <option value="540p" selected="selected">540p (qHD) @ 15 fps (1.4 Mbps max)</option>
              <option value="720p">720p (HD) @ 15 fps (1.4 Mbps max)</option>
            </select></div>
        </div>
        <div class="row mt-3" id="video-input-filter-container">
          <div class="col-12"><label for="video-input-filter block">Video Filter</label> <select id="video-input-filter"
              class="form-select" style="width:100%">
              <option value="None" selected="selected">None</option>
            </select></div>
        </div>
        <div class="row mt-3">
          <div class="col-12"><label for="audio-output block">Speaker</label> <select id="audio-output"
              class="form-select" style="width:100%"></select></div>
          <div class="col-12"><button id="button-test-sound" class="btn btn-outline-secondary h-50 d-sm-block"
              style="width:100%;margin-top:2rem">Test Speaker</button></div>
        </div>
        <div class="row mt-3">
          <div class="col-lg"><button id="joinButton" class="btn btn-lg btn-primary" style="width:100%"
              type="submit">Join</button></div>
        </div>
        <div class="row mt-3">
          <div class="col-lg">
            <p>Ready to join meeting <b><span id="info-meeting"></span></b> as <b><span id="info-name"></span></b>.</p>
          </div>
        </div>
      </form>
      <div id="progress-join" class="w-100 progress progress-hidden">
        <div class="w-100 progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
          aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
      </div>
    </div>
  </div>
  <div id="flow-meeting" class="flow" style="position:absolute;left:0;top:0;bottom:55px;right:0">
    <div id="live-transcription-modal" class="modal">
      <div id="live-transcription-modal-content" class="modal-content">
        <div class="modal-content-header"><span></span> <span class="modal-title text-muted">Live Transcription
            Configuration</span> <span id="button-live-transcription-modal-close" class="close">&times;</span></div>
        <div id="engine-option-group active"><input type="radio" id="engine-transcribe" name="transcription-engine"
            value="engine-transcribe" checked="true"> <label for="engine-transcribe">Amazon Transcribe</label><br><input
            type="radio" id="engine-transcribe-medical" name="transcription-engine" value="engine-transcribe-medical">
          <label for="engine-transcribe-medical">Amazon Transcribe Medical</label><br>
        </div>
        <div id="engine-language-group">
          <div id="engine-transcribe-language"><label for="transcribe-language" class="visually-hidden">Language</label>
            <select id="transcribe-language" class="form-select" style="width:100%">
              <option value="en-US" selected="selected">US English (en-US)</option>
              <option value="en-GB">British English (en-GB)</option>
              <option value="en-AU">Australian English (en-AU)</option>
              <option value="es-US">US Spanish (es-US)</option>
              <option value="fr-CA">Canadian French (fr-CA)</option>
              <option value="fr-FR">French (fr-FR)</option>
              <option value="it-IT">Italian (it-IT)</option>
              <option value="de-DE">German (de-DE)</option>
              <option value="pt-BR">Brazilian Portuguese (pt-BR)</option>
              <option value="ja-JP">Japanese (ja-JP)</option>
              <option value="ko-KR">Korean (ko-KR)</option>
              <option value="zh-CN">Mandarin Chinese - Mainland (zh-CN)</option>
            </select>
          </div>
          <div id="engine-transcribe-medical-language" class="hidden"><label for="transcribe-medical-language"
              class="visually-hidden">Language</label> <select id="transcribe-medical-language" class="form-select"
              style="width:100%">
              <option value="en-US" selected="selected">US English (en-US)</option>
            </select></div>
        </div>
        <div id="transcription-region-group">
          <div id="engine-transcribe-region"><label for="transcribe-region" class="visually-hidden">Region</label>
            <select id="transcribe-region" class="form-select" style="width:100%">
              <option value="auto" selected="selected">Auto</option>
              <option value>Not specified</option>
              <option value="ap-northeast-1">Japan (Tokyo)</option>
              <option value="ap-northeast-2">South Korea (Seoul)</option>
              <option value="ap-southeast-2">Australia (Sydney)</option>
              <option value="ca-central-1">Canada</option>
              <option value="eu-central-1">Germany (Frankfurt)</option>
              <option value="eu-west-1">Ireland</option>
              <option value="eu-west-2">United Kingdom (London)</option>
              <option value="sa-east-1">Brazil (São Paulo)</option>
              <option value="us-east-1">United States (N. Virginia)</option>
              <option value="us-east-2">United States (Ohio)</option>
              <option value="us-west-2">United States (Oregon)</option>
              <option value="us-gov-west-1">GovCloud (US-West)</option>
            </select>
          </div>
          <div id="engine-transcribe-medical-region" class="hidden"><label for="transcribe-medical-region"
              class="visually-hidden">Language</label> <select id="transcribe-medical-region" class="form-select"
              style="width:100%">
              <option value="auto" selected="selected">Auto</option>
              <option value>Not specified</option>
              <option value="ap-southeast-2">Australia (Sydney)</option>
              <option value="ca-central-1">Canada</option>
              <option value="eu-west-1">Ireland</option>
              <option value="us-east-1">United States (N. Virginia)</option>
              <option value="us-east-2">United States (Ohio)</option>
              <option value="us-west-2">United States (Oregon)</option>
            </select></div>
        </div>
        <div id="engine-transcribe-language-identification">
          <div id="engine-transcribe-identify-language" class="form-check" style="text-align: left;"><input
              type="checkbox" id="identify-language-checkbox" class="form-check-input"> <label
              for="identify-language-checkbox" class="form-check-label"
              title="Automatically identify the language spoken in a media file without you having to specify a language code">Enable
              Automatic Language Identification</label></div>
          <div id="language-options" class="hidden"><label for="language-options" class="visually-hidden">Language
              Options</label>
            <p
              title="For better accuracy of automatic language identification, select at least 2 languages, one from each group.">
              <small>Select a minimum of 2 language options</small>
            </p><select name="language-options" id="language-options" multiple="multiple" class="form-select"
              style="width:100%">
              <optgroup id="group1" label="English">
                <option value="en-US">US English (en-US)</option>
                <option value="en-GB">British English (en-GB)</option>
                <option value="en-AU">Australian English (en-AU)</option>
              </optgroup>
              <optgroup id="group2" label="Spanish">
                <option value="es-US">US Spanish (es-US)</option>
              </optgroup>
              <optgroup id="group3" label="French">
                <option value="fr-FR">French (fr-FR)</option>
                <option value="fr-CA">Canadian French (fr-CA)</option>
              </optgroup>
              <optgroup id="group4" label="German">
                <option value="de-DE">German (de-DE)</option>
              </optgroup>
              <optgroup id="group5" label="Chinese">
                <option value="zh-CN">Mandarin Chinese - Mainland (zh-CN)</option>
              </optgroup>
              <optgroup id="group6" label="Italian">
                <option value="it-IT">Italian (it-IT)</option>
              </optgroup>
              <optgroup id="group7" label="Portuguese">
                <option value="pt-BR">Brazilian Portuguese (pt-BR)</option>
              </optgroup>
              <optgroup id="group8" label="Japanese">
                <option value="ja-JP">Japanese (ja-JP)</option>
              </optgroup>
              <optgroup id="group9" label="Korean">
                <option value="ko-KR">Korean (ko-KR)</option>
              </optgroup>
            </select>
            <div id="language-options-error-message"></div>
          </div>
          <div id="preferred-language" class="hidden" style="margin-top: 10px"><label for="preferred-language-selection"
              class="visually-hidden">Preferred Language</label>
            <p title="Help Amazon Transcribe identify the language in the first few seconds of your stream.">
              <small>Specify one preferred language</small>
            </p><select id="preferred-language-selection" class="form-select" style="width:100%">
              <option value selected="selected">-- Optional --</option>
            </select>
          </div>
        </div>
        <div id="engine-transcribe-custom-language-model">
          <div id="engine-transcribe-language-model" class="form-check" style="text-align: left;"><input type="checkbox"
              id="custom-language-model-checkbox" class="form-check-input"> <label for="custom-language-model-checkbox"
              class="form-check-label">Enable Custom Language Model</label></div>
          <div id="language-model" class="hidden"><input id="language-model-input-text"
              style="text-align: left; width:100%"></div>
        </div>
        <div id="engine-transcribe-stability">
          <div id="engine-transcribe-partial-stabilization" class="form-check" style="text-align: left;"><input
              type="checkbox" id="partial-stabilization-checkbox" class="form-check-input"> <label
              for="partial-stabilization-checkbox" class="form-check-label">Enable Partial Results Stabilization</label>
          </div>
          <div id="transcribe-partial-stability" class="hidden"><label for="partial-stability"
              class="visually-hidden">Transcribe Entities</label> <select id="partial-stability" class="form-select"
              style="width:100%">
              <option value selected="selected">-- DEFAULT (HIGH) --</option>
              <option value="low">LOW</option>
              <option value="medium">MEDIUM</option>
              <option value="high">HIGH</option>
            </select></div>
        </div>
        <div id="engine-transcribe-content-identification" class="form-check" style="text-align: left;"><input
            type="checkbox" id="content-identification-checkbox" class="form-check-input"> <label
            for="content-identification-checkbox" class="form-check-label">Enable PII Content Identification</label>
        </div>
        <div id="engine-transcribe-medical-content-identification" class="form-check hidden" style="text-align: left;">
          <input type="checkbox" id="medical-content-identification-checkbox" class="form-check-input"> <label
            for="medical-content-identification-checkbox" class="form-check-label">Enable PHI Content
            Identification</label>
        </div>
        <div id="engine-transcribe-redaction" class="form-check" style="text-align: left;"><input type="checkbox"
            id="content-redaction-checkbox" class="form-check-input"> <label for="content-redaction-checkbox"
            class="form-check-label">Enable PII Content Redaction</label></div>
        <div id="transcribe-entity-types" class="hidden"><label for="transcribe-entity"
            class="visually-hidden">Transcribe Entities</label> <select id="transcribe-entity" class="form-select"
            style="width:100%" multiple="multiple">
            <option selected="selected" value>-- DEFAULT (ALL) --</option>
            <option value="BANK_ROUTING">BANK ROUTING</option>
            <option value="CREDIT_DEBIT_NUMBER">CREDIT/DEBIT NUMBER</option>
            <option value="CREDIT_DEBIT_CVV">CREDIT/DEBIT CVV</option>
            <option value="CREDIT_DEBIT_EXPIRY">CREDIT/DEBIT EXPIRY</option>
            <option value="PIN">PIN</option>
            <option value="EMAIL">EMAIL</option>
            <option value="ADDRESS">ADDRESS</option>
            <option value="NAME">NAME</option>
            <option value="PHONE">PHONE</option>
            <option value="SSN">SSN</option>
          </select></div><button id="button-start-transcription" type="button" class="btn btn-success mx-1 mx-xl-2 my-2"
          title="Start" data-bs-toggle="button" aria-pressed="false" autocomplete="off"><svg
            xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
            <path d="M0 0v8l4-4-4-4z" transform="translate(2)" />
          </svg></button>
      </div>
    </div>
    <div id="content-simulcast-modal" class="modal" style="display: none">
      <div id="content-simulcast-modal-content" class="modal-content">
        <div class="modal-content-header"><span></span> <span class="modal-title text-muted">Content Share
            Configurations</span> <span id="button-content-share-modal-close" class="close">&times;</span></div>
        <form class="container">
          <div class="row my-3">
            <h5>Screen Capture Configurations</h5>
          </div>
          <div class="row my-3">
            <div class="col-6"><input type="number" id="content-capture-frame-rate" class="form-control"
                placeholder="Frame rate"></div>
          </div>
          <div id="content-simulcast-config">
            <div class="row my-3">
              <h5>Simulcast Encoding Parameters</h5>
            </div>
            <div class="row row-cols-2 my-3">
              <div class="col-6">
                <div class="form-check"><input class="form-check-input" type="checkbox" id="content-enable-simulcast">
                  <label class="form-check-label" for="content-enable-simulcast">Enable Simulcast</label>
                </div>
              </div>
            </div>
            <div class="row row-cols-2 my-3">
              <div class="col-6"><input type="number" id="content-simulcast-low-max-bitratekbps" class="form-control"
                  placeholder="Low max bitrate (kbps)"></div>
              <div class="col-6"><input type="number" id="content-simulcast-high-max-bitratekbps" class="form-control"
                  placeholder="High max bitrate (kbps)"></div>
            </div>
            <div class="row row-cols-2 my-3">
              <div class="col-6"><input type="number" id="content-simulcast-low-scale-factor" class="form-control"
                  placeholder="Low scale factor"></div>
              <div class="col-6"><input type="number" id="content-simulcast-high-scale-factor" class="form-control"
                  placeholder="High scale factor"></div>
            </div>
            <div class="row row-cols-2 my-3">
              <div class="col-6"><input type="number" id="content-simulcast-low-max-framerate" class="form-control"
                  placeholder="Low max frame rate"></div>
              <div class="col-6"><input type="number" id="content-simulcast-high-max-framerate" class="form-control"
                  placeholder="High max frame rate"></div>
            </div>
          </div><button id="button-save-content-share-configs" type="button"
            class="btn btn-lg btn-primary btn-block w-100" title="Save" data-toggle="button" aria-pressed="false"
            autocomplete="off">Save</button>
        </form>
      </div>
    </div>
    <div class="p-2 d-none d-sm-block align-items-end" style="position:fixed;right:0;bottom:0;left:0;">
      <div class="row align-items-end">
        <div class="col">
          <div id="chime-meeting-id" class="text-muted"></div>
          <div id="desktop-attendee-id" class="text-muted"></div>
        </div>
        <div class="col">
          <div class="btn-group" role="group" style="width: 100%;"><button type="button" id="video-paginate-left"
              class="btn btn-secondary" style="display: none;"><svg xmlns="http://www.w3.org/2000/svg" width="8"
                height="8" viewBox="0 0 8 8">
                <path d="M4 0l-4 4 4 4v-8z" transform="translate(2)" />
              </svg></button> <button type="button" id="video-paginate-right" class="btn btn-secondary"
              style="display: none;"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
                <path d="M0 0v8l4-4-4-4z" transform="translate(2)" />
              </svg></button></div>
        </div>
        <div class="col d-none d-lg-block">
          <div id="video-uplink-bandwidth" class="text-muted text-end"></div>
          <div id="video-downlink-bandwidth" class="text-muted text-end"></div>
        </div>
      </div>
    </div><audio id="meeting-audio" style="display:none"></audio>
    <div id="meeting-container" class="container-fluid h-100" style="display:flex; flex-flow:column">
      <div class="row mb-3 mb-lg-0" style="flex: unset;">
        <div class="col-12 col-lg-3 order-1 order-lg-1 text-center text-lg-left">
          <div id="meeting-id" class="navbar-brand text-muted m-0 m-lg-2"></div>
          <div id="mobile-chime-meeting-id" class="text-muted d-block d-sm-none" style="font-size:0.65rem;"></div>
          <div id="mobile-attendee-id" class="text-muted d-block d-sm-none mb-2" style="font-size:0.65rem;"></div>
          <div id="mobile-video-uplink-bandwidth" class="text-muted d-block d-sm-none" style="font-size:0.65rem;"></div>
          <div id="mobile-video-downlink-bandwidth" class="text-muted d-block d-sm-none mb-2"
            style="font-size:0.65rem;"></div>
        </div>
        <div class="col-8 col-lg-6 order-2 order-lg-2 text-left text-lg-center">
          <div class="btn-group mx-1 mx-xl-2 my-2" role="group" aria-label="Toggle microphone"><button
              id="button-microphone" type="button" class="btn btn-success" title="Toggle microphone"><svg
                xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
                <path
                  d="M2.91-.03a1 1 0 0 0-.13.03 1 1 0 0 0-.78 1v2a1 1 0 1 0 2 0v-2a1 1 0 0 0-1.09-1.03zm-2.56 2.03a.5.5 0 0 0-.34.5v.5c0 1.48 1.09 2.69 2.5 2.94v1.06h-.5c-.55 0-1 .45-1 1h4.01c0-.55-.45-1-1-1h-.5v-1.06c1.41-.24 2.5-1.46 2.5-2.94v-.5a.5.5 0 1 0-1 0v.5c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2v-.5a.5.5 0 0 0-.59-.5.5.5 0 0 0-.06 0z"
                  transform="translate(1)" />
              </svg></button> <button id="button-microphone-drop" type="button"
              class="btn btn-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown"
              aria-expanded="false" title="Select microphone"><span class="visually-hidden">Toggle
                Dropdown</span></button>
            <div id="dropdown-menu-microphone" class="dropdown-menu dropdown-menu-end"
              aria-labelledby="button-microphone-drop" x-placement="bottom-start"
              style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; left: 0px; will-change: transform;">
              <a class="dropdown-item" href="#">Default microphone</a>
            </div>
          </div>
          <div class="btn-group mx-1 mx-xl-2 my-2" role="group" aria-label="Toggle camera"><button id="button-camera"
              type="button" class="btn btn-success" title="Toggle camera"><svg xmlns="http://www.w3.org/2000/svg"
                width="8" height="8" viewBox="0 0 8 8">
                <path
                  d="M.5 0c-.28 0-.5.23-.5.5v4c0 .28.23.5.5.5h5c.28 0 .5-.22.5-.5v-1.5l1 1h1v-3h-1l-1 1v-1.5c0-.28-.22-.5-.5-.5h-5z"
                  transform="translate(0 1)" />
              </svg></button> <button id="button-camera-drop" type="button"
              class="btn btn-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown"
              aria-expanded="false" title="Select camera"><span class="visually-hidden">Toggle Dropdown</span></button>
            <div id="dropdown-menu-camera" class="dropdown-menu dropdown-menu-end"><a class="dropdown-item"
                href="#">Default camera</a></div>
          </div>
          <div class="btn-group mx-1 mx-xl-2 my-2" role="group" aria-label="Apply filter"><button
              id="button-video-filter" type="button" class="btn btn-success" title="Apply filter"><svg
                xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
                <path d="M4 0c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 1c1.66 0 3 1.34 3 3s-1.34 3-3 3v-6z" />
              </svg></button>
            <div class="btn-group" role="group"><button id="button-video-filter-drop" type="button"
                class="btn btn-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" title="Select filter"></button>
              <div id="dropdown-menu-filter" class="dropdown-menu dropdown-menu-end"
                aria-labelledby="button-video-filter-drop" x-placement="bottom-start"><a class="dropdown-item"
                  href="#">No filter</a></div>
            </div>
          </div>
          <div class="btn-group mx-1 mx-xl-2 my-2" role="group" aria-label="Toggle content share"><button
              id="button-content-share" type="button" class="btn btn-success" title="Toggle content share"><svg
                xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
                <path
                  d="M4.09 0c-.05 0-.1.04-.13.09l-.94 1.81c-.02.05-.07.09-.13.09h-1.41c-.83 0-1.5.67-1.5 1.5v4.41c0 .05.04.09.09.09h7.81c.05 0 .09-.04.09-.09v-5.81c0-.06-.04-.09-.09-.09h-.81c-.05 0-.1-.04-.13-.09l-.94-1.81c-.03-.05-.07-.09-.13-.09h-1.81zm-2.59 3c.28 0 .5.22.5.5s-.22.5-.5.5-.5-.22-.5-.5.22-.5.5-.5zm3.5 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 1c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z" />
              </svg></button>
            <div class="btn-group" role="group"><button id="button-content-share-drop" type="button"
                class="btn btn-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" title="Select content to share"></button>
              <div id="dropdown-menu-content-share" class="dropdown-menu dropdown-menu-end"
                aria-labelledby="button-content-share-drop" x-placement="bottom-start"
                style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; left: 0px; will-change: transform;">
                <a id="dropdown-item-content-share-configuration" class="dropdown-item" href="#">Configurations</a> <a
                  id="dropdown-item-content-share-screen-capture" class="dropdown-item" href="#">Screen Capture...</a>
                <a id="dropdown-item-content-share-screen-test-video" class="dropdown-item" href="#">Test Video</a> <a
                  id="dropdown-item-content-share-test-mono-audio-speech" class="dropdown-item" href="#">Test Mono Audio
                  Speech</a> <a id="dropdown-item-content-share-test-stereo-audio-speech" class="dropdown-item"
                  href="#">Test Stereo Audio Speech</a> <a id="dropdown-item-content-share-test-stereo-audio-tone"
                  class="dropdown-item" href="#">Test Stereo Tone (L-500Hz R-1000Hz)</a> <a
                  id="dropdown-item-content-share-file-item" class="dropdown-item" href="#"><input
                    id="content-share-item" type="file"></a><a id="dropdown-item-content-share-stop"
                  style="display:none" class="dropdown-item" href="#">Stop Sharing</a>
              </div>
            </div>
          </div><button id="button-pause-content-share" type="button" class="btn btn-success mx-1 mx-xl-2 my-2"
            title="Pause and unpause content share"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"
              viewBox="0 0 8 8">
              <path d="M0 0v6h2v-6h-2zm4 0v6h2v-6h-2z" transform="translate(1 1)" />
            </svg></button>
          <div class="btn-group mx-1 mx-xl-2 my-2" role="group" aria-label="Toggle speaker"><button id="button-speaker"
              type="button" class="btn btn-success" title="Toggle speaker"><svg xmlns="http://www.w3.org/2000/svg"
                width="8" height="8" viewBox="0 0 8 8">
                <path
                  d="M3.34 0l-1.34 2h-2v4h2l1.34 2h.66v-8h-.66zm1.66 3v2c.09 0 .18-.01.25-.03.43-.11.75-.51.75-.97 0-.46-.31-.86-.75-.97-.08-.02-.17-.03-.25-.03z"
                  transform="translate(1)" />
              </svg></button>
            <div class="btn-group" role="group"><button id="button-speaker-drop" type="button"
                class="btn btn-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false" title="Select speaker"></button>
              <div id="dropdown-menu-speaker" class="dropdown-menu dropdown-menu-end"
                aria-labelledby="button-speaker-drop" x-placement="bottom-start"
                style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; left: 0px; will-change: transform;">
                <a class="dropdown-item" href="#">Default speaker</a>
              </div>
            </div>
          </div><button id="button-live-transcription" type="button" class="btn btn-success mx-1 mx-xl-2 my-2"
            title="Toggle live transcription display" data-bs-toggle="button" aria-pressed="false" autocomplete="off"
            style="display: none"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
              <path d="M5 0l-3 6h1l3-6h-1zm-4 1l-1 2 1 2h1l-1-2 1-2h-1zm5 0l1 2-1 2h1l1-2-1-2h-1z"
                transform="translate(0 1)" />
            </svg></button> <button id="button-video-stats" type="button" class="btn btn-success mx-1 mx-xl-2 my-2"
            title="Toggle video WebRTC stats display" data-bs-toggle="button" aria-pressed="false"
            autocomplete="off"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
              <path d="M6 0v8h1v-8h-1zm-2 1v7h1v-7h-1zm-2 2v5h1v-5h-1zm-2 2v3h1v-3h-1z" />
            </svg></button> <button id="button-record-self" type="button" class="btn btn-success mx-1 mx-xl-2 my-2"
            title="Record my audio and video" data-bs-toggle="button" aria-pressed="false" autocomplete="off"><svg
              class="svg">
              <circle id="rec-svg" cx="10" cy="10" r="8" fill="red" />
            </svg></button> <button id="button-record-cloud" type="button" class="btn btn-success mx-1 mx-xl-2 my-2"
            title="Capture audio and video in the cloud" data-bs-toggle="button" aria-pressed="false"
            autocomplete="off"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
              <path
                d="M4.5 0c-1.21 0-2.27.86-2.5 2-1.1 0-2 .9-2 2 0 .37.11.71.28 1h2.22l2-2 2 2h1.41c.06-.16.09-.32.09-.5 0-.65-.42-1.29-1-1.5v-.5c0-1.38-1.12-2.5-2.5-2.5zm0 4.5l-2.5 2.5h2v.5a.5.5 0 1 0 1 0v-.5h2l-2.5-2.5z" />
            </svg></button> <button id="button-promote-to-primary" type="button"
            class="btn btn-success mx-1 mx-xl-2 my-2" title="Promote to or demote from Primary meeting"
            data-bs-toggle="button" aria-pressed="false" autocomplete="off"><svg xmlns="http://www.w3.org/2000/svg"
              width="8" height="8" viewBox="0 0 8 8">
              <path
                d="M2 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-1 4.81v3.19l1-1 1 1v-3.19c-.31.11-.65.19-1 .19s-.69-.08-1-.19z"
                transform="translate(2)" />
            </svg></button>
        </div>
        <div class="col-4 col-lg-3 order-3 order-lg-3 text-end text-lg-right"><button id="button-meeting-leave"
            type="button" class="btn btn-outline-success mx-1 mx-xl-2 my-2 px-4" title="Leave meeting"><svg
              xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
              <path d="M3 0v1h4v5h-4v1h5v-7h-5zm-1 2l-2 1.5 2 1.5v-1h4v-1h-4v-1z" />
            </svg></button> <button id="button-meeting-end" type="button"
            class="btn btn-outline-danger mx-1 mx-xl-2 my-2 px-4" title="End meeting"><svg
              xmlns="http://www.w3.org/2000/svg" width="8" height="8" viewBox="0 0 8 8">
              <path
                d="M3 0v4h1v-4h-1zm-1.28 1.44l-.38.31c-.81.64-1.34 1.64-1.34 2.75 0 1.93 1.57 3.5 3.5 3.5s3.5-1.57 3.5-3.5c0-1.11-.53-2.11-1.34-2.75l-.38-.31-.63.78.38.31c.58.46.97 1.17.97 1.97 0 1.39-1.11 2.5-2.5 2.5s-2.5-1.11-2.5-2.5c0-.8.36-1.51.94-1.97l.41-.31-.63-.78z" />
            </svg></button></div>
      </div>
      <div id="roster-tile-container" class="row flex-sm-grow-1 overflow-hidden h-100" style="flex: unset;">
        <div id="roster-message-container" class="d-flex flex-column col-12 col-sm-5 col-md-4 col-lg-3 h-100">
          <div class="bs-component" style="flex: 1 1 auto; overflow-y: auto; height: 50%;">
            <ul id="roster" class="list-group"></ul>
          </div>
          <div class="message d-flex flex-column pt-3" style="flex: 1 1 auto; overflow: hidden; height: 50%;">
            <div class="list-group receive-message" id="receive-message" style="flex: 1 1 auto; overflow-y: auto;
            border: 1px solid rgba(0, 0, 0, 0.125); background-color: #fff"></div>
            <div class="input-group send-message" style="display:flex;flex:0 0 auto;margin-top:0.2rem"><textarea
                class="form-control shadow-none" id="send-message" rows="1"
                placeholder="Type a message (markdown supported)" style="display:inline-block; width:100%;
              resize:none; border-color: rgba(0, 0, 0, 0.125); outline: none; padding-left: 1.4rem"></textarea></div>
          </div>
        </div>
        <div id="tile-transcript-container"
          class="d-flex flex-column col-12 col-sm-7 col-md-8 col-lg-9 my-4 my-sm-0 h-100" style="overflow-y: scroll">
          <div id="tile-area" class="v-grid"></div>
          <div id="transcript-container" class="transcript-container" style="display:none"></div>
        </div><video id="content-share-video" playsinline crossorigin="anonymous" style="display:none"></video>
      </div>
    </div>
    <div id="toast-container" aria-live="polite" aria-atomic="true"></div>
  </div>
  <div id="flow-failed-join" class="flow">
    <div class="container">
      <form id="form-failed-join">
        <div class="card border-warning mb-3" style="max-width: 20rem;">
          <div id="failed-join" class="card-header"></div>
          <div class="card-body">
            <h4 class="card-title">Unable to join meeting</h4>
            <p class="card-text">There was an issue joining that meeting. Check your connectivity and try again.</p>
            <small id="failed-join-error" class="text-muted"></small>
          </div>
        </div>
        <div class="d-grid gap-2"><button class="btn btn-lg btn-outline-warning" type="submit">OK</button></div>
      </form>
    </div>
  </div>
</body>

</html>